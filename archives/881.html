<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>about NetApp  &raquo; Blog Archive   &raquo; Откуда вообще берется фрагментация?</title>

<link rel="stylesheet" href="../wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="about NetApp RSS Feed" href="../feed" />
<link rel="pingback" href="../xmlrpc.php.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.6" />

</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="../index.html" title="about NetApp: Системы хранения данных как предмет разговора">about NetApp</a></h1>
		<p>Системы хранения данных как предмет разговора</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="../index.html">
<input type="text" size="20" name="s" id="s" value="Поиск..."  onblur="if(this.value=='') this.value='Поиск...';" onfocus="if(this.value=='Поиск...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="navbar">
<ul id="nav">
	<li><a href="../index.html">Home</a></li>
	<li class="page_item page-item-153"><a href="../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content">

			
		<div class="navigation">
			<div class="alignleft">&laquo; <a href="868/trackback.html">Смотрим на EMC VNX/VNXe внимательно. Часть 2</a></div>
			<div class="alignright"><a href="884/trackback.html">Смотрим внимательно на EMC VNX/VNXe. Часть 3</a> &raquo;</div>
		</div>

		<div class="post" id="post-881">
			<h2 class="posttitle"><a href="881/trackback.html" rel="bookmark" title="Permanent Link to Откуда вообще берется фрагментация?">Откуда вообще берется фрагментация?</a></h2>
			<div class="postmetadata">21 Апрель 2011, 8:00 <!-- от  --></div>
			<div class="postentry">
				<p>Так что же там на самом деле происходит с фрагментацией на NetApp?</p>
<p>Давайте, для начала, разберемся с основами. Я в этом блоге уже не раз писал о проблеме фрагментации, и желающих сошлю в более ранние посты, например <a href="221/trackback.html">сюда</a> и <a href="225/trackback.html">сюда</a>.</p>
<p>К сожалению тема фрагментации данных на WAFL до сих пор остается в некотором роде <a href="http://dic.academic.ru/dic.nsf/enc3p/333174">эзотерическим</a> знанием. Связано это, в первую очередь с тем, как мне представляется, что рассказ о фрагментации и необходимом противодействии ему, затрагивает ряд чувствительных особенностей функционирования WAFL, деталях, которые NetApp, по разным причинам (совсем не обязательно злонамеренным), разглашать пока не хочет.</p>
<p>Поэтому официальная позиция состоит в рекомендации, в случае, если влияние фрагментации в вашем конкретном случае, проявляется негативно (она, кстати, может и не проявляться), то включать wafl reallocate ( <code>reallocate on / reallocate start [/vol/volname]</code>) и спать счастливо.</p>
<p>Вообще же FUD вокруг <em>non-contiguous wafl blocks allocation</em> построен (впрочем, как и почти любой FUD) вокруг плохого представления технических деталей процесса и иногда чистосердечного, а чаще злонамеренного “непонимания” этих деталей. Давайте, для начала, разберем как же записываются данные в WAFL, по крайней мере на том уровне, на котором нам этот процесс показывает NetApp.</p>
<p>Но начать придется издалека.</p>
<p>  <span id="more-881"></span></p>
<p>Как вы знаете, сама аббревиатура WAFL расшифровывается как Write Anywhere File Layout, то есть “Файловая структура с записью повсюду”. Тут, не вдаваясь в подробности, источник FUD-а говорит: “Раз запись повсюду, а мы знаем, что адресуемый блок данных на WAFL это 4KB, значит структура WAFL представляет собой мешанину из 4KB-блоков, записанных вперемешку, налицо ужасная фрагментация, ведущая, как мы все знаем со времен трехдюймовых флопиков на FAT12, к сильному падению производительности на чтении!”</p>
<p>Здесь мы уже видим то, как недостаточное представление о том, как работает WAFL, уже привело к неверному выводу. То, что WAFL <em><strong>может</strong></em> писать “повсюду”, <strong>НЕ</strong> означает, что она так и <em><strong>пишет</strong></em>. Давайте не спешить с выводами, а разберемся с тем, как же на самом деле пишет WAFL.</p>
<p>WAFL изначально находится в родстве с родоначальником всех UNIX-like файловых систем – <a href="http://en.wikipedia.org/wiki/Unix_File_System">Berkeley’s FFS</a>. ??значально, давным давно, когда Windows имела еще номер версии 3.1,&#160; Data ONTAP, в самых первых своих версиях, <a href="12/trackback.html">использовала часть кода BSD4.2</a>, и многие тогдашние решения естественным образом перекочевали в исходный релиз Data ONTAP. Несмотря на то, что WAFL это отдельная, “своя собственная” файловая система, некоторые идеи FFS она, тем не менее, использовала (“мы все стоим на плечах гигантов” говорил кто-то из великих).</p>
<p>Во-первых это модель организации записей в виде дерева inodes. Тут WAFL во многом родственна всем многочисленным потомкам FFS, существующим на разнообразных свободных и коммерческих юниксах, фактически, до совсем недавнего времени, большинство практических файловых систем UNIX так или иначе перелицовывали (для большей “скорострельности”, в основном) идеи оригинальной FFS. Подробнее об организации дерева inodes в WAFL можно почитать в оригинальной работе Хитца и Лау, на которую я тут уже не раз ссылался. Вот – <a href="http://www.netapp.com/us/library/white-papers/wp_3002.html">оригинал</a>, вот – <a href="http://www.netwell.ru/docs/netapp/wp3002_wafl.pdf">перевод</a>.</p>
<p>Во-вторых, это модель выделения свободных блоков на запись. Механизм этот алгоритмически довольно прост, но, как показала практика, достаточно эффективен. Записи делаются в виде последовательных цепочек блоков, так называемых “экстентов”. Файловая система пишет на диски не отдельные сектора или блоки, а вот такие вот последовательно расположенные цепочки их, что заметно улучшает производительность и, прошу отметить, ситуацию с фрагментацией.</p>
<p>Если OS необходимо записать протяженный блок данных, она обращается к файловой системе с просьбой подыскать ей цепочку последовательно расположенных пустых блоков, для записи такого экстента. Если у файловой системы находится такая цепочка пустых блоков разом, то она выдается под запись, запись производится и все довольны.</p>
<p>Если же у файловой системы не находится последовательной цепочки нужной длины, то тогда она начинает искать две последовательных цепочки половинной длины, пусть и в разных местах, и так далее. В результате, блок данных, который мог бы быть, в идеальном случае, записан целиком в одну такую цепочку последовательных блоков, оказывается разбит на две и более цепочки таких последовательных блоков (прошу обратить внимание, что внутри этой цепочки блоки все равно будут последовательны!). ?? так до тех пор, пока, в отдаленном наихудшем случае, у нас не находится на диске ни одного протяженного цельного куска последовательных блоков, и вся цепочка запишется в n-блоков, где каждый блок равен размеру единственному адресуемому дисковому блоку.    <br />К слову сказать, точно такой же метод выделения свободного пространства и записи его реализован, например в NTFS.</p>
<p>В этом “файловые системы семейства FFS” принципиально отличаются от “файловых систем, семейства FAT”, они изначально создавались под работу со сравнительно объемными жесткими дисками (пусть и не такими объемными как сегодня, но все же достаточно жесткими), а “экономичность размещения” на них стояла на втором месте, после быстродействия.</p>
<p>??ным путем шли файловые системы семейства FAT, идущие от еще более древних файловых систем OS CP/M. Эти файловые системы изначально проектировались под использование на флоппи-дисках (для не заставших этот продукт моих молодых читателей расскажу, что это были гибкие пластиковые диски в конверте с прорезью, емкостью сперва 80 и 160 килобайт, затем 360 килобайт, потом появились маленькие дискетки на 3.5” в жестком пластиковом корпусе, производства Sony, емкостью 1,4 мегабайта. Вы наверняка можете посмотреть на последних представителей этого вымирающего вида магнитных носителей в вашей бухгалтерии). Очевидно, что для носителя емкостью всего 80-160 килобайт, на счету был каждый байт, поэтому в файловой системе FAT запись делалась в первый же найденный свободный блок, затем в следующий свободный блок, и так далее, совершенно без связи с расположением предыдущих. Это позволяло максимально экономично использовать пространство флоппи-диска, ну а что до быстродействия, то флопики и так, сам по себе, не были особенно быстродействующими, и об этом, при создании FS, не особенно думали.</p>
<p>Все изменилось, когда произошел рывок в области магнитных носителей, и жесткие диски стали стремительно увеличиваться в емкости. Но на тот момент исторически на персональных компьютерах закрепились OS семейства DOS и ранние Windows, являвшихся просто расширением возможностей DOS, а они все пришли с совсем небольших “персоналок”, где иногда даже и жесткого-то диска не было.</p>
<p>Отсюда файловые системы семейства FAT стихийно распространились на жестких дисках, на носителях, на которых, повторюсь, использовать их не планировалось изначально, и на которых механизмы FAT работали плохо. Но все же работали. Если на 160-килобайтном флопике все тормозило и без проблем с производительностью на уровне FS, то после перехода на значительно более быстродействующие жесткие диски, стали проявляться “родовые проблемы” несовершенной и неприспособленной для этого типа носителей файловой системы.</p>
<p>Одной из наиболее значительных стала фрагментация данных на жестких дисках. Как вы видите из описания алгоритма записи FAT, он вообще не заморачивался минимизацией фрагментов, и, как следствие, с ходом жизни файловой системы, когда на ней создаются и удаляются файлы, когда количество их растет, а удаляются они произвольно, то есть возникаю разбросанные по диску “дыры” свободного места, растет и фрагментация, то есть ситуация, когда содержимое файла оказывается лежащим не последовательно, а разбросанным по поверхности диска, записанное в свободные на тот момент блоки. Появившиеся вскоре программы “дефрагментации”, которые просто алгоритмически реализовывали оптимизацию процесса записи, по сути то же самое, что делает FFS непосредственно на этапе записи: находя достаточный пустой фрагмент, считывая записанный “вразброс” диск, собирая его в памяти, и записывая его туда целиком, в виде последовательной цепочки блоков, значительно улучшили ситуацию с размещением данных на дисках c FAT.</p>
<p>Радикальное улучшение производительности тогдашних DOS и Windows, на тот момент довольно “условно многозадачных”, работающих поверх FAT, достигаемое таким простым и дешевым способом, привело к передающемуся из поколения в поколение преданию о страшности фрагментации на диске и чудодейственности дефрагментации. Многие люди начали выполнять процедуру дефрагментации просто как ежедневный (или ежекакполучится) “обряд”, не вдаваясь в его технические детали и фактическую нужность. К тому же, отдадим должное программистам Нортона, дефрагментация очень эффектно и наглядно изображала, что компьютер РАБОТАЕТ. :) Моргала лампочка, стрекотали головки, а по экрану двигались квадратики. :) Со времен крутящихся бобин магнитной ленты на мэйнфреймах не было такой красивой визуализации процессов “работы компьютера”.</p>
<p>Однако вспомните, что я рассказывал о алгоритме выделения места в FFS, и вы поймете, отчего среди unix-people так долго существовало убеждение, что “на UNIX <strike>секса нет</strike> фрагментации нет”. Долгое время также считалось и про NTFS, под Windows NT . Это считалось само собой разумеющимся настолько, что, например, программы дефрагментации под NTFS появились значительно позже выхода собственно NT, а, например, на ext2/ext3, наиболее распространенных FS под Linux, их, фактически, нет до сих пор (если не брать всякие загадочные утилиты, делающие какую-то загадочную “уличную магию”, с неясным результатом), что не мешает этим файловым системам широко и успешно использоваться многие годы.</p>
<p>Шло время, и несколько лет спустя, сперва Microsoft, а затем и некоторые unix-people согласились с тем, что фрагментация на их файловых системах все же есть. ?? что с ней неплохо бы что-то делать. Ну просто для порядка.    <br />Она есть, однако это не совсем та же фрагментация, что на FAT.     <br />Принято считать, что, хотя на “потомках FFS” и NTFS ситуация с непоследовательной записью данных, последовательно пишущихся на диск и существует, отражается она на производительности совсем не так губительно, как она отражалась на старых дисках под FAT.</p>
<p>?? это действительно так.    <br />Но как именно?</p>
<p>В UNIX FS потомках уже упомянутой выше FFS принято говорить не о “фрагментации”, а о “non-contiguous file allocation”, то есть “не-непрерывном расположении файла”. Это не то же самое, что и “фрагментация” на FAT. Достичь ситуации, когда FFS-like метод выделения блоков под запись будет вести себя также, как в случае FAT можно, но это случай из анекдота про сибирских мужиков и японскую бензопилу. Надо максимально заполнить том данными в виде мелких блоков, произвольно удалять с него небольшой процент этих файлов, а затем, на томе, заполненном более чем на 75-80% попытаться оставшееся пространство регулярно заполнять большими цельными файлами. А затем попытаться читать эти файлы линейно и последовательно.</p>
<p>Впрочем, справедливости ради, юзкейс совсем не такой нереальный, как выглядит сперва. Это очень похоже на использование диска домашнего компьютера, постоянно доверху заполненного всяческим домашним экстраценным (в смысле “жалко выкинуть”) хабаром, на который регулярно пишутся, смотрятся (последовательное чтение!) и стираются файлы передаваемые протоколом битторент. Но насколько такой юзкейс соответствует реальной работе типового энтерпрайз-стораджа? Ответьте себе сами.</p>
<p>Хотелось бы также остановиться на уже <a href="455/trackback.html">поднимавшемся в этом блоге вопросе</a>, совершенной <em>неочевидности</em> ситуации с влиянием фрагментации (ну или non-contiguous allocation) при random access. Я не зря в начале акцентировал внимание на том факте, что фрагментация во времена жестких дисков на 40Mb с буферами 64Kb, интерфейсов ATA без DMA, 2-4Mb RAM, файловой системы FAT, и преимущественно однозадачных OS (и следовательно большом проценте sequental-операций) была действительно серьезной проблемой.</p>
<p>Но является ли она такой же проблемой во времена SATA-2 6Gb/s, буферов по 16Mb, памяти в 4-8GB и при этом подавляющем количестве random-операций к диску и его файловой системе, давно не FAT, к которой обращается <em>очень многозадачная</em>, а вдобавок, в наше время повсеместно победивших гипервизоров <em>очень много очень многозадачных OS</em>?</p>
<p>Есть основания предполагать, что – нет. <a href="466/trackback.html">Не является</a>.</p>
<p>С точки зрения <a href="455/trackback.html">банальной логики</a>, <em>случайное</em> обращение к <em>случайно</em> распложенным данным, мало чем отличается для диска от <em>случайного</em> обращения к <em>последовательно</em> расположенным данным. Случайность, как известно, в квадрат не возводится. Что в первом, что во втором случае это 100% random access, общепринятый на сегодня режим для анализа и тестирования производительности (см. <a href="475/trackback.html">стандартные паттерны IOmeter</a>).</p>
<p>Много ли вы знаете <u>реальных</u> задач, подразумевающих sequental access? Ну то есть не “копирование ISO в тоталкоммандере”? Я вот знаю, сходу, только две. Это backup/restore, и работа с логами базы данных, которые, обычно, пишутся и читаются в sequental.</p>
<p>Ну, какие есть <a href="879/trackback.html">решения для backup/restore у NetApp</a>, не требующие тупо “лить гигазы” вы, если читаете меня внимательно, уже знаете. Что же, допустим, с логами и прочим?</p>
<p>Не зря я начал с цитаты инженера NetApp, в какой-то полемике сказавшего, что из того, что WAFL может писать <strong>куда угодно</strong>, <strong>НЕ</strong> значит, что она в самом деле пишет <strong>куда угодно</strong>.    <br />WAFL организует запись в уже упомянутые “экстенты”, и, таким образом, если ей в этом не мешать, довольно значительные фрагменты записываемых данных записываются вполне себе последовательно.</p>
<p>В каких же случаях растет non-contiguos file allocation? Очевидно, что основная причина – нехватка цельных последовательных фрагментов пустого пространства. Происходит такое может, в первую очередь, при большом объеме записи изменений, одновременно с недостатком свободного места на диске. То есть вроде и есть на диске место, формально, а на деле все эти гигабайты – место из под удаленных ранее, и уже фрагментированных файлов. Нужно OS записать протяженный кусок, но диск уже заполнен, остались только кусочки здесь и там.    <br />Поэтому при исчерпании свободного места на диске под файловыми системами семейства FFS (и NTFS), начинает резко, значительно резче обычного для таких FS расти “фрагментация”&#160; (“нонконтигация”. Ужас. Как-то бы придумать правильный термин на русском).</p>
<p>??менно этим эффектом объясняется рекомендация, например, Microsoft, не заполнять том NTFS данными более чем на 80-85 процентов. Та же ситуация будет наблюдаться и <strong>с любыми другими</strong> файловыми системами, использующими алгоритм выделения памяти, сходный с FFS.</p>
<p>Та же ситуация будет наблюдаться и в случае WAFL. Отсюда следует все та же рекомендация и в случае WAFL также – если необходимо минимизировать количество non-contiguous files, и ожидаются большие объемы записи, то старайтесь не заполнять данными диск целиком, особенно если на диск пишется и изменяется много блоков.</p>
<p>К сожалению, по причине закрытости внутреннего устройства WAFL нет информации как именно и какими размерами экстентов оперирует FS,&#160; как в деталях устроены его алгоритмы размещения,&#160; однако эксперименты показывают, что в текущих версиях размер экстента на запись составляет 128KB (он постепенно увеличивается от версии к версии, в версиях Data ONTAP (6.x) для старых систем с малым объемом памяти, типа FAS270, он был, предположительно, 32KB, в ранних 7.х - 64К).</p>
<p>То есть, если на файловой системе существует целостное, <em>“одним писом”,</em> последовательно лежащее свободное место, то контроллер не будет <em>“слайсить”</em> записываемый кусок данных, а вот так, <em>“одним писом”</em>, размером 128K, и запишет. А если таких кусков будет много, а свободное место большое, то и далее такие экстенты с последовательным содержимым вслед и уложит.</p>
<p>Выглядит совсем не так страшно, как рисуют в пугалках-говнилках наши конкуренты?</p>
<p>Давайте для тех, кто добрел до конца, постараюсь резюмировать все вышеизложенное вкратце.   <br />Фрагментация существует, но серьезную роль в снижении дисковой производительности она играла на старых, несовершенных файловых системах, низкопроизводительных жестких дисках, малых объемах кэша, и преимущественно однозадачных OS, в характере доступ которых, следовательно, было сравнительно много операций последовательного доступа.</p>
<p>Сегодня, на значительно более совершенных файловых системах, производительных дисках, больших объемах кэша и постоянно 100% random access для современных многозадачных и виртуализованных OS, вклад фрагментации в снижение производительности <a href="466/trackback.html">недальновидно переоценивается и ситуация с ней излишне драматизируется</a>.</p>
<p>Фрагментация (или, в случае NetApp и прочих UNIX-like FS, будем выражаться правильнее – non-contiguous file allocation) – существует, и в правильных OS (а Data ONTAP, безусловно, “правильная”) имеются средства корректировки и противодействия явлению “дробления последовательности размещения файловых записей”.</p>
<p>К сожалению часто наблюдаемое слабое понимание технических аспектов работы современных дисковых систем, современных файловых систем и современных OS, позволяет недобросовестным людям легко вводить в заблуждение относительно “проблемы фрагментации”. Возможно эта статья, при всем ее несовершенстве и поверхностности, побудит кого-нибудь поглубже разобраться в теме, и сложить собственное, компетентное, а не “по рассказам стариков”, мнение о данной проблеме.</p>
							</div>
	
			<div class="postmetadata">
				<div class="postmetadata">
					Метки: <a href="tag/fragmentation.html" rel="tag">fragmentation</a>, <a href="tag/fud/index.html" rel="tag">fud</a>, <a href="tag/netapp/index.html" rel="tag">netapp</a>, <a href="tag/wafl/index.html" rel="tag">wafl</a><br />					Раздел: <a href="category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>					&nbsp;|&nbsp;&nbsp;<a href="881/trackback.html#respond">Комментарий</a> (<a href='881/feed'>RSS</a>)					&nbsp;|&nbsp;&nbsp;<a href="881/trackback.html" rel="trackback">Обратная ссылка</a>									 </div>
			</div>
		</div>
	
<!-- You can start editing here. -->

<div id="comments">
	<h3>Комментарии (12)</h3>

	<ol class="commentlist">

	
		<li class="comment even" id="comment-1303">
		<div id="div-comment-1303">
		<div class="comment-author">
			<cite>Алексей:<cite></div>
			<p>А вот в статье <a href="http://vmblog.com/archive/2010/12/16/how-ntfs-causes-io-bottlenecks-on-virtual-machines.aspx" rel="nofollow">http://vmblog.com/archive/2010/12/16/how-ntfs-causes-io-bottlenecks-on-virtual-machines.aspx</a> так же проводят разбор работы NTFS и рекомендуют проводить дефрагментацию (любопытны цифры во второй части).</p>
						<div class="comment-meta"><a href="881/trackback.html#comment-1303" title="">22 Апрель 2011, 19:36</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-1304">
		<div id="div-comment-1304">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Алексей:</p>
<p>> </p>
<p>Было бы странно слышать другое мнение от президента CEO компании Raxco, цитирую: &#8220;Raxco Software, a leader in defrag for 30 years, offers one of the best disk defragmentation software services available.&#8221;:)</p>
<p>А если серьезно, то я нигде не говорю что дефрагментация _на физических дисках_ вредна. Нет, не вредна. Другое дело, что и вредность _фрагментации_ в сегодняшних условиях очень часто переоценивают. Об этом и пост.</p>
<p>Однозначно вредна &#8220;дефрагментация&#8221; на уровне хоста и виртуальной машины в случае использования различных структур на стороне системы хранения, как в случае WAFL у NetApp.</p>
<p>Но очень часто (по моему опыту) люди не понимают разницы между физическим диском (который дефрагментировать можно, при такой необходимости) и &#8220;логическим диском&#8221;, который &#8220;дефрагментировать&#8221; на уровне хоста не только бессмысленно, но и вредно.</p>
						<div class="comment-meta"><a href="881/trackback.html#comment-1304" title="">22 Апрель 2011, 20:10</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-1305">
		<div id="div-comment-1305">
		<div class="comment-author">
			<cite>Александр:<cite></div>
			<p>FLARE 30&#8230; чисто поржать&#8230; есть дефрагментация :))))</p>
<p>&gt;./naviseccli -h CX4 getall|grep -i per<br />
Name of the software package:        FLARE-Operating-Environment<br />
Percent defragmented:                      100<br />
Percent expanded:                          100<br />
Percent defragmented:                      100<br />
Percent expanded:                          100<br />
Percent defragmented:                      100<br />
Percent expanded:                          100<br />
Percent defragmented:                      100<br />
Percent expanded:                          100<br />
Percent defragmented:                      100<br />
Percent expanded:                          100<br />
Percent defragmented:                      100<br />
Percent expanded:                          100<br />
Percent defragmented:                      100<br />
Percent expanded:                          100<br />
Percent Complete : 100</p>
						<div class="comment-meta"><a href="881/trackback.html#comment-1305" title="">22 Апрель 2011, 21:34</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-1310">
		<div id="div-comment-1310">
		<div class="comment-author">
			<cite>villain:<cite></div>
			<p>Александр:<br />
Вам можно смеяться лишь на собой, но она всегда там была<br />
Это другая &#8220;фрагментация&#8221; &#8230;<br />
У любых &#8220;блочных&#8221; устройств она тоже есть.<br />
Для примера:<br />
Допустим есть рейд группа  - мы создаем несколько LUN-ов, а потом удаляем в &#8220;серединке&#8221; LUN - появилась фрагментация рейд группы &#8230;</p>
						<div class="comment-meta"><a href="881/trackback.html#comment-1310" title="">24 Апрель 2011, 15:01</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-1313">
		<div id="div-comment-1313">
		<div class="comment-author">
			<cite>Александр:<cite></div>
			<p>villain:</p>
<p>За себя я как-раз рад, что могу фильтровать то, что мне говорит EMC про NetApp и фильтровать то, что мне говорит NetApp про EMC и то, что ни тем ни тем мне не получится навешать лапши на уши. А также понимать что в EMC не договаривает&#8230; а именно EMC ну очень любят не договаривать&#8230;</p>
<p>Да, у блочных устройств она тоже есть, но почему-то они про это не говорят когда чмырят NetApp, за эту самую фрагментацию.</p>
						<div class="comment-meta"><a href="881/trackback.html#comment-1313" title="">26 Апрель 2011, 14:53</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-1314">
		<div id="div-comment-1314">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Так, давайте поспокойнее. :-/</p>
						<div class="comment-meta"><a href="881/trackback.html#comment-1314" title="">26 Апрель 2011, 15:20</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-1322">
		<div id="div-comment-1322">
		<div class="comment-author">
			<cite>villain:<cite></div>
			<p>Александр?<br />
При чем здесь EMC? Вы путаете теплое с зеленым. Внешнюю и внутреннюю фрагментацию и их взаимосвязь в блочных системах хранения и системах хранения эээ &#8220;на файлах/файловой системе&#8221;. Вы в большинстве блочных систем даже LUN создать не сможете больше чем непрерывное пространство на блочных устройствах (сюда даже можно включить всякие raid контроллеры 8-)).</p>
						<div class="comment-meta"><a href="881/trackback.html#comment-1322" title="">28 Апрель 2011, 10:19</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-1738">
		<div id="div-comment-1738">
		<div class="comment-author">
			<cite>Nimdan:<cite></div>
			<p>Ну villain, ну красавчик. А где же ответ Александра?</p>
						<div class="comment-meta"><a href="881/trackback.html#comment-1738" title="">26 Сентябрь 2011, 22:48</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-2609">
		<div id="div-comment-2609">
		<div class="comment-author">
			<cite>bbk:<cite></div>
			<p>Меня долго терзало это выражение:<br />
<i>WAFL может писать куда угодно, НЕ значит, что она в самом деле пишет куда угодно.</i><br />
Почему это так? Почему в названии есть &#8220;запись повсюду&#8221;, но её по-факту нет? ??ли же она таки там есть?!</p>
<p>Несколько раз вчитался в WP3002 про WAFL, пункт 3.2. В то время как многие другие ФС пишут метаданные только в выделенное место под них, у WAFL ситуация другая. Похоже, что в названии WAFL, когда говорят про запись &#8220;повсюду&#8221; имеют ввиду возможность записи <i>метаданных</i> повсюду (т.е. хранение метаданных в файле), а не записи повсюду <i>самих данных</i>.</p>
<p>После такого заключения становится понятна логика приведённого выражения и все вопросы снимаются.</p>
						<div class="comment-meta"><a href="881/trackback.html#comment-2609" title="">30 Май 2012, 20:03</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-2610">
		<div id="div-comment-2610">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>bbk:</p>
<p>> Почему это так?</p>
<p>Потому что так лучше работает :) Разве это плохо?</p>
<p>> Почему в названии есть “запись повсюду”, но её по-факту нет?</p>
<p>А чем не устраивает объяснение &#8220;может писать &#8220;повсюду&#8221;, но пишет так, чтобы было оптимальнее для работы и производительности&#8221;?</p>
<p>> Несколько раз вчитался в WP3002 про WAFL</p>
<p>WP3002 описывает устройство WAFL по состоянию на 1993 год. Учитывайте это. Например там совсем не отражены особенности работы с aggregate и FlexVol.</p>
<p>> когда говорят про запись “повсюду” имеют ввиду возможность записи метаданных повсюду (т.е. хранение метаданных в файле), а не записи повсюду самих данных.</p>
<p>Это тоже верно.</p>
						<div class="comment-meta"><a href="881/trackback.html#comment-2610" title="">30 Май 2012, 20:28</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-2615">
		<div id="div-comment-2615">
		<div class="comment-author">
			<cite>bbk:<cite></div>
			<p>По большому счёту я хотел разобраться только с названием. А именно с &#8220;Write Anywhere&#8221; - эта часть названия вносила неоднозначности. Теперь всё ясно.</p>
						<div class="comment-meta"><a href="881/trackback.html#comment-2615" title="">31 Май 2012, 12:35</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-2622">
		<div id="div-comment-2622">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>bbk:</p>
<p>На самом деле там еще роль играет аббревиатура, которой хотели пошутить. Ну знаете все эти гну-линуксные аббревиатурные шутки, типа GNU is Not UNIX, и прочее.</p>
<p>??сторически устройства хранения NetApp стали называться Appliance. Наиболее популярный домашний Appliance в США это &#8220;тостер&#8221;, причем у них тостером называется не только знакомый нам, но еще довольно эндемичное устройство, скорее долженсвующее называться &#8220;вафельница&#8221;, это такой нагревательный девайс, пекущий рубчатые лепешки из теста, которые называются у них &#8220;вафли&#8221; - Waffle.<br />
Отсюда технокаламбур - внутри &#8220;тостера&#8221; (toaster) наодятся &#8220;вафли&#8221; (WAFL).<br />
Поэтому название файловой системы подгоняли под уже готовую аббревиатуру. :) Поэтому она, кстати, не WAFS, а WAFL.</p>
						<div class="comment-meta"><a href="881/trackback.html#comment-2622" title="">31 Май 2012, 20:52</a>
			</div></div>
		</li>

		
	</ol>

 

<h3 id="respond">Оставить комментарий</h3>


<form style="display: none;" method="post" id="commentform">


<p><input type="text" name="author" id="author" value="" size="22" tabindex="1" />
<label for="author"><small>Имя (обязательно)</small></label></p>

<p><input type="text" name="email" id="email" value="" size="22" tabindex="2" />
<label for="email"><small>E-Mail (will not be published) (обязательно)</small></label></p>

<p><input type="text" name="url" id="url" value="" size="22" tabindex="3" />
<label for="url"><small>Сайт</small></label></p>


<!--<p><small><strong>XHTML:</strong> You can use these tags: &lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </small></p>-->

<p><textarea name="comment" id="comment" rows="10" cols="" tabindex="4"></textarea></p>

<p><input name="submit" type="submit" id="submit" tabindex="5" value="Submit Comment" />
<input type="hidden" name="comment_post_ID" value="881" />
</p>

</form>

</div>


	
	</div>

	<div id="sidebar">
		<ul>
			
			
			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Автор</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			<li class="pagenav"><h2>Страницы</h2><ul><li class="page_item page-item-153"><a href="../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul></li>
			<li><h2>Рубрики</h2>
				<ul>
					<li class="cat-item cat-item-89"><a href="category/commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;">commands</a>
</li>
	<li class="cat-item cat-item-37"><a href="category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;">howto</a>
</li>
	<li class="cat-item cat-item-52"><a href="category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;">justread</a>
</li>
	<li class="cat-item cat-item-51"><a href="category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;">review</a>
</li>
	<li class="cat-item cat-item-3"><a href="category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;">techtalk</a>
</li>
	<li class="cat-item cat-item-71"><a href="category/tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;">tricks</a>
</li>
	<li class="cat-item cat-item-95"><a href="category/utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;">utilities</a>
</li>
	<li class="cat-item cat-item-44"><a href="category/whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;">whoisho</a>
</li>
	<li class="cat-item cat-item-1"><a href="category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;">новости</a>
</li>
	<li class="cat-item cat-item-387"><a href="category/opros.html" title="Просмотреть все записи в рубрике &laquo;опрос&raquo;">опрос</a>
</li>
	<li class="cat-item cat-item-8"><a href="category/translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;">переводы</a>
</li>
	<li class="cat-item cat-item-40"><a href="category/citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;">цитаты</a>
</li>
				</ul>
			</li>

			<li><h2>Архивы</h2>
				<ul>
					<li><a href='date/2018/01.html' title='Январь 2018'>Январь 2018</a></li>
	<li><a href='date/2015/10.html' title='Октябрь 2015'>Октябрь 2015</a></li>
	<li><a href='date/2015/04.html' title='Апрель 2015'>Апрель 2015</a></li>
	<li><a href='date/2015/03.html' title='Март 2015'>Март 2015</a></li>
	<li><a href='date/2015/01.html' title='Январь 2015'>Январь 2015</a></li>
	<li><a href='date/2014/12.html' title='Декабрь 2014'>Декабрь 2014</a></li>
	<li><a href='date/2014/11.html' title='Ноябрь 2014'>Ноябрь 2014</a></li>
	<li><a href='date/2014/10.html' title='Октябрь 2014'>Октябрь 2014</a></li>
	<li><a href='date/2014/09.html' title='Сентябрь 2014'>Сентябрь 2014</a></li>
	<li><a href='date/2014/08.html' title='Август 2014'>Август 2014</a></li>
	<li><a href='date/2014/07.html' title='Июль 2014'>Июль 2014</a></li>
	<li><a href='date/2014/06.html' title='Июнь 2014'>Июнь 2014</a></li>
	<li><a href='date/2014/05.html' title='Май 2014'>Май 2014</a></li>
	<li><a href='date/2014/04.html' title='Апрель 2014'>Апрель 2014</a></li>
	<li><a href='date/2014/03.html' title='Март 2014'>Март 2014</a></li>
	<li><a href='date/2014/02.html' title='Февраль 2014'>Февраль 2014</a></li>
	<li><a href='date/2014/01.html' title='Январь 2014'>Январь 2014</a></li>
	<li><a href='date/2013/12.html' title='Декабрь 2013'>Декабрь 2013</a></li>
	<li><a href='date/2013/11.html' title='Ноябрь 2013'>Ноябрь 2013</a></li>
	<li><a href='date/2013/10.html' title='Октябрь 2013'>Октябрь 2013</a></li>
	<li><a href='date/2013/09.html' title='Сентябрь 2013'>Сентябрь 2013</a></li>
	<li><a href='date/2013/08.html' title='Август 2013'>Август 2013</a></li>
	<li><a href='date/2013/07.html' title='Июль 2013'>Июль 2013</a></li>
	<li><a href='date/2013/06.html' title='Июнь 2013'>Июнь 2013</a></li>
	<li><a href='date/2013/05.html' title='Май 2013'>Май 2013</a></li>
	<li><a href='date/2013/04.html' title='Апрель 2013'>Апрель 2013</a></li>
	<li><a href='date/2013/03.html' title='Март 2013'>Март 2013</a></li>
	<li><a href='date/2013/02.html' title='Февраль 2013'>Февраль 2013</a></li>
	<li><a href='date/2013/01.html' title='Январь 2013'>Январь 2013</a></li>
	<li><a href='date/2012/12.html' title='Декабрь 2012'>Декабрь 2012</a></li>
	<li><a href='date/2012/11.html' title='Ноябрь 2012'>Ноябрь 2012</a></li>
	<li><a href='date/2012/10.html' title='Октябрь 2012'>Октябрь 2012</a></li>
	<li><a href='date/2012/09.html' title='Сентябрь 2012'>Сентябрь 2012</a></li>
	<li><a href='date/2012/08.html' title='Август 2012'>Август 2012</a></li>
	<li><a href='date/2012/07.html' title='Июль 2012'>Июль 2012</a></li>
	<li><a href='date/2012/06.html' title='Июнь 2012'>Июнь 2012</a></li>
	<li><a href='date/2012/05.html' title='Май 2012'>Май 2012</a></li>
	<li><a href='date/2012/04.html' title='Апрель 2012'>Апрель 2012</a></li>
	<li><a href='date/2012/03.html' title='Март 2012'>Март 2012</a></li>
	<li><a href='date/2012/02.html' title='Февраль 2012'>Февраль 2012</a></li>
	<li><a href='date/2012/01.html' title='Январь 2012'>Январь 2012</a></li>
	<li><a href='date/2011/12.html' title='Декабрь 2011'>Декабрь 2011</a></li>
	<li><a href='date/2011/11.html' title='Ноябрь 2011'>Ноябрь 2011</a></li>
	<li><a href='date/2011/10/index.html' title='Октябрь 2011'>Октябрь 2011</a></li>
	<li><a href='date/2011/09/index.html' title='Сентябрь 2011'>Сентябрь 2011</a></li>
	<li><a href='date/2011/08.html' title='Август 2011'>Август 2011</a></li>
	<li><a href='date/2011/07/index.html' title='Июль 2011'>Июль 2011</a></li>
	<li><a href='date/2011/06/index.html' title='Июнь 2011'>Июнь 2011</a></li>
	<li><a href='date/2011/05/index.html' title='Май 2011'>Май 2011</a></li>
	<li><a href='date/2011/04/index.html' title='Апрель 2011'>Апрель 2011</a></li>
	<li><a href='date/2011/03/index.html' title='Март 2011'>Март 2011</a></li>
	<li><a href='date/2011/02.html' title='Февраль 2011'>Февраль 2011</a></li>
	<li><a href='date/2011/01.html' title='Январь 2011'>Январь 2011</a></li>
	<li><a href='date/2010/12.html' title='Декабрь 2010'>Декабрь 2010</a></li>
	<li><a href='date/2010/11/index.html' title='Ноябрь 2010'>Ноябрь 2010</a></li>
	<li><a href='date/2010/10/index.html' title='Октябрь 2010'>Октябрь 2010</a></li>
	<li><a href='date/2010/09/index.html' title='Сентябрь 2010'>Сентябрь 2010</a></li>
	<li><a href='date/2010/08.html' title='Август 2010'>Август 2010</a></li>
	<li><a href='date/2010/07/index.html' title='Июль 2010'>Июль 2010</a></li>
	<li><a href='date/2010/06.html' title='Июнь 2010'>Июнь 2010</a></li>
	<li><a href='date/2010/05.html' title='Май 2010'>Май 2010</a></li>
	<li><a href='date/2010/04/index.html' title='Апрель 2010'>Апрель 2010</a></li>
	<li><a href='date/2010/03/index.html' title='Март 2010'>Март 2010</a></li>
	<li><a href='date/2010/02.html' title='Февраль 2010'>Февраль 2010</a></li>
	<li><a href='date/2010/01.html' title='Январь 2010'>Январь 2010</a></li>
	<li><a href='date/2009/12/index.html' title='Декабрь 2009'>Декабрь 2009</a></li>
	<li><a href='date/2009/11/index.html' title='Ноябрь 2009'>Ноябрь 2009</a></li>
	<li><a href='date/2009/10.html' title='Октябрь 2009'>Октябрь 2009</a></li>
	<li><a href='date/2009/09.html' title='Сентябрь 2009'>Сентябрь 2009</a></li>
	<li><a href='date/2009/08/index.html' title='Август 2009'>Август 2009</a></li>
	<li><a href='date/2009/07/index.html' title='Июль 2009'>Июль 2009</a></li>
	<li><a href='date/2009/06.html' title='Июнь 2009'>Июнь 2009</a></li>
	<li><a href='date/2009/05.html' title='Май 2009'>Май 2009</a></li>
	<li><a href='date/2009/04.html' title='Апрель 2009'>Апрель 2009</a></li>
	<li><a href='date/2009/03.html' title='Март 2009'>Март 2009</a></li>
	<li><a href='date/2009/02.html' title='Февраль 2009'>Февраль 2009</a></li>
	<li><a href='date/2009/01.html' title='Январь 2009'>Январь 2009</a></li>
	<li><a href='date/2008/12.html' title='Декабрь 2008'>Декабрь 2008</a></li>
	<li><a href='date/2008/11.html' title='Ноябрь 2008'>Ноябрь 2008</a></li>
	<li><a href='date/2008/10.html' title='Октябрь 2008'>Октябрь 2008</a></li>
	<li><a href='date/2008/09.html' title='Сентябрь 2008'>Сентябрь 2008</a></li>
	<li><a href='date/2008/08.html' title='Август 2008'>Август 2008</a></li>
	<li><a href='date/2008/03.html' title='Март 2008'>Март 2008</a></li>
	<li><a href='date/2008/02.html' title='Февраль 2008'>Февраль 2008</a></li>
	<li><a href='date/2007/12.html' title='Декабрь 2007'>Декабрь 2007</a></li>
	<li><a href='date/2007/11.html' title='Ноябрь 2007'>Ноябрь 2007</a></li>
	<li><a href='date/2007/10.html' title='Октябрь 2007'>Октябрь 2007</a></li>
	<li><a href='date/2007/09.html' title='Сентябрь 2007'>Сентябрь 2007</a></li>
	<li><a href='date/2007/08.html' title='Август 2007'>Август 2007</a></li>
	<li><a href='date/2007/07/index.html' title='Июль 2007'>Июль 2007</a></li>
	<li><a href='date/2007/06.html' title='Июнь 2007'>Июнь 2007</a></li>
	<li><a href='date/2007/05.html' title='Май 2007'>Май 2007</a></li>
				</ul>
			</li>

			
					</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="../feed">Entries (RSS)</a> and <a href="../comments/feed">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 16 queries. 0.085 seconds. -->
	</div>
</div> <!-- page -->
</body>
</html>
	
