<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>about NetApp  &raquo; Blog Archive   &raquo; В последний раз о фрагментации файлов и производительности</title>

<link rel="stylesheet" href="../../wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="about NetApp RSS Feed" href="../../feed" />
<link rel="pingback" href="../../xmlrpc.php.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.6" />

</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="../../index.html" title="about NetApp: Системы хранения данных как предмет разговора">about NetApp</a></h1>
		<p>Системы хранения данных как предмет разговора</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="../../index.html">
<input type="text" size="20" name="s" id="s" value="Поиск..."  onblur="if(this.value=='') this.value='Поиск...';" onfocus="if(this.value=='Поиск...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="navbar">
<ul id="nav">
	<li><a href="../../index.html">Home</a></li>
	<li class="page_item page-item-153"><a href="../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content">

			
		<div class="navigation">
			<div class="alignleft">&laquo; <a href="../1223/trackback.html">Замена &ldquo;головы&rdquo; в сторадже: LUN serial</a></div>
			<div class="alignright"><a href="../1227/trackback.html">Новости конфигураций</a> &raquo;</div>
		</div>

		<div class="post" id="post-1225">
			<h2 class="posttitle"><a href="trackback.html" rel="bookmark" title="Permanent Link to В последний раз о фрагментации файлов и производительности">В последний раз о фрагментации файлов и производительности</a></h2>
			<div class="postmetadata">23 Октябрь 2012, 10:56 <!-- от  --></div>
			<div class="postentry">
				<p>Я много раз в этом блоге трогал тему о влиянии фрагментации на производительность работы системы хранения (см. например <a href="../221/trackback.html">раз</a>, <a href="../225/trackback.html">два</a>, <a href="../881/trackback.html">три</a>). Но как-то все это были слова, а как насчет “покажь логи”? Так как я до недавних пор был “безлошадный”, а все мои знакомые “с оборудованием” все как на подбор были “ленивы и нелюбопытны”, чтобы дать документальный ответ на этот вопрос, то поэтому пришлось отвечать самому.</p>
<p>Тут вот, как вы уже заметили, я, наконец, <em>обзавелся на хозяйстве </em>маленьким нетаппчиком, и, пока мы его в продакшн не ввели, гоняю в хвост и в гриву, в том числе <em>отвечаю на назревшие вопросы</em>. ?? первый – о том, влияет ли фрагментация данных на производительность доступа к ним при рандомном характере доступа.</p>
<p>Выше в постах, на которые я сослался, я уже ответил на этот вопрос и прояснил свою позицию. Вкратце: <strong>при рандомном доступе производительность от фрагментации данных не зависит</strong>. Так как система хранения обращается к данным рандомно, в произвольном, случайном порядке, то нет никакой особенной разницы в том, будут ли блоки данных лежать упорядоченно, или беспорядочно – их всегда будут читать “беспорядочно”. А рандомность обращения, помноженная на рандомность размещения не дает “рандомность в квадрате”, она остается обычной рандомностью, “в первой степени”.</p>
<p>Надеюсь не нужно дополнительно объяснять, почему для современных многозадачных систем, для баз OLTP, для виртуализованных серверных сред почти 100% доступа к данным является рандомным? Последовательный, “секвентальный” доступ встречается в очень узком сегменте, это бэкапы (а у NetApp, к слову, задача бэкапа, как вы помните, решается другим способом, а не последовательным копированием и передачей данных), это базы с характером доступа DSS, и это, отчасти, логи баз данных. Вот, в общем, и все использование секвентального доступа. Остальное все – более или менее чистый рандом.</p>
<p>Поэтому я взял паттерн доступа <strong>VM-сервер</strong> (40%-write/60%-read, 45%-sequental/55%-random, 4KB block). Секвентальность в последнем случае берется вследствие работы локального кэша хоста. Паттерны эти определил не я, они довольно широко распространены. Вот его и будем <strike>кушать</strike> мерять.</p>
<p>Тестировал я с помощью IOmeter, который, несмотря на некоторые его недостатки, знаю и люблю. В качестве load-generator использовались виртуальные машины, работающие с достаточно мощного хоста (IBM 3850 X5), который был подключен к стораджу по NFS. Для OS в VM диск выглядел “физическим” LUN без файловой системы, который делался MBR-разделом и форматировался в NTFS со стандартным размером блока (4KB). Раздел делался размером 40GB, на нем создавался тестовый файл IOmeter (iobw.tst), размером 16GB (для гарантированного “пробоя кэша”). На каждой VM делался 4-процессорный vCPU, и, соответственно, запускались 4 Worker, на каждом из которых пускался тестовый паттерн на созданный диск, в 16 потоков ввода-вывода (Outstanding IOs) на каждый Worker, то есть 64 одновременных потока ввода-вывода на диски (контроллер NetApp). Загрузка хост-сервера тестом не превышала при этом 15% (мощная зверюга этот 3850), загрузка стораджа колебалась, но также не превышала 80%. То есть заведомо мы в “потолки” нигде не упирались.</p>
<p>Для минимизации эффектов “прогрева WAFL” (о котором еще будет пост, это также была одна из тем “исследовательской недели”) я делал длинный ramp-up (10 минут), а затем начинался собственно измеряемый тест, длиной 30 минут. Я брал для оценки значение в steady state, ближе к концу теста, и для оценки параллельно проверяемого эффекта “падения производительности” при прогреве – ближе к его началу.</p>
<p>Однако, перед исследователем, в моем лице, встала проблема: как обеспечить “фрагментацию” файла тестирования? Если создать последовательный, упорядоченный файл просто: запускай IOmeter на пустом диске – вот он и создаст свой iobw.tst, то с фрагментацией “на заказ” сложнее.</p>
<p>Для того, чтобы сделать фрагментированный файл я нашел любопытную утилитку, под названием MyDefragmenter, которая, как ясно из названия – дефрагментатор. Но у нее в комплекте есть также программка MyFragmenter :). Она делает вполне ожидаемую из названия вещь :)</p>
<p>Я взял созданный IOmeter тестовый файл и <em>качественно замесил</em> его с помощью этой утилитки. Я фрагментировал с ее помощью этот файл на 250 тысяч кусочков по 64KB каждый (ну, чтоб не было претензий, что <em>гранаты у нас не той системы</em>;), а потом повторно провел тестирование описанными выше паттернами.</p>
<p>Также я проанализировал ситуацию с фрагментацией не только файла на NTFS, но и в WAFL, а затем измерил эффект от работы reallocate в WAFL.</p>
<p>Хочу отдельно отметить, что в данном случае измеренные “попугаи”&#160; не могут рассматриваться по абсолютной величине, я не проводил никакого (необходимого) тюнинга системы, и настройки ее “по уму” и по best practices (это я&#160; сделаю позже, ту у меня есть некоторые бюрократические процедуры для этого). Целью теста было сравнить два достигнутых параметра производительности: “А” и”Б”, то есть их соотношение, а не достижение абсолютного рекорда, поэтому реплики с мест “чота как-то иопсев маловата!” мы отметем как неорганизованные ;).</p>
<p>Вот какие результаты я получил:</p>
<p>  <span id="more-1225"></span> <code>
<p>[VM-initial-contiguous-state]</p>
<p>[ramp-up]</p>
<p>CPU&#160;&#160;&#160;&#160; NFS&#160;&#160;&#160; CIFS&#160;&#160;&#160; HTTP&#160;&#160;&#160;&#160; Net&#160;&#160; kB/s&#160;&#160;&#160; Disk&#160;&#160; kB/s&#160;&#160;&#160; Tape&#160;&#160; kB/s&#160; Cache      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; in&#160;&#160;&#160; out&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; age       <br />59%&#160;&#160;&#160; 8469&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 16340&#160; 23734&#160;&#160; 26540&#160; 23808&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 49s       <br />58%&#160;&#160;&#160; 8403&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 15951&#160; 23798&#160;&#160; 26476&#160; 25972&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 49s       <br />60%&#160;&#160;&#160; 8634&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 16875&#160; 23979&#160;&#160; 27100&#160; 26656&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 50s       <br />60%&#160;&#160;&#160; 8940&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 17524&#160; 24786&#160;&#160; 26952&#160; 25600&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 50s       <br />59%&#160;&#160;&#160; 8518&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 16531&#160; 23780&#160;&#160; 26200&#160; 21140&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 51s       <br />73%&#160;&#160;&#160; 7420&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 14155&#160; 21114&#160;&#160; 24678&#160; 23500&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 52s       <br />93%&#160;&#160;&#160; 6721&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 13053&#160; 18576&#160;&#160; 21729&#160; 22283&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 52s</p>
<p>[starting test: 10 min from beginning]</p>
<p>CPU&#160;&#160;&#160;&#160; NFS&#160;&#160;&#160; CIFS&#160;&#160;&#160; HTTP&#160;&#160;&#160;&#160; Net&#160;&#160; kB/s&#160;&#160;&#160; Disk&#160;&#160; kB/s&#160;&#160;&#160; Tape&#160;&#160; kB/s&#160; Cache      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; in&#160;&#160;&#160; out&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; age       <br />84%&#160;&#160;&#160; 6296&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12053&#160; 17708&#160;&#160; 21164&#160; 21356&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 58s       <br />87%&#160;&#160;&#160; 6626&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12627&#160; 18662&#160;&#160; 21784&#160; 22264&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 58s       <br />56%&#160;&#160;&#160; 7773&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 15366&#160; 21460&#160;&#160; 24116&#160; 25608&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 59s       <br />56%&#160;&#160;&#160; 7992&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 15547&#160; 22282&#160;&#160; 24344&#160; 23552&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 59s       <br />56%&#160;&#160;&#160; 7609&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 14877&#160; 21145&#160;&#160; 23552&#160; 24652&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 59s       <br />55%&#160;&#160;&#160; 7904&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 15507&#160; 21925&#160;&#160; 24520&#160; 23552&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 59s</p>
<p>[after 15 min of test]</p>
<p>CPU&#160;&#160;&#160;&#160; NFS&#160;&#160;&#160; CIFS&#160;&#160;&#160; HTTP&#160;&#160;&#160;&#160; Net&#160;&#160; kB/s&#160;&#160;&#160; Disk&#160;&#160; kB/s&#160;&#160;&#160; Tape&#160;&#160; kB/s&#160; Cache      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; in&#160;&#160;&#160; out&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; age       <br />50%&#160;&#160;&#160; 6947&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 13300&#160; 19589&#160;&#160; 21792&#160; 22304&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />53%&#160;&#160;&#160; 7107&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 13716&#160; 19946&#160;&#160; 22120&#160; 21376&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />49%&#160;&#160;&#160; 7152&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 13541&#160; 20323&#160;&#160; 22216&#160; 11672&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />49%&#160;&#160;&#160; 7221&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 13806&#160; 20392&#160;&#160; 22072&#160;&#160;&#160;&#160; 24&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />53%&#160;&#160;&#160; 7293&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 14059&#160; 20528&#160;&#160; 22524&#160;&#160; 2794&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />99%&#160;&#160;&#160; 5265&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 10141&#160; 14766&#160;&#160; 17919&#160; 40182&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />64%&#160;&#160;&#160; 6603&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12549&#160; 18560&#160;&#160; 21603&#160; 22357&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />48%&#160;&#160;&#160; 6537&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12832&#160; 18125&#160;&#160; 19492&#160; 19584&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1</p>
<p>[finish 30 min of test]</p>
<p>CPU&#160;&#160;&#160;&#160; NFS&#160;&#160;&#160; CIFS&#160;&#160;&#160; HTTP&#160;&#160;&#160;&#160; Net&#160;&#160; kB/s&#160;&#160;&#160; Disk&#160;&#160; kB/s&#160;&#160;&#160; Tape&#160;&#160; kB/s&#160; Cache      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; in&#160;&#160;&#160; out&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; age       <br />68%&#160;&#160;&#160; 6305&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12071&#160; 17845&#160;&#160; 20643&#160; 22980&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />99%&#160;&#160;&#160; 5446&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 10335&#160; 15399&#160;&#160; 17551&#160; 22568&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />55%&#160;&#160;&#160; 7032&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 13896&#160; 19289&#160;&#160; 21480&#160; 20164&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />51%&#160;&#160;&#160; 6657&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12933&#160; 18608&#160;&#160; 20668&#160; 22920&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />72%&#160;&#160;&#160; 6426&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12237&#160; 18150&#160;&#160; 20240&#160; 22204&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />52%&#160;&#160;&#160; 6820&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 13055&#160; 19230&#160;&#160; 21452&#160; 22016&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1</p>
<p>&#8211;      <br />Summary Statistics ( 2306 samples&#160; 0 secs/sample)       <br />CPU&#160;&#160;&#160;&#160; NFS&#160;&#160;&#160; CIFS&#160;&#160;&#160; HTTP&#160;&#160;&#160;&#160; Net&#160;&#160; kB/s&#160;&#160;&#160; Disk&#160;&#160; kB/s&#160;&#160;&#160; Tape&#160;&#160; kB/s&#160; Cache       <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; in&#160;&#160;&#160; out&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; age       <br />Min       <br />&#160; 0%&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 1&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 4&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 0s       <br />Avg       <br />58%&#160;&#160;&#160; 7079&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 13690&#160; 19819&#160;&#160; 22136&#160; 20414&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />Max       <br />99%&#160;&#160;&#160; 9116&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 18031&#160; 25295&#160;&#160; 28900&#160; 63498&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1</p>
<p> </code>
<p>Далее я запустил фрагментатор, который после нескольких часов работы создал мне почти идеально фрагментированный файл тестирования IOmeter (iobw.tst), размером 16TB, разделенный на 250 тысяч фрагментов</p>
<p><a href="/pics/8877bd9aa5cd_11DD3/fragmented1.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="fragmented1" border="0" alt="fragmented1" src="/pics/8877bd9aa5cd_11DD3/fragmented1_thumb.png" width="244" height="192" /></a><a href="/pics/8877bd9aa5cd_11DD3/fragmented2.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="fragmented2" border="0" alt="fragmented2" src="/pics/8877bd9aa5cd_11DD3/fragmented2_thumb.png" width="244" height="203" /></a></p>
<p>?? провел те же тесты:</p>
<p>Предварительно измерим состояние WAFL</p>
<p> <code>
<p>&gt;reallocate measure /vol/ds_fast </p>
<p>Allocation check on &#8216;/vol/ds_fast&#8217; is 23, hotspot 0 (threshold 4), consider running reallocate.</p>
<p> </code>
<p><em>Все плохо</em>, “23” это довольно сильная фрагментация, я, вдобавок, не реаллоцировал данные на томе после предыдущего получаса интенсивных записей.</p>
<p> <code>
<p>[VM-2ndphase-fragmented-noncontiguous-state]</p>
<p>[ramp-up]</p>
<p>CPU&#160;&#160;&#160;&#160; NFS&#160;&#160;&#160; CIFS&#160;&#160;&#160; HTTP&#160;&#160;&#160;&#160; Net&#160;&#160; kB/s&#160;&#160;&#160; Disk&#160;&#160; kB/s&#160;&#160;&#160; Tape&#160;&#160; kB/s&#160; Cache      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; in&#160;&#160;&#160; out&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; age       <br />58%&#160;&#160;&#160; 8667&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 16723&#160; 24273&#160;&#160; 20112&#160; 22536&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 28s       <br />56%&#160;&#160;&#160; 8503&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 16512&#160; 23753&#160;&#160; 20100&#160; 28192&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 28s       <br />59%&#160;&#160;&#160; 8296&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 16388&#160; 22890&#160;&#160; 18944&#160; 39764&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 27s       <br />57%&#160;&#160;&#160; 8369&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 16307&#160; 23297&#160;&#160; 19772&#160; 25472&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 26s       <br />56%&#160;&#160;&#160; 8341&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 16129&#160; 23334&#160;&#160; 19576&#160; 32408&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 26s       <br />58%&#160;&#160;&#160; 8847&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 17132&#160; 24760&#160;&#160; 20416&#160;&#160; 4384&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 27s</p>
<p>[start of test 10 min]</p>
<p>CPU&#160;&#160;&#160;&#160; NFS&#160;&#160;&#160; CIFS&#160;&#160;&#160; HTTP&#160;&#160;&#160;&#160; Net&#160;&#160; kB/s&#160;&#160;&#160; Disk&#160;&#160; kB/s&#160;&#160;&#160; Tape&#160;&#160; kB/s&#160; Cache      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; in&#160;&#160;&#160; out&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; age       <br />47%&#160;&#160;&#160; 6516&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12565&#160; 18286&#160;&#160; 17444&#160; 23584&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />49%&#160;&#160;&#160; 6434&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12543&#160; 17940&#160;&#160; 16624&#160; 28832&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />42%&#160;&#160;&#160; 6568&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12691&#160; 18432&#160;&#160; 17416&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />80%&#160;&#160;&#160; 6010&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 11815&#160; 16629&#160;&#160; 15881&#160; 39465&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />94%&#160;&#160;&#160; 5768&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 11144&#160; 16082&#160;&#160; 16324&#160; 22250&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />47%&#160;&#160;&#160; 6864&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 13629&#160; 18887&#160;&#160; 17496&#160; 21000&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1</p>
<p>[end of test 30 min]</p>
<p>CPU&#160;&#160;&#160;&#160; NFS&#160;&#160;&#160; CIFS&#160;&#160;&#160; HTTP&#160;&#160;&#160;&#160; Net&#160;&#160; kB/s&#160;&#160;&#160; Disk&#160;&#160; kB/s&#160;&#160;&#160; Tape&#160;&#160; kB/s&#160; Cache      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; in&#160;&#160;&#160; out&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; age       <br />43%&#160;&#160;&#160; 6383&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12416&#160; 17813&#160;&#160; 18672&#160;&#160;&#160;&#160; 24&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />75%&#160;&#160;&#160; 5556&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 10910&#160; 15416&#160;&#160; 17714&#160; 37909&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />99%&#160;&#160;&#160; 5191&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 9787&#160; 14718&#160;&#160; 16491&#160; 21065&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />50%&#160;&#160;&#160; 6132&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12082&#160; 16920&#160;&#160; 17922&#160; 22018&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />45%&#160;&#160;&#160; 6050&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 11886&#160; 16791&#160;&#160; 17936&#160; 22016&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />45%&#160;&#160;&#160; 5950&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 11346&#160; 16849&#160;&#160; 18020&#160; 21832&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1</p>
<p>&#8211;      <br />Summary Statistics ( 2597 samples&#160; 0 secs/sample)       <br />CPU&#160;&#160;&#160;&#160; NFS&#160;&#160;&#160; CIFS&#160;&#160;&#160; HTTP&#160;&#160;&#160;&#160; Net&#160;&#160; kB/s&#160;&#160;&#160; Disk&#160;&#160; kB/s&#160;&#160;&#160; Tape&#160;&#160; kB/s&#160; Cache       <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; in&#160;&#160;&#160; out&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; age       <br />Min       <br />&#160; 0%&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 0s       <br />Avg       <br />50%&#160;&#160;&#160; 5898&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 11419&#160; 16509&#160;&#160; 16151&#160; 20626&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 4       <br />Max       <br />99%&#160;&#160;&#160; 9301&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 18077&#160; 26100&#160;&#160; 23728&#160; 87549&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; &gt;60</p>
<p>Allocation check on &#8216;/vol/ds_fast&#8217; is 37, hotspot 0 (threshold 4), consider running reallocate. </p>
<p> </code>
<p>В процессе теста, характеризующегося интенсивной записью в тестовый файл, величина фрагментированности <em>на уровне WAFL</em> еще подросла, и составила 37 <em>внутрионтаповских попугая</em>.</p>
<p>Затем я решил проверить то, какое влияние оказывает пресловутая “фрагментация WAFL”, и после отработки второго теста я запустил reallocate start –f /vol/testvol и дождался, пока реаллокация блоков WAFL будет закончена (как видите ниже, она не идеальна, остановилась на “9”, но все же лучше чем была), а затем запусил тест на <strong>по-прежнему “фрагментированном” на уровне NTFS файле</strong>.</p>
<p> <code>
<p>[VM-3rdphase-fragmented-contiguous-state]</p>
<p>Allocation check on &#8216;/vol/ds_fast&#8217; is 9, hotspot 0 (threshold 4), consider running reallocate.</p>
<p>DSB-NETAPP2&gt; reallocate status -v /vol/ds_fast      <br />Reallocation scans are on       <br />/vol/ds_fast:       <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; State: Idle       <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; Flags: whole_vol,measure_only,repeat       <br />&#160;&#160;&#160; Threshold: 4       <br />&#160;&#160;&#160;&#160; Schedule: n/a       <br />&#160;&#160;&#160;&#160; Interval: 1 day       <br />&#160;&#160;&#160;&#160;&#160; NextRun: Fri Oct 19 11:01:16 SGT 2012       <br />Optimization: 9       <br />&#160; Measure Log: n/a</p>
<p>[ramp-up]</p>
<p>CPU&#160;&#160;&#160;&#160; NFS&#160;&#160;&#160; CIFS&#160;&#160;&#160; HTTP&#160;&#160;&#160;&#160; Net&#160;&#160; kB/s&#160;&#160;&#160; Disk&#160;&#160; kB/s&#160;&#160;&#160; Tape&#160;&#160; kB/s&#160; Cache      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; in&#160;&#160;&#160; out&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; age       <br />56%&#160;&#160;&#160; 7769&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 15198&#160; 21572&#160;&#160; 23137&#160; 24943&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 55s       <br />54%&#160;&#160;&#160; 7617&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 14298&#160; 21749&#160;&#160; 23772&#160; 26776&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 55s       <br />55%&#160;&#160;&#160; 7384&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 14346&#160; 20632&#160;&#160; 21996&#160; 30632&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 54s       <br />57%&#160;&#160;&#160; 8169&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 16216&#160; 22459&#160;&#160; 23572&#160; 28296&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 54s       <br />56%&#160;&#160;&#160; 7532&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 14507&#160; 21124&#160;&#160; 22960&#160; 28312&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 54s       <br />57%&#160;&#160;&#160; 7821&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 15236&#160; 21811&#160;&#160; 23320&#160; 26880&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 54s       <br />54%&#160;&#160;&#160; 7908&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 15333&#160; 22097&#160;&#160; 23948&#160; 18324&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 54s</p>
<p>[beginning of test]</p>
<p>CPU&#160;&#160;&#160;&#160; NFS&#160;&#160;&#160; CIFS&#160;&#160;&#160; HTTP&#160;&#160;&#160;&#160; Net&#160;&#160; kB/s&#160;&#160;&#160; Disk&#160;&#160; kB/s&#160;&#160;&#160; Tape&#160;&#160; kB/s&#160; Cache      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; in&#160;&#160;&#160; out&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; age       <br />72%&#160;&#160;&#160; 6989&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 13550&#160; 19434&#160;&#160; 21184&#160; 21846&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 59s       <br />53%&#160;&#160;&#160; 7385&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 14268&#160; 20693&#160;&#160; 22896&#160; 21376&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 59s       <br />53%&#160;&#160;&#160; 7258&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 14200&#160; 20176&#160;&#160; 21572&#160; 22144&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 59s       <br />53%&#160;&#160;&#160; 7370&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 14210&#160; 20699&#160;&#160; 22360&#160; 22068&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 59s       <br />54%&#160;&#160;&#160; 7446&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 14269&#160; 21031&#160;&#160; 22625&#160; 22633&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 59s       <br />54%&#160;&#160;&#160; 7670&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 15007&#160; 21295&#160;&#160; 22448&#160; 22272&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 59s       <br />54%&#160;&#160;&#160; 7360&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 14119&#160; 20686&#160;&#160; 22318&#160; 21123&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 58s</p>
<p>[end of test]</p>
<p>CPU&#160;&#160;&#160;&#160; NFS&#160;&#160;&#160; CIFS&#160;&#160;&#160; HTTP&#160;&#160;&#160;&#160; Net&#160;&#160; kB/s&#160;&#160;&#160; Disk&#160;&#160; kB/s&#160;&#160;&#160; Tape&#160;&#160; kB/s&#160; Cache      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; in&#160;&#160;&#160; out&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; age       <br />51%&#160;&#160;&#160; 6652&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12674&#160; 18838&#160;&#160; 20464&#160; 22280&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />45%&#160;&#160;&#160; 6475&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12417&#160; 18228&#160;&#160; 19936&#160;&#160; 2188&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />47%&#160;&#160;&#160; 6653&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12913&#160; 18593&#160;&#160; 20432&#160;&#160;&#160;&#160; 36&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />96%&#160;&#160;&#160; 5249&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 10205&#160; 14650&#160;&#160; 17732&#160; 50947&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />82%&#160;&#160;&#160; 6035&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 11746&#160; 16749&#160;&#160; 19777&#160; 22056&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />47%&#160;&#160;&#160; 6371&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12104&#160; 18062&#160;&#160; 20408&#160; 20768&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       <br />50%&#160;&#160;&#160; 6664&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12870&#160; 18699&#160;&#160; 20228&#160; 22739&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1</p>
<p>&#8211;       <br />Summary Statistics ( 2324 samples&#160; 0 secs/sample)       <br />CPU&#160;&#160;&#160;&#160; NFS&#160;&#160;&#160; CIFS&#160;&#160;&#160; HTTP&#160;&#160;&#160;&#160; Net&#160;&#160; kB/s&#160;&#160;&#160; Disk&#160;&#160; kB/s&#160;&#160;&#160; Tape&#160;&#160; kB/s&#160; Cache       <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; in&#160;&#160;&#160; out&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; read&#160; write&#160;&#160;&#160; age       <br />Min       <br />&#160; 0%&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 0s       <br />Avg       <br />57%&#160;&#160;&#160; 6664&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 12893&#160; 18658&#160;&#160; 20621&#160; 22416&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160; 58s       <br />Max       <br />99%&#160;&#160;&#160; 8304&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160; 16329&#160; 23168&#160;&#160; 25024 157234&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160; 1       </p>
<p> </code>
<p>Как видите, производительность на “реаллоцированном”, но фрагментированном файле фактически вернулась к показателям нефрагментированного, свежесозданного файла, что убедительно показывает, что основной вклад в некоторое падение производительности при активной перезаписи вносит именно “фрагментация WAFL”, и после отработки на системе хранения reallocate производительность работы с чудовищно и намеренно фрагментированного файла (25 тысяч фрагментов, разбросанных по диску! В реальной жизни вы такого, уверен, не получите никогда) возвращается к уровню нефрагментированного файла.</p>
<h3>Выводы и lessons learned:</h3>
<p>Фрагментация данных на диске прикладной системы, лежащей на NetApp, не играет существенной роли роли и не приводит к снижению производительности не только при 100% random, но и при, в значительной мере, смешанном профиле, <strong>со значительным (до 40%) секвентальным компонентом</strong>. Некоторый наблюдаемый эффект снижения показателей производительности вызывается <em>non-contiguous allocate</em> блоков WAFL, что, вероятно, мешает правильному их кэшированию и read-ahead. Тем не менее даже при ОЧЕНЬ сильно искусственно проявленном эффекте (с уровнем, которого вы никогда в реальной жизни не достигнете) это снижение не превышает 17% от пиковой производительности (снизилась с 7079 до 5898) и достаточно эффективно парируется процедурой WAFL reallocate, работающей как по расписанию, так и при превышении порога. WAFL reallocate, отдельно отмечу, никак не упорядочивает фрагментированный уровнем выше файл на файловой системе поверх WAFL, который остается фрагментированным, а работает только со структурами самого WAFL. Разница на реаллоцированном томе с <em>очень сильно</em> фрагментированным файлом и реаллоцированном, но дефрагментированным, непрерывным (на уровне файловой системы хоста) составляет, как можно видеть выше, менее 8%.</p>
<p>Сим считаю в данном блоге вопрос “влияет ли при практической эксплуатации системы хранения NetApp фрагментация файлов на производительность работы с ними” закрытым: <strong>нет, не влияет</strong>.</p>
							</div>
	
			<div class="postmetadata">
				<div class="postmetadata">
					Метки: <a href="../tag/fragmentation.html" rel="tag">fragmentation</a>, <a href="../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../tag/performance/index.html" rel="tag">performance</a>, <a href="../tag/reallocate.html" rel="tag">reallocate</a>, <a href="../tag/wafl/index.html" rel="tag">wafl</a><br />					Раздел: <a href="../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;" rel="category tag">justread</a>,  <a href="../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>					&nbsp;|&nbsp;&nbsp;<a href="trackback.html#respond">Комментарий</a> (<a href='feed'>RSS</a>)					&nbsp;|&nbsp;&nbsp;<a href="trackback.html" rel="trackback">Обратная ссылка</a>									 </div>
			</div>
		</div>
	
<!-- You can start editing here. -->

<div id="comments">
	<h3>Комментарии (13)</h3>

	<ol class="commentlist">

	
		<li class="comment even" id="comment-4174">
		<div id="div-comment-4174">
		<div class="comment-author">
			<cite>Алексей:<cite></div>
			<p>Хороший труд.<br />
Что подробнее почитать по reallocate? можно из netapp источников, логин есть.<br />
Не совсем понимаю что это и как работает.</p>
						<div class="comment-meta"><a href="trackback.html#comment-4174" title="">23 Октябрь 2012, 14:32</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-4175">
		<div id="div-comment-4175">
		<div class="comment-author">
			<cite><a href='../../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Я уже года два собираюсь написать все, что удалось разрыть по поводу reallocate, но все собираюсь.<br />
Проблема внутренних ресурсов NetApp в том, что до определенных источников имеют доступ люди, обладающие только определенным уровнем посвящения, и я лично далек от высших, поэтому что-то для меня остается скрытым :) Но что-то разобрать удалось. Может таки соберусь и напишу, но попозже. Но в этом году, обещаю. :)</p>
						<div class="comment-meta"><a href="trackback.html#comment-4175" title="">23 Октябрь 2012, 14:47</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-4207">
		<div id="div-comment-4207">
		<div class="comment-author">
			<cite>Киселев Сергей:<cite></div>
			<p>Роман, а если выделить не 40ГБ диск для хранения 16ГБ тестового файла, а 17ГБ?<br />
?? ещё вопрос какой размер датасторе выделялся на NetApp? По хорошему, при выполении тестирования его заполненность должна быть близка к 80-90%.</p>
						<div class="comment-meta"><a href="trackback.html#comment-4207" title="">24 Октябрь 2012, 17:42</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-4208">
		<div id="div-comment-4208">
		<div class="comment-author">
			<cite><a href='../../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Киселев Сергей:</p>
<p>> По хорошему</p>
<p>По хорошему для кого?<br />
Я считаю, что тестирование должно давать релевантные решаемой задаче результаты, чтобы его результаты можно было использовать для оценки.<br />
Я не считаю, что тестирование во что бы то ни стало должно демонстрировать максимально плохой, из всех возможных, результат, измеренный в наихудших из возможных условиях. Я считаю, что измерять надо в близких к реальным условиях, по крайней мере соответствующих рекомендованным производителем best practices.<br />
Тогда результат будет иллюстрировать практически достижимые показатели, в реально применимых условиях.</p>
<p>Переводя на любимые в этом блоге автомобильные аналогии: можно нагрузить весь салон легковушки кирпичами, включить первую передачу и втопить газ в пол. Но будет ли полученный результат релевантен задачам легковушки, и что полученный таким образом результат покажет?</p>
<p>> при выполении тестирования его заполненность должна быть близка к 80-90%.</p>
<p>Кому она это должна?</p>
						<div class="comment-meta"><a href="trackback.html#comment-4208" title="">24 Октябрь 2012, 18:13</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-4223">
		<div id="div-comment-4223">
		<div class="comment-author">
			<cite>bbk:<cite></div>
			<p>Былобы неплохо знать версию датаонтапа на ваших файлерах.</p>
						<div class="comment-meta"><a href="trackback.html#comment-4223" title="">25 Октябрь 2012, 3:09</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-4227">
		<div id="div-comment-4227">
		<div class="comment-author">
			<cite><a href='../../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>bbk:</p>
<p>8.1.1 GA</p>
						<div class="comment-meta"><a href="trackback.html#comment-4227" title="">25 Октябрь 2012, 8:01</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-4334">
		<div id="div-comment-4334">
		<div class="comment-author">
			<cite>sl0n:<cite></div>
			<p>А как на счет значений для latency, было бы интересно это знать, ??МХО нет смысле в 7K IOPS при, скажем, 50ms latency.</p>
						<div class="comment-meta"><a href="trackback.html#comment-4334" title="">29 Октябрь 2012, 0:00</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-4422">
		<div id="div-comment-4422">
		<div class="comment-author">
			<cite>Peter Sergeev:<cite></div>
			<p>&gt; Кому она это должна?</p>
<p>То, что фрагментация не влияет на производительность при относительно хороших условиях это не так интересно.<br />
??нтересно когда она начинает деградировать.<br />
Заполненность агрегатов на 90-95% это часто данность, с которой нужно жить продолжительное время, без возможности её снизить.<br />
Какая будет производительность в таких условиях?</p>
						<div class="comment-meta"><a href="trackback.html#comment-4422" title="">31 Октябрь 2012, 15:04</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-4423">
		<div id="div-comment-4423">
		<div class="comment-author">
			<cite><a href='../../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Peter Sergeev:</p>
<p>> Заполненность агрегатов на 90-95% это часто данность, с которой нужно жить </p>
<p>Работа в нерекомендованных производителем режимах - это плохая &#8220;данность&#8221;, и bad practice.</p>
						<div class="comment-meta"><a href="trackback.html#comment-4423" title="">31 Октябрь 2012, 15:17</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-4480">
		<div id="div-comment-4480">
		<div class="comment-author">
			<cite>Киселев Сергей:<cite></div>
			<p>Роман,<br />
условия, при которых проводилось тестирование, мало применимы на практике и поэтому мало интересны Заказчику. Было бы интереснее увидеть как поведет себя система в более сложных ситуациях, которые, как ни странно, чаще встречаются в жизни, чем описанные в Best Practices.</p>
						<div class="comment-meta"><a href="trackback.html#comment-4480" title="">2 Ноябрь 2012, 15:06</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-4487">
		<div id="div-comment-4487">
		<div class="comment-author">
			<cite><a href='../../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Киселев Сергей:</p>
<p>Сергей, если пользователь игнорирует вендорские рекомендации, то он, конечно, в своем праве, но сам себе злобный буратино. Довольно бессмысленно требовать от вендора испытания микроскопа в качестве инструмента для заколачивания гвоздей, просто потому что покупателю так хочется столь странным способом его использовать. на то и пишутся вендорские Best Practices, чтобы ими руководствоваться при создании системы, а если есть какие-то партнеры, или интеграторы, или конечные пользователи, которые их прямо и осознанно нарушают, руководствуясь какими-то своими представлениями о &#8220;правильности&#8221;, то нам с такими не по пути :)</p>
						<div class="comment-meta"><a href="trackback.html#comment-4487" title="">2 Ноябрь 2012, 19:06</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-4507">
		<div id="div-comment-4507">
		<div class="comment-author">
			<cite>Alex:<cite></div>
			<p>А можно узнать значение latency в мс при всех этих тестах? На хосте и на самой СХД. ?? размер очереди тоже был бы полезен. Нигде не указано&#8230; Если использовался Iometer, то там это видно.</p>
						<div class="comment-meta"><a href="trackback.html#comment-4507" title="">3 Ноябрь 2012, 21:03</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-4509">
		<div id="div-comment-4509">
		<div class="comment-author">
			<cite><a href='../../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Обязательно, как-то я этот момент пропустил в статье, но сейчас данные не под руками, а на следующей неделе я дополню пост. Latency ухудшается, конечно, но не катастрофически.</p>
						<div class="comment-meta"><a href="trackback.html#comment-4509" title="">3 Ноябрь 2012, 21:19</a>
			</div></div>
		</li>

		
	</ol>

 

<h3 id="respond">Оставить комментарий</h3>


<form style="display: none;" method="post" id="commentform">


<p><input type="text" name="author" id="author" value="" size="22" tabindex="1" />
<label for="author"><small>Имя (обязательно)</small></label></p>

<p><input type="text" name="email" id="email" value="" size="22" tabindex="2" />
<label for="email"><small>E-Mail (will not be published) (обязательно)</small></label></p>

<p><input type="text" name="url" id="url" value="" size="22" tabindex="3" />
<label for="url"><small>Сайт</small></label></p>


<!--<p><small><strong>XHTML:</strong> You can use these tags: &lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </small></p>-->

<p><textarea name="comment" id="comment" rows="10" cols="" tabindex="4"></textarea></p>

<p><input name="submit" type="submit" id="submit" tabindex="5" value="Submit Comment" />
<input type="hidden" name="comment_post_ID" value="1225" />
</p>

</form>

</div>


	
	</div>

	<div id="sidebar">
		<ul>
			
			
			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Автор</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			<li class="pagenav"><h2>Страницы</h2><ul><li class="page_item page-item-153"><a href="../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul></li>
			<li><h2>Рубрики</h2>
				<ul>
					<li class="cat-item cat-item-89"><a href="../category/commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;">commands</a>
</li>
	<li class="cat-item cat-item-37"><a href="../category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;">howto</a>
</li>
	<li class="cat-item cat-item-52"><a href="../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;">justread</a>
</li>
	<li class="cat-item cat-item-51"><a href="../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;">review</a>
</li>
	<li class="cat-item cat-item-3"><a href="../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;">techtalk</a>
</li>
	<li class="cat-item cat-item-71"><a href="../category/tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;">tricks</a>
</li>
	<li class="cat-item cat-item-95"><a href="../category/utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;">utilities</a>
</li>
	<li class="cat-item cat-item-44"><a href="../category/whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;">whoisho</a>
</li>
	<li class="cat-item cat-item-1"><a href="../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;">новости</a>
</li>
	<li class="cat-item cat-item-387"><a href="../category/opros.html" title="Просмотреть все записи в рубрике &laquo;опрос&raquo;">опрос</a>
</li>
	<li class="cat-item cat-item-8"><a href="../category/translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;">переводы</a>
</li>
	<li class="cat-item cat-item-40"><a href="../category/citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;">цитаты</a>
</li>
				</ul>
			</li>

			<li><h2>Архивы</h2>
				<ul>
					<li><a href='../date/2018/01.html' title='Январь 2018'>Январь 2018</a></li>
	<li><a href='../date/2015/10.html' title='Октябрь 2015'>Октябрь 2015</a></li>
	<li><a href='../date/2015/04.html' title='Апрель 2015'>Апрель 2015</a></li>
	<li><a href='../date/2015/03.html' title='Март 2015'>Март 2015</a></li>
	<li><a href='../date/2015/01.html' title='Январь 2015'>Январь 2015</a></li>
	<li><a href='../date/2014/12.html' title='Декабрь 2014'>Декабрь 2014</a></li>
	<li><a href='../date/2014/11.html' title='Ноябрь 2014'>Ноябрь 2014</a></li>
	<li><a href='../date/2014/10.html' title='Октябрь 2014'>Октябрь 2014</a></li>
	<li><a href='../date/2014/09.html' title='Сентябрь 2014'>Сентябрь 2014</a></li>
	<li><a href='../date/2014/08.html' title='Август 2014'>Август 2014</a></li>
	<li><a href='../date/2014/07.html' title='Июль 2014'>Июль 2014</a></li>
	<li><a href='../date/2014/06.html' title='Июнь 2014'>Июнь 2014</a></li>
	<li><a href='../date/2014/05.html' title='Май 2014'>Май 2014</a></li>
	<li><a href='../date/2014/04.html' title='Апрель 2014'>Апрель 2014</a></li>
	<li><a href='../date/2014/03.html' title='Март 2014'>Март 2014</a></li>
	<li><a href='../date/2014/02.html' title='Февраль 2014'>Февраль 2014</a></li>
	<li><a href='../date/2014/01.html' title='Январь 2014'>Январь 2014</a></li>
	<li><a href='../date/2013/12.html' title='Декабрь 2013'>Декабрь 2013</a></li>
	<li><a href='../date/2013/11.html' title='Ноябрь 2013'>Ноябрь 2013</a></li>
	<li><a href='../date/2013/10.html' title='Октябрь 2013'>Октябрь 2013</a></li>
	<li><a href='../date/2013/09.html' title='Сентябрь 2013'>Сентябрь 2013</a></li>
	<li><a href='../date/2013/08.html' title='Август 2013'>Август 2013</a></li>
	<li><a href='../date/2013/07.html' title='Июль 2013'>Июль 2013</a></li>
	<li><a href='../date/2013/06.html' title='Июнь 2013'>Июнь 2013</a></li>
	<li><a href='../date/2013/05.html' title='Май 2013'>Май 2013</a></li>
	<li><a href='../date/2013/04.html' title='Апрель 2013'>Апрель 2013</a></li>
	<li><a href='../date/2013/03.html' title='Март 2013'>Март 2013</a></li>
	<li><a href='../date/2013/02.html' title='Февраль 2013'>Февраль 2013</a></li>
	<li><a href='../date/2013/01.html' title='Январь 2013'>Январь 2013</a></li>
	<li><a href='../date/2012/12.html' title='Декабрь 2012'>Декабрь 2012</a></li>
	<li><a href='../date/2012/11.html' title='Ноябрь 2012'>Ноябрь 2012</a></li>
	<li><a href='../date/2012/10.html' title='Октябрь 2012'>Октябрь 2012</a></li>
	<li><a href='../date/2012/09.html' title='Сентябрь 2012'>Сентябрь 2012</a></li>
	<li><a href='../date/2012/08.html' title='Август 2012'>Август 2012</a></li>
	<li><a href='../date/2012/07.html' title='Июль 2012'>Июль 2012</a></li>
	<li><a href='../date/2012/06.html' title='Июнь 2012'>Июнь 2012</a></li>
	<li><a href='../date/2012/05.html' title='Май 2012'>Май 2012</a></li>
	<li><a href='../date/2012/04.html' title='Апрель 2012'>Апрель 2012</a></li>
	<li><a href='../date/2012/03.html' title='Март 2012'>Март 2012</a></li>
	<li><a href='../date/2012/02.html' title='Февраль 2012'>Февраль 2012</a></li>
	<li><a href='../date/2012/01.html' title='Январь 2012'>Январь 2012</a></li>
	<li><a href='../date/2011/12.html' title='Декабрь 2011'>Декабрь 2011</a></li>
	<li><a href='../date/2011/11.html' title='Ноябрь 2011'>Ноябрь 2011</a></li>
	<li><a href='../date/2011/10/index.html' title='Октябрь 2011'>Октябрь 2011</a></li>
	<li><a href='../date/2011/09/index.html' title='Сентябрь 2011'>Сентябрь 2011</a></li>
	<li><a href='../date/2011/08.html' title='Август 2011'>Август 2011</a></li>
	<li><a href='../date/2011/07/index.html' title='Июль 2011'>Июль 2011</a></li>
	<li><a href='../date/2011/06/index.html' title='Июнь 2011'>Июнь 2011</a></li>
	<li><a href='../date/2011/05/index.html' title='Май 2011'>Май 2011</a></li>
	<li><a href='../date/2011/04/index.html' title='Апрель 2011'>Апрель 2011</a></li>
	<li><a href='../date/2011/03/index.html' title='Март 2011'>Март 2011</a></li>
	<li><a href='../date/2011/02.html' title='Февраль 2011'>Февраль 2011</a></li>
	<li><a href='../date/2011/01.html' title='Январь 2011'>Январь 2011</a></li>
	<li><a href='../date/2010/12.html' title='Декабрь 2010'>Декабрь 2010</a></li>
	<li><a href='../date/2010/11/index.html' title='Ноябрь 2010'>Ноябрь 2010</a></li>
	<li><a href='../date/2010/10/index.html' title='Октябрь 2010'>Октябрь 2010</a></li>
	<li><a href='../date/2010/09/index.html' title='Сентябрь 2010'>Сентябрь 2010</a></li>
	<li><a href='../date/2010/08.html' title='Август 2010'>Август 2010</a></li>
	<li><a href='../date/2010/07/index.html' title='Июль 2010'>Июль 2010</a></li>
	<li><a href='../date/2010/06.html' title='Июнь 2010'>Июнь 2010</a></li>
	<li><a href='../date/2010/05.html' title='Май 2010'>Май 2010</a></li>
	<li><a href='../date/2010/04/index.html' title='Апрель 2010'>Апрель 2010</a></li>
	<li><a href='../date/2010/03/index.html' title='Март 2010'>Март 2010</a></li>
	<li><a href='../date/2010/02.html' title='Февраль 2010'>Февраль 2010</a></li>
	<li><a href='../date/2010/01.html' title='Январь 2010'>Январь 2010</a></li>
	<li><a href='../date/2009/12/index.html' title='Декабрь 2009'>Декабрь 2009</a></li>
	<li><a href='../date/2009/11/index.html' title='Ноябрь 2009'>Ноябрь 2009</a></li>
	<li><a href='../date/2009/10.html' title='Октябрь 2009'>Октябрь 2009</a></li>
	<li><a href='../date/2009/09.html' title='Сентябрь 2009'>Сентябрь 2009</a></li>
	<li><a href='../date/2009/08/index.html' title='Август 2009'>Август 2009</a></li>
	<li><a href='../date/2009/07/index.html' title='Июль 2009'>Июль 2009</a></li>
	<li><a href='../date/2009/06.html' title='Июнь 2009'>Июнь 2009</a></li>
	<li><a href='../date/2009/05.html' title='Май 2009'>Май 2009</a></li>
	<li><a href='../date/2009/04.html' title='Апрель 2009'>Апрель 2009</a></li>
	<li><a href='../date/2009/03.html' title='Март 2009'>Март 2009</a></li>
	<li><a href='../date/2009/02.html' title='Февраль 2009'>Февраль 2009</a></li>
	<li><a href='../date/2009/01.html' title='Январь 2009'>Январь 2009</a></li>
	<li><a href='../date/2008/12.html' title='Декабрь 2008'>Декабрь 2008</a></li>
	<li><a href='../date/2008/11.html' title='Ноябрь 2008'>Ноябрь 2008</a></li>
	<li><a href='../date/2008/10.html' title='Октябрь 2008'>Октябрь 2008</a></li>
	<li><a href='../date/2008/09.html' title='Сентябрь 2008'>Сентябрь 2008</a></li>
	<li><a href='../date/2008/08.html' title='Август 2008'>Август 2008</a></li>
	<li><a href='../date/2008/03.html' title='Март 2008'>Март 2008</a></li>
	<li><a href='../date/2008/02.html' title='Февраль 2008'>Февраль 2008</a></li>
	<li><a href='../date/2007/12.html' title='Декабрь 2007'>Декабрь 2007</a></li>
	<li><a href='../date/2007/11.html' title='Ноябрь 2007'>Ноябрь 2007</a></li>
	<li><a href='../date/2007/10.html' title='Октябрь 2007'>Октябрь 2007</a></li>
	<li><a href='../date/2007/09.html' title='Сентябрь 2007'>Сентябрь 2007</a></li>
	<li><a href='../date/2007/08.html' title='Август 2007'>Август 2007</a></li>
	<li><a href='../date/2007/07/index.html' title='Июль 2007'>Июль 2007</a></li>
	<li><a href='../date/2007/06.html' title='Июнь 2007'>Июнь 2007</a></li>
	<li><a href='../date/2007/05.html' title='Май 2007'>Май 2007</a></li>
				</ul>
			</li>

			
					</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="../../feed">Entries (RSS)</a> and <a href="../../comments/feed">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 16 queries. 0.083 seconds. -->
	</div>
</div> <!-- page -->
</body>
</html>
	
