<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>about NetApp   &raquo; commands</title>

<link rel="stylesheet" href="../../../../wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="about NetApp RSS Feed" href="../../../../feed" />
<link rel="pingback" href="../../../../xmlrpc.php.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.6" />

</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="../../../../index.html" title="about NetApp: Системы хранения данных как предмет разговора">about NetApp</a></h1>
		<p>Системы хранения данных как предмет разговора</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="../../../../index.html">
<input type="text" size="20" name="s" id="s" value="Поиск..."  onblur="if(this.value=='') this.value='Поиск...';" onfocus="if(this.value=='Поиск...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="navbar">
<ul id="nav">
	<li><a href="../../../../index.html">Home</a></li>
	<li class="page_item page-item-153"><a href="../../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content">

	
			<p>Archive for the &#8216;commands&#8217; Category.</p>

 				
		<div class="navigation">
			<div class="alignleft"><a href="3.html">&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="../index.html">Next Entries &raquo;</a></div>
		</div>

						
			<div class="post" id="post-611">
				<h2 class="posttitle"><a href="../../../611/trackback.html" rel="bookmark" title="Permanent Link to Полезные команды: nfsstat">Полезные команды: nfsstat</a></h2>
				<div class="postmetadata">31 Май 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Несколько ранее я рассказывал уже о средствах анализа нагрузки системы по протоколу CIFS, например с помошью команды <strong>cifs top</strong>. Для анализа статистики нагрузки протокола NFS пригодится команда <strong>nfsstat</strong>.</p>
<p>В своем обычном виде команда nfsstat показывает общую статистику по всму трафику NFS и RPC, и полезна при настройке и поиске ошибок сетевой передачи. Однако, если вы включите в системных опциях Data ONTAP по умолчанию выключенную опцию <code>nfs.per_client_stats.enable</code>, то вам будет доступна статистика отдельно по каждому клиенту NFS (под клиентом понимается хост, но не пользователь).</p>
<p>Включим учет статистики раздельно по клиентам:</p>
<p><code>fas1&gt; options nfs.per_client_stats.enable on </code></p>
<p><code>fas1&gt; nfsstat –h [ip | hostname]</code> – покажет статистику отдельно по конкретному клиенту</p>
<p><code>fas1&gt; nfsstat –l</code> – покажет статистику по 256 клиентам по убыванию NFS-активности</p>
<p>Подробнее о команде:   <br /><a href="http://now.netapp.com/NOW/knowledge/docs/ontap/rel732_vs/html/ontap/cmdref/man1/na_nfsstat.1.htm" target="_blank">http://now.netapp.com/NOW/knowledge/docs/ontap/rel732_vs/html/ontap/cmdref/man1/na_nfsstat.1.htm</a></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/useful.html" rel="tag">useful</a><br />					Раздел: <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../611/trackback.html#respond" title="Комментарий к записи Полезные команды: nfsstat">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-602">
				<h2 class="posttitle"><a href="../../../602/trackback.html" rel="bookmark" title="Permanent Link to FlexShare - управление приоритетами томов">FlexShare - управление приоритетами томов</a></h2>
				<div class="postmetadata">24 Май 2010, 11:06 <!-- от  --></div>
				<div class="postentry">
					<p>FlexShare это технология управления приоритетами в обслуживании томов данных, своеобразный <em>квази</em>-QoS (хотя и не QoS в чистом виде). Эта технология входит во все современные версии Data ONTAP, бесплатна, однако сравнительно малоизвестна.<br />
FlexShare задает отноительный приоритет (а не абсолютный, как в &#8220;чистом&#8221; QoS) обслуживания для томов данных. Если с ее помощью вы зададите пониженный приоритет томам данных, используемым для, например, хранения дистрибутивов, образов виртуальных машин, резервных копий, и прочих данных, время доступа к которым не является для ваших задач критичным, и наоборот, повысите приоритет для томов с базой данных или критичными для бизнеса виртуальными машинами, то контроллер будет распределять свое &#8220;внимание&#8221; и процессорные &#8220;тики&#8221; не равномерно, как по умолчанию, а в соответствии с заданными приоритетами.  В результате вы сможете несколько улучшить показатели быстродействия для критичных данных.<br />
<div id="attachment_603" class="wp-caption alignnone" style="width: 491px"><img src="/pics//noflexshare.png" alt="no FlexShare" title="noflexshare" width="481" height="289" class="size-full wp-image-603" /><p class="wp-caption-text">no FlexShare</p></div><br />
<div id="attachment_604" class="wp-caption alignnone" style="width: 493px"><img src="/pics//wflexshare.png" alt="with FlexShare" title="wflexshare" width="483" height="291" class="size-full wp-image-604" /><p class="wp-caption-text">with FlexShare</p></div></p>
<p>Давайте рассмотрим подробнее, что она умеет и как ей пользоваться.<br />
Для того, чтобы глобально включить ее на контроллере надо дать в консоли команду:</p>
</p>
<p><code>fas> priority on</code></p>
</p>
<p>Для более детального управления следует воспользоваться командой <code>priority set</code>:</p>
</p>
<p><code>fas> priority set volume vol1 level=high system=low cache=reuse</code></p>
</p>
<p>Эта команда указывает высокий приоритет обслуживания тома vol1 для операций пользователей и приложений, устанавливает для данного тома пониженный приоритет системным задачам его обслуживания, а также задает политику использования кэша с более быстрым сбросом (flush) его содержимого, по сравнению c политикой по-умолчанию.<br />
Уже установленные приоритеты можно посмотреть с помощью команды:<br />
fas> priority show volume</p>
<p>Остальные опции команды priority вы как всегда можете найти во встроенном хелпе и в выводе команды help priority.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/flexshare.html" rel="tag">flexshare</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/priority.html" rel="tag">priority</a>, <a href="../../../tag/qos.html" rel="tag">qos</a><br />					Раздел: <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../602/trackback.html#comments" title="Комментарий к записи FlexShare - управление приоритетами томов">Комментарии (2)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-577">
				<h2 class="posttitle"><a href="../../../577/trackback.html" rel="bookmark" title="Permanent Link to Скорость RAID Reconstruction">Скорость RAID Reconstruction</a></h2>
				<div class="postmetadata">17 Май 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>При выходе из строя жесткого диска система начинает процесс RAID reconstruction. Время его завершения зависит от загрузки системы задачами ввода-вывода и установленного приоритета задачи реконструкции. Это приоритет (вернее степень влияния на производительность системы в целом задачей реконструкции) может быть настроен с помощью системной опции:</p>
<p><code>fas1&gt; options raid.reconstruct.perf_impact [high | medium | low]</code> </p>
<p>
<p>Обратите внимание, эта опция и ее изменение глобально (для всех RAID-групп системы в целом), и, что важно, не работает для уже запустившейся reconstruction. То есть увидеть слишком долгий процесс восстановления, поменять ее на high и ждать, что процесс ускорится, не стоит.</p>
<p>По умолчанию она установлена в medium, и менять ее стоит только если вы в самом деле хорошо представляете зачем вы это делаете.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/raid.html" rel="tag">raid</a>, <a href="../../../tag/reconstruction.html" rel="tag">reconstruction</a><br />					Раздел: <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>,  <a href="../../tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../577/trackback.html#respond" title="Комментарий к записи Скорость RAID Reconstruction">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-564">
				<h2 class="posttitle"><a href="../../../564/trackback.html" rel="bookmark" title="Permanent Link to Недокументированные команды: hammer">Недокументированные команды: hammer</a></h2>
				<div class="postmetadata">22 Апрель 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>В прошлый раз мы нашли и посмотрели команду <strong>filersio</strong> – внутренний генератор нагрузки ввода-вывода. Однако оказывается, такая штука, как stress test tool, внутри Data ONTAP есть не одна.</p>
<p>Еще один инструмент нагрузочного тестирования системы хранения – <strong>hammer</strong></p>
<p> <code></p>
<p>*** WARNING *** Hammer is a system level stress test.      <br />CPU utilization may approach 100 percent       <br />with very high disk IO rate when hammer is run.       <br />This may adversely affect system performance       <br />and may cause loss of filer service.       <br />Hammer is an undocumented, unsuppported command.</p>
<p> </code><code></p>
<p>usage: hammer [abort|pause|restart|status|      <br />&#160;&#160;&#160;&#160;&#160;&#160; [-f]&lt;# Runs&gt;&lt;fileName&gt;&lt;# BlocksInFile&gt; (&lt;# Runs&gt; == -1 runs hammer forever)|       <br />&#160;&#160;&#160;&#160;&#160;&#160; fill &lt;writeSize&gt; (use all available disk space)]</p>
<p> </code></p>
<p><strong>hammer</strong> это в чистом виде stress load generator, не делающий ничего, кроме нагрузки. Если вы хотите не просто “подвесить систему”, но еще и наблюдать за тем, что эта нагрузка дает вам в плане показателей, воспользуйтесь средствами <strong>sysstat</strong> или <strong>stats</strong>.</p>
<p> <code></p>
<p>filer1*&gt; hammer -f 5 /vol/vol0/hammer.txt 400      <br />Mon Dec&#160; 8 12:32:02 GMT [blacksmith:warning]: blacksmith #0: Starting work.       <br />filer1*&gt; hammer status       <br />blacksmith #0: file /vol/vol0/hammer.txt, 580 KB of 1600 KB writesize 4096 bytes, iteration 1 of 5 – Writing       <br />filer1*&gt; hammer status       <br />blacksmith #0: file /vol/vol0/hammer.txt, 1600 KB of 1600 KB writesize 4096 bytes, iteration 1 of 5 – Writing       <br />filer1*&gt; hammer status       <br />blacksmith #0: file /vol/vol0/hammer.txt, 652 KB of 1600 KB writesize 4096 bytes, iteration 2 of 5 – Writing       <br />filer1*&gt; hammer status       <br />blacksmith #0: file /vol/vol0/hammer.txt, 1600 KB of 1600 KB writesize 4096 bytes, iteration 2 of 5 – Writing       <br />filer1*&gt; Mon Dec&#160; 8 12:32:13 GMT [blacksmith:info]: blacksmith #0: No errors detected. Stopping work</p>
<p> </code></p>
<p>В заключение еще раз предостерегу вас от экспериментов с такими командами на рабочей системе с данными. Все это небезопасно, и может в лучшем случае привсти к временной неработоспособности или недоступности системы, а в худшем – к случайной потере ваших данных.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/tipstricks/index.html" rel="tag">tips&amp;tricks</a>, <a href="../../../tag/undocumented.html" rel="tag">undocumented</a><br />					Раздел: <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>,  <a href="../../techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>,  <a href="../../tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../564/trackback.html#respond" title="Комментарий к записи Недокументированные команды: hammer">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-565">
				<h2 class="posttitle"><a href="../../../565/trackback.html" rel="bookmark" title="Permanent Link to Недокументированные команды: filersio">Недокументированные команды: filersio</a></h2>
				<div class="postmetadata">15 Апрель 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>В недрах Data ONTAP кроме малоизвестных команд можно отрыть и какие-то совсем загадочные вещи. Занятие по отрыванию таких загадок никак нельзя рекомендовать как безопасное, но иногда находятся интересные штуки.</p>
<p>Вот, например, команда <strong>filersio</strong> (доступна в advanced mode)</p>
<p><code>filer1*> filersio<br />
The following commands are available; For more information<br />
filersio help <command><br />
asyncio_pause           asyncio_active          spc1<br />
status                  stop<br />
</code></p>
<p>Эта команда включает встроенный генератор ввода-вывода нагрузки на систему хранения.</p>
<p><code>filer1*> filersio asyncio_active 50 -r 50 4 0 10m 60 5 /vol/vol0/filersio.test -create -print_stats 5<br />
filersio: workload initiated asynchronously. Results will be displayed on the<br />
console after completion<br />
filersio: starting workload asyncio_active, instance 0</p>
<pre>Read I/Os       Avg. read       Max. read       Write I/Os      Avg. write      Max write
                latency(ms)     latency(ms)                     latency(ms)     latency(ms)
6087            0               11              6216            3               981
4410            0               471             4300            5               1551
5323            0               11              5375            4               1121
5439            0               113             5379            4               1151
4354            0               105             4304            5               1674
4307            0               411             4300            5               1171
5459            0               20              5371            5               1260
5384            0               180             5379            4               1071
5439            0               211             5375            4               1011
4396            0               71              4300            5               1311</pre>
<p>Statistics for active_active model, instance 0<br />
Running for 60s<br />
Total read latency(ms)  16383<br />
Read I/Os               51687<br />
Avg. read IOPS          861<br />
Avg. read latency(ms)   0<br />
Max read latency(ms)    471<br />
Total write latency(ms) 286501<br />
Write I/Os              51413<br />
Avg. write IOPS         856<br />
Avg. write latency(ms)  5<br />
Max write latency(ms)   4891<br />
filersio: instance 0: workload completed successfully<br />
</code></p>
<p>Напомню еще раз, что все команды, доступные в advanced mode, могут быть небезопасны, не требуются для повседневного администрировани и конфигурирования, и использование их требует ясного понимания возможных результатов и рисков использования и настоятельно не рекомендуется на “боевых” системах с рабочими даными. ?? уж тем более это так для команд из “недокументированного” и “слабодокументирванного” списка.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/tipstricks/index.html" rel="tag">tips&amp;tricks</a>, <a href="../../../tag/undocumented.html" rel="tag">undocumented</a><br />					Раздел: <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>,  <a href="../../techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>,  <a href="../../tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../565/trackback.html#respond" title="Комментарий к записи Недокументированные команды: filersio">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-563">
				<h2 class="posttitle"><a href="../../../563/trackback.html" rel="bookmark" title="Permanent Link to vol copy или ndmpcopy?">vol copy или ndmpcopy?</a></h2>
				<div class="postmetadata">12 Апрель 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Администратору системы хранения иногда приходится перебрасывать данные с тома на том. Чуть ранее я уже рассказал про один из способов решения, инструменте <a href="../../../518/trackback.html">ndmpcopy</a>, позволяющий произвести копирование данных тома силами самой системы хранения, по протоколу <a href="../../../518/trackback.html">NDMP</a>.</p>
<p>Однако существует и другой способ копирования содержимого тома, это команда vol copy. Оба эти способа бесплатно присутствуют во всех системах хранения NetApp, но имеют отличия, давайте рассмотрим разницу.</p>
<p><strong>ndmpcopy</strong> это копирование по сетевому протоколу NDMP. Даже когда это происходит в пределах одной системы, все равно это копирование происходит по сетевому сокету, и, как правило, этот процесс медленнее, чем копирование <strong>vol copy</strong>, который осуществляется непосредственно, а не по сети.</p>
<p><strong>vol copy</strong> копирует содержимое тома поблочно, в отличие от <strong>ndmpcopy</strong>, причем копируется также и структура блоков, в том виде, в каком она находится на томе. То есть, например, сильно фрагментированный том, при копировании с помощью vol copy будет скопирован также фрагментированным, в то время, как копирование ndmpcopy происходит “пофайлово”, и при этом копирование сложит скопированные данные наиболе оптимальным образом.</p>
<p>Ограничения при использовании vol copy таковы:</p>
<ul>
<li>Том-источник данных и том-получатель данных должны быть одного типа. ??ли оба flexible, или оба traditional </li>
<li>Том-получатель должен быть равен или больше по объему, чем том-источник </li>
<li>Обе системы хранения, участвующие в копировании, должны быть в доверительных отношениях (trust relationship), на обоих должен быть включен доступ по rsh (Remote Shell) </li>
<li>Том-получатель на момент начала копирования должен существовать </li>
<li>Нельзя скопировать root volume </li>
<li>Том-получатель будет полностью затерт содержимым тома-источника </li>
<li>Состояние тома-источника на момент запуска процесса должно быть online, а тома-получателя – offline. </li>
</ul>
</td>
</tr>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/tipstricks/index.html" rel="tag">tips&amp;tricks</a><br />					Раздел: <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>,  <a href="../../techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../563/trackback.html#respond" title="Комментарий к записи vol copy или ndmpcopy?">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-558">
				<h2 class="posttitle"><a href="../../../558/trackback.html" rel="bookmark" title="Permanent Link to Полезные команды: filestats">Полезные команды: filestats</a></h2>
				<div class="postmetadata">5 Апрель 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Малоизвестной, но полезной командой для администратора NAS является команда <strong>filestats</strong>.     <br />С ее помощью можно быстро составить картину распределения файлов на системе хранения по размеру, времени хранения, владельцу, и использовать это в планировании и администрировании.</p>
<p>Вот простой пример использования. Выведем статистику по файлам тома vol0 (системного root-vol), взяв для анализа снэпшот hourly.1:</p>
<pre>toaster&gt; filestats volume vol0 snapshot hourly.1
VOL=vol0 SNAPSHOT=hourly.1
INODES=274528 COUNTED_INODES=875 TOTAL_BYTостой примеррES=458354190 TOTAL_KB=143556

FILE SIZE         CUMULATIVE COUNT       CUMULATIVE TOTAL KB
1K                465                    1576
10K               832                    3356
100K              853                    3980
1M                856                    4660
10M               864                    32808
100M              875                    143524
1G                875                    143254
MAX               875                    143254

AGE(ATIME)        CUMULATIVE COUNT       CUMULATIVE TOTAL KB
0                 0                      0
30D               841                    132780
60D               850                    132932
90D               859                    143464
120D              875                    143528
MAX               875                    143528

UID               COUNT                  TOTAL KB
#0                873                    143528
#20041            2                      0

GID               COUNT                  TOTAL KB
#0                851                    41556
#30               21                     1972
#1                3                      0</pre>
<p>Обратите внимание: счетчик количества выводится “накопительный” (cumulative). То есть, например, число файлов размера “до 1K” равно 465. А число файлов “до 10К (включая и файлы, посчитанные ранее в “до 1К”)” – 832. Таким образом число файлов “больше 1К, но меньше 10К” равно 832-465=367.</p>
<p>Эта же команда имеет и некоторые другие ключи и способы использования, смотрите примеры и описания во встроенной помощи и “манах”.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/tipstricks/index.html" rel="tag">tips&amp;tricks</a><br />					Раздел: <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>,  <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../558/trackback.html#respond" title="Комментарий к записи Полезные команды: filestats">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-560">
				<h2 class="posttitle"><a href="../../../560/trackback.html" rel="bookmark" title="Permanent Link to Полезные команды: led_on">Полезные команды: led_on</a></h2>
				<div class="postmetadata">31 Март 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>??ногда в работе админа случается необходимость найти и идентифицировать, например в целом шкафу дисков, какой-то конкретный. Допустим, вы не ведете подробную документацию по установленой системе (а зря), и расположение дисков и полок системы у вас не записано. Допустим вы хотите извлечь из стойки spare disk и переставить его в другую полку. Как найти правильный диск, и не выдернуть, ненароком, неправильный, рабочий?</p>
<p>На помошь приходит специальная команда led_on</p>
<p><code>fas1&gt; priv set advanced</code> – включаем режим повышенного приоритета (будьте осторожны!)     <br /><code>fas1&gt; led_on 0c.54</code> – зажигает на диске с данным номером светодиод (LED) желтого цвета     <br /><code>fas1&gt; led_off 0c.54</code> – гасит светодиод на диске с данным номером     <br /><code>fas1&gt; priv set</code> – выводит консоль из режима повышенных привелегий</p>
<p>Аналогично работает команда blink_on/blink_off, с понятным отличием, она светодиодом мигает.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/tipstricks/index.html" rel="tag">tips&amp;tricks</a><br />					Раздел: <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>,  <a href="../../tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../560/trackback.html#respond" title="Комментарий к записи Полезные команды: led_on">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-557">
				<h2 class="posttitle"><a href="../../../557/trackback.html" rel="bookmark" title="Permanent Link to Полезные команды: source">Полезные команды: source</a></h2>
				<div class="postmetadata">29 Март 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Хотя в Data ONTAP и нет таких мощных скриптовых средств командной строки, как bash или PowerShell в Windows, но что-то для простейших скриптовых действий все же есть.</p>
<p>Команда называется source, и просто воспроизводит из поданного на вход файла команды одну за другой.</p>
<p><code>fas1&gt; source /etc/my_scripts/vol_create.txt</code></p>
<p>Она может применяться, например, для массового и однообразного изменения каких-то параметров, например на множестве идентичных томов.</p>
<p>Сама по себе команда весьма примитивна, и имет множество недостатков и ограничений, о которых стоит помнить, начиная ее использовать.</p>
<ul>
<li>??сполнение не прерывается и не останавливается в случае ошибок, так что следует быть особенно внимательным при создании скрипта, условием в котором является обязательное выполнение каких-то предшествующих шагов. Особенно внимательно проверяйте опечатки и ошибки в аргументах и ключах.</li>
<li>Команда не умеет делать пайп (|) или перенаправление вывода в лог-файл.</li>
<li>Не поддерживаются wildcards (?, *, %).</li>
<li>Нет условного выполнения (IF THEN ELSE)</li>
<li>Нет операции паузы, так что команды выполняются последовательно и одна за другой, даже если какая-то команда может быть и не завершила операцию (например процесс выполнения команды продолжителен). Простой workaround – запускать команду sysstat между командами.</li>
<li>Почти единственное отклонение от простого листинга команд – возможность использовать # в качестве знака комментария. Строка, начинающаяся с # в подаваемой на вход source последователности команд, игнорируется. </li>
</ul>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/console/index.html" rel="tag">console</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>,  <a href="../../tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../557/trackback.html#respond" title="Комментарий к записи Полезные команды: source">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-556">
				<h2 class="posttitle"><a href="../../../556/trackback.html" rel="bookmark" title="Permanent Link to Полезные команды: dd">Полезные команды: dd</a></h2>
				<div class="postmetadata">25 Март 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Несмотря на то, что Data ONTAP не только не является “Линуксом”, она даже UNIX в общепринятом смысле этого слова <a href="../../../12/trackback.html">не является</a> (не устаю это повторять снова и снова, потому что это один из самых распространенных мифов в отношении NetApp), тем не менее, для удобства администраторов, а первыми администраторами систем хранения NetApp были, конечно же, администраторы UNIX-систем, в ней многое сделано “очень похожим на UNIX”. Структура директорий, правила именования файлов, и даже большинство команд похожи на свои аналоги из мира Юникса.</p>
<p>Вот, например, даже имется хорошо известная команда dd, хотя она и немного спрятана.</p>
<p>Отдайте в консоли команду</p>
<p><code>fas1&gt; priv set advanced </code></p>
<p>Эта команда переведет вас в специальный “расширенный режим”, в котором вы получаете доступ к расширенному набору команд, но, ВН??МАН??Е, эти команды могут быть опасны для работы системы, и для сохранности данных! Пользуйтсь ими с ответственностью, и исключительно на свой страх и риск!    <br />После ввода этой команды вы заметите изменившийся значок подсказки. Он указывает вам на то, что вы работаете в режиме повышенных привилегий. Для того, чтобы вернуться на обычный уровень, введите команду <strong>priv set admin</strong> или просто <strong>priv set</strong></p>
<p>Среди множества дополнительных команд вам будет доступна и команда <strong>dd</strong> – disk dump, прямого посектороного копирования.</p>
<p><code>fas1*&gt; dd if=/vol/vol0/etc/rc of=/vol/newroot/etc/rc</code> – копирование rc в новое место&#160; <br />&#160;&#160; <br />Обратите внимание, вы НЕ можете запустить команду <strong>dd</strong> в фоне (еще раз напомню, что Data ONTAP это не линукс, и внешняя схожесть команд еще не значит внутреннего подобия), поэтому, если вы используете <strong>dd</strong>, то все копирование будет происходить “основной задачей”, наберитесь терпения. Кстати это еще один повод использовать вместо <strong>dd</strong> что-нибудь более продвинутое, например <strong>ndmpcopy</strong>.     <br />Прервать работу <strong>dd</strong> можно нажатием Ctrl-C</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/console/index.html" rel="tag">console</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>,  <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../../tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../556/trackback.html#respond" title="Комментарий к записи Полезные команды: dd">Комментарий</a>									 </div>
			</div>
	
		
		<div class="navigation">
			<div class="alignleft"><a href="3.html">&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="../index.html">Next Entries &raquo;</a></div>
		</div>
		
	
	</div>
	<div id="sidebar">
		<ul>
			
			
			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Автор</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			<li class="pagenav"><h2>Страницы</h2><ul><li class="page_item page-item-153"><a href="../../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul></li>
			<li><h2>Рубрики</h2>
				<ul>
					<li class="cat-item cat-item-89 current-cat"><a href="../index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;">commands</a>
</li>
	<li class="cat-item cat-item-37"><a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;">howto</a>
</li>
	<li class="cat-item cat-item-52"><a href="../../justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;">justread</a>
</li>
	<li class="cat-item cat-item-51"><a href="../../review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;">review</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;">techtalk</a>
</li>
	<li class="cat-item cat-item-71"><a href="../../tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;">tricks</a>
</li>
	<li class="cat-item cat-item-95"><a href="../../utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;">utilities</a>
</li>
	<li class="cat-item cat-item-44"><a href="../../whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;">whoisho</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;">новости</a>
</li>
	<li class="cat-item cat-item-387"><a href="../../opros.html" title="Просмотреть все записи в рубрике &laquo;опрос&raquo;">опрос</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;">переводы</a>
</li>
	<li class="cat-item cat-item-40"><a href="../../citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;">цитаты</a>
</li>
				</ul>
			</li>

			<li><h2>Архивы</h2>
				<ul>
					<li><a href='../../../date/2018/01.html' title='Январь 2018'>Январь 2018</a></li>
	<li><a href='../../../date/2015/10.html' title='Октябрь 2015'>Октябрь 2015</a></li>
	<li><a href='../../../date/2015/04.html' title='Апрель 2015'>Апрель 2015</a></li>
	<li><a href='../../../date/2015/03.html' title='Март 2015'>Март 2015</a></li>
	<li><a href='../../../date/2015/01.html' title='Январь 2015'>Январь 2015</a></li>
	<li><a href='../../../date/2014/12.html' title='Декабрь 2014'>Декабрь 2014</a></li>
	<li><a href='../../../date/2014/11.html' title='Ноябрь 2014'>Ноябрь 2014</a></li>
	<li><a href='../../../date/2014/10.html' title='Октябрь 2014'>Октябрь 2014</a></li>
	<li><a href='../../../date/2014/09.html' title='Сентябрь 2014'>Сентябрь 2014</a></li>
	<li><a href='../../../date/2014/08.html' title='Август 2014'>Август 2014</a></li>
	<li><a href='../../../date/2014/07.html' title='Июль 2014'>Июль 2014</a></li>
	<li><a href='../../../date/2014/06.html' title='Июнь 2014'>Июнь 2014</a></li>
	<li><a href='../../../date/2014/05.html' title='Май 2014'>Май 2014</a></li>
	<li><a href='../../../date/2014/04.html' title='Апрель 2014'>Апрель 2014</a></li>
	<li><a href='../../../date/2014/03.html' title='Март 2014'>Март 2014</a></li>
	<li><a href='../../../date/2014/02.html' title='Февраль 2014'>Февраль 2014</a></li>
	<li><a href='../../../date/2014/01.html' title='Январь 2014'>Январь 2014</a></li>
	<li><a href='../../../date/2013/12.html' title='Декабрь 2013'>Декабрь 2013</a></li>
	<li><a href='../../../date/2013/11.html' title='Ноябрь 2013'>Ноябрь 2013</a></li>
	<li><a href='../../../date/2013/10.html' title='Октябрь 2013'>Октябрь 2013</a></li>
	<li><a href='../../../date/2013/09.html' title='Сентябрь 2013'>Сентябрь 2013</a></li>
	<li><a href='../../../date/2013/08.html' title='Август 2013'>Август 2013</a></li>
	<li><a href='../../../date/2013/07.html' title='Июль 2013'>Июль 2013</a></li>
	<li><a href='../../../date/2013/06.html' title='Июнь 2013'>Июнь 2013</a></li>
	<li><a href='../../../date/2013/05.html' title='Май 2013'>Май 2013</a></li>
	<li><a href='../../../date/2013/04.html' title='Апрель 2013'>Апрель 2013</a></li>
	<li><a href='../../../date/2013/03.html' title='Март 2013'>Март 2013</a></li>
	<li><a href='../../../date/2013/02.html' title='Февраль 2013'>Февраль 2013</a></li>
	<li><a href='../../../date/2013/01.html' title='Январь 2013'>Январь 2013</a></li>
	<li><a href='../../../date/2012/12.html' title='Декабрь 2012'>Декабрь 2012</a></li>
	<li><a href='../../../date/2012/11.html' title='Ноябрь 2012'>Ноябрь 2012</a></li>
	<li><a href='../../../date/2012/10.html' title='Октябрь 2012'>Октябрь 2012</a></li>
	<li><a href='../../../date/2012/09.html' title='Сентябрь 2012'>Сентябрь 2012</a></li>
	<li><a href='../../../date/2012/08.html' title='Август 2012'>Август 2012</a></li>
	<li><a href='../../../date/2012/07.html' title='Июль 2012'>Июль 2012</a></li>
	<li><a href='../../../date/2012/06.html' title='Июнь 2012'>Июнь 2012</a></li>
	<li><a href='../../../date/2012/05.html' title='Май 2012'>Май 2012</a></li>
	<li><a href='../../../date/2012/04.html' title='Апрель 2012'>Апрель 2012</a></li>
	<li><a href='../../../date/2012/03.html' title='Март 2012'>Март 2012</a></li>
	<li><a href='../../../date/2012/02.html' title='Февраль 2012'>Февраль 2012</a></li>
	<li><a href='../../../date/2012/01.html' title='Январь 2012'>Январь 2012</a></li>
	<li><a href='../../../date/2011/12.html' title='Декабрь 2011'>Декабрь 2011</a></li>
	<li><a href='../../../date/2011/11.html' title='Ноябрь 2011'>Ноябрь 2011</a></li>
	<li><a href='../../../date/2011/10/index.html' title='Октябрь 2011'>Октябрь 2011</a></li>
	<li><a href='../../../date/2011/09/index.html' title='Сентябрь 2011'>Сентябрь 2011</a></li>
	<li><a href='../../../date/2011/08.html' title='Август 2011'>Август 2011</a></li>
	<li><a href='../../../date/2011/07/index.html' title='Июль 2011'>Июль 2011</a></li>
	<li><a href='../../../date/2011/06/index.html' title='Июнь 2011'>Июнь 2011</a></li>
	<li><a href='../../../date/2011/05/index.html' title='Май 2011'>Май 2011</a></li>
	<li><a href='../../../date/2011/04/index.html' title='Апрель 2011'>Апрель 2011</a></li>
	<li><a href='../../../date/2011/03/index.html' title='Март 2011'>Март 2011</a></li>
	<li><a href='../../../date/2011/02.html' title='Февраль 2011'>Февраль 2011</a></li>
	<li><a href='../../../date/2011/01.html' title='Январь 2011'>Январь 2011</a></li>
	<li><a href='../../../date/2010/12.html' title='Декабрь 2010'>Декабрь 2010</a></li>
	<li><a href='../../../date/2010/11/index.html' title='Ноябрь 2010'>Ноябрь 2010</a></li>
	<li><a href='../../../date/2010/10/index.html' title='Октябрь 2010'>Октябрь 2010</a></li>
	<li><a href='../../../date/2010/09/index.html' title='Сентябрь 2010'>Сентябрь 2010</a></li>
	<li><a href='../../../date/2010/08.html' title='Август 2010'>Август 2010</a></li>
	<li><a href='../../../date/2010/07/index.html' title='Июль 2010'>Июль 2010</a></li>
	<li><a href='../../../date/2010/06.html' title='Июнь 2010'>Июнь 2010</a></li>
	<li><a href='../../../date/2010/05.html' title='Май 2010'>Май 2010</a></li>
	<li><a href='../../../date/2010/04/index.html' title='Апрель 2010'>Апрель 2010</a></li>
	<li><a href='../../../date/2010/03/index.html' title='Март 2010'>Март 2010</a></li>
	<li><a href='../../../date/2010/02.html' title='Февраль 2010'>Февраль 2010</a></li>
	<li><a href='../../../date/2010/01.html' title='Январь 2010'>Январь 2010</a></li>
	<li><a href='../../../date/2009/12/index.html' title='Декабрь 2009'>Декабрь 2009</a></li>
	<li><a href='../../../date/2009/11/index.html' title='Ноябрь 2009'>Ноябрь 2009</a></li>
	<li><a href='../../../date/2009/10.html' title='Октябрь 2009'>Октябрь 2009</a></li>
	<li><a href='../../../date/2009/09.html' title='Сентябрь 2009'>Сентябрь 2009</a></li>
	<li><a href='../../../date/2009/08/index.html' title='Август 2009'>Август 2009</a></li>
	<li><a href='../../../date/2009/07/index.html' title='Июль 2009'>Июль 2009</a></li>
	<li><a href='../../../date/2009/06.html' title='Июнь 2009'>Июнь 2009</a></li>
	<li><a href='../../../date/2009/05.html' title='Май 2009'>Май 2009</a></li>
	<li><a href='../../../date/2009/04.html' title='Апрель 2009'>Апрель 2009</a></li>
	<li><a href='../../../date/2009/03.html' title='Март 2009'>Март 2009</a></li>
	<li><a href='../../../date/2009/02.html' title='Февраль 2009'>Февраль 2009</a></li>
	<li><a href='../../../date/2009/01.html' title='Январь 2009'>Январь 2009</a></li>
	<li><a href='../../../date/2008/12.html' title='Декабрь 2008'>Декабрь 2008</a></li>
	<li><a href='../../../date/2008/11.html' title='Ноябрь 2008'>Ноябрь 2008</a></li>
	<li><a href='../../../date/2008/10.html' title='Октябрь 2008'>Октябрь 2008</a></li>
	<li><a href='../../../date/2008/09.html' title='Сентябрь 2008'>Сентябрь 2008</a></li>
	<li><a href='../../../date/2008/08.html' title='Август 2008'>Август 2008</a></li>
	<li><a href='../../../date/2008/03.html' title='Март 2008'>Март 2008</a></li>
	<li><a href='../../../date/2008/02.html' title='Февраль 2008'>Февраль 2008</a></li>
	<li><a href='../../../date/2007/12.html' title='Декабрь 2007'>Декабрь 2007</a></li>
	<li><a href='../../../date/2007/11.html' title='Ноябрь 2007'>Ноябрь 2007</a></li>
	<li><a href='../../../date/2007/10.html' title='Октябрь 2007'>Октябрь 2007</a></li>
	<li><a href='../../../date/2007/09.html' title='Сентябрь 2007'>Сентябрь 2007</a></li>
	<li><a href='../../../date/2007/08.html' title='Август 2007'>Август 2007</a></li>
	<li><a href='../../../date/2007/07/index.html' title='Июль 2007'>Июль 2007</a></li>
	<li><a href='../../../date/2007/06.html' title='Июнь 2007'>Июнь 2007</a></li>
	<li><a href='../../../date/2007/05.html' title='Май 2007'>Май 2007</a></li>
				</ul>
			</li>

			
					</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="../../../../feed">Entries (RSS)</a> and <a href="../../../../comments/feed">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 15 queries. 0.091 seconds. -->
	</div>
</div> <!-- page -->
</body>
</html>
