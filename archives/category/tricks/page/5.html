<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>about NetApp   &raquo; tricks</title>

<link rel="stylesheet" href="../../../../wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="about NetApp RSS Feed" href="../../../../feed" />
<link rel="pingback" href="../../../../xmlrpc.php.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.6" />

</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="../../../../index.html" title="about NetApp: Системы хранения данных как предмет разговора">about NetApp</a></h1>
		<p>Системы хранения данных как предмет разговора</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="../../../../index.html">
<input type="text" size="20" name="s" id="s" value="Поиск..."  onblur="if(this.value=='') this.value='Поиск...';" onfocus="if(this.value=='Поиск...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="navbar">
<ul id="nav">
	<li><a href="../../../../index.html">Home</a></li>
	<li class="page_item page-item-153"><a href="../../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content">

	
			<p>Archive for the &#8216;tricks&#8217; Category.</p>

 				
		<div class="navigation">
			<div class="alignleft"><a href="6.html">&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="4.html">Next Entries &raquo;</a></div>
		</div>

						
			<div class="post" id="post-556">
				<h2 class="posttitle"><a href="../../../556/trackback.html" rel="bookmark" title="Permanent Link to Полезные команды: dd">Полезные команды: dd</a></h2>
				<div class="postmetadata">25 Март 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Несмотря на то, что Data ONTAP не только не является “Линуксом”, она даже UNIX в общепринятом смысле этого слова <a href="../../../12/trackback.html">не является</a> (не устаю это повторять снова и снова, потому что это один из самых распространенных мифов в отношении NetApp), тем не менее, для удобства администраторов, а первыми администраторами систем хранения NetApp были, конечно же, администраторы UNIX-систем, в ней многое сделано “очень похожим на UNIX”. Структура директорий, правила именования файлов, и даже большинство команд похожи на свои аналоги из мира Юникса.</p>
<p>Вот, например, даже имется хорошо известная команда dd, хотя она и немного спрятана.</p>
<p>Отдайте в консоли команду</p>
<p><code>fas1&gt; priv set advanced </code></p>
<p>Эта команда переведет вас в специальный “расширенный режим”, в котором вы получаете доступ к расширенному набору команд, но, ВН??МАН??Е, эти команды могут быть опасны для работы системы, и для сохранности данных! Пользуйтсь ими с ответственностью, и исключительно на свой страх и риск!    <br />После ввода этой команды вы заметите изменившийся значок подсказки. Он указывает вам на то, что вы работаете в режиме повышенных привилегий. Для того, чтобы вернуться на обычный уровень, введите команду <strong>priv set admin</strong> или просто <strong>priv set</strong></p>
<p>Среди множества дополнительных команд вам будет доступна и команда <strong>dd</strong> – disk dump, прямого посектороного копирования.</p>
<p><code>fas1*&gt; dd if=/vol/vol0/etc/rc of=/vol/newroot/etc/rc</code> – копирование rc в новое место&#160; <br />&#160;&#160; <br />Обратите внимание, вы НЕ можете запустить команду <strong>dd</strong> в фоне (еще раз напомню, что Data ONTAP это не линукс, и внешняя схожесть команд еще не значит внутреннего подобия), поэтому, если вы используете <strong>dd</strong>, то все копирование будет происходить “основной задачей”, наберитесь терпения. Кстати это еще один повод использовать вместо <strong>dd</strong> что-нибудь более продвинутое, например <strong>ndmpcopy</strong>.     <br />Прервать работу <strong>dd</strong> можно нажатием Ctrl-C</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/console/index.html" rel="tag">console</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>,  <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../556/trackback.html#respond" title="Комментарий к записи Полезные команды: dd">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-547">
				<h2 class="posttitle"><a href="../../../547/trackback.html" rel="bookmark" title="Permanent Link to Syslog Translator">Syslog Translator</a></h2>
				<div class="postmetadata">18 Март 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Несмотря на то, что в целом ONTAP стремится быть понятной и “самоописательной”, как в своих командах, так и в сообщениях в логах, в них нередко встречаются сообщения довольно “загадочные”.</p>
<p>Для того, чтобы лучше разобраться в сообщениях syslog, на сайте NOW (NetApp on Web) есть полезная служба: <a href="https://now.netapp.com/eservice/ems">System Log Translator</a><em>     <br />ниже – скриншот:</em></p>
<p><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="/pics//image31.png" width="878" height="181" /> </p>
<p>Например, мы видим в логе сообщение:</p>
<p>[scsitarget.partnerPath.misconfigured:error]: FCP Partner Path Misconfigured - Host I/O access through a non-primary and non-optimal path was detected. </p>
<p>Введенное в Syslog Translator оно покажет следующее:</p>
<p><a href="/pics//image32.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="/pics//image-thumb17.png" width="667" height="161" /></a> </p>
<p>Уже гораздо понятнее что делать и куда бечь.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/now.html" rel="tag">now</a>, <a href="../../../tag/support.html" rel="tag">support</a>, <a href="../../../tag/tools.html" rel="tag">tools</a>, <a href="../../../tag/web.html" rel="tag">web</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>,  <a href="../../utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;" rel="category tag">utilities</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../547/trackback.html#respond" title="Комментарий к записи Syslog Translator">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-548">
				<h2 class="posttitle"><a href="../../../548/trackback.html" rel="bookmark" title="Permanent Link to Полезные команды: cifs top">Полезные команды: cifs top</a></h2>
				<div class="postmetadata">15 Март 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Если с занимающими много места на дисках пользователями NAS можно справиться механизмом квот, то что делать с пользователями, которые используют много, но не места, а системных ресурсов, например загружая систему большим числом операций ввода-вывода?</p>
<p>Прежде всего таких следует найти и оценить загрузку от них. В этом поможет команда <strong>cifs top</strong>.</p>
<p>Для начала нам надо включить системную опцию:</p>
<p><code>fas1&gt; options cifs.per_client_stats.enable on </code></p>
<p>Далее, собрав некоторую статистику, введем команду:</p>
<p><code>fas1&gt; cifs top –n 3 –s w</code> - показать трех самых активных пользователей, отсортировав список по объемам записи</p>
<p><code>&#160;&#160;&#160; ops/s&#160; reads(n, KB/s) writes(n, KB/s) suspect/s&#160;&#160; IP&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Name      <br />&#160;&#160;&#160;&#160; 263 |&#160;&#160;&#160;&#160; 29&#160;&#160; 215 |&#160;&#160;&#160;&#160; 137&#160;&#160; 627 |&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0 | 10.56.10.120 ENGR\varun       <br />&#160;&#160;&#160;&#160; 248 |&#160;&#160;&#160;&#160; 27&#160;&#160; 190 |&#160;&#160;&#160;&#160; 126&#160;&#160; 619 |&#160;&#160;&#160;&#160;&#160;&#160;&#160; 1 | 10.56.10.120 ENGR\jill       <br />&#160;&#160;&#160;&#160; 246 |&#160;&#160;&#160;&#160; 26&#160;&#160; 195 |&#160;&#160;&#160;&#160; 125&#160;&#160; 616 |&#160;&#160;&#160;&#160;&#160;&#160; 19 | 10.56.12.118 MKTG\bob       <br /></code></p>
<p>&#160;</p>
<p>Более подробно о доступных ключах команды можно узнать из встроенной документации и манов.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/cifs.html" rel="tag">cifs</a>, <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/nas.html" rel="tag">nas</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/tipstricks/index.html" rel="tag">tips&amp;tricks</a><br />					Раздел: <a href="../../commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>,  <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../548/trackback.html#respond" title="Комментарий к записи Полезные команды: cifs top">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-543">
				<h2 class="posttitle"><a href="../../../543/trackback.html" rel="bookmark" title="Permanent Link to Полезные команды: logger">Полезные команды: logger</a></h2>
				<div class="postmetadata">11 Март 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Простая, малоизвестная, но весьма полезная команда – <strong>logger</strong>. Эта команда пишет данную ей в аргументе текстовую строку в системный лог (/etc/messages). С ее помошью можно заносить в лог определенные записи, например отмечать там свои действия.</p>
<p><code>fas1&gt; logger&#160;&#160; *** Starting shelf firmware upgrade ***</code> </p>
<p>Запущенная без аргумента она ожидает ввода со stdin (клавиатуры), завершаемого “по юниксному” – точкой в начале новой строки</p>
<p><code>fas1&gt; logger&#160; <br />&#8212;&#8211; &gt; System going down for UPS system maintenance&#160; &lt; &#8212;&#8211;       <br />System is expected to halt ungracefully while we test battery duration       <br />-&#160; &gt; Sysadmin       <br />.</code></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/tipstricks/index.html" rel="tag">tips&amp;tricks</a>, <a href="../../../tag/useful.html" rel="tag">useful</a><br />					Раздел: <a href="../../commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>,  <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../543/trackback.html#respond" title="Комментарий к записи Полезные команды: logger">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-541">
				<h2 class="posttitle"><a href="../../../541/trackback.html" rel="bookmark" title="Permanent Link to Banner message в консоли">Banner message в консоли</a></h2>
				<div class="postmetadata">4 Март 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>В админской консоли, будь то терминал консольного порта, телнет или ssh, при подключении можно вывести на экран подключающегося (до ведения логина) какую-нибудь полезную информацию. В Linux/UNIX это часто называется banner или motd (message of the day).</p>
<p>Например туда можно написать какую-нибудь полезную информацию о контакте с дежурным админом:</p>
<p><code>В экстренных случаях, для контакта с системным администратором данной системы, позвоните по номеру +7-916-1234567 (круглосуточно)</code> </p>
<p>??ли принадлежности данной системы в большом хозяйстве датацентра:</p>
<p><code>Данная система хранения принадлежит отделу автоматизации ОАО Проммехавтоматика (комната 414, здание Б), ответственный Приходько Б.П.</code> </p>
<p>??ли вывесить в нем строгое предупреждение любителям посканировать открытые порты:</p>
<p><code>Все что вы получаете на свой компьютер может быть использовано против вас. Обращение к данной системе записывается, оставайтесь на месте, за вами выехали.</code> </p>
<p>Для того, чтобы вывести сообщение при подключении, запишите его в файл /etc/issue или /etc/motd</p>
<p>Самым простым способом будет сделать это непосредственно из консоли с помощью команды wrfile, которая перенаправляет нажатия клавиш в файл, завершить запись файла можно нажатием Ctrl-C:</p>
<p><code>fas&gt; wrfile /etc/issue      <br />Warning: This system to be accessed only by Acme Corporation employees.       <br />Have a nice day.       <br />&#160; <br />&lt;Ctrl+C&gt; error: broken pipe </code></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/console/index.html" rel="tag">console</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/tipstricks/index.html" rel="tag">tips&amp;tricks</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../541/trackback.html#respond" title="Комментарий к записи Banner message в консоли">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-540">
				<h2 class="posttitle"><a href="../../../540/trackback.html" rel="bookmark" title="Permanent Link to Блокировка трафика протоколов на портах">Блокировка трафика протоколов на портах</a></h2>
				<div class="postmetadata">1 Март 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>??ногда бывает важно сделать так, чтобы трафик определенных протоколов вообще не ходил по определенным портам. Например, у нас есть система хранения, лицензированы протоколы iSCSI, CIFS и настроена репликация SnapMirror. Каждый из этих протоколов работает в своей физической сети. По CIFS ходят юзеры за файлами, по iSCSI прицеплены сервера, а SnapMirror льет свои данные по третьей сети, выделенной только под трафик репликации.</p>
<p>?? мы хотели бы гарантировать, что каждый трафик будет существовать только в своей сети. До ONTAP 7.3 минимальные средства такого управления были только для iSCSI. Можно было разрешить или запретить iSCSI на конкретном порту, и только. Но начиная с 7.3 появилась новая возможность.</p>
<p> <code>fas&gt; options interface.cifs.blocked e0b</code>   <br /><code>fas&gt; options interface.iscsi.blocked e1a,e1b,e1c,e1d</code>   <br /><code>fas&gt; options interface.nfs.blocked e0a,e0c</code>   <br /><code>fas&gt; options interface.snapmirror.blocked e0d</code>
</p>
<p>??з приведенных примеров, как мне кажется, все понятно. Обратите внимание, что настройки на обоих контроллерах кластера должны быть строго идентичны! Также имейте ввиду, что данные настройки не работают для iSCSI HBA и TOE-карт, то есть это только для обычных NIC, как onboard, так и карт расширения.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/ethernet.html" rel="tag">ethernet</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/options.html" rel="tag">options</a>, <a href="../../../tag/tricks/index.html" rel="tag">tricks</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../540/trackback.html#comments" title="Комментарий к записи Блокировка трафика протоколов на портах">Комментарии (2)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-489">
				<h2 class="posttitle"><a href="../../../489/trackback.html" rel="bookmark" title="Permanent Link to Консольный кабель и переустановка системы">Консольный кабель и переустановка системы</a></h2>
				<div class="postmetadata">14 Январь 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>??ногда пользователям попадается система хранения с “богатым прошлым”, “доставшаяся в наследство”, или иной странный некомплект. Часто встает вопрос, как привести такую систему в исходное состояние, избавившись от “тяжелого наследства” установленной конфигурации прежних владельцев.</p>
<p>Для начала, вам следует найти консольный кабель. Он идет в комплекте поставки но, в случае, когда концы системы утеряны, бывает с ними же уходит и кабель.</p>
<p>В качестве консольного кабеля прекрасно подойдет аналогичный консольный кабель RJ-45-to-DB-9 от оборудования Cisco. Его распиновка такова: </p>
<pre>Pinouts RJ45
Pin# Signal
1    connected to pin 8
2    Not connected
3    TXD (from appliance)
4    GND
5    GND
6    RXD (to appliance)
7    Not connected
8    connected to pin 1 </pre>
<p>Для справки также привожу распиновку стандартного RS-232 serial DB-9 </p>
<pre>Pinouts DB9
Pin# Signal Data Flow Description
1    DCD    input     data carrier detected
2    SIN    input     serial input
3   SOUT    output    serial output
4    DTR    output    data terminal ready
5    GND    N/A       signal ground
6    DSR    input     data set ready
7    RTS    output    request to send
8    CTS    input     clear to send
9     RI    input     ring indicator </pre>
<p>Для сброса системы в “состояние с завода” следует выполнить в консоли загруженной системы, войдя от имени root, следующие команды:</p>
<p>&gt;priv set advanced</p>
<p>&gt;halt -c factory </p>
<p>После перезагрузки все ранее сделанные изменения конфигурации в /etc сотрутся, и будет запущен стартовый скрипт setup, обеспечивающий начальную установку впервые включенной системы.</p>
<p>Если необходимо сменить неизвестный или утерянный пароль root, следует, с подключенным к serial port кабелем и консолью, включить контроллер, и, при загрузке, на предложенную подсказку, нажать Ctrl-C и выбрать (3) Change password.</p>
<p>Обратите внимание, что сбросить пароль root возможно только с консольным подключением в контроллер.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/hardware.html" rel="tag">hardware</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/tips.html" rel="tag">tips</a>, <a href="../../../tag/tricks/index.html" rel="tag">tricks</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../489/trackback.html#respond" title="Комментарий к записи Консольный кабель и переустановка системы">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-482">
				<h2 class="posttitle"><a href="../../../482/trackback.html" rel="bookmark" title="Permanent Link to Как проверить и восстановить целостность WAFL?">Как проверить и восстановить целостность WAFL?</a></h2>
				<div class="postmetadata">11 Январь 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Возможно вы уже знакомы с так называемым special boot menu, которое появляется, если при загрузке с сериальной консоли нажать Ctrl-C. Любопытно, что кроме 6 предлагаемых вариантов, в этом меню есть и скрытые варианты. Например, если туда, вместо предлагаемых номеров, ввести <code>WAFL_check [aggrname]</code>, где [aggrname] это имя соответствующего аггрегейта, то начнется подробная проверка консистентнсти WAFL на нем. Это может помочь если, по какой-то причине, состояние дисков и WAFL на них настолько нарушено, что система хранения не загружается, или не в состоянии разрулить проблему обычными средствами.</p>
<p>По сути это аналог fsck в single mode для привычных unix-type filesystem.</p>
<p>Пример:</p>
<p><code>Special boot options menu will be available.<br />
NetApp Release 7.0.4P1: Mon Feb 27 14:36:15 PST 2006<br />
Copyright (c) 1992-2006 Network Appliance, Inc.<br />
Starting boot on Sat Mar 24 15:36:18 GMT 2007<br />
(1) Normal boot.<br />
(2) Boot without /etc/rc.<br />
(3) Change password.<br />
(4) Initialize all disks.<br />
(4a) Same as option 4, but create a flexible root volume.<br />
(5) Maintenance mode boot.<br />
Selection (1-5)? WAFL_check aggr01<br />
Sat Mar 24 15:38:15 GMT [wafl.vol.inconsistent:ALERT]: Aggregate aggr01 is inconsistent. Please contact NetApp Customer Support.<br />
Sat Mar 24 15:38:15 GMT [raid.vol.replay.nvram:info]: Performing raid replay on volume(s)<br />
Sat Mar 24 15:38:15 GMT [raid.cksum.replay.summary:info]: Replayed 0 checksum blocks.<br />
Sat Mar 24 15:38:15 GMT [raid.stripe.replay.summary:info]: Replayed 0 stripes.<br />
Checking aggr01&#8230;<br />
WAFL_check NetApp Release 7.0.4P1<br />
Starting at Sat Mar 24 15:38:17 GMT 2007<br />
Phase 1: Verify fsinfo blocks.<br />
Phase 2: Verify metadata indirect blocks.<br />
Phase 3: Scan inode file.<br />
Phase 3a: Scan inode file special files.<br />
Phase 3a time in seconds: 9<br />
Phase 3b: Scan inode file normal files.<br />
(inodes 5%)<br />
(inodes 10%)<br />
&#8230;<br />
(inodes 92%)<br />
(inodes 97%)<br />
(inodes 99%)</code></p>
<p>Следует также отметить, что не зря эта команда запрятана так далеко и неочевидно. WAFL зарекомендовала себя чрезвычайно стабильной и надежной файловой системой, и нужда в таком своеобразном fsck возникает, на самом деле, очень редко.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/maintenance.html" rel="tag">maintenance</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/wafl/index.html" rel="tag">wafl</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../../techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../482/trackback.html#respond" title="Комментарий к записи Как проверить и восстановить целостность WAFL?">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-454">
				<h2 class="posttitle"><a href="../../../454/trackback.html" rel="bookmark" title="Permanent Link to В записную книжку админа NetApp (часть 5)">В записную книжку админа NetApp (часть 5)</a></h2>
				<div class="postmetadata">17 Декабрь 2009, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Заканчиваем наш длинный список команд, полезных для повседневного использования админом NetApp.</p>
<ul>
<li><strong>snapmirror intialize</strong> : инициализирует отношения репликации snapmirror</li>
<li><strong>snapmirror update</strong> : обновляет вручную реплику snapmirror</li>
<li><strong>snapmirror resync</strong> : ресинхронизирует snapmirror</li>
<li><strong>snapmirror quiesce</strong> : приостанавливает связь реплик snapmirror</li>
<li><strong>snapmirror break</strong> : разбивает установленные отношения репликации snapmirror</li>
<li><strong>snapmirror abort</strong> : прерывает работу snapmirror</li>
<li><strong>snapmirror status</strong> : показывает статус snapmirror</li>
<li><strong>lock status -h</strong> : показывает локи, удерживаемые контроллером</li>
<li><strong>sm_mon</strong> : управляет локами</li>
<li><strong>storage download shelf</strong> : устанавливает прошивки полок</li>
<li><strong>software get</strong> : загружает на контроллер OS</li>
<li><strong>software install</strong> : устанавливает OS</li>
<li><strong>download</strong> : обновляет установленную OS</li>
<li><strong>cf status</strong> : показывает статус кластера</li>
<li><strong>cf takeover</strong> : переносит на себя ресурсы кластерного партнера</li>
<li><strong>cf giveback</strong> : возвращает ресурсы кластерного партнера</li>
<li><strong>reboot</strong> : перегружает контроллер</li>
</ul>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/command.html" rel="tag">command</a>, <a href="../../../tag/console/index.html" rel="tag">console</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../454/trackback.html#comments" title="Комментарий к записи В записную книжку админа NetApp (часть 5)">1 комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-453">
				<h2 class="posttitle"><a href="../../../453/trackback.html" rel="bookmark" title="Permanent Link to В записную книжку админа NetApp (часть 4)">В записную книжку админа NetApp (часть 4)</a></h2>
				<div class="postmetadata">10 Декабрь 2009, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Продолжим список полезных команд для “записной книжки админа”</p>
<ul>
<li><strong>ndmpcopy <em>&lt;src-path&gt; &lt;dst-path&gt;</em></strong> : запускает ndmpcopy</li>
<li><strong>ndmpd status</strong> : показывает статус ndmpd</li>
<li><strong>ndmpd killall</strong> : прерывает все процессы ndmpd</li>
<li><strong>ifconfig</strong> : показывает/устанавливает адреса IP для сетевых интерфейсов</li>
<li><strong>vif create</strong> : создает VIF (bonding/trunking/teaming)</li>
<li><strong>vif status</strong> : показывает статус vif</li>
<li><strong>netstat</strong> : отображает сетевую статистику</li>
<li><strong>sysstat -us 1</strong> : начинает выводить показатели загрузки системы через каждую 1 секунду (crtl-c для того, чтобы остановить)</li>
<li><strong>nfsstat</strong> : выводит статистику nfs</li>
<li><strong>nfsstat -l</strong> : выводит статистику nfs по клиентам</li>
<li><strong>nfs_hist</strong> : показывает гистограмму операций nfs</li>
<li><strong>statit</strong> : запускает/останавливает сборку показаний производительности [-b &quot;begins&quot; / -e &quot;ends&quot;]</li>
<li><strong>stats</strong> : показывает статистику для всех счетчиков системы хранения. Смотри man для деталей и подробностей</li>
<li><strong>ifstat</strong> : показывает статистику сетевых интерфейсов</li>
<li><strong>qtree stats</strong> : показывает статистику ввода-вывода для qtree</li>
<li><strong>environment</strong> : показывает детальную информацию по состоянию (температура и прочее) полок и контроллера</li>
<li><strong>storage show <em>&lt;disk|shelf|adapter&gt;</em></strong> : показывает детальную информацию по компонентам системы хранения</li>
</ul>
<p>окончание следует.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/console/index.html" rel="tag">console</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../453/trackback.html#respond" title="Комментарий к записи В записную книжку админа NetApp (часть 4)">Комментарий</a>									 </div>
			</div>
	
		
		<div class="navigation">
			<div class="alignleft"><a href="6.html">&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="4.html">Next Entries &raquo;</a></div>
		</div>
		
	
	</div>
	<div id="sidebar">
		<ul>
			
			
			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Автор</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			<li class="pagenav"><h2>Страницы</h2><ul><li class="page_item page-item-153"><a href="../../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul></li>
			<li><h2>Рубрики</h2>
				<ul>
					<li class="cat-item cat-item-89"><a href="../../commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;">commands</a>
</li>
	<li class="cat-item cat-item-37"><a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;">howto</a>
</li>
	<li class="cat-item cat-item-52"><a href="../../justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;">justread</a>
</li>
	<li class="cat-item cat-item-51"><a href="../../review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;">review</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;">techtalk</a>
</li>
	<li class="cat-item cat-item-71 current-cat"><a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;">tricks</a>
</li>
	<li class="cat-item cat-item-95"><a href="../../utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;">utilities</a>
</li>
	<li class="cat-item cat-item-44"><a href="../../whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;">whoisho</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;">новости</a>
</li>
	<li class="cat-item cat-item-387"><a href="../../opros.html" title="Просмотреть все записи в рубрике &laquo;опрос&raquo;">опрос</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;">переводы</a>
</li>
	<li class="cat-item cat-item-40"><a href="../../citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;">цитаты</a>
</li>
				</ul>
			</li>

			<li><h2>Архивы</h2>
				<ul>
					<li><a href='../../../date/2018/01.html' title='Январь 2018'>Январь 2018</a></li>
	<li><a href='../../../date/2015/10.html' title='Октябрь 2015'>Октябрь 2015</a></li>
	<li><a href='../../../date/2015/04.html' title='Апрель 2015'>Апрель 2015</a></li>
	<li><a href='../../../date/2015/03.html' title='Март 2015'>Март 2015</a></li>
	<li><a href='../../../date/2015/01.html' title='Январь 2015'>Январь 2015</a></li>
	<li><a href='../../../date/2014/12.html' title='Декабрь 2014'>Декабрь 2014</a></li>
	<li><a href='../../../date/2014/11.html' title='Ноябрь 2014'>Ноябрь 2014</a></li>
	<li><a href='../../../date/2014/10.html' title='Октябрь 2014'>Октябрь 2014</a></li>
	<li><a href='../../../date/2014/09.html' title='Сентябрь 2014'>Сентябрь 2014</a></li>
	<li><a href='../../../date/2014/08.html' title='Август 2014'>Август 2014</a></li>
	<li><a href='../../../date/2014/07.html' title='Июль 2014'>Июль 2014</a></li>
	<li><a href='../../../date/2014/06.html' title='Июнь 2014'>Июнь 2014</a></li>
	<li><a href='../../../date/2014/05.html' title='Май 2014'>Май 2014</a></li>
	<li><a href='../../../date/2014/04.html' title='Апрель 2014'>Апрель 2014</a></li>
	<li><a href='../../../date/2014/03.html' title='Март 2014'>Март 2014</a></li>
	<li><a href='../../../date/2014/02.html' title='Февраль 2014'>Февраль 2014</a></li>
	<li><a href='../../../date/2014/01.html' title='Январь 2014'>Январь 2014</a></li>
	<li><a href='../../../date/2013/12.html' title='Декабрь 2013'>Декабрь 2013</a></li>
	<li><a href='../../../date/2013/11.html' title='Ноябрь 2013'>Ноябрь 2013</a></li>
	<li><a href='../../../date/2013/10.html' title='Октябрь 2013'>Октябрь 2013</a></li>
	<li><a href='../../../date/2013/09.html' title='Сентябрь 2013'>Сентябрь 2013</a></li>
	<li><a href='../../../date/2013/08.html' title='Август 2013'>Август 2013</a></li>
	<li><a href='../../../date/2013/07.html' title='Июль 2013'>Июль 2013</a></li>
	<li><a href='../../../date/2013/06.html' title='Июнь 2013'>Июнь 2013</a></li>
	<li><a href='../../../date/2013/05.html' title='Май 2013'>Май 2013</a></li>
	<li><a href='../../../date/2013/04.html' title='Апрель 2013'>Апрель 2013</a></li>
	<li><a href='../../../date/2013/03.html' title='Март 2013'>Март 2013</a></li>
	<li><a href='../../../date/2013/02.html' title='Февраль 2013'>Февраль 2013</a></li>
	<li><a href='../../../date/2013/01.html' title='Январь 2013'>Январь 2013</a></li>
	<li><a href='../../../date/2012/12.html' title='Декабрь 2012'>Декабрь 2012</a></li>
	<li><a href='../../../date/2012/11.html' title='Ноябрь 2012'>Ноябрь 2012</a></li>
	<li><a href='../../../date/2012/10.html' title='Октябрь 2012'>Октябрь 2012</a></li>
	<li><a href='../../../date/2012/09.html' title='Сентябрь 2012'>Сентябрь 2012</a></li>
	<li><a href='../../../date/2012/08.html' title='Август 2012'>Август 2012</a></li>
	<li><a href='../../../date/2012/07.html' title='Июль 2012'>Июль 2012</a></li>
	<li><a href='../../../date/2012/06.html' title='Июнь 2012'>Июнь 2012</a></li>
	<li><a href='../../../date/2012/05.html' title='Май 2012'>Май 2012</a></li>
	<li><a href='../../../date/2012/04.html' title='Апрель 2012'>Апрель 2012</a></li>
	<li><a href='../../../date/2012/03.html' title='Март 2012'>Март 2012</a></li>
	<li><a href='../../../date/2012/02.html' title='Февраль 2012'>Февраль 2012</a></li>
	<li><a href='../../../date/2012/01.html' title='Январь 2012'>Январь 2012</a></li>
	<li><a href='../../../date/2011/12.html' title='Декабрь 2011'>Декабрь 2011</a></li>
	<li><a href='../../../date/2011/11.html' title='Ноябрь 2011'>Ноябрь 2011</a></li>
	<li><a href='../../../date/2011/10/index.html' title='Октябрь 2011'>Октябрь 2011</a></li>
	<li><a href='../../../date/2011/09/index.html' title='Сентябрь 2011'>Сентябрь 2011</a></li>
	<li><a href='../../../date/2011/08.html' title='Август 2011'>Август 2011</a></li>
	<li><a href='../../../date/2011/07/index.html' title='Июль 2011'>Июль 2011</a></li>
	<li><a href='../../../date/2011/06/index.html' title='Июнь 2011'>Июнь 2011</a></li>
	<li><a href='../../../date/2011/05/index.html' title='Май 2011'>Май 2011</a></li>
	<li><a href='../../../date/2011/04/index.html' title='Апрель 2011'>Апрель 2011</a></li>
	<li><a href='../../../date/2011/03/index.html' title='Март 2011'>Март 2011</a></li>
	<li><a href='../../../date/2011/02.html' title='Февраль 2011'>Февраль 2011</a></li>
	<li><a href='../../../date/2011/01.html' title='Январь 2011'>Январь 2011</a></li>
	<li><a href='../../../date/2010/12.html' title='Декабрь 2010'>Декабрь 2010</a></li>
	<li><a href='../../../date/2010/11/index.html' title='Ноябрь 2010'>Ноябрь 2010</a></li>
	<li><a href='../../../date/2010/10/index.html' title='Октябрь 2010'>Октябрь 2010</a></li>
	<li><a href='../../../date/2010/09/index.html' title='Сентябрь 2010'>Сентябрь 2010</a></li>
	<li><a href='../../../date/2010/08.html' title='Август 2010'>Август 2010</a></li>
	<li><a href='../../../date/2010/07/index.html' title='Июль 2010'>Июль 2010</a></li>
	<li><a href='../../../date/2010/06.html' title='Июнь 2010'>Июнь 2010</a></li>
	<li><a href='../../../date/2010/05.html' title='Май 2010'>Май 2010</a></li>
	<li><a href='../../../date/2010/04/index.html' title='Апрель 2010'>Апрель 2010</a></li>
	<li><a href='../../../date/2010/03/index.html' title='Март 2010'>Март 2010</a></li>
	<li><a href='../../../date/2010/02.html' title='Февраль 2010'>Февраль 2010</a></li>
	<li><a href='../../../date/2010/01.html' title='Январь 2010'>Январь 2010</a></li>
	<li><a href='../../../date/2009/12/index.html' title='Декабрь 2009'>Декабрь 2009</a></li>
	<li><a href='../../../date/2009/11/index.html' title='Ноябрь 2009'>Ноябрь 2009</a></li>
	<li><a href='../../../date/2009/10.html' title='Октябрь 2009'>Октябрь 2009</a></li>
	<li><a href='../../../date/2009/09.html' title='Сентябрь 2009'>Сентябрь 2009</a></li>
	<li><a href='../../../date/2009/08/index.html' title='Август 2009'>Август 2009</a></li>
	<li><a href='../../../date/2009/07/index.html' title='Июль 2009'>Июль 2009</a></li>
	<li><a href='../../../date/2009/06.html' title='Июнь 2009'>Июнь 2009</a></li>
	<li><a href='../../../date/2009/05.html' title='Май 2009'>Май 2009</a></li>
	<li><a href='../../../date/2009/04.html' title='Апрель 2009'>Апрель 2009</a></li>
	<li><a href='../../../date/2009/03.html' title='Март 2009'>Март 2009</a></li>
	<li><a href='../../../date/2009/02.html' title='Февраль 2009'>Февраль 2009</a></li>
	<li><a href='../../../date/2009/01.html' title='Январь 2009'>Январь 2009</a></li>
	<li><a href='../../../date/2008/12.html' title='Декабрь 2008'>Декабрь 2008</a></li>
	<li><a href='../../../date/2008/11.html' title='Ноябрь 2008'>Ноябрь 2008</a></li>
	<li><a href='../../../date/2008/10.html' title='Октябрь 2008'>Октябрь 2008</a></li>
	<li><a href='../../../date/2008/09.html' title='Сентябрь 2008'>Сентябрь 2008</a></li>
	<li><a href='../../../date/2008/08.html' title='Август 2008'>Август 2008</a></li>
	<li><a href='../../../date/2008/03.html' title='Март 2008'>Март 2008</a></li>
	<li><a href='../../../date/2008/02.html' title='Февраль 2008'>Февраль 2008</a></li>
	<li><a href='../../../date/2007/12.html' title='Декабрь 2007'>Декабрь 2007</a></li>
	<li><a href='../../../date/2007/11.html' title='Ноябрь 2007'>Ноябрь 2007</a></li>
	<li><a href='../../../date/2007/10.html' title='Октябрь 2007'>Октябрь 2007</a></li>
	<li><a href='../../../date/2007/09.html' title='Сентябрь 2007'>Сентябрь 2007</a></li>
	<li><a href='../../../date/2007/08.html' title='Август 2007'>Август 2007</a></li>
	<li><a href='../../../date/2007/07/index.html' title='Июль 2007'>Июль 2007</a></li>
	<li><a href='../../../date/2007/06.html' title='Июнь 2007'>Июнь 2007</a></li>
	<li><a href='../../../date/2007/05.html' title='Май 2007'>Май 2007</a></li>
				</ul>
			</li>

			
					</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="../../../../feed">Entries (RSS)</a> and <a href="../../../../comments/feed">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 15 queries. 0.089 seconds. -->
	</div>
</div> <!-- page -->
</body>
</html>
