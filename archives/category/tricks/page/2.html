<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>about NetApp   &raquo; tricks</title>

<link rel="stylesheet" href="../../../../wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="about NetApp RSS Feed" href="../../../../feed" />
<link rel="pingback" href="../../../../xmlrpc.php.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.6" />

</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="../../../../index.html" title="about NetApp: Системы хранения данных как предмет разговора">about NetApp</a></h1>
		<p>Системы хранения данных как предмет разговора</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="../../../../index.html">
<input type="text" size="20" name="s" id="s" value="Поиск..."  onblur="if(this.value=='') this.value='Поиск...';" onfocus="if(this.value=='Поиск...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="navbar">
<ul id="nav">
	<li><a href="../../../../index.html">Home</a></li>
	<li class="page_item page-item-153"><a href="../../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content">

	
			<p>Archive for the &#8216;tricks&#8217; Category.</p>

 				
		<div class="navigation">
			<div class="alignleft"><a href="3.html">&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="../index.html">Next Entries &raquo;</a></div>
		</div>

						
			<div class="post" id="post-1207">
				<h2 class="posttitle"><a href="../../../1207/trackback.html" rel="bookmark" title="Permanent Link to Загрузка серверов на Linux с NFS">Загрузка серверов на Linux с NFS</a></h2>
				<div class="postmetadata">13 Сентябрь 2012, 11:00 <!-- от  --></div>
				<div class="postentry">
					<p>Некоторое время назад попал на глаза любопытный текст, рассказывающий как можно организовать загрузку серверов с RedHat Server (в общем случае – любого Linux) с сервера NFS (в нашем случае, понятно, с NetApp FAS). В практике описавшего человека речь шла о загрузке большой кластерной вычислительной фермы, но, вероятно, такая возможность подойдет и во множестве других случаев.</p>
<p>По поводу бездисковой загрузки, как я заметил, существует также довольно много странных предубеждений и заблуждений. Например, считается, что только по FC, и только с помощью поддерживающих это HBA можно осуществить бездисковую загрузку сервера. Однако это не совсем так. Конечно, с помощью FC это сделать достаточно просто, и я даже <a href="../../../1004/trackback.html">писал на эту тему статью в блоге</a>, с рядом типсов и триксов. Однако кроме загрузки по FC есть и другие варианты. Можно загрузиться по iSCSI, если у вас есть iSCSI HBA с BIOS и режимом загрузки в нем. Но даже и без HBA с BIOS это сделать можно, что и показывает рассматриваемый пример.</p>
<p>Сегодня практически любой современный сервер умеет делать загрузку netboot с помощью PXE – Pre-boot eXecution Environment. С его помощью мы сможем, в том числе, осуществить полноценную загрузку бездисковых серверов с NFS-сервера, без какого-либо FC, а дальше уже вольны использовать все возможности сервера Linux и системы хранения NetApp.</p>
<p>Преимущества такой загрузки, кроме очевидной экономии на локальных дисках:</p>
<ul>
<li>Развертывание новых серверов, особенно когда их счет идет на десятки или даже сотни, становится тривиальным.</li>
<li>Отсутствие внутреннего жесткого диска делает проблему замены сервера, например в случае выхода из строя, предельно простой. Сервер с унифицированным “железом” грузится из загрузочного образа, в котором находятся все identities.</li>
<li>Очень простой становится и процедура Disaster Recovery. Устанавливаем репликацию SnapMirror между двумя сайтами, в случае проблем на основном сайте переносите или устанавливаете новые сервера (или VM) на резервном сайте, правите MAC на TFTP boot server, чтобы не исправлять этот параметр в бут-образах, и сервера грузятся также, и с тем же содержимым, что и на старом сайте.</li>
<li>Нет проблем с повреждениями локальной файловой системы. Никакх fsck. Для сервера его “файловая система” – WAFL на сторадже, отдаваемая по NFS, а WAFL крайне устойчива к повреждениям, так как это транзакционная файловая система.</li>
<li>Можно использовать FlexClone. Тома ваших OS и загрузочные образы это идеально подходящий случай для использования FlexClone, экономия пространства будет великолепная, а эффективность работы, в том числе за счет повышения эффективности кэширования – очень высокая.</li>
<li>Работа с централизованным, легко расширяемым&#160; стораджем решает проблему исчерпания локального места на дисках серверов.</li>
</ul>
<p>Конечно есть и ряд недостатков (решаемых):</p>
<ul>
<li>TFTP-сервер и DHCP становятся критичными ресурсами, и могут даже стать “точкой отказа”, если вы не позаботитесь о их резервировании. Например можно поднять tftp-server непосредственно на NetApp FAS (options tftp.enable on и установить том для .rootdir), а для возможности работать с несколькими dhcpd, на разных машинах, можно использовать опцию next-server в файле конфигурации dhcpd.conf на загружающемся сервере.</li>
<li>Сетевые интерфейсы иногда могут иметь разные имена. ??з этой ситуации можно выйти, предусмотрев возможность переименовывать в скрипте имена udev, приводя их к единообразному виду. В приведенном документе показан способ этого решения.</li>
</ul>
<p>Подробный документ how-to по загрузке сервера Linux с NFS-шары по TFTP, со всеми полезными настройками и скриптами можно взять здесь:</p>
<p><a class="j-attachment-icon" href="https://communities.netapp.com/servlet/JiveServlet/download/38-37219/RHEL%206.2%20NFS%20Boot%20installation.docx"><u><font color="#0066cc">RHEL 6.2 NFS Boot installation.docx</font></u></a> (63.4 K) </p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/boot.html" rel="tag">boot</a>, <a href="../../../tag/diskless.html" rel="tag">diskless</a>, <a href="../../../tag/linux.html" rel="tag">linux</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/netboot.html" rel="tag">netboot</a>, <a href="../../../tag/nfs/index.html" rel="tag">nfs</a>, <a href="../../../tag/pxe.html" rel="tag">pxe</a>, <a href="../../../tag/rhel.html" rel="tag">rhel</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1207/trackback.html#comments" title="Комментарий к записи Загрузка серверов на Linux с NFS">1 комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1145">
				<h2 class="posttitle"><a href="../../../1145/trackback.html" rel="bookmark" title="Permanent Link to SnapRestore и некоторые особенности его применения">SnapRestore и некоторые особенности его применения</a></h2>
				<div class="postmetadata">19 Апрель 2012, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Вы наверняка уже знаете, что такое <a href="../../../39/trackback.html">снэпшоты</a> в NetApp, и как их используют, это, если вкратце, для вновь подключившихся мгновенная “виртуальная копия” даных диска или тома, “снимок состояния дисков” (отсюда Snapshot – “фотоснимок”). Принципиальная реализация в решении NetApp от всех прочих реализаций под тем же именем у других производителей, в том, что они не тормозят систему и занимают на диске место как differential copy, то есть только измененные с предыдущего снятия снэпшота блоки.</p>
<p>У NetApp есть два способа восстанавливать данные на дисках из созданных снэпшотов, это простым копированием нужного файла из псевдо-директории .snapshots на его прежнее место, и с помощью команды snap restore. Последняя использует технологию SnapRestore, это отдельно лицензируемая, но, наверное, почти у всех имеющаяся функция, которая используется во многих продуктах NetApp, например в SnapManager for Apps.</p>
<p>SnapRestore это отличная возможность, позволяющая восстанавливать за секунды том с тысячами файлов, который обычным копированием из снэпшота восстанавливался бы довольно долго.</p>
<p>Однако в использовании SnapRestore есть один, как оказалось, довольно неочевидный для новичка “факап”, как выражается современная молодежь.</p>
<p>Дело в том, что SnapRestore восстанавливает из снэпшота файловую систему соответствующего тома целиком, на момент создания соответствующего снэпшота. “Целиком” означает<em> вообще целиком</em>, <em>совсем целиком</em>. ?? набор доступных после восстановления снэпшотов для этой файловой системы – тоже.</p>
<p>На это можно напороться следуюшим образом. Допустим, вы столкнулись с какой-то проблемой, например в базе данных, или почтовой базе Exchange, лежащих на томе NetApp. Вы решаете откатиться на какой-то момент в прошлом, но беда, что вы не знаете точно, когда в данных появилась проблема, которую вы встретили.</p>
<p>Вы выбираете, например в SnapManager, или же просто вручную, снэпшот недельной давности, и делаете ему <code>snap restore vol1 weekly.1</code></p>
<p>Вы откатываете состояние тома на состояние неделю назад. Отлично, неделю назад проблемы не было. Но восстанавливать целую неделю работы слишком долго. Может быть три дня назад тоже еще не было ошибки? Надо восстановиться из более нового, трехдневного, или даже вчерашнего.</p>
<p>Опа. А у вас нету на томе снэпшота “три дня назад”. Том восстановился на состояние “неделя назад”, и никаких более новых, чем “неделя назад” снэпшотов на нем <em>еще</em> нет. Вы же помните, я не зря сказал, что восстанавливается том целиком, включая и состояние снэпшотов на нем.</p>
<p>Что делать: Ну, во-первых хорошо понимать то, как работает механизм снэпшота на NetApp. Не восстанавливать через snap restore том целиком, если есть необходимость оставить доступными более новые, чем точка восстановления, снэпшоты, или ради всего нескольких файлов. Наконец, пользоваться SnapVault, средством для “резервного копирования” снэпшотов на другой сторадж NetApp.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/snaprestore.html" rel="tag">snaprestore</a>, <a href="../../../tag/snapshot.html" rel="tag">snapshot</a><br />					Раздел: <a href="../../techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1145/trackback.html#comments" title="Комментарий к записи SnapRestore и некоторые особенности его применения">Комментарии (7)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1137">
				<h2 class="posttitle"><a href="../../../1137/trackback.html" rel="bookmark" title="Permanent Link to WAFL File Folding">WAFL File Folding</a></h2>
				<div class="postmetadata">5 Апрель 2012, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>О любопытной функции внутри Data ONTAP прочитал недавно в блоге <a href="http://www.ntapgeek.com/2012/03/wafl-file-folding-explained.html">ntapgeek</a>. Эта фича называется WAFL File Folding и позволяет экономить место на дисках для файлов, отдаваемых по протоколу CIFS.</p>
<p>Принцип работы File Folding таков. Как вы уже знаете (а кто не знает – <a href="../../../39/trackback.html">идите и читайте</a>), все перезаписи данных на WAFL осуществляются, согласно конструкции файловой системы, таким образом, что они не меняют собственно содержимого блока данных в файле, а записываются в отдельный свободный блок, куда переставляется “указатель”-inode. Это позволяет быстро и просто делать снэпшоты, так как в WAFL не нужно, как во всех прочих реалиациях снэпшотов, переносить содержимое перезаписывамых блоков в отдельное место. Единожды записанный блок, помещенный в снэпшот, уже никак не будет изменен, так устроена FS.</p>
<p>Однако представим себе такую странную ситуацию, когда обширный файл, с которого у нас взят снэпшот, перезаписывается, целиком или полностью, ровно теми же данными, что уже лежат в нем. Для каждого блока такого файла на диске будет занято по меньшей мере два физческих блока. Один – оригинальный, лежащий запертым в снэпшоте, и второй – измененный, лежащий в пространстве “активной файловой системы”, даже несмотря на то, что содержимое этих блоков совершенно идентичное.</p>
<p>Я теряюсь в догадках, что это за операция такое проделвывает, но факт того, что это сделано именно для CIFS, подсказывает мне, что что-то в CIFS любит перезаписывать целиком файлы, даже, например, при незначительных изменениях в нем. Например, представм, что это какой-нибудь Winword, и в нем большой файл, в котором мы поправили запятую, и нажали “сохранить”. ?? весь этот файл, блок за блоком, перезаписался поверх теми же данными, что были (за исключением этой запятой). Не знаю, возможно кто-то подскажет, о чем тут идет речь.</p>
<p>Так или иначе, в результате такой перезаписи, мы будем иметь на дисках <strong>два</strong> файла, из равного набора блоков, один в снэпшоте, а один в собственно файловой системе, ведь WAFL не видит, что там такое произошло с файлом. Попросили из приложения перезаписать стотыщ блоков – вот вам стотыщ свободных блоков, пишите в них, ведь исходный файл в снэпшоте, блоки его нельзя трогать.</p>
<p>Вот для решения такой проблемы и предназначена малоизвестная фича, под названием WAFL File Folding.</p>
<p>Включают ее командой:</p>
<p><code>&gt; options cifs.snapshot_file_folding.enable on</code></p>
<p>и эта команда делает следующее:</p>
<p>В Data ONTAP начинает работать процесс, который физически сравнивает в перезаписываемых файлах блоки данных с соответствующими блоками в наиболее свежем снэпшоте с этого файла. ?? если блоки оказываются идентичными, то просто указывать вместо таких “псевдоизмененных” и “псевдоперезаписанных” блоков, на блоки в крайнем по времени снэпшоте. Это что-то отдаленно напоминает дедупликацию, но там похожий процесс работает только внутри активной файловой системы, между разными в ней файлами, а тут – между пространством активной файловой системы и пространством самого свежего снэпшота.</p>
<p>Теоретически, как и любой процесс экономии пространства, этот процесс дополнительно нагружает процессор и занимает память задачей попарного сравнения блоков. Однако, если этот процес достигает определенного для него лимита использования RAM, он приостанавливается, и ждет ее освобождения, так что в принципе страшного ничего произойти не должно.</p>
<p>Утверждается, что фича эта тихо живет уже довольно давно, полагаю она была добавлена по заказу какого-нибудь Особо Любимого Клиента и его специфической задачи, и не особенно раскручивается для прочих. Данная опция существует в Data ONTAP вплоть до версии 8.1 в 7-Mode.</p>
<p>Так что если в ващем хранилище CIFS есть сходная проблема с перезаписью, то можете попробовать, по идее это должно экономить какое-то количество пространства на дисках, при использовании снэпшотов. Помните, однако, что это займет сколько-то процессора и памяти, так что включив это обязательно проследите за поведением системы какое-то время.</p>
<p><strong>UPD:</strong> из комментариев к &#8220;зеркалу&#8221; данного поста на <a href="https://communities.netapp.com/groups/netapp-ru">https://communities.netapp.com/groups/netapp-ru</a> (если вы там еще не были - сильно рекомендую сходить и ознакомиться, это форум и сообщество по NetApp, созданное мною на официальном сайте NetApp, чтобы было удобнее вести дискуссии и обсуждения, в формате форума, и так далее. Я туда также зеркалю свои посты отсюда).</p>
<p><em>&#8220;Ну именно офисные приложения word и exel и перезаписывают файлы целиком. При открытии файла на редактирование ms офис создает новый временный файл и работаем в нем, а операция сохранения это удаляем старый, копируем новый. То есть файл всегда пишется целиком. А так как на CIFS разделах делать снепшоты очень удобно (в винде встроены механизмы отслеживания версионности файлов и нет необходимости привлекать администраторов чтоб открыть любой файл из предыдущих версий) то начинает быстро &#8220;распухать&#8221; раздел по них.</p>
<p>Поэтому на томах доступных для CIFS где работают с офисными приложениями и снепшоты делаются по сколько раз в день, что затрудняет возможность проведения дедупликации перед ними, данная опция маст хэв :) &#8220;</em></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/cifs.html" rel="tag">cifs</a>, <a href="../../../tag/folding.html" rel="tag">folding</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/wafl/index.html" rel="tag">wafl</a><br />					Раздел: <a href="../../techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1137/trackback.html#comments" title="Комментарий к записи WAFL File Folding">Комментарии (2)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1131">
				<h2 class="posttitle"><a href="../../../1131/trackback.html" rel="bookmark" title="Permanent Link to Как изменить пороги для уведомлений SNMP о заполненности тома?">Как изменить пороги для уведомлений SNMP о заполненности тома?</a></h2>
				<div class="postmetadata">22 Март 2012, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>По умолчанию, Data&#160; ONTAP генерирует уведомление (trap) в SNMP, а также записывает сообщение в логах, когда заполненность тома превышает пороговую величину. По умолчанию существует два порога: “Nearly Full” и “Full”. Первый по умолчанию установлен на значение 95%, а второй – на 98% от емкости тома.</p>
<p>Вы можете изменить эти значения, или же вовсе выключить их. Например, иногда это бывает полезным, если у вас на томе располагается один space-reserved SAN LUN, и он занимает практически все пространство тома, но не растет, поэтому уведомление о том, что ваш том “всегда полон” не несет полезной информации, а только загромождает логи.</p>
<p>Для того, чтобы именить значения порогов на нужные вам, надо сделать следующее:</p>
<p>Войдем в режим повышенных привилегий:</p>
<p><code>netapp&gt; priv set advanced      <br />netapp*&gt;</code></p>
<p><strong>Будьте внимательны, в режиме повышенных привилегий вам становятся доступны некоторые команды, потенциально способные серьезно повредить данные! </strong>Нахождение в повышенному уровне привилегий индицирут звездочка в системном “промпте”.</p>
<p>Установим нужные нам значения. Например, пусть это будут 85% и 99%. <strong>Помните, что баловаться с системным реестром в Data ONTAP также опасно, как и с реестром Windows!</strong></p>
<p><code>netapp*&gt; registry set options.thresholds.fsFull 99      <br />netapp*&gt; registry set options.thresholds.fsNearlyFull 85</code></p>
<p>Можно и вовсе выключить эти уведомления, задав заведомо недостижмый уровень заполнения, больше 100%, например – 101%</p>
<p><code>netapp*&gt; registry set options.thresholds.fsFull 101      <br />netapp*&gt; registry set options.thresholds.fsNearlyFull 101</code></p>
<p>Обратите внимание, что парамеры fsFull и fsNearlyFull – чувствительны к регистру.</p>
<p>Проверим, что все установилось так, как мы хотели:</p>
<p><code>netapp*&gt; registry walk options.thresholds </code></p>
<p>Вернемся в стандартный уровень привилегий:</p>
<p><code>netapp*&gt; priv set      <br />netapp&gt;</code></p>
<p>Готово. Теперь Data ONTAP будет генерировать SNMP traps о заполнении тома по достижении заданных нами величин (или не генерировать их вовсе, если мы их установили на 101%).</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/registry.html" rel="tag">registry</a>, <a href="../../../tag/snmp.html" rel="tag">snmp</a>, <a href="../../../tag/threshold.html" rel="tag">threshold</a>, <a href="../../../tag/trap.html" rel="tag">trap</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1131/trackback.html#comments" title="Комментарий к записи Как изменить пороги для уведомлений SNMP о заполненности тома?">1 комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1116">
				<h2 class="posttitle"><a href="../../../1116/trackback.html" rel="bookmark" title="Permanent Link to ??звлечение данных о Busy Spindles из вывода stats">??звлечение данных о Busy Spindles из вывода stats</a></h2>
				<div class="postmetadata">2 Февраль 2012, 10:31 <!-- от  --></div>
				<div class="postentry">
					<p>Я уже упоминал, что в Data ONTAP есть очень полезная команда stats, с помошью котрой можно вывести массу информации о работе системы. К сожалению, формат вывода ее “человеконечитаемый”, в большинстве случаев, поэтому для того, чтобы извлечь из ее вывода что-нибудь полезное, приходится предпринять некоторые усилия.</p>
<p>Так, например, довольно интересной задачей яляется поиск и вывод так наываемых busy spindles, или физических дисков, нагрузка по вводу-выводу на которые превышает норму по аггрегейту. Такое случается иногда при несбалансированности aggregate, например, чаще всего, при добавении дисков, которые, в ряде случаев, могут потребовать “рестрайпинга данных”.</p>
<p>В community.netapp.com я увидел интересную строчку для использования в скрипте вывода такой информации:</p>
<p><code>watch -n 3 &quot;ssh NetAppHost stats show disk:\*:disk_busy | awk '{FS=\&quot;:\&quot;; print \$1 \&quot; \&quot; \$2 \&quot; \&quot; \$3 \&quot; \&quot; \$13}'| sed 's/%//g' | awk '\$4&gt;40{print}'&quot;</code></p>
<p>Можете воспользоваться, кому интересно, и расскажите как работает.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/stats.html" rel="tag">stats</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1116/trackback.html#comments" title="Комментарий к записи ??звлечение данных о Busy Spindles из вывода stats">Комментарии (2)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1102">
				<h2 class="posttitle"><a href="../../../1102/trackback.html" rel="bookmark" title="Permanent Link to Как добавить &ldquo;дисков&rdquo; в Data ONTAP Simulator 8?">Как добавить &ldquo;дисков&rdquo; в Data ONTAP Simulator 8?</a></h2>
				<div class="postmetadata">22 Декабрь 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Когда вы поставили и запустили симулятор Data ONTAP 8, вы увидите, что он идет с 28 (2х14) “дисками”, размером 1GB. Этого в общем вполне достаточно для большинства целей использования, однако, если вам потребуется больше дисков, вы можете увеличить их количество (но не размер!) до 56 штук. Обратите внимание, что вы не можете увеличить размер дисков, он для симулятора не может превышать 1GB. Ну… например чтобы не было соблазна устраивать из не предназначенного для этого симулятора бесплатный “виртуальный сторадж” ;). Как говорил один большой друг СССР – “Doverjai no proverjai!” ;)</p>
<p>Но сперва стоит немного остановится на некоторых деталях.</p>
<p>В отличие от Data ONTAP 7, в версии 8 появился специальный user-mode shell (консоль админа, несмотря на внешнюю схожесть, шеллом как таковым не является). Он доступен для специального, отключенного в целях безопасности, пользователя diaguser.</p>
<p>Мы рассмотрим добавление дисков только для симулятора 7-Mode. Для Cluster-mode это возможно также, но чтобы не удлиннять пост я его опущу (если кому-то понадобится процедура для Cluster-mode Simulator – напишите).</p>
<p>??так, начнем с того, что разблокируем diaguser, от имени которого в шелле мы проделаем операции добавления:</p>
<p><code>priv set advanced      <br />useradmin diaguser unlock       <br />useradmin diaguser password</code></p>
<p>Теперь зайдем с systemshell этм пользователем:</p>
<p><code>systemshell      <br />login: diag       <br />password: &lt;password&gt;</code></p>
<p>Далее нам придется поправить некий глюк, допущенный при сборке утилиты управления “дисками”. Добавим символьные линки на стандартные библиотеки, а то утилита не сможет их найти:</p>
<p><code>cd /lib      <br />sudo mount -u -o rw /       <br />sudo ln -s libc.so.6 libc.so.7       <br />sudo mount -u -o ro /</code></p>
<p>Установим переменную пути:</p>
<p><code>setenv PATH &quot;${PATH}:/sim/bin&quot;      <br />echo $PATH</code></p>
<p>?? перейдем в директорию эмулированных устройств</p>
<p><code>cd /sim/dev      <br />ls ,disks/</code></p>
<p>Тут вы увидите уже созданные 28 дисков. К ним мы сейчас добавим еще 28. ??мена уже существующих файлов-дисков начинаются с v1 и v2, что означает, что они “подключены” к адаптерам v1 и v2. У нас есть еще два неиспользованных адаптера (v3 и v4), к каждому из которых мы “подключим” по 14 дисков (это похоже на то, как подключаются обычные FC-полки к адаптерам отдельной FC-“петлей”, каждая полка на 14 дисков на свой адаптер).</p>
<p>Для этого воспользуемся утилитой makedisk.main:</p>
<p><code>makedisks.main -h      <br />sudo makedisks.main -n 14 -t 23 -a 2       <br />sudo makedisks.main -n 14 -t 23 -a 3       <br />ls ,disks/</code></p>
<p>Первая команда печатает пояснение по доступным ключам. Две другие создают по 14 дисков    <br />(-n 14) с типом диска 23 (-t 23) на адаптерах 2 и 3 (-a 2 и -a 3). Симулятор Data ONTAP 8.0.1 поддерживает конструктивно только диски размером 1GB и менее. Даже если вы видите в подсказке команды диски большего размера, воздержитесь от соблазна попробовать добавить их в симулятор. С виртуальными дисками размером больше 1GB Data ONTAP упадет в panic при перезагрузке, и вам придется устанавливать симулятор заново.</p>
<p>Ну вот и все, что необходимо было сделать в шелле. Вернемся “по своим следам” из шелла в обычную админскую консоль, выйдя из шелла и запретив diaguser, перезагрузим симулятор и он увидит новые диски:</p>
<p><code>exit      <br />useradmin diaguser lock       <br />priv set admin       <br />reboot</span></code></p>
<p>После перезагрузки необходимо назначить ownership новым дискам:</p>
<p><code>disk show -n      <br />disk assign all       <br />disk show -v</code></p>
<p>Теперь у вас в симуляторе 56 “дисков” по 1GB каждый. Они уже zeroed, и вы можете непосредственно добавить их в нужный вам aggregate.</p>
<p>??сходный текст был взят тут: <a href="https://communities.netapp.com/docs/DOC-9579">https://communities.netapp.com/docs/DOC-9579</a></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/801.html" rel="tag">8.0.1</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/simulator.html" rel="tag">simulator</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1102/trackback.html#comments" title="Комментарий к записи Как добавить &ldquo;дисков&rdquo; в Data ONTAP Simulator 8?">Комментарии (2)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1100">
				<h2 class="posttitle"><a href="../../../1100/trackback.html" rel="bookmark" title="Permanent Link to Data ONTAP Simulator 8.0.1: Как изменить SystemID/SerialNo?">Data ONTAP Simulator 8.0.1: Как изменить SystemID/SerialNo?</a></h2>
				<div class="postmetadata">19 Декабрь 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>В ряде случаев, например когда вы планируете использовать несколько установленных симуляторов, подключенных в Operations Manager, необходимо задать каждому из этих симуляторов индивидуальный SystemID и Serial Number. В будущем в NetApp обещают генерировать при установке произвольный номер, а пока все симуляторы идут с одним. Поэтому нужно проделать небольшой трюк.</p>
<p>При начальной загрузке прервите ее и войдите в SIMLOADER.</p>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="sim801_serial_change_1" border="0" alt="sim801_serial_change_1" src="/pics/Data-ONTAP-Simulator-8---SystemIDSerialN_9393/sim801_serial_change_1.png" width="725" height="503" /></p>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="sim801_serial_change_2" border="0" alt="sim801_serial_change_2" src="/pics/Data-ONTAP-Simulator-8---SystemIDSerialN_9393/sim801_serial_change_2.png" width="729" height="503" /></p>
<p>Выполните там две следующие команды:</p>
<p><code>SIMLOADER&gt; set bootarg.nvram.sysid=1111111101</code>    <br /><code>SIMLOADER&gt; set SYS_SERIAL_NUM=1111111101</code></p>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="sim801_serial_change_3" border="0" alt="sim801_serial_change_3" src="/pics/Data-ONTAP-Simulator-8---SystemIDSerialN_9393/sim801_serial_change_3.png" width="725" height="503" /></p>
<p>SystemID это 10-значное число. Последние две цифры должны быть уникальны в пределах Cluster-mode кластера для того, чтобы обеспечить уникальность UID дисков. Таким образом первые 8 цифр определяют кластер, а последние 2 – ноду в этом кластере. Впрочем, если вы используете симулятор только как 7-mode, вам это не важно, назначьте туда любое 10-циферное число.</p>
<p>Дайте команду:</p>
<p><code>SIMLOADER&gt; boot</code></p>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="sim801_serial_change_4" border="0" alt="sim801_serial_change_4" src="/pics/Data-ONTAP-Simulator-8---SystemIDSerialN_9393/sim801_serial_change_4_3.png" width="727" height="501" /></p>
<p>Войдите в Boot Menu нажатием Ctrl-C и выберите там Maintenance mode boot</p>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="sim801_serial_change_6" border="0" alt="sim801_serial_change_6" src="/pics/Data-ONTAP-Simulator-8---SystemIDSerialN_9393/sim801_serial_change_6.png" width="727" height="504" /></p>
<p>Переназначьте диски на новый SystemID, если вы уже назначили их ранее контроллеру на его прежний SystemID. Если вы делаете описываемую процедуру при самом первом старте, то переназначать диски еще не нужно, назначьте из обычным образом.</p>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="sim801_serial_change_7" border="0" alt="sim801_serial_change_7" src="/pics/Data-ONTAP-Simulator-8---SystemIDSerialN_9393/sim801_serial_change_7.png" width="728" height="502" /></p>
<p>UPD: Приведенный метод, к сожалению, <strong>НЕ РАБОТАЕТ </strong>для Simulator версии <strong>8.1</strong>, он работает только для <strong>8.0.1</strong></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/801.html" rel="tag">8.0.1</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/simulator.html" rel="tag">simulator</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1100/trackback.html#comments" title="Комментарий к записи Data ONTAP Simulator 8.0.1: Как изменить SystemID/SerialNo?">1 комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1059">
				<h2 class="posttitle"><a href="../../../1059/trackback.html" rel="bookmark" title="Permanent Link to Read-Only юзер для System Manager и PowerShell Toolkit">Read-Only юзер для System Manager и PowerShell Toolkit</a></h2>
				<div class="postmetadata">27 Октябрь 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>??ногда бывает нужно создать пользователя, не имеющего на системе хранения других прав, кроме read-only, например для задач демонстрации и обучения, только для получения каких-то данных или снятия показаний, или же иных подобных применений. Сделать такого пользователя можно с помощью механизма RBAC – Role-Based Access Control (кстати по RBAC в <a href="http://www.netwell.ru/production/techbiblioteka.php">техбиблиотеке Netwell</a> лежит дельная <a href="http://www.netwell.ru/docs/netapp/role-based_access_control.pdf">переведенная документация</a>).</p>
<p>Пример&#160; создания роли read-only user при помощи DataONTAP Powershell Toolkit.</p>
<p><code><br />
#Create read-only role:<br />
New-NaRole ro_role -Capabilities&#160; login-*<br />
#Add read-only capabilities to this from attached file:<br />
$caps = Get-Content .\RoRoles.txt<br />
ForEach ($cap in $caps)<br />
{<br />
&#160; Set-NaRole ro_role -AddCapabilities&#160; $cap<br />
}<br />
#Create read-only group:<br />
New-NaGroup ro_group ro_role<br />
#Create read-only user:<br />
New-NaUser ro_user rouserpassword ro_group<br />
</code></p>
<p>&#160;</p>
<p>Файл <a href="/docs/RoRoles.txt">RoRoles.txt</a> со списком вызовов API DataONTAP можно <a href="/docs/RoRoles.txt">скачать тут</a>.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/rbac.html" rel="tag">rbac</a>, <a href="../../../tag/read-only.html" rel="tag">read-only</a>, <a href="../../../tag/tricks/index.html" rel="tag">tricks</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1059/trackback.html#respond" title="Комментарий к записи Read-Only юзер для System Manager и PowerShell Toolkit">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1004">
				<h2 class="posttitle"><a href="../../../1004/trackback.html" rel="bookmark" title="Permanent Link to SAN boot">SAN boot</a></h2>
				<div class="postmetadata">17 Октябрь 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Я обратил внимание, что очень многие, в особенности впервые сталкивающиеся с SAN, обязательно хотят реализовать у себя возможность бездисковой загрузки серверов из SAN, с созданного в ней LUN-а. Но потом как-то охладевают к этой идее, по причине ряда сложностей реализации и неочевидности преимуществ. Действительно, если у вас blade-ферма на три десятка blades в ней, то экономия на жестких дисках по ценам изготовителя blades, может вылиться в экономию, за которую можно пострадать, но при всего 2-4 серверах в SAN это обычно не стоит выделки. Однако если вы все же решили заняться SAN boot, то вот какие полезные сведения я обнаружил в <a href="http://communities.netapp.com/community/netapp-blogs/msenviro/blog">блоге группы поддержки решений Microsoft</a>, сформированной в NetApp.</p>
<p>Во-первых, следует знать, что на сегодняшний день загрузка из SAN для актуальных OS Microsoft полностью поддерживаемое решение. См. статью из <a href="http://support.microsoft.com/kb/305547">Knowledge Base</a>.</p>
<p>Во-вторых, следует помнить, что проблемы с зонингом – есть “номер один” всех проблем с SAN boot. Если у вас что-то не работает – начните с проверки зонинга. Чаще всего разрешение проблемной ситуации с зонингом и есть решение проблемы загрузки из SAN. Если ваша система на поддержке – обратитесь в поддержку NetApp, они “знают много гитик”. Проверяйте и перепроверяйте все настройки зонинга ДО того, как начнете долбить поддержку.</p>
<p>Третий момент, который стоит помнить, это то, что поддержка MS MPIO на этапе загрузки крайне ограничена. ??спользуемый в MS на этапе инсталляции WinPE (Windows Preinstall Environment) не рассчитан на работу с MPIO, и подключение LUN по нескольким путям может давать непредсказуемые результаты. При первой загрузке этапа установки, инсталлятор Windows загружает модуль boot.wim (это и есть WinPE) и начинает копирование файлов из дистрибутива в “локальный диск”, который в вашем случае будет SAN LUN-ом. После копирования загрузится уже собственно Windows. Поддержка рекомендует на время работы WinPE физически отключать второй путь, который можно будет подключить назад позже, когда у вас уже будет работающий MPIO.</p>
<p>Также стоит помнить, что <a href="http://support.microsoft.com/kb/2504934">MPIO не поддерживается в sysprep</a><strong></strong>. Вам придется настроить MPIO непосредственно на том образе, с которого будут грузиться система, но официально не поддерживается его конфигурирование непосредственно в <em>syspreped </em>образе. Оно работает, как показывает опыт. Но не поддерживается MS. Be warned, есличо.</p>
<p>MPIO, несмотря на написанное выше, настоятельно рекомендуется для загрузки SAN boot! Если в момент загрузки вы потеряете связь с SAN LUN, с которого система загружается, она упадет в BSOD Inacessible boot device. Смотрите по этому поводу <a href="http://technet.microsoft.com/en-us/library/cc786214%28WS.10%29.aspx">статью в TechNet</a>.</p>
<p>Для того, чтобы LUN в SAN был увиден системой на этапе инсталляции, он должен быть подключен из BIOS карты HBA. Это поддерживается для “аппаратных” HBA FC (FCoE), а также для hardware HBA iSCSI. Теоретически есть методы загрузки из SAN и для Software iSCSI, но рассмотрение этой темы выходит за рамки данной статьи.</p>
<p>Напомню еще раз, что, для двухпортовых карт, вы должны активировать поддержку загрузки в BIOS <strong>только для одного из двух имеющихся портов HBA!</strong> Реализация отличается в зависимости от вендора HBA, так что внимательно проследите эту тему самостоятельно по документации.<strong> На этапе загрузки не работает MPIO, и LUN должен видеться только по одному пути!</strong></p>
<p>Если после всего перечисленного выше, инсталлятор по прежнему не видит диск, на который он может установить OS, то, скорее всего, в дистрибутиве проблема с драйверами для данного типа HBA. Можно попробовать вставить правильные драйвера непосредственно в инсталлятор, в модули boot.wim и install.wim, либо подставьте драйвера вручную, когда это запрашивает инсталлятор. Опять же тема интеграции драйверов в дистрибутив Windows достаточно хорошо рассмотрена в интернете.</p>
<p>Помните, что если вы вынули CD/DVD-диск, чтобы вставить на его место диск с драйверами, то не забудьте вернуть назад диск с дистрибутивом для продолжения установки. :)</p>
<p>Обратите внимание, что в <a href="http://now.netapp.com/NOW/knowledge/docs/hba/win/relwinhu53/pdfs/setup.pdf">Windows Host Utilities Installation and Setup Guide</a> со страницы 95 идет очень детальное и подробное описание настройки SAN Boot.</p>
<p>Для практической проверки и отработки решения группа построила стенд из 22 серверов Fujitsu RX200, снабженных двухпортовыми FCoE HBA Brocade 1020, включенных в два коммутатора Brocade 8000 FCoE, куда также подключены два контроллера FAS6030 с дисками. HBA обладают возможностью загрузки из SAN в их BIOS, а сервера имеют средства управления Fujitsu iRMS (аналог HP iLO и DELL DRAC). Система хранения NetApp имеет активированную лицензию <strong>FlexClone</strong>, используемую в дальнейшем процессе. В принципе, описываемые процессы могут быть реализованы и без FlexClone, но с ним они куда эффективнее расходуют пространство хранения, так как место на диске занимают только изменения относительно мастер-LUNа.</p>
<p>Начнем с создания пустого volume и на нем LUN-а, который будет мастер-образом. Смонтируем данный LUN на один из серверов, заполним и сконфигурируем его, а позже склонируем для остальных серверов. Не забудьте установить в этот образ OS все нужные роли, драйвера и приложения, в данном случае были установлены NetApp DSM, Host Utilities, а также драйвера и приложение управления HBA от Brocade.</p>
<p>Запустим sysprep с опциями –generalize и –shutdown, после чего сервер отключится и LUN необходимо отмапить от сервера. Эталонный мастер-образ подготовлен.</p>
<p>Теперь подготовим остальные сервера на загрузку из SAN. <strong>Помните, что в BIOS HBA необходимо включить загрузку с SAN LUN только для одного порта!</strong> Смотрите ссылку на документ <a href="http://www.microsoft.com/download/en/details.aspx?id=2815">Boot from SAN in Windows Server 2003 and Windows Server 2008</a> из MS Download Center.</p>
<p>В имеющемся HBA в BIOS была выбрана опция загрузки “First visible LUN” (эти настройки могут отличаться для разных HBA, решайте по аналогии) с тем чтобы обеспечить наиболее простую загрузку, которая не потребует в дальнейшем перенастройки при изменениях, как в случае опции “Preferred LUN”. Вариант First visible LUN, разумеется, требует некоторых предосторожностей, например дисковый массив с загрузочным LUN должен располагаться в ближайшей к серверам фабрике, чтобы минимизировать задержки, а также иметь LUN ID 0.</p>
<p>Создаем клон тома мастер-образа, например с помощью FlexClone. Маппим LUN в клоне тома (не оригинальный мастер-образ, а клон!) на сервер. Включаем сервер с использованием iRMC и подключаемся к серверной консоли.</p>
<p>Сервер загружается и запускается mini-setup после sysprep. В нем вы можете задать пароль, изменить имя сервера, назначить IP-адрес, и так далее (если вы знакомы с развертыванием образов Windows с использованием sysprep, это не должно быть неожиданностью). После завершения mini-setup вы получаете созданную из мастер-образа индивидуальную копию установки Windows.</p>
<p>??так, мы за несколько минут получили полностью загруженный в индивидуальный образ Windows физический сервер, загружаемый из SAN.</p>
<p>Немного иначе происходит процесс для загрузки виртуальных серверов из SAN.</p>
<p>В случае <strong>pass-through disks</strong> Hyper-V все происходит также, как и в случае физического сервера, но нужно создать для VM еще один клон, и назначить ему LUN ID отличный от 0, чтобы он не пересекся с LUN, используемым для загрузки физического сервера. ??спользуя LUN FlexClone вы можете создать клоны мастер-LUN непосредственно на том же volume, где он сам и находится. Следите, чтобы на volume либо было достаточно места для записи хранимых “разностных” изменений, или чтобы была активирована опция “volume autogrow” и места было достаточно уже на aggregate этого тома. Если вам понадобится создать больше VM, просто создайте еще несколько клонов мастер-LUN.</p>
<p>В случае использования <strong>VHD</strong>, следует создать LUN для физического сервера, содержащий файлы VHD для находящихся на нем виртуальных. Также можно использовать возможности sub-LUN клонирования FlexClone, создав один клон LUN-а с множеством клонов VHD в нем.</p>
<p>Преимущества SAN boot, кроме экономии на локальных дисках, это, безусловно, большая гибкость. Особенно это полезно в условиях тестового стенда, когда развертывание из чистого эталонного образа занимает всего несколько минут, а если вам понадобилось вернуть предшествующую конфигурацию, например для продолжения работ по предыдущей теме, вы просто маппите ранее созданный и оставшийся на сторадже LUN и загружаетесь в предыдущую установку, без необходимости восстанавливать ее из бэкапа, как в “традиционном” варианте с локальными дисками.</p>
<p>??спользование же FlexClone в данном случае поможет значительно сократить занятый объем. Например, в описываемом случае, около 50 LUN-ов разлчных проектов данного стенда имеют совокупную емкость около 5TB, занимая при этом на диске всего около 300GB.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/boot.html" rel="tag">boot</a>, <a href="../../../tag/diskless.html" rel="tag">diskless</a>, <a href="../../../tag/fc.html" rel="tag">fc</a>, <a href="../../../tag/fcoe.html" rel="tag">FCoE</a>, <a href="../../../tag/hba.html" rel="tag">hba</a>, <a href="../../../tag/iscsi/index.html" rel="tag">iscsi</a>, <a href="../../../tag/ms.html" rel="tag">ms</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/san.html" rel="tag">san</a>, <a href="../../../tag/sanboot.html" rel="tag">sanboot</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../../techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1004/trackback.html#comments" title="Комментарий к записи SAN boot">Комментарии (5)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1044">
				<h2 class="posttitle"><a href="../../../1044/trackback.html" rel="bookmark" title="Permanent Link to Еще несколько слов про MPHA: исправления">Еще несколько слов про MPHA: исправления</a></h2>
				<div class="postmetadata">30 Сентябрь 2011, 11:08 <!-- от  --></div>
				<div class="postentry">
					<p>Досадная недоработка в конфигураторе NetApp, не позволяющая купить FAS3210 без сконфигурированного MPHA, для которого требовалась дополнительная карта портов SAS, занимающая один из двух слотов расширения контроллера, и, например, мешавшая получить в 3210 и 10GB Ethernet и Flash Cache разом, в одной системе –&#160; устранена.</p>
<p>Ранее опубликованный <a href="../../../1008/trackback.html">пост</a> исправлен, и, так как он оказался, неожиданно для меня, весьма резонансным, этим отдельным постом я хочу привлечь внимание к этому исправлению.</p>
<p><font color="#ff0000">Теперь нет нужды в хитрых маневрах, чтобы купить FAS3210 с 10G Ethernet и Flash Cache (по факту, весьма популярный вариант), конфигуратор исправлен, и теперь такую конфигурацию можно без проблем сконфигурировать и заказать.</font></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/3210.html" rel="tag">3210</a>, <a href="../../../tag/mpha.html" rel="tag">mpha</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;" rel="category tag">justread</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>,  <a href="../../news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1044/trackback.html#comments" title="Комментарий к записи Еще несколько слов про MPHA: исправления">Комментарии (3)</a>									 </div>
			</div>
	
		
		<div class="navigation">
			<div class="alignleft"><a href="3.html">&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="../index.html">Next Entries &raquo;</a></div>
		</div>
		
	
	</div>
	<div id="sidebar">
		<ul>
			
			
			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Автор</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			<li class="pagenav"><h2>Страницы</h2><ul><li class="page_item page-item-153"><a href="../../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul></li>
			<li><h2>Рубрики</h2>
				<ul>
					<li class="cat-item cat-item-89"><a href="../../commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;">commands</a>
</li>
	<li class="cat-item cat-item-37"><a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;">howto</a>
</li>
	<li class="cat-item cat-item-52"><a href="../../justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;">justread</a>
</li>
	<li class="cat-item cat-item-51"><a href="../../review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;">review</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;">techtalk</a>
</li>
	<li class="cat-item cat-item-71 current-cat"><a href="../index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;">tricks</a>
</li>
	<li class="cat-item cat-item-95"><a href="../../utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;">utilities</a>
</li>
	<li class="cat-item cat-item-44"><a href="../../whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;">whoisho</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;">новости</a>
</li>
	<li class="cat-item cat-item-387"><a href="../../opros.html" title="Просмотреть все записи в рубрике &laquo;опрос&raquo;">опрос</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;">переводы</a>
</li>
	<li class="cat-item cat-item-40"><a href="../../citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;">цитаты</a>
</li>
				</ul>
			</li>

			<li><h2>Архивы</h2>
				<ul>
					<li><a href='../../../date/2018/01.html' title='Январь 2018'>Январь 2018</a></li>
	<li><a href='../../../date/2015/10.html' title='Октябрь 2015'>Октябрь 2015</a></li>
	<li><a href='../../../date/2015/04.html' title='Апрель 2015'>Апрель 2015</a></li>
	<li><a href='../../../date/2015/03.html' title='Март 2015'>Март 2015</a></li>
	<li><a href='../../../date/2015/01.html' title='Январь 2015'>Январь 2015</a></li>
	<li><a href='../../../date/2014/12.html' title='Декабрь 2014'>Декабрь 2014</a></li>
	<li><a href='../../../date/2014/11.html' title='Ноябрь 2014'>Ноябрь 2014</a></li>
	<li><a href='../../../date/2014/10.html' title='Октябрь 2014'>Октябрь 2014</a></li>
	<li><a href='../../../date/2014/09.html' title='Сентябрь 2014'>Сентябрь 2014</a></li>
	<li><a href='../../../date/2014/08.html' title='Август 2014'>Август 2014</a></li>
	<li><a href='../../../date/2014/07.html' title='Июль 2014'>Июль 2014</a></li>
	<li><a href='../../../date/2014/06.html' title='Июнь 2014'>Июнь 2014</a></li>
	<li><a href='../../../date/2014/05.html' title='Май 2014'>Май 2014</a></li>
	<li><a href='../../../date/2014/04.html' title='Апрель 2014'>Апрель 2014</a></li>
	<li><a href='../../../date/2014/03.html' title='Март 2014'>Март 2014</a></li>
	<li><a href='../../../date/2014/02.html' title='Февраль 2014'>Февраль 2014</a></li>
	<li><a href='../../../date/2014/01.html' title='Январь 2014'>Январь 2014</a></li>
	<li><a href='../../../date/2013/12.html' title='Декабрь 2013'>Декабрь 2013</a></li>
	<li><a href='../../../date/2013/11.html' title='Ноябрь 2013'>Ноябрь 2013</a></li>
	<li><a href='../../../date/2013/10.html' title='Октябрь 2013'>Октябрь 2013</a></li>
	<li><a href='../../../date/2013/09.html' title='Сентябрь 2013'>Сентябрь 2013</a></li>
	<li><a href='../../../date/2013/08.html' title='Август 2013'>Август 2013</a></li>
	<li><a href='../../../date/2013/07.html' title='Июль 2013'>Июль 2013</a></li>
	<li><a href='../../../date/2013/06.html' title='Июнь 2013'>Июнь 2013</a></li>
	<li><a href='../../../date/2013/05.html' title='Май 2013'>Май 2013</a></li>
	<li><a href='../../../date/2013/04.html' title='Апрель 2013'>Апрель 2013</a></li>
	<li><a href='../../../date/2013/03.html' title='Март 2013'>Март 2013</a></li>
	<li><a href='../../../date/2013/02.html' title='Февраль 2013'>Февраль 2013</a></li>
	<li><a href='../../../date/2013/01.html' title='Январь 2013'>Январь 2013</a></li>
	<li><a href='../../../date/2012/12.html' title='Декабрь 2012'>Декабрь 2012</a></li>
	<li><a href='../../../date/2012/11.html' title='Ноябрь 2012'>Ноябрь 2012</a></li>
	<li><a href='../../../date/2012/10.html' title='Октябрь 2012'>Октябрь 2012</a></li>
	<li><a href='../../../date/2012/09.html' title='Сентябрь 2012'>Сентябрь 2012</a></li>
	<li><a href='../../../date/2012/08.html' title='Август 2012'>Август 2012</a></li>
	<li><a href='../../../date/2012/07.html' title='Июль 2012'>Июль 2012</a></li>
	<li><a href='../../../date/2012/06.html' title='Июнь 2012'>Июнь 2012</a></li>
	<li><a href='../../../date/2012/05.html' title='Май 2012'>Май 2012</a></li>
	<li><a href='../../../date/2012/04.html' title='Апрель 2012'>Апрель 2012</a></li>
	<li><a href='../../../date/2012/03.html' title='Март 2012'>Март 2012</a></li>
	<li><a href='../../../date/2012/02.html' title='Февраль 2012'>Февраль 2012</a></li>
	<li><a href='../../../date/2012/01.html' title='Январь 2012'>Январь 2012</a></li>
	<li><a href='../../../date/2011/12.html' title='Декабрь 2011'>Декабрь 2011</a></li>
	<li><a href='../../../date/2011/11.html' title='Ноябрь 2011'>Ноябрь 2011</a></li>
	<li><a href='../../../date/2011/10/index.html' title='Октябрь 2011'>Октябрь 2011</a></li>
	<li><a href='../../../date/2011/09/index.html' title='Сентябрь 2011'>Сентябрь 2011</a></li>
	<li><a href='../../../date/2011/08.html' title='Август 2011'>Август 2011</a></li>
	<li><a href='../../../date/2011/07/index.html' title='Июль 2011'>Июль 2011</a></li>
	<li><a href='../../../date/2011/06/index.html' title='Июнь 2011'>Июнь 2011</a></li>
	<li><a href='../../../date/2011/05/index.html' title='Май 2011'>Май 2011</a></li>
	<li><a href='../../../date/2011/04/index.html' title='Апрель 2011'>Апрель 2011</a></li>
	<li><a href='../../../date/2011/03/index.html' title='Март 2011'>Март 2011</a></li>
	<li><a href='../../../date/2011/02.html' title='Февраль 2011'>Февраль 2011</a></li>
	<li><a href='../../../date/2011/01.html' title='Январь 2011'>Январь 2011</a></li>
	<li><a href='../../../date/2010/12.html' title='Декабрь 2010'>Декабрь 2010</a></li>
	<li><a href='../../../date/2010/11/index.html' title='Ноябрь 2010'>Ноябрь 2010</a></li>
	<li><a href='../../../date/2010/10/index.html' title='Октябрь 2010'>Октябрь 2010</a></li>
	<li><a href='../../../date/2010/09/index.html' title='Сентябрь 2010'>Сентябрь 2010</a></li>
	<li><a href='../../../date/2010/08.html' title='Август 2010'>Август 2010</a></li>
	<li><a href='../../../date/2010/07/index.html' title='Июль 2010'>Июль 2010</a></li>
	<li><a href='../../../date/2010/06.html' title='Июнь 2010'>Июнь 2010</a></li>
	<li><a href='../../../date/2010/05.html' title='Май 2010'>Май 2010</a></li>
	<li><a href='../../../date/2010/04/index.html' title='Апрель 2010'>Апрель 2010</a></li>
	<li><a href='../../../date/2010/03/index.html' title='Март 2010'>Март 2010</a></li>
	<li><a href='../../../date/2010/02.html' title='Февраль 2010'>Февраль 2010</a></li>
	<li><a href='../../../date/2010/01.html' title='Январь 2010'>Январь 2010</a></li>
	<li><a href='../../../date/2009/12/index.html' title='Декабрь 2009'>Декабрь 2009</a></li>
	<li><a href='../../../date/2009/11/index.html' title='Ноябрь 2009'>Ноябрь 2009</a></li>
	<li><a href='../../../date/2009/10.html' title='Октябрь 2009'>Октябрь 2009</a></li>
	<li><a href='../../../date/2009/09.html' title='Сентябрь 2009'>Сентябрь 2009</a></li>
	<li><a href='../../../date/2009/08/index.html' title='Август 2009'>Август 2009</a></li>
	<li><a href='../../../date/2009/07/index.html' title='Июль 2009'>Июль 2009</a></li>
	<li><a href='../../../date/2009/06.html' title='Июнь 2009'>Июнь 2009</a></li>
	<li><a href='../../../date/2009/05.html' title='Май 2009'>Май 2009</a></li>
	<li><a href='../../../date/2009/04.html' title='Апрель 2009'>Апрель 2009</a></li>
	<li><a href='../../../date/2009/03.html' title='Март 2009'>Март 2009</a></li>
	<li><a href='../../../date/2009/02.html' title='Февраль 2009'>Февраль 2009</a></li>
	<li><a href='../../../date/2009/01.html' title='Январь 2009'>Январь 2009</a></li>
	<li><a href='../../../date/2008/12.html' title='Декабрь 2008'>Декабрь 2008</a></li>
	<li><a href='../../../date/2008/11.html' title='Ноябрь 2008'>Ноябрь 2008</a></li>
	<li><a href='../../../date/2008/10.html' title='Октябрь 2008'>Октябрь 2008</a></li>
	<li><a href='../../../date/2008/09.html' title='Сентябрь 2008'>Сентябрь 2008</a></li>
	<li><a href='../../../date/2008/08.html' title='Август 2008'>Август 2008</a></li>
	<li><a href='../../../date/2008/03.html' title='Март 2008'>Март 2008</a></li>
	<li><a href='../../../date/2008/02.html' title='Февраль 2008'>Февраль 2008</a></li>
	<li><a href='../../../date/2007/12.html' title='Декабрь 2007'>Декабрь 2007</a></li>
	<li><a href='../../../date/2007/11.html' title='Ноябрь 2007'>Ноябрь 2007</a></li>
	<li><a href='../../../date/2007/10.html' title='Октябрь 2007'>Октябрь 2007</a></li>
	<li><a href='../../../date/2007/09.html' title='Сентябрь 2007'>Сентябрь 2007</a></li>
	<li><a href='../../../date/2007/08.html' title='Август 2007'>Август 2007</a></li>
	<li><a href='../../../date/2007/07/index.html' title='Июль 2007'>Июль 2007</a></li>
	<li><a href='../../../date/2007/06.html' title='Июнь 2007'>Июнь 2007</a></li>
	<li><a href='../../../date/2007/05.html' title='Май 2007'>Май 2007</a></li>
				</ul>
			</li>

			
					</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="../../../../feed">Entries (RSS)</a> and <a href="../../../../comments/feed">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 15 queries. 0.102 seconds. -->
	</div>
</div> <!-- page -->
</body>
</html>
