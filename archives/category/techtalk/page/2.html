<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>about NetApp   &raquo; techtalk</title>

<link rel="stylesheet" href="../../../../wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="about NetApp RSS Feed" href="../../../../feed" />
<link rel="pingback" href="../../../../xmlrpc.php.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.6" />

</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="../../../../index.html" title="about NetApp: Системы хранения данных как предмет разговора">about NetApp</a></h1>
		<p>Системы хранения данных как предмет разговора</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="../../../../index.html">
<input type="text" size="20" name="s" id="s" value="Поиск..."  onblur="if(this.value=='') this.value='Поиск...';" onfocus="if(this.value=='Поиск...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="navbar">
<ul id="nav">
	<li><a href="../../../../index.html">Home</a></li>
	<li class="page_item page-item-153"><a href="../../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content">

	
			<p>Archive for the &#8216;techtalk&#8217; Category.</p>

 				
		<div class="navigation">
			<div class="alignleft"><a href="3.html">&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="../index.html">Next Entries &raquo;</a></div>
		</div>

						
			<div class="post" id="post-1292">
				<h2 class="posttitle"><a href="../../../1292/trackback.html" rel="bookmark" title="Permanent Link to Reallocation в Data ONTAP. Часть 1.">Reallocation в Data ONTAP. Часть 1.</a></h2>
				<div class="postmetadata">23 Сентябрь 2013, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Многие мои посты тут пишутся заранее, и потом <em>отлеживаются</em>. Некоторые – отлеживаются в моей голове. Но среди них есть порой и настоящие старожилы, вот, например, посту на тему того, как работает reallocation в WAFL и Data ONTAP, скоро уж три года. Все это время я пытаюсь сложить полноценную, непротиворечивую и исчерпывающую картину вопроса, чтобы изложить это все в блоге. Проблема в том, что, вследствие закрытости многих механизмов работы Data ONTAP (а также того, что они меняются, а закрытость позволяет не рассказывать публике об изменениях в деталях), многие вопросы остаются для меня не исчерпывающе отвеченными. Но, тем не менее, давайте перестанем тянуть кота за хвост, и приступим к тому, что нам известно, и о чем можно рассказать.</p>
<p>Тема процесса перекомпоновки блоков данных в структурах WAFL всегда была <em>темноватой</em>, и, как любая тема, испытывающая недостаток ясности, она раз за разом становится поводом для более или менее честных <a href="../../../1272/trackback.html">спекуляций</a>, причем не только со стороны <a href="../../../1266/trackback.html">конкурентов NetApp</a> по рынку систем хранения данных, но, зачастую, и среди самих пользователей. Типичным ходом в такой спекуляции является назвать процессы записи на WAFL – “фрагментацией”, и, готово дело, дальше уже можно пугать потенциальных клиентов NetApp жупелом, растущим еще из FAT и обязательного Norton Defragment с бегающими квадратиками.</p>
<p>О том, насколько на самом деле так называемая “фрагментация” на WAFL влияет на производительность я уже <a href="../../../tag/fragmentation.html">писал не раз</a>, не стану повторяться, все есть по ссылкам выше, сегодня поговорим об обратном процессе, что же представляет собой процесс <em>reallocation</em>.</p>
<p><strong>Reallocation</strong> – это фоновый процесс в OS Data ONTAP, который оптимизирует и перераспределяет структуру хранения блоков WAFL для оптимизации к ним доступа. Он близко связан с тем, как именно происходит запись данных на WAFL в OS Data ONTAP. Не вполне корректно называть процесс реаллокации - “дефрагментацией”, как и проводить аналогии с файловой системой, например FAT, построенной на совсем иных&#160; принципах выделения пространства. Многие годы считалось, например, что файловые системы Linux (читай inode-овые BSD-like файловые системы, с использованием идей которых создана и WAFL) <a href="https://www.google.co.th/search?q=linux+не+требует+дефрагментации">вообще не подвержены фрагментации</a>, так, до ext4 там вообще не существовало штатных средств “дефрагментации”, и ничего, работали же, а многие системы в продакшне и на ext3fs работают и до сих пор. Но, конечно, фрагментация, или, корректнее <em>non-contiguous file allocation</em> существует и в них, и с ростом дисковой нагрузки на серверные системы в целом, и увеличении объемов хранения, несомненно эта проблема стала все более заметной. Оставим сейчас в стороне спор, насколько фрагментация данных влияет в условиях, когда практически 100% workload составляет не sequental, а random access, об этом <a href="../../../455/trackback.html">я уже писал</a>, поговорим о том, что же можно сделать для оптимизации структуры хранения путем вот этой самой block reallocation. Подобной “фрагментации” данных подверженны все системы хранения (особенно использующие современные фишечки работы с данныеми, такие как снэпшоты, дисковые пулы, thin provisioning, а не просто dumb SCSI LUN). Но не все умеют с этим бороться.     <br />NetApp – умеет.</p>
<p>В документации сказано скупо:</p>
<p><em><strong>reallocate</strong> - Command for managing reallocation of files, LUNs, volumes, and aggregates</em></p>
<p><em>The <strong>reallocate</strong> family of commands manages the allocation, or layout optimization, of large files and       <br />LUNs on a node. Additionally all files in a volume may be reallocated, and the block layout of       <br />aggregates may be optimized. Using the <strong>reallocate</strong> command, layout measurement and optimization       <br />(reallocation) can be automated.</em></p>
<p>Определенную сложность для пользователей вызывает тот факт, что процесс reallocate не запущен на системе по умолчанию. Сделано это, по всей видимости, исходя из главного принципа, которым руководствуется NetApp, назначая свои значения по умолчанию. Даже если вы не прочтете ни одной страницы документации, и запустите систему хранения “энтером” (то есть просто тупо давя Enter на все вопросы, соглашаясь на все установки по умолчанию), то даже при сочетании самых нелепых решений, данные не будут повреждены и система будет, пусть неоптимально, но работать. В общем тот самый врачебный Noli Nocere! - “Не навреди!”. Реаллокация может быть не нужна в ряде профилей использования. Но даже когда она не нужна, а она запущена по умолчанию, и при этом вы об этом не знаете, она неизбежно занимает какую-то долю системных ресурсов, и лучше было бы, чтобы, если уж она запущена, то запущена она была “по делу”, и понимающим это человеком. </p>
<p>Вот поэтому по умолчанию, на свежеустановленной системе процесс <em>reallocation</em> не запущен автоматически и не работает.</p>
<p>Для того, чтобы понять, нужна ли вам <em>reallocation</em>, и какой эффект она вам даст, вам следует найти ответы на ряд вопросов, связанных с вашей системой и данными на ней хранящимися.</p>
<ol>
<li>Насколько сильно, в процентном отношении, заполнены активными, изменяющимися, а не просто хранящимися данными, заполнены диски, конкретнее - тома на aggregate?      </li>
<li>Каков процент свободного места на томах и aggregate? (помните, что WAFL – структура thin by design, и для нее 100% занятый пустыми томами aggregate – пустой)      </li>
<li>Насколько активно используется на томах deduplication, и сколько места она у вас высвобождает.      </li>
<li>Наконец, насколько часто вы расширяли тома и aggregate физическими дисками? </li>
</ol>
<p>На первые два вопроса ответ, и то как он соотносится с темой необходимости реаллокации, вы, скорее всего <a href="../../../881/trackback.html">уже знаете</a>. Если на диске в момент записи достаточно свободного места, то подсистема, выделяющая на диске место по запросу OS в форме дисковых <em>экстентов</em>, или протяженных сегментов блоков, с легкостью найдет и выделит процессу записи любое нужное количество блоков в единой цепочке. ??менно по этой причине в таких файловых системах, как ext2/3 и NTFS фрагментация файлов в самом деле принципиально ниже, чем в FAT, где OS не использует такое “групповое выделение” блоков, и занимает их по порядку, один за одним, не обращая внимание на то, где и как они расположены. Разумеется такой вариант, особенно в активной и, как это называется, <em>aged</em>, то есть давно используемой в работе файловой системе, вызывает существенное дробление фрагментов файла по диску.</p>
<p>Это не так в уже перечисленных “BSD-like” системах и NTFS. Пока на файловой системе есть достаточно свободного места, механизм выделения цепочек последовательных блоков работает хорошо. Сложности начинаются тогда, когда файловая система заполняется файлами, которые произвольно создаются и удаляются, и постепенно структура блоков данных начинает напоминать сыр с его дырками, когда вроде место и есть, но оно все “пузырьками”. Дело в том, что если последовательный экстент блоков нужной длины на дисковом томе найти не удается (а данные писать все ж таки надо), то описываемая подсистема OS говорит файловой системе: “ну ОК, давай мне два покороче, пусть в разных местах. Нету? Ну что-ж, ну а четыре еще короче есть?”. ?? такое <a href="../../../225/trackback.html">дробление</a> продолжается до тех пор, пока вся последовательность, ожидающая записи на диски не будет записана.</p>
<p>Очевидно, что чем меньше у файловой системы будет “пространства для маневра”, то есть последовательно свободного пространства на томе, и чем больше будет на этот том записей и перезаписей, тем сложнее ей будет&#160; с каждым разом&#160; находить связные последовательно куски блоков. ??менно по этой причине, например, Windows тревожно закрашивает красным диск, слишком сильно заполненным данными. Если это диск с файловой системой, которая не просто залита фильмами, как на скриншоте ниже, а активно обновляется, записывается и перезаписывается данными, то вскоре вы увидите, что коэффициент фрагментации файлов, ранее невысокий, на ней вдруг начнет резко расти, ухудшая ее характеристики производительности.</p>
<p><a href="/pics/Reallocation--Data-ONTAP_D3DC/image.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="/pics/Reallocation--Data-ONTAP_D3DC/image_thumb.png" width="658" height="204" /></a></p>
<p>Напомню, что рекомендуется поддерживать 10-15% свободного места на томе и aggregate для нормальной работы описанных выше механизмов (это примерно совпадает с рекомендациями MS для NTFS), причем на уровне aggregate это пространство уже зарезервировано в WAFL reserve, недоступном пользователю.</p>
<p>Подводя итоги по этой части хочу специально указать: это <em>рекомендация</em>, но не <em>требование</em>. Вы МОЖЕТЕ заполнить диск данными на все 100% его емкости. ?? в ряде случаев, например как на картинке выше, где приведен скриншот моего лэптопа, и где выделенный диск есть хранилище бэкапов, фильмов и музыки, то есть записи на него нерандомны и крайне редки, это не имеет большого значения и мало влияет на его производительность.</p>
<p>Но если ваши данные активно перезаписываются, и у вас есть возможность не заливать их на том “с горкой”, то оставьте побольше свободного места на томе (и на aggregate для thin-томов) – не пожалеете :)</p>
<p>??так, чтобы не раздувать один пост, продолжим на следующей неделе.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/defragmentation.html" rel="tag">defragmentation</a>, <a href="../../../tag/fragmentation.html" rel="tag">fragmentation</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/reallocate.html" rel="tag">reallocate</a>, <a href="../../../tag/reallocation.html" rel="tag">reallocation</a><br />					Раздел: <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1292/trackback.html#comments" title="Комментарий к записи Reallocation в Data ONTAP. Часть 1.">Комментарии (10)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1285">
				<h2 class="posttitle"><a href="../../../1285/trackback.html" rel="bookmark" title="Permanent Link to Новые версии SnapDrive Win 7.0, SnapManager for SQL 7.0 и Hyper-V 2.0">Новые версии SnapDrive Win 7.0, SnapManager for SQL 7.0 и Hyper-V 2.0</a></h2>
				<div class="postmetadata">9 Сентябрь 2013, 11:02 <!-- от  --></div>
				<div class="postentry">
					<p>Тем временем, на прошлй неделе NetApp обновил несколько своих важных утилит “стороны хоста”. Как вы знаете, и многие, уверен, пользуетесь, средствами работы со стораджем на стороне хост-системы. С выходом Server 2012 и 2012 R2, и их новых возможностей, насущно встала необходимость обновления набора хост-инструментов NetApp.</p>
<p>Появилась новая версия <strong>SnapDrive</strong>, инструмента для создания снэпшотов, LUN-ов и управления ими со стороны сервера. Также этот инструмент предоставляет API для работы многим другим программным хост-средствам NetApp.</p>
<p>Основные новинки это:</p>
<ul>
<li>Поддержка Cluster-mode (наконец-то)</li>
<li>Поддержка SMB 3.0</li>
<li>Sub-LUN cloning</li>
<li>Поддержка командлетов PowerShell 2.0+ для SMB 3.0</li>
<li>Virtual Fibre Channel</li>
<li>Поддержка gMSA – group Managed Service Account в Windows Server 2012</li>
</ul>
<p>Опубликован TR-4000: &quot;<a href="http://media.netapp.com/documents/tr-4000.pdf">SnapDrive 7.0 for Windows Best Practices for Clustered Data ONTAP</a>&quot;.</p>
<p><strong>SnapManager for Hyper-V</strong> обновился до долгожданной версии 2.0</p>
<p>Среди новинок:</p>
<ul>
<li>??нтеграция со SnapVault</li>
<li>Поддержка не только SAN (FC, iSCSI, FCoE), но и SMB 3.0, в частности теперь поддерживается remote VSS hardware providers</li>
<li>Для SMB 3.0 и CSV 2.0 также поддерживаются SnapInfo</li>
<li>Поддерживаются gMSA</li>
<li>Наконец-то поддерживается восстановление по альтернативному пути (например для DR-сайтов) и восстановление удаленных (deleted) VM из бэкапов типа crash-consistent.</li>
<li>Поддерживается установка на remote-хост.</li>
</ul>
<p>Вместе со всеми обновился и третий важный компонент win-хост инструментов: <strong>SnapManager for SQL Server</strong>.</p>
<p>Новинки:</p>
<ul>
<li>Поддержка SMB 3.0 (напомню, что пока SMB 3.0 есть <strong>только на Cluster-mode</strong>!)</li>
<li>??нтеграция со SnapVault (archived backup могут отправляться на secondary SnapVault на clustered-системе)</li>
<li>Восстановление базы данных в другое расположение того же инстанса MS SQL Server</li>
<li>Поддержка gMSA и возможность запуска SMSQL из него</li>
<li>Улучшена производительность работы для ряда сценариев использования</li>
</ul>
<p>Все версии опубликованы и доступны пользователям NetApp для скачивания на сайте NetApp Support.</p>
<p>Не забывайте внимательно читать Release Notes перед установкой или обновлением!</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/70.html" rel="tag">7.0</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/smb-30.html" rel="tag">smb 3.0</a>, <a href="../../../tag/snapdrive.html" rel="tag">snapdrive</a>, <a href="../../../tag/snapmanager.html" rel="tag">snapmanager</a><br />					Раздел: <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>,  <a href="../../utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;" rel="category tag">utilities</a>,  <a href="../../news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1285/trackback.html#comments" title="Комментарий к записи Новые версии SnapDrive Win 7.0, SnapManager for SQL 7.0 и Hyper-V 2.0">1 комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1273">
				<h2 class="posttitle"><a href="../../../1273/trackback.html" rel="bookmark" title="Permanent Link to Что HP думает о NetApp, и как все обстоит на самом деле. Часть 2">Что HP думает о NetApp, и как все обстоит на самом деле. Часть 2</a></h2>
				<div class="postmetadata">8 Август 2013, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>&#160;</p>
<blockquote><p align="right"><em>Природа не терпит пустоты: там, где люди не знают правды, они заполняют пробелы домыслом.        <br /></em>Джордж Бернард Шоу</p>
</blockquote>
<p>В <a href="../../../1272/trackback.html">прошлом посте</a> я начал детальный разбор довольно объемного текста, написанного специалистами компании HP о том, как и в чем они видят недостатки систем хранения NetApp. Так как с их стороны это оказалось крайне субъективное и неточное изложение вопроса, грешащее многочисленными ляпами, более или менее неосознанными заблуждениями и непониманием ряда основополагающих технологий, использованных у NetApp, я счел себя обязанным не оставлять его без ответа, и написать эту комментрованную рецензию, которую и предлагаю вашему вниманию. Это – вторая половина текста, смотрите первую часть в предыдущем посте.</p>
<p>Я намеренно выбрал тут тактику “чистой обороны”, и ничего, или почти ничего не говорю о свойствах и недостатках систем “противной стороны”, хотя, безусловно, у NetApp есть что острого и ехидного спросить у HP на их счет. Я лично считаю жанр “говнилок”, в котором написан исследуемый текст, довольно-таки “грязным”, он пишется, как правило, анонимно, и, по законам жанра, изобилует полемическим передергиванием, лично я считаю, что писать такие тексты – <em>западло</em> (давайте я уже скажу это слово ;). Но – “с волками жить – по волчьи выть, иначе будешь сидеть без бонусов”, я понимаю что именно заставляет такое писать.</p>
<p>А теперь давайте продолжим разбор обсуждаемого документа.</p>
<p>   <a href="../../../1273/trackback.html#more-1273" class="more-link"><small>Continue reading &#8216;Что HP думает о NetApp, и как все обстоит на самом деле. Часть 2&#8217; &raquo;</small></a></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/3par.html" rel="tag">3Par</a>, <a href="../../../tag/fud/index.html" rel="tag">fud</a>, <a href="../../../tag/hp.html" rel="tag">hp</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/storeserv.html" rel="tag">storeserv</a><br />					Раздел: <a href="../../justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;" rel="category tag">justread</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1273/trackback.html#comments" title="Комментарий к записи Что HP думает о NetApp, и как все обстоит на самом деле. Часть 2">Комментарии (10)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1272">
				<h2 class="posttitle"><a href="../../../1272/trackback.html" rel="bookmark" title="Permanent Link to Что HP думает о NetApp, и как все обстоит на самом деле. Часть 1">Что HP думает о NetApp, и как все обстоит на самом деле. Часть 1</a></h2>
				<div class="postmetadata">5 Август 2013, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>&#160;</p>
<p>Пару недель назад мне в руки попал текст, подготовленный специалистами компании HP, продававшей систему HP 3Par, или как она сейчас называется, StoreServ 7000 против предложенного уже этому клиенту midrange NetApp. Документ относится к популярному в российском IT жанру “говнилок”, или, выражаясь интеллигентно – FUD (Fear, Uncertainity and Doubt). Как правило <a href="../../../1266/trackback.html">такие документы</a> мне приходится встречать со стороны пресейл-инженеров компании <a href="../../../tag/emc/index.html">EMC</a>, но впервые мне попадается в полном виде текст от HP, этим он особенно интересен. HP, как компания, находится в довольно-таки привелигированном положении на рынке, в особенности на российском. Это большая, крайне авторитетная компания “полного стека”, которая может предложить своим клиентам полный спектр оборудования, от серверов и систем хранения, активное сетевое оборудование, до шкафов и UPS. </p>
<p>Тем печальнее, что за последних 10 лет отдел систем хранения в компании был в явном “загоне”. Обладая в начале 90-х передовой и в чем-то даже революционной системой хранения EVA (Enterprise Virtual Array), компания “почивала на лаврах” и допочивалась до того, что EVA на рынке катастрофически морально устарела. Весь мир стораджей ушел вперед, за новыми модными фичами, а HP как продавала в мидрендже – EVA, в high-end ребрендированный Hitachi USP, а в энтрилевеле – DotHill, так и продавала. ?? допродавалась до катастрофических результатов. Сегодня из компаний в External Storage Top5 только HP <a href="http://www.storagenewsletter.com/images/public/sites/StorageNewsletter.com/articles/0icono12/idc_4q12_f3_540.jpg">теряет объемы продаж</a>, все остальные растут.</p>
<p>Вовремя (надеюсь) спохватившись, HP активно занялась обновлением своего стораджевого портфолио, традиционно “взяв под крыло” несколько небольших компаний с их интересными продуктами, таких как LeftHand и 3Par, и которым явно не хватало веса “продавиться” на рынок. Однако атмосфера долгого застоя в отделе стораджей все еще явно дает о себе знать. Для меня очень показательным стал разбор приведенного ниже документа, как на ладони демонстрирующего текущие проблемы <a href="http://en.wikipedia.org/wiki/HP_StorageWorks">HP StorageWorks</a> как отдела компании: устарелость использованных при подготовке инженеров материалов, крайняя узость эрудиции в области современных технологий, а как результат – низкая компетенция, по крайней мере в анализе продуктов конкурентов (я хочу думать о людях лучше, и верю, что в своих новых системах инженеры HP разбираются куда лучше, чем демонстрируют на системах конкурентов).</p>
<p>Документ сравнительно свежий, написан 11.09.2012 года в программе, зарегистрированной на имя <a href="http://www.linkedin.com/pub/%D0%B2%D0%BB%D0%B0%D0%B4%D0%B8%D0%BC%D0%B8%D1%80-%D0%BA%D0%BE%D1%80%D0%BE%D0%B1%D0%B5%D0%B9%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2/45/569/b49">Владимир Коробейников</a>, это человек, работающий на позиции storage presale в HP с 2006 года (эту информацию можно почерпнуть в свойствах файла), я не утверждаю, что текст писал именно он, но эти данные в файле имеются.</p>
<p>??так, давайте посмотрим, что по поводу NetApp FAS думает HP, и как все обстоит на самом деле, где пресейлы HP ошибаются, от незнания или преднамеренно, где и почему вводят этим документом его читающего потенциального покупателя в заблуждение, а также как намерены бороться за продажи своих систем против NetApp.</p>
<p>Я далее приведу практически весь этот обширный документ, разрывая оригинальный текст своими комментариями, но постараюсь ничего не пропускать, дабы не быть обвиненным в тенденциозном выдирании из контекста, поэтому получтся несколько длинно, и я был вынужден поделить его на несколько частей, но потерпите уж. Это будет интересно, на мой взгляд.</p>
<p>   <a href="../../../1272/trackback.html#more-1272" class="more-link"><small>Continue reading &#8216;Что HP думает о NetApp, и как все обстоит на самом деле. Часть 1&#8217; &raquo;</small></a></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/3par.html" rel="tag">3Par</a>, <a href="../../../tag/fud/index.html" rel="tag">fud</a>, <a href="../../../tag/hp.html" rel="tag">hp</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/storeserv.html" rel="tag">storeserv</a><br />					Раздел: <a href="../../justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;" rel="category tag">justread</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1272/trackback.html#comments" title="Комментарий к записи Что HP думает о NetApp, и как все обстоит на самом деле. Часть 1">Комментарии (92)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1277">
				<h2 class="posttitle"><a href="../../../1277/trackback.html" rel="bookmark" title="Permanent Link to Вышел Flash Accel 1.2">Вышел Flash Accel 1.2</a></h2>
				<div class="postmetadata">2 Август 2013, 15:49 <!-- от  --></div>
				<div class="postentry">
					<p>Если вы еще не запутались окончательно в многочисленных Flash-что-то у NetApp, то вы помните, для тех же, кто запутался - вкратце:   <br /><strong><a href="http://">Flash Cache</a></strong> - плата с микросхемами flash memory, устанавливаемая внутрь контроллера на его внутреннюю шину PCIe, и НЕ являющаяся SSD. Обрабатывает только чтение, используя write-акселерацию WAFL для ускорения записи.    <br />Я бы хотел специально отметить, так как многие на это не обращают внимание: именно так, в два слова с большой буквы, потому что <a href="http://en.wikipedia.org/wiki/flashcache">flashcache</a> это совсем другой продукт, это опенсорсный проект кэша приложений на flash-памяти, разработанный в Facebook.    <br /><strong><a href="../../../1158/trackback.html">Flash Pool</a></strong> - ранее назывался Hybrid Pool, расширение структуры aggregate, позволяющее включать в него SSD (в виде дисков в полках) для еще одного варианта кэширования операций. Работает и на чтение, и на запись. Может работать на одной системе в Flash Cache, расширяя его.    <br /><strong><a href="../../../1194/trackback.html">Flash Accel</a> </strong>- то, о чем я пишу сегодня. Бесплатная для клиентов NetApp программная система, которая устанавливается на стороне сервера, и позволяет использовать установленные на сервере SSD или платы с flash на PCIe, как локальный кэш на стороне этого сервера. Ориентирована она, прежде всего, на работу с гипервизором VMware ESXi.</p>
<p>Flash Accel позволяет улучшить производительность системы, сняв часть операций ввода-вывода с backend стораджа, что заметно и положительно сказывается на производительности VM.   <br />Он обеспечивает &quot;когерентность&quot; данных между локальным кэшем сервера в flash/SSD и содержимым сетевого хранилища.    <br />Независим от используемых в сервере SSD и плат flash на PCIe.    <br />Позволяет сохранять кэш при перезагрузке системы хранения.    <br />Обеспечивает передачу записей в сетевой сторадж, тем самым обеспечивая целостность данных    <br />Работает как с 7-mode, так и Clustered Data ONTAP.</p>
<p>На прошлой неделе вышла новая версия этого продукта - Flash Accel 1.2, и вот что в ней нового:</p>
<ul>
<li>Поддерживается VMware vSphere 5.1.</li>
<li>VM, использующие Flash Accel, теперь могут использовать vMotion и VMware HA.</li>
<li>Поддерживатся iSCSI LUN-ы, смонтированные в гостевой OS.</li>
<li>Поддерживается работа с ASUP (AutoSupport).</li>
<li>Улучшена работа FMC (Flash Accel Management Console).</li>
<li>Поддерживаются FusionIO ioDrive card.</li>
<li>Управляется через VSC 4.2 (Virtual Storage Console).</li>
<li>Появился импорт и экспорт конфигураций.</li>
<li>Сохраняется лог консоли.</li>
</ul>
<p>Схема работы и устройства Flash Accel:</p>
<p><img src="https://communities.netapp.com/servlet/JiveServlet/showImage/38-12688-22212/FA+block+diagram.jpg" width="640" height="364" /></p>
<p>Как вы видите, решение состоит из нескольких основных частей. Это: </p>
<p><strong>Flash Accel Host Agent</strong>, устанавливаемый на ESXi как VIB, и обеспечивающий управление локально установленными SSD в физическом сервере. Он создает виртуальное логическое устройство, представленное для ESXi как SCSI-устройство. Будучи созданным на нескольких хостах, оно имеет одинаковый WWN, что позволяет гипервизору со своей стороны трактовать его как единое и совместно используемое, и это позволяет использующим его виртуальным машинам работать в vMotion и VMware HA. На одном хосте вы можете кэшировать до 32 VM.</p>
<p><strong>Flash Accel Agent</strong> для VM (Windows), в настоящий момент, к сожалению, есть только для Windows Server 2008 R2, поддержка Linux обещана. Этот компонент необходим для включения-выключения кэширования этой VM, добавляет возможности управления с помошью командлетов PowerShell, коммуницирует с Flash Accel Management Console (FMC), и позволяет интегрироваться Flash Accel в SnapDrive и SnapManager.</p>
<p><strong>Flash Accel Management Console (FMC)</strong> – это виртуальный appliance, который ставится в среде vSphere, и позволяет управлять всей конструкцией Flash Accel в целом.</p>
<p><img src="https://communities.netapp.com/servlet/JiveServlet/showImage/38-12688-22213/FA+Management+console.jpg" width="640" height="427" /></p>
<p>Подробнее про работу FMC можно посмотреть на скринкасте:    <br /><a href="https://communities.netapp.com/videos/3416">https://communities.netapp.com/videos/3416</a></p>
<p>Flash Accel был протестирован на задачах вида OLTP, и показал, что может снять с системы хранения в локальный SSD-кэш до 80% запросов ввода-вывода сервера, после развертывания Flash Accel загрузка системы хранения снизилась на 50%, кроме того, на 60% снизилась загрузка CPU системы хранения, в сравнении с использованием на ней одного только Flash Cache.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/flash/index.html" rel="tag">flash</a>, <a href="../../../tag/flash-accel.html" rel="tag">flash accel</a>, <a href="../../../tag/flashaccel.html" rel="tag">flashaccel</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/ssd/index.html" rel="tag">ssd</a><br />					Раздел: <a href="../../review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;" rel="category tag">review</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>,  <a href="../../news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1277/trackback.html#comments" title="Комментарий к записи Вышел Flash Accel 1.2">Комментарии (8)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1265">
				<h2 class="posttitle"><a href="../../../1265/trackback.html" rel="bookmark" title="Permanent Link to Соответствие команд 7-mode и C-mode">Соответствие команд 7-mode и C-mode</a></h2>
				<div class="postmetadata">1 Июль 2013, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Если вам в скором времени предстоит переход на Clustered Data ONTAP, или если вы админ системы хранения, хорошо знакомый с Data ONTAP 7-mode, которому предстоит администрировать Cluster-mode, то рекомендую посмотреть документ, недавно опубликованный в библиотеке NetApp:</p>
<p><strong>Clustered Data ONTAP® 8.2</strong>    <br />Command Map for 7-Mode Administrators</p>
<p>В нем в таблицу собраны команды Cluster-mode, соответствующие, по выполняемым действиям, командам 7-mode. То есть если вы знаете как, допустим, создать том на aggregate в 7-mode, и не знаете какой командой это делается в Clustered ONTAP, то вот этот документ вам поможет.</p>
<p>Брать можно здесь: <a href="https://library.netapp.com/ecm/ecm_download_file/ECMP1196780">https://library.netapp.com/ecm/ecm_download_file/ECMP1196780</a></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/7-mode.html" rel="tag">7-mode</a>, <a href="../../../tag/c-mode.html" rel="tag">c-mode</a>, <a href="../../../tag/cluster/index.html" rel="tag">cluster</a>, <a href="../../../tag/cluster-mode/index.html" rel="tag">cluster-mode</a>, <a href="../../../tag/clustered-ontap.html" rel="tag">clustered ontap</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>,  <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1265/trackback.html#respond" title="Комментарий к записи Соответствие команд 7-mode и C-mode">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1264">
				<h2 class="posttitle"><a href="../../../1264/trackback.html" rel="bookmark" title="Permanent Link to SnapVault">SnapVault</a></h2>
				<div class="postmetadata">24 Июнь 2013, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Продолжим наш курс Back to basics. Кроме репликации SnapMirror у NetApp есть еще один <em>Snap-что-то</em> продукт – SnapVault. Давайте посмотрим, что это и для чего может в жизни сгодиться.</p>
<p>SnapVault, как можно догадаться из названия, это средство, позволяющее сложить снэпшоты (Snap) на долговременое хранилище (Vault), то есть это такое средство бэкапа данных с системы хранения, например главной, рабочей, или, в терминах NetApp – <em>Primary</em>, на резервную, или <em>Secondary</em>.</p>
<p>Зачем? Ну, зачем вообще используется резервное копирование на другой сторадж? Чтобы обезопаситься и обезопасить данные от физического отказа системы хранения. Почму бы для этого не использовать SnapMirror? Очень просто. Потому же, почему RAID это не бэкап. Репликация никак не поможет в случае повреждения непосредственно данных. Поврежденные данные, например испорченные на уровне приложения, точно также отреплицируются на резервную систему, и вы будете иметь два комплекта плохих данных. Тут выручили бы снэпшоты. Но снэпшоты, как вы помните, хранятся на самой системе хранения, непосредственно на исходном томе, такова их принциппиальная конструкция, и если мы вдобавок ко всему, имеем поврежденную или физически потерянную primary систему хранения, то вместе с ней погибнут и данные снэпшотов. Хорошо бы эти снэпшоты уметь выносить куда-то наружу, чтобы потом иметь возможность из них исходные данные не любой сохраненный момент восстанавливать. Вот как раз этим и занимается SnapVault.</p>
<p>   <a href="../../../1264/trackback.html#more-1264" class="more-link"><small>Continue reading &#8216;SnapVault&#8217; &raquo;</small></a></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/backup/index.html" rel="tag">backup</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/snapshots.html" rel="tag">snapshots</a>, <a href="../../../tag/snapvault.html" rel="tag">snapvault</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1264/trackback.html#comments" title="Комментарий к записи SnapVault">Комментарии (7)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1263">
				<h2 class="posttitle"><a href="../../../1263/trackback.html" rel="bookmark" title="Permanent Link to SnapMirror, часть 2">SnapMirror, часть 2</a></h2>
				<div class="postmetadata">10 Июнь 2013, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>??так, в прошлом посте я показал подробно, что за средства репликации данных есть у NetApp, и почему так получилось, что для синхронной репликации есть целых два решения, а также чем отличаются синхронная и асинхронная репликация для тех, кто это пока еще нетвердо знал.</p>
<p>Начнем же подробнее про именно SnapMirror.</p>
<p>   <a href="../../../1263/trackback.html#more-1263" class="more-link"><small>Continue reading &#8216;SnapMirror, часть 2&#8217; &raquo;</small></a></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/snapmirror.html" rel="tag">snapmirror</a><br />					Раздел: <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1263/trackback.html#respond" title="Комментарий к записи SnapMirror, часть 2">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1260">
				<h2 class="posttitle"><a href="../../../1260/trackback.html" rel="bookmark" title="Permanent Link to SnapMirror, часть 1">SnapMirror, часть 1</a></h2>
				<div class="postmetadata">27 Май 2013, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Как-то довольно давно у меня в блоге не появлялось постов про технические фичи. Оно и понятно, блог ведется с 2007 года, и наверное уже про все в той или иной мере я уже или писал, или упоминал в предыдущие годы,<strike> сколько можно-то уже</strike>.</p>
<p>Тем не менее все равно остаются темы, на которые хотелось бы иметь больше информации “простым человеческим языком”, многие фичи NetApp, как я заметил, именно поэтому и не используются широко, потому что раз никто не пользуется – мало информации, а раз мало информации – вот никто и не пользуется. Так что начнем со сравнительно&#160; неплохо известного <em>в принципе</em>: с средства репликации SnapMirror.</p>
<p><strong>SnapMirror </strong>это средство синхронной или асинхронной репликации данных как между двумя физическими системами хранения, так и для томов внутри одной системы хранения. Репликация идет по IP-сети, и в этом ее существенное отличие от других решений репликации, других вендоров, которые часто предпочитают FC.</p>
<p>Для начала несколько слов о том, в чем разница между двумя системами репликации, имеющимися у NetApp. Это <strong>Sync</strong>Mirror и <strong>Snap</strong>Mirror.</p>
<p>??сторически SyncMirror была синхронной репликацией (только), а SnapMirror – асинхронной (только). В те времена было все просто и понятно. Если нужна синхронная репликация – первое, асинхроная – второе. Напомню разницу: синхроная репликация – это такая, на которой сигнал “готово, записано” от стораджа к записыващему приложению не отдается до тех пор, пока блок данных не будет записан <strong>??</strong> на исходный сторадж, <strong>??</strong> на его реплику. Сперва пишем блок на локальный, потом передаем его на удаленный, записываем там, получаем ответ “записано” с удаленного, и только после этого сигналим “записано, продолжай” приложению.</p>
<ul>
<li><strong>Плюсы:</strong> Мы гарантированно имеем два стораджа в синхронной, идентичной копии. Если блок не записан на удаленную систему, то и на локальной он не записан, и приложение об этом знает. Никакой потери данных и рассинхронизации из-за обрыва связи между стораджами нет “по определению”. Это самый надежный способ.</li>
<li><strong>Минусы:</strong> Это, одновременно, и самый медленный способ с точки зрения приложения. Нетрудно видеть, что скорость работы с приложением, bandwidth между приложением и стораджем, равен скорости работы, bandwidth между локальным и удаленным стораджем. Если у вас приложение подключено к стораджу по 8Gb FC, а канал между стораджами, находящимися в синхронной репликации, составляет 10Mb/s, то максимальная скорость передачи данных между приложением и локально подключенным по FC 8Gb стораджем будет составлять не более 10 мегабит в секунду, то есть будет равным скорости межстораджевого канала репликации.</li>
</ul>
<p>Отсюда видно, почему синхронная репликация крайне редко применяется в “географически” разнесенных решениях, а там, где она применяется в таких решениях, например в NetApp Metrocluster, это сложная и дорогая конструкция, с отдельной “фабрикой” репликации, занятой только этим.</p>
<p>Гораздо чаще на практике для репликации двух систем хранения используют так называемую “асинхронную” репликацию. В этом случае локальная система сразу сигналит “записано” приложению, а потом, с определенным интервалом, шлет обновления на удаленную систему – “Эй, тут у меня есть свежак, прими!”</p>
<ul>
<li><strong>Плюсы:</strong> Производительность работы приложения с локальным стораджем максимальна, канал репликации не ограничивает производительность приложения. Кроме того существенно экономится и ресурсы самого канала. Представим себе, что приложение каждые несколько миллисекунд изменияет один блок данных. В случае синхронной репликации, каждое такое изменение должно быть передано на удаленную систему. А в случае асинхронной репликации – только одно, состояние этого блока на момент начала репликации, или же итоговое его значение после всех изменений.</li>
<li><strong>Минусы:</strong> Удаленная копия никогда не становится идентичной локальной. Она ее всегда догоняет, но, если изменения непрерывны, всегда отстает, и этот интервал отставания называется “лагом репликации”. Более того, если не предпринимать специальных мер, то приложение может и не узнать, что каких-то данных на удаленной системе нет, или они не соответствуют данным локальной системы.</li>
</ul>
<p>Некоторым промежуточным вариантом является так называемая “полусинхронная” или “квазисинхронная” репликация, то есть пока успеваем физически – синхронная, когда не успеваем – не тормозим локальную систему, а переходим в асинхронный режим, и синхронизируемся так, пока не догоним, после чего опять переходим в “синхрон”.</p>
<p>Так вот, в свете всего вышеизложенного, <strong>SyncMirror</strong> это в чистом виде <strong>синхронная</strong> репликация, причем на достаточно низком уровне. Так как вы помните, что в NetApp его RAID это просто то, как функционирует его файловая система WAFL, можно считать, что SyncMirror это просто в этой файловой системе функция RAID-1, “зеркалирование”, “мирроринг”, или, вернее будет, RAID-41 или RAID-61, как принято называть комбинированные уровни, одни, поверх уже имеющихся других.</p>
<p>На сегодня SyncMirror в ее изначальной форме широко применяется только в Metrocluster.</p>
<p><strong>SnapMirror</strong> – это дело другое. Она изначально создавалась как асинхронная репликация на сравнительно “высоком” уровне дисковых абстракций. Однако впоследствии удалось к ней добавить синхронный и полусинхронный режим работы, и сегодня вы можете выбирать нужный вам режим просто указывая нужный ключ в настройках в конфиге.</p>
<p>Обратите внимание также, что в текущей лицензионной модели <strong>Sync</strong>Mirror бесплатно входит в Data ONTAP Essentials, то есть присутствует бесплатно на любой системе хранения, а вот <strong>Snap</strong>Mirror стоит денег, причем довольно существенных, и это отдельная лицензия.</p>
<p>Ну и, наконец, слово <em>Snap</em> в названии как бы намекает нам, что за технология использована при реализации репликации – это снэпшоты, или разностные “снимки состояния” соответствующего тома. При организации репликации сначала осуществляется так называемый baseline transfer, то есть передача исходного состояния. Это довольно продолжительная и емкая по ресурсам задача, когда целиком весь объем данных реплицируемого тома передается с локальной на удаленную систему. Зато потом, когда завершен baseline transfer на удаленную систему по каналу репликации передаются только изменения от одного цикла репликации до другого, они, обычно, сравнительно невелики по объему. Технически сторадж для этого делает специальный служебный, обычно невидимый пользователю снэпшот с реплицируемого тома, а затем получившиеся изменения передает на удаленную систему, “накатывая” их на тот том, находящийся в специальном состоянии <em>restricted</em>, после чего служебный снэпшот удаляется, на следующий цикл обновления операция повторяется.</p>
<p>??так, разобравшись с тем, что является, и что не является SnapMirror, перейдем к деталям. Продолжение следует.</p>
<p><strong>SnapMirror, Часть 2</strong>.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/snapmirror.html" rel="tag">snapmirror</a><br />					Раздел: <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1260/trackback.html#comments" title="Комментарий к записи SnapMirror, часть 1">Комментарии (6)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1247">
				<h2 class="posttitle"><a href="../../../1247/trackback.html" rel="bookmark" title="Permanent Link to Striped Volume в Cluster-mode">Striped Volume в Cluster-mode</a></h2>
				<div class="postmetadata">4 Март 2013, 7:00 <!-- от  --></div>
				<div class="postentry">
					<p>Как вы уже знаете, архитектура системы хранения NetApp не позволяет, при наличии двух контроллеров, организовать один общий дисковый раздел, доступ к которому имели бы оба контроллера одновременно. Почему так было сделано, отчего, и что это дает полезного – об этом мы уже в блоге говорили, не будем отвлекаться. А сегодня я покажу, как это ограничение может быть снято при использовании <a href="http://netwell.ru/docs/netapp/tr-3982_clustered_ontap_8.1_i_8.1.1_vvedenie.pdf">Data ONTAP Cluster-mode</a>, новой модели работы со стораджем, которая активно развивается компанией уже не первый год.</p>
<p>В Data ONTAP 8.x Cluster-mode вы можете использовать так называемый режим Striped Volume, при котором доступ к данным на томе может быть осуществлен параллельно с любых контроллеров кластера, в частности с двух контроллеров, составляющих HA-пару.</p>
<p>Для начала надо убедиться, что лицензия Striped Volume введена, что позволяет системе такой том создать.</p>
<p><code>f3240-sqltest::&gt; license show      <br />(system license show)       <br />Feature Cluster SN Limit Description       <br />&#8212;&#8212;&#8212;&#8212;&#8212; &#8212;&#8212;&#8212;&#8211; &#8212;&#8212;- &#8212;&#8212;&#8212;&#8211;       <br />Base 1-80-000011 666 Base License w/cluster size limit (nodes)       <br />iSCSI 1-80-000011 666 iSCSI License       <br /><strong><font color="#ff0000">Striped_Volume</font></strong> 1-80-000011 666 Striped Volume License       <br />FCP 1-80-000011 666 FCP License       <br />4 entries were displayed.</code></p>
<p>Раз лицензия есть, то можно создать striped aggregate:</p>
<p><code>f3240-sqltest::&gt; aggr create -aggregate myAggr -nodes f3240-sqltest-01,f3240-sqltest-02 -diskcount 16 -disktype SAS -raidtype raid_dp -maxraidsize 16      <br />[Job 818] Job succeeded: DONE</code></p>
<p>Создан aggregate, распределенный (striped) на два узла кластерной системы -<strong> f3240-sqltest-01</strong> и <strong>fas3240-sqltest-02.</strong></p>
<p>Посмотреть, что получилось можно командой <strong>aggr show myAggr</strong>.</p>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="w680" border="0" alt="w680" src="/pics/d702b49c5de0_F9C0/w680.png" width="522" height="723" /></p>
<p>Данный aggregate распределен на два узла, состоит из 16&#160; дисков, 8 из которых на узле 01, и 8 – на узле 02. Создано также два плекса и две RAID-группы. Это означает, что такой striped aggregate состоит, по сути, из двух “обычных” aggregate. Обратите также, что Volume Style указан как <strong>striped</strong>.</p>
<p>Понятнее про состав striped aggregate станет после вывода команды <strong>aggr member show</strong>.</p>
<p><code>f3240-sqltest::&gt; aggr member show      <br />Aggregate&#160;&#160;&#160;&#160; Size Available Used% State&#160;&#160;&#160; #Vols Node&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; RAID Status       <br />&#8212;&#8212;&#8212; &#8212;&#8212;&#8211; &#8212;&#8212;&#8212; &#8212;&#8211; &#8212;&#8212;- &#8212;&#8212; &#8212;&#8212;&#8212;&#8212;&#8212;- &#8212;&#8212;&#8212;&#8212;       <br /><font color="#ff0000"><strong>myAggr_000</strong></font> 2.15TB&#160;&#160;&#160; 2.15TB&#160;&#160;&#160; 0% online&#160;&#160;&#160;&#160;&#160;&#160; 0 <font color="#ff0000"><strong>f3240-sqltest-01</strong></font> raid_dp,normal       <br /><strong><font color="#ff0000">myAggr_001</font></strong> 2.15TB&#160;&#160;&#160; 2.15TB&#160;&#160;&#160; 0% online&#160;&#160;&#160;&#160;&#160;&#160; 0 <strong><font color="#ff0000">f3240-sqltest-02</font></strong> raid_dp,normal       <br />2 entries were displayed.</code></p>
<p>Как видите, striped aggregate myAggr состоит из двух “мемберов”, myAggr_000 и myAggr_001, каждый на своем узле. Если бы мы создали такой aggregate на трех, четырех, и так далее узлах кластера – мы бы получили три, четыре, и так далее под-“аггрегейта”. Созданный же на таком aggregate, поверх него том (volume) и данные на нем, окажутся равномерно распределенными по доступу между несколькими узлами, и операции доступа к ним более или менее равномерно нагрузят все входящие в группу контроллеры.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/8x.html" rel="tag">8.x</a>, <a href="../../../tag/cluster/index.html" rel="tag">cluster</a>, <a href="../../../tag/cluster-mode/index.html" rel="tag">cluster-mode</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/striped.html" rel="tag">striped</a><br />					Раздел: <a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../1247/trackback.html#comments" title="Комментарий к записи Striped Volume в Cluster-mode">Комментарии (6)</a>									 </div>
			</div>
	
		
		<div class="navigation">
			<div class="alignleft"><a href="3.html">&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="../index.html">Next Entries &raquo;</a></div>
		</div>
		
	
	</div>
	<div id="sidebar">
		<ul>
			
			
			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Автор</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			<li class="pagenav"><h2>Страницы</h2><ul><li class="page_item page-item-153"><a href="../../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul></li>
			<li><h2>Рубрики</h2>
				<ul>
					<li class="cat-item cat-item-89"><a href="../../commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;">commands</a>
</li>
	<li class="cat-item cat-item-37"><a href="../../howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;">howto</a>
</li>
	<li class="cat-item cat-item-52"><a href="../../justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;">justread</a>
</li>
	<li class="cat-item cat-item-51"><a href="../../review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;">review</a>
</li>
	<li class="cat-item cat-item-3 current-cat"><a href="../index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;">techtalk</a>
</li>
	<li class="cat-item cat-item-71"><a href="../../tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;">tricks</a>
</li>
	<li class="cat-item cat-item-95"><a href="../../utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;">utilities</a>
</li>
	<li class="cat-item cat-item-44"><a href="../../whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;">whoisho</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;">новости</a>
</li>
	<li class="cat-item cat-item-387"><a href="../../opros.html" title="Просмотреть все записи в рубрике &laquo;опрос&raquo;">опрос</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;">переводы</a>
</li>
	<li class="cat-item cat-item-40"><a href="../../citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;">цитаты</a>
</li>
				</ul>
			</li>

			<li><h2>Архивы</h2>
				<ul>
					<li><a href='../../../date/2018/01.html' title='Январь 2018'>Январь 2018</a></li>
	<li><a href='../../../date/2015/10.html' title='Октябрь 2015'>Октябрь 2015</a></li>
	<li><a href='../../../date/2015/04.html' title='Апрель 2015'>Апрель 2015</a></li>
	<li><a href='../../../date/2015/03.html' title='Март 2015'>Март 2015</a></li>
	<li><a href='../../../date/2015/01.html' title='Январь 2015'>Январь 2015</a></li>
	<li><a href='../../../date/2014/12.html' title='Декабрь 2014'>Декабрь 2014</a></li>
	<li><a href='../../../date/2014/11.html' title='Ноябрь 2014'>Ноябрь 2014</a></li>
	<li><a href='../../../date/2014/10.html' title='Октябрь 2014'>Октябрь 2014</a></li>
	<li><a href='../../../date/2014/09.html' title='Сентябрь 2014'>Сентябрь 2014</a></li>
	<li><a href='../../../date/2014/08.html' title='Август 2014'>Август 2014</a></li>
	<li><a href='../../../date/2014/07.html' title='Июль 2014'>Июль 2014</a></li>
	<li><a href='../../../date/2014/06.html' title='Июнь 2014'>Июнь 2014</a></li>
	<li><a href='../../../date/2014/05.html' title='Май 2014'>Май 2014</a></li>
	<li><a href='../../../date/2014/04.html' title='Апрель 2014'>Апрель 2014</a></li>
	<li><a href='../../../date/2014/03.html' title='Март 2014'>Март 2014</a></li>
	<li><a href='../../../date/2014/02.html' title='Февраль 2014'>Февраль 2014</a></li>
	<li><a href='../../../date/2014/01.html' title='Январь 2014'>Январь 2014</a></li>
	<li><a href='../../../date/2013/12.html' title='Декабрь 2013'>Декабрь 2013</a></li>
	<li><a href='../../../date/2013/11.html' title='Ноябрь 2013'>Ноябрь 2013</a></li>
	<li><a href='../../../date/2013/10.html' title='Октябрь 2013'>Октябрь 2013</a></li>
	<li><a href='../../../date/2013/09.html' title='Сентябрь 2013'>Сентябрь 2013</a></li>
	<li><a href='../../../date/2013/08.html' title='Август 2013'>Август 2013</a></li>
	<li><a href='../../../date/2013/07.html' title='Июль 2013'>Июль 2013</a></li>
	<li><a href='../../../date/2013/06.html' title='Июнь 2013'>Июнь 2013</a></li>
	<li><a href='../../../date/2013/05.html' title='Май 2013'>Май 2013</a></li>
	<li><a href='../../../date/2013/04.html' title='Апрель 2013'>Апрель 2013</a></li>
	<li><a href='../../../date/2013/03.html' title='Март 2013'>Март 2013</a></li>
	<li><a href='../../../date/2013/02.html' title='Февраль 2013'>Февраль 2013</a></li>
	<li><a href='../../../date/2013/01.html' title='Январь 2013'>Январь 2013</a></li>
	<li><a href='../../../date/2012/12.html' title='Декабрь 2012'>Декабрь 2012</a></li>
	<li><a href='../../../date/2012/11.html' title='Ноябрь 2012'>Ноябрь 2012</a></li>
	<li><a href='../../../date/2012/10.html' title='Октябрь 2012'>Октябрь 2012</a></li>
	<li><a href='../../../date/2012/09.html' title='Сентябрь 2012'>Сентябрь 2012</a></li>
	<li><a href='../../../date/2012/08.html' title='Август 2012'>Август 2012</a></li>
	<li><a href='../../../date/2012/07.html' title='Июль 2012'>Июль 2012</a></li>
	<li><a href='../../../date/2012/06.html' title='Июнь 2012'>Июнь 2012</a></li>
	<li><a href='../../../date/2012/05.html' title='Май 2012'>Май 2012</a></li>
	<li><a href='../../../date/2012/04.html' title='Апрель 2012'>Апрель 2012</a></li>
	<li><a href='../../../date/2012/03.html' title='Март 2012'>Март 2012</a></li>
	<li><a href='../../../date/2012/02.html' title='Февраль 2012'>Февраль 2012</a></li>
	<li><a href='../../../date/2012/01.html' title='Январь 2012'>Январь 2012</a></li>
	<li><a href='../../../date/2011/12.html' title='Декабрь 2011'>Декабрь 2011</a></li>
	<li><a href='../../../date/2011/11.html' title='Ноябрь 2011'>Ноябрь 2011</a></li>
	<li><a href='../../../date/2011/10/index.html' title='Октябрь 2011'>Октябрь 2011</a></li>
	<li><a href='../../../date/2011/09/index.html' title='Сентябрь 2011'>Сентябрь 2011</a></li>
	<li><a href='../../../date/2011/08.html' title='Август 2011'>Август 2011</a></li>
	<li><a href='../../../date/2011/07/index.html' title='Июль 2011'>Июль 2011</a></li>
	<li><a href='../../../date/2011/06/index.html' title='Июнь 2011'>Июнь 2011</a></li>
	<li><a href='../../../date/2011/05/index.html' title='Май 2011'>Май 2011</a></li>
	<li><a href='../../../date/2011/04/index.html' title='Апрель 2011'>Апрель 2011</a></li>
	<li><a href='../../../date/2011/03/index.html' title='Март 2011'>Март 2011</a></li>
	<li><a href='../../../date/2011/02.html' title='Февраль 2011'>Февраль 2011</a></li>
	<li><a href='../../../date/2011/01.html' title='Январь 2011'>Январь 2011</a></li>
	<li><a href='../../../date/2010/12.html' title='Декабрь 2010'>Декабрь 2010</a></li>
	<li><a href='../../../date/2010/11/index.html' title='Ноябрь 2010'>Ноябрь 2010</a></li>
	<li><a href='../../../date/2010/10/index.html' title='Октябрь 2010'>Октябрь 2010</a></li>
	<li><a href='../../../date/2010/09/index.html' title='Сентябрь 2010'>Сентябрь 2010</a></li>
	<li><a href='../../../date/2010/08.html' title='Август 2010'>Август 2010</a></li>
	<li><a href='../../../date/2010/07/index.html' title='Июль 2010'>Июль 2010</a></li>
	<li><a href='../../../date/2010/06.html' title='Июнь 2010'>Июнь 2010</a></li>
	<li><a href='../../../date/2010/05.html' title='Май 2010'>Май 2010</a></li>
	<li><a href='../../../date/2010/04/index.html' title='Апрель 2010'>Апрель 2010</a></li>
	<li><a href='../../../date/2010/03/index.html' title='Март 2010'>Март 2010</a></li>
	<li><a href='../../../date/2010/02.html' title='Февраль 2010'>Февраль 2010</a></li>
	<li><a href='../../../date/2010/01.html' title='Январь 2010'>Январь 2010</a></li>
	<li><a href='../../../date/2009/12/index.html' title='Декабрь 2009'>Декабрь 2009</a></li>
	<li><a href='../../../date/2009/11/index.html' title='Ноябрь 2009'>Ноябрь 2009</a></li>
	<li><a href='../../../date/2009/10.html' title='Октябрь 2009'>Октябрь 2009</a></li>
	<li><a href='../../../date/2009/09.html' title='Сентябрь 2009'>Сентябрь 2009</a></li>
	<li><a href='../../../date/2009/08/index.html' title='Август 2009'>Август 2009</a></li>
	<li><a href='../../../date/2009/07/index.html' title='Июль 2009'>Июль 2009</a></li>
	<li><a href='../../../date/2009/06.html' title='Июнь 2009'>Июнь 2009</a></li>
	<li><a href='../../../date/2009/05.html' title='Май 2009'>Май 2009</a></li>
	<li><a href='../../../date/2009/04.html' title='Апрель 2009'>Апрель 2009</a></li>
	<li><a href='../../../date/2009/03.html' title='Март 2009'>Март 2009</a></li>
	<li><a href='../../../date/2009/02.html' title='Февраль 2009'>Февраль 2009</a></li>
	<li><a href='../../../date/2009/01.html' title='Январь 2009'>Январь 2009</a></li>
	<li><a href='../../../date/2008/12.html' title='Декабрь 2008'>Декабрь 2008</a></li>
	<li><a href='../../../date/2008/11.html' title='Ноябрь 2008'>Ноябрь 2008</a></li>
	<li><a href='../../../date/2008/10.html' title='Октябрь 2008'>Октябрь 2008</a></li>
	<li><a href='../../../date/2008/09.html' title='Сентябрь 2008'>Сентябрь 2008</a></li>
	<li><a href='../../../date/2008/08.html' title='Август 2008'>Август 2008</a></li>
	<li><a href='../../../date/2008/03.html' title='Март 2008'>Март 2008</a></li>
	<li><a href='../../../date/2008/02.html' title='Февраль 2008'>Февраль 2008</a></li>
	<li><a href='../../../date/2007/12.html' title='Декабрь 2007'>Декабрь 2007</a></li>
	<li><a href='../../../date/2007/11.html' title='Ноябрь 2007'>Ноябрь 2007</a></li>
	<li><a href='../../../date/2007/10.html' title='Октябрь 2007'>Октябрь 2007</a></li>
	<li><a href='../../../date/2007/09.html' title='Сентябрь 2007'>Сентябрь 2007</a></li>
	<li><a href='../../../date/2007/08.html' title='Август 2007'>Август 2007</a></li>
	<li><a href='../../../date/2007/07/index.html' title='Июль 2007'>Июль 2007</a></li>
	<li><a href='../../../date/2007/06.html' title='Июнь 2007'>Июнь 2007</a></li>
	<li><a href='../../../date/2007/05.html' title='Май 2007'>Май 2007</a></li>
				</ul>
			</li>

			
					</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="../../../../feed">Entries (RSS)</a> and <a href="../../../../comments/feed">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 15 queries. 0.104 seconds. -->
	</div>
</div> <!-- page -->
</body>
</html>
