<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>about NetApp  &raquo; Blog Archive   &raquo; Тестирование с помощью программы IOmeter</title>

<link rel="stylesheet" href="../../wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="about NetApp RSS Feed" href="../../feed" />
<link rel="pingback" href="../../xmlrpc.php.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.6" />

</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="../../index.html" title="about NetApp: Системы хранения данных как предмет разговора">about NetApp</a></h1>
		<p>Системы хранения данных как предмет разговора</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="../../index.html">
<input type="text" size="20" name="s" id="s" value="Поиск..."  onblur="if(this.value=='') this.value='Поиск...';" onfocus="if(this.value=='Поиск...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="navbar">
<ul id="nav">
	<li><a href="../../index.html">Home</a></li>
	<li class="page_item page-item-153"><a href="../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content">

			
		<div class="navigation">
			<div class="alignleft">&laquo; <a href="../486/trackback.html">Best Practices по NetApp - по-русски.</a></div>
			<div class="alignright"><a href="../488/trackback.html">Отпуск</a> &raquo;</div>
		</div>

		<div class="post" id="post-485">
			<h2 class="posttitle"><a href="trackback.html" rel="bookmark" title="Permanent Link to Тестирование с помощью программы IOmeter">Тестирование с помощью программы IOmeter</a></h2>
			<div class="postmetadata">28 Декабрь 2009, 8:00 <!-- от  --></div>
			<div class="postentry">
				<p>Когда я, еще в 2007 году писал <a href="../37/trackback.html">небольшой обзор программы IOmeter</a>, которой как раз незадолго до этого измерял показатели производительности некоторых моделей систем хранения NetApp, я не предполагал, что эта небольшая заметка станет с той поры &#8220;бестселлером&#8221; блога. Неожиданно для себя я обнаружил, что подробного описания работы с таким популярным средством тестирования и измерения на русском языке просто нет.  Не так давно коллега track написал гораздо более подробное описание настройки и работы с IOmeter, и c его любезного согласия, я публикую этот текст у себя в блоге.</p>
<p><img src="http://www.divshare.com/direct/9812494-1eb.png" border="0" /></p>
<p>Программа <strong>IOmeter</strong> - это популярный тест для тестирования производительности дисковой подсистемы и локальной сети. Тест является &#8220;100% синтетикой&#8221;.<br />
К сожалению, некоторая неочевидность процесса тестирования в нем, устаревший внешний вид, отсутствие полноценного онлайн-хелпа, и документации, а также русскоязычного описания, часто вызывают затруднения при попытках его использовать. Также в интернете практически отсутствует подробное описание методики работы с ним, и описание используемых терминов и фич.<br />
<span id="more-485"></span></p>
<p>В мире тестирующего софта приняты, в настоящее время, две основные модели тестирования. Первая  - имитация некоей практической работы. Обычно в такой тест включены ряд реальных приложений, которые с помощью скриптов выполняют за время тестирования некую имитацию практической работы - открывают вордовские документы, вносят в них изменения, создают и сохраняют электронные таблицы. Классическим примером таких приложений тестирования является тестовый комплекс Winbench. </p>
<p>При неоспоримых преимуществах таких &#8220;реальных&#8221; тестов им присущ и серьезный недостаток, например сложно или практически невозможно создать тест, выходящий за рамки некоторых типовых  действий, например офисной работы.<br />
Во-вторых, часто трудно проинтерпретировать результаты, так как методика измерения довольно темна и запутана внутри используемых в имитационном тестировании приложений.</p>
<p>По этой причине для нагрузочного тестирования серверных систем, в особенности дисковой их подсистемы, часто применяют &#8220;синтетические&#8221; тесты, представляющие из себя некий достаточно ясный алгоритм, с помощью которого можно попытаться имитировать какую-то нагрузку, близкую к реальной. Вследствие очевидной алгоритмической ясности такие тесты очень удобны для сравнительного тестирования, а также анализа проблем в производительности.</p>
<p>Популярный тест <strong>IOmeter</strong> относится ко второй категории, &#8220;синтетических&#8221; тестов.</p>
<p>Эта программа изначально была разработана в компании Intel, и впоследствии, когда ее развитие в Intel остановилось, была передана в &#8220;опенсорс&#8221;, сообщество которого и продолжает ее постепенное развитие.<br />
Несмотря на то, что у программы <a href="http://www.iometer.org">есть свой вебсайт</a>, я рекомендую скачивать ее со <a href="http://sourceforge.net/projects/iometer/">странички проекта на Sourceforge</a>.<br />
Дело в том, что по ссылке Download с офсайта отдается последний Stable, который давно (2006.07.27) застыл, тогда как на Sourceforge последний - Devel 2008.06.22 rc2,  котором сделано довольно много существенных изменений и улучшений, поэтому рекомендую пользоваться именно им.</p>
<p>Для этой версии на Sourceforge собраны следующие бинарники:<br />
X86_64, IA64 (native Itanium), Win32 и Linux x86_64. ??з сорцов можно (попробовать) собрать Dynamo под нужную платформу, так, после небольшой рихтовки и шаманства он собрался под нужный мне Solaris 10/SPARC.</p>
<p>??нтересное начнется с самого начала. После установки вы обнаружите в папке программы два исполняемых файла: <strong>iometer.exe</strong> и <strong>Dynamo.exe</strong>. Дело в том, что IOmeter построен по &#8220;двухкомпонентной&#8221; схеме, позволяющей не только отделить тестируемую систему от управляющей, но и управлять сразу множеством тестируемых компьютеров. <strong>Iometer.exe</strong> это управляющая программа с GUI, а <strong>Dynamo.exe</strong> - командлайновая утилита под соответствующую платформу.</p>
<p>Такое разделение очень удобно, например, для меня, когда моя тестируемая система находится в датацентре в соседнем здании, где находиться, прямо скажем, не слишком комфортно (шумно, холодно, дует, да и тривиально даже сесть не на что). С помощью такой двухкомпонентной системы тестирования я могу запустить Load Generator (Dynamo.exe) на тестируемых серверах в датацентре, уйти в офис, и уже оттуда подключиться к ним по локальной сети и управлять всеми ими удаленно, получая результаты на свой ноут.</p>
<p>Однако, если у вас не стоит задача делать &#8220;распределенное&#8221; тестирование, то можно всем этим не заморачиваться, и просто запустить iometer.exe. При этом вы увидите экран GUI-менеджера, и следом запустится локально Dynamo.</p>
<p>?? Dynamo, и IOmeter можно запустить с ключом /? При этом, ожидаемо, вы получите список некоторых полезных ключей запуска.</p>
<p><strong>IOmeter:</strong><br />
<em>Iometer config_file [result_file [timeout_value]]<br />
Iometer [/c  config_file][/r result_file][/t timeout_vaue][/p port][/m 1]</em></p>
<p><em>Config_file</em> - файл конфига. Должен существовать и быть валидным icf.<br />
<em>Result_file</em> - файл результатов (в формате CSV), дополняется, если не существует - создается.<br />
<em>Timeout_value</em> - число секунд, которые ждем участников для логина.<br />
<em>Port_number</em> - порт, который слушаем для логина.<br />
<em>/m</em> - показать большой gauge при тестировании.</p>
<p>Если заданы и <em>config_file</em> и<em> results_file</em>, то Iometer пытается запуститься в пакетном режиме, без участия человека, запустить и остановить тесты, если запуск определен в Test Setup tab загруженного <em>config_file</em>, записать результаты в <em>result_file</em>, и по окончании работы закрыть iometer.</p>
<p>Возможность пакетного запуска очень удобна и полезна, так как тесты могут в совокупности занимать по многу часов.</p>
<p><strong>Dynamo:</strong><br />
<em>dynamo [/i iometer_computer_name /m manager_computer_name] [/n manager_name] [/c cpu_affinity] [/p login_port_number]</em></p>
<p><em>iometer_computer_name</em> - это имя или IP-адрес компьютера с запущенным Iometer, к которому мы будем из Dynamo логиниться. Без этого параметра Dynamo будет искать его на localhost.<br />
<em>manager_name</em> - это имя компьютера с Dynamo, в терминах IOmeter он называется &#8220;manager&#8221;. По умолчанию это имя хоста. Важно если вы используете его в конфиге IOmeter,  например назначаете конкретно ему какую-то задачу в предварительно записанном конфиге.<br />
<em>manager_computer_name</em> - это имя или IP компьютера с Dynamo, с помощью которого будет коммуницировать GUI с этим Dynamo. По умолчанию используется IP-адрес первой сетевой карты<br />
<em>login_port_number</em> - это порт, на котором будет происходить login между Dynamo и GUI. По умолчанию - 1066. Не забудьте его открыть, в случае файрволлов.<br />
<em>cpu_affinity</em> - это номер конкретного CPU, на котором будет исполняться Dynamo в случае многопроцессорной системы. Если не определен, то на первом же CPU.</p>
<p>Таким образом, строка для запуска может быть<br />
<strong>track@unixbox> ./dynamo /i 192.168.1.100 /m 192.168.1.10 /n LG1</strong></p>
<p>При этом мы запустим экземпляр Dynamo на машине с IP 192.168.1.10, которая появится в GUI, расположенном по адресу 192.168.1.100 и будет в нем называться LG1</p>
<p>Еще один ключ, не указанный в выводе /? это ключ <em>/force_raw</em>. Этот ключ говорит игнорировать  обнаруженные на диске файловые системы, и тестировать его как raw-устройство. БУДЬТЕ ОСТОРОЖНЫ с его использованием, так как с ним сформатированный файловой системой диск будет испорчен при тестировании.</p>
<p>При запуске по сети, процесс логина от удаленных Dynamo занимает несколько секунд, в случае локального запуска все происходит моментально.<br />
<img src="http://www.divshare.com/direct/9802518-315.png" border="0" /></p>
<p>Одно из ключевых понятий в IOmeter это &#8220;worker&#8221;.<br />
Worker это объект, выполняющий задачу тестирования. ??менно ему назначается то или иное действие.<br />
По умолчанию Dynamo (в терминах IOmeter - &#8220;manager&#8221;, что немного неожиданно, логичнее называть в этой паре менеджером именно GUI, IOmeter.exe) создает Worker-ов в количестве, равном обнаруженным на системе процессорным ядрам. ??мейте ввиду, что в случае наличия Hyperthreading они будут распознаны как два ядра, что может быть не вполне хорошо для запуска на каждом из них интенсивного нагрузочного приложения.<br />
??спользовать можно любое количество воркеров из имеющихся, можно, конечно, назначить тест и только на одного.</p>
<p>??так, запустили IOmeter.<br />
<img src="http://www.divshare.com/direct/9802521-b43.png" border="0" /></p>
<p>Слева в колонку <strong>Topology </strong>у нас залогинятся наши Dynamo, на локальной или удаленных машинах.<br />
На моем ноуте Asus 901Go на процессоре Atom N270 нашлось, как вы видите, два ядра и создалось два worker.</p>
<p>Первая закладка называется<strong> Disk Targets</strong>.<br />
При первом запуске вы увидите в колонке <strong>Targets </strong>для выбранного слева manager и его worker все те диски, которые он у себя видит (в случае, если вы запускаете Dynamo на удаленной машине, это будут диски, которые он видит там, у себя, на удаленной машине). Желтым цветом будут окрашены диски, имеющие на себе распознанную файловую систему, голубым - raw-партиции, неотформатированные или имеющие нераспознанную данной OS файловую систему.</p>
<p>Сначала все диски будут перечеркнуты красной линией. Это означает, что на них не найден тестовый файл, необходимый для тестирования на файловой системе (в случае raw-partition это не нужно, и &#8220;голубые&#8221; диски сразу готовы к тестированию).<br />
Выбрать диск для тестирования можно поставив в чекбоксе крестик.<br />
Тестовый файл <strong>iobw.tst</strong> создается в корне соответствущего диска при первом запуске, и, ВН??МАН??Е, по умолчанию занимает весь свободный объем диска! Это может быть и долго, и… э-э&#8230; неожиданно ;) для приложений или OS, если вы, например, экспериментируете на рабочем компьютере.<br />
Для того, чтобы ограничить его размер, можно задать его размер в поле <strong>Maximum disk size</strong>, размер указывается в СЕКТОРАХ, размером 512 байт!<br />
Например, 65535 секторов - 32MB.<br />
<strong>Starting disk sector</strong> может задать стартовый сектор в случае raw-partition.<br />
<strong># of Outstanding IOs</strong> это важный параметр, стоящий подробного описания.</p>
<p>Каждая задача, каждая программа, исполняемая на компьютере обычно осуществляет ввод/вывод на диск. Как правило, они делают это не одним потоком, а одновременно записывают и считывают с диска несколько параллельных процессов.<br />
Принято считать, что 4-8 потоков ввода/вывода порождают совсем простые приложения, типа notepad.exe и calc.exe. Крупные программы, уровня MS Word - 32-64 параллельны потока, максимумом можно считать 256, соответствующего крупной enterprise-базе данных типа Oracle, под хорошей нагрузкой.<br />
Количество одновременных потоков ввода/вывода это и есть &#8220;# of Outstanding IOs&#8221;.<br />
Для того, чтобы протестировать систему на нагрузке, приближенной к боевой, этот параметр нужно активно использовать.<br />
Но сейчас, тут, на этом месте, мы этот параметр трогать не станем, мы зададим работу с ним отдельно позже.</p>
<p>Перейдем на вкладку <strong>Network Targets</strong>.<br />
<img src="http://www.divshare.com/direct/9802523-115.png" border="0" /></p>
<p>С помощью IOmeter можно также тестировать и производительность локальной сети, но я этим никогда не занимался, поэтому тут могу только сказать, что добавить Network Worker-а можно нажав на кнопку на тулбаре, выделив нужного &#8220;менеджера&#8221; слева.</p>
<p>Следующая вкладка, <strong>Access Specification</strong> - важная. ??менно на ней создается и задается &#8220;тестовый паттерн&#8221;, тот профиль тестовой нагрузки который будет нагружать нашу систему.<br />
<img src="http://www.divshare.com/direct/9802532-4e6.png" border="0" /></p>
<p>Выбрав <strong>Worker </strong>слева, выбираем один из имеющихся у нас профилей нагрузки, и добавляем его кнопкой <strong>Add</strong> в левую панель. Таким образом мы назначаем тестировочную задачу имеющемуся worker-у. Если у нас планируется запустить параллельно (или последовательно) несколько worker-ов, также добавляем им паттерн нагрузки.<br />
Если слева мы выберем не один конкретный worker, а элемент, включающий их в себя, то назначенный паттерн назначится всем worker-ам ниже по иерархии.<br />
Добавить можно и не один паттерн на воркер.</p>
<p>Паттерны можно создавать самому, а можно воспользоваться уже заданным набором. Когда-то, когда IOmeter еще производился компанией Intel, с ним в комплекте шло несколько разработанных Intel тестировочных паттернов.<br />
Вот тут: <a href="/docs/iometer2.icf"><strong>iometer2.icf</strong></a> можно скачать конфигурационный файл для IOmeter, с видимым на скриншоте набором тестировочных паттернов нагрузки, с большим или меньшим успехом имитирующих те или иные типовые нагрузки.<br />
Также можно поправить, или даже нарисовать свой собственный. Нажмите New или выберите паттерн и нажмите Edit (или Edit Copy), и откроется окно задания параметров.<br />
<img src="http://www.divshare.com/direct/9802522-ef1.png" border="0" /></p>
<p>Рисуя паттерн мы задаем блоки, которыми будет обращаться тест к системе хранения (или сети, если мы тестируем сетевой интерфейс).<br />
Размер блоков это левая верхняя панель: <strong>Transfer Request Size</strong>.<br />
Относительное количество таких блоков:  <strong>Percent of Access Specification</strong>. Если вы задаете сложный паттерн, то суммарное количество всех должно равняться 100%.<br />
Крайняя левая - <strong>Percent Read/Write Distribution</strong> - определяет каково будет соотношение записей и чтений по данному паттерну. Так, например, для <strong>File Server</strong> задано 80% read и 20% write, а для вебсервера, с которого, обычно, только читают, задано 100% read.<br />
Четвертый важный параметр <strong>Percent Random/Sequental Distribution</strong>- характер доступа, выбирается между Random и Sequental, случайным и последовательным доступом к тестовому файлу.<br />
Остальные параметры используются редко.</p>
<p>Предпоследняя вкладка - <strong>Result Display</strong>.<br />
На ней мы будем видеть то, как идет наше тестирование, его результаты по выбранным параметрам.<br />
<img src="http://www.divshare.com/direct/9802535-fa2.png" border="0" /></p>
<p>Два важных контрола на этой вкладке - переключатель <strong>Result Since</strong> и движок <strong>Update Frequency</strong>.<br />
Первый определяет то, какие будут выводиться результаты на &#8220;градусники&#8221; ниже - суммарный с начала теста (<strong>Start of Test</strong>) или мгновенный, текущий (<strong>Last Update</strong>).<br />
Регулятор определяет частоту смены показаний на экране.<br />
Обратите внимание, что все это влияет только на отображение в программе, в файл результатов будет записано максимальное достигнутое за время тестов значение.</p>
<p>Для отображения по умолчанию выбрано 6 показателей. ??х можно сменить, нажав на &#8220;кнопку&#8221; с параметром и выбрав в меню нужный для отображения параметр. Это также влияет только на отображение в программе, в результирующий файл будут записаны они все.<br />
<img src="http://www.divshare.com/direct/9802536-905.png" border="0" /></p>
<p>??, наконец, перейдем к настройке процесса тестирования, закладке <strong>Test Setup</strong><br />
<img src="http://www.divshare.com/direct/9802539-b8d.png" border="0" /></p>
<p>Для выбранного worker, напоминаю снова, что все действия производятся и назначаются на конкретный объект worker, запишем <strong>Test Description</strong>, чтобы потом разобраться что за результаты у нас в общем CSV-файле результатов.<br />
Зададим время выполнения теста: <strong>Run Time</strong><br />
?? установим &#8220;время разгона&#8221;, предварительного периода для &#8220;прогрева&#8221;: <strong>Ramp Up Time</strong>.</p>
<p>Этим можно было бы и ограничиться, если мы хотели провести один тест. Но, как правило, интересно сделать сразу несколькоd в прием, а не тыкать в кнопочки, дожидаясь окончания каждого. Для этого IOmeter оснащен богатыми возможностями.<br />
В выпадающем списке <strong>Cycling Options</strong> можно задать условия последовательного выполнения тестов  соответствии с определенными условиями и изменениями параметров.<br />
<img src="http://www.divshare.com/direct/9802540-6ab.png" border="0" /></p>
<p>Например, как я уже говорил выше, я предлагаю не устанавливать параметр <strong># of Outstanding IOs</strong>, а запустить тесты последовательно, с постепенным увеличением его, с тем, чтобы увидеть в результате, динамику реакции системы хранения на нагрузку ввода/вывода.</p>
<p>Впрочем вариантов выполнения Cycling Options 8 штук, попробуйте разобраться по образцу.<br />
<img src="http://www.divshare.com/direct/9802541-5ec.png" border="0" /></p>
<p>Выбрав указанный на скриншоте вариант, можно установить поля от скольки (1) и до скольки (256) увеличивать количество потоков. В качестве характера прироста рекомендую Exponential Sepping и Power: 2. При этом прирост будет удвоением: 1 - 2 - 4 - 8 - 16…Такой шаг прироста достаточен для оценки нагрузочной способности подсистемы ввода/вывода.</p>
<p>??так, мы добрались до момента старта.<br />
Нажимаем на тулбаре кнопку с зеленым флажком.<br />
Нам предлагается сохранить результаты в файл CSV (Comma Separated Value) с именем по умолчанию results.CSV. Если этот файл уже существует, то он будет ДОП??САН, в начале новых данных будет указано имя теста, заданное нами в <strong>Test Setup</strong>.<br />
В дальнейшем можно будет этот CSV импортировать в Excel и настроить по его данным красивых графиков.</p>
<p>В первый запуск долгое время ничего видимого не происходит так как для первого запуска создается тестовый файл. Об этом говорит сообщение внизу: <strong>Preparing Drives</strong>. Когда файл создан, то в <strong>Disk Targets</strong> исчезает красная зачеркивающая линия.  В дальнейших запусках файл не пересоздается, и тест запускается сразу.<br />
<img src="http://www.divshare.com/direct/9802534-dfc.png" border="0" /></p>
<p>В левом нижнем углу отображается название идущего теста.<br />
В правом, сообщение <strong>Ramp remaining</strong> говорит, что идет процесс &#8220;прогрева&#8221; перед тестом, а <strong>Run 1 of 6</strong>, что запущен первый из 6 назначенных в Cycling options тестов.<br />
<img src="http://www.divshare.com/direct/9802542-234.png" border="0" /></p>
<p>Для того, чтобы остановить текущий тест (и перейти к следующему) можно нажать кнопку <strong>Stop </strong>на тулбаре, а чтобы прервать всю последовательность тестов - <strong>Stop All</strong>.</p>
<p>Теперь перейдем на закладку <strong>Test Results</strong>.<br />
<img src="http://www.divshare.com/direct/9802537-4ec.png" border="0" /><br />
&#8220;Градусники&#8221; показывают текущее значение тестов, а цифра посередине него - текущее значение выбранного параметра.<br />
Run remainings: оставшееся время <strong>текущего </strong>теста.<br />
Суммарное время будет составлять (при ранее указанных параметрах): (30 секунд ramp + 10 минут теста) * 6 тестов.</p>
<p>Во время теста ход его отображается в окне утилиты Dynamo.<br />
<img src="http://www.divshare.com/direct/9802520-c77.png" border="0" /></p>
<p>По окончании тестов, в файле CSV с именем, который вы выбрали (по умолчанию results.CSV) собираются результаты, которые можно импортировать в Excel и настроить в нем необходимой аналитики.</p>
							</div>
	
			<div class="postmetadata">
				<div class="postmetadata">
					Метки: <a href="../tag/benchmark/index.html" rel="tag">benchmark</a>, <a href="../tag/howto/index.html" rel="tag">howto</a>, <a href="../tag/iometer.html" rel="tag">iometer</a><br />					Раздел: <a href="../category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>					&nbsp;|&nbsp;&nbsp;<a href="trackback.html#respond">Комментарий</a> (<a href='feed'>RSS</a>)					&nbsp;|&nbsp;&nbsp;<a href="trackback.html" rel="trackback">Обратная ссылка</a>									 </div>
			</div>
		</div>
	
<!-- You can start editing here. -->

<div id="comments">
	<h3>Комментарии (4)</h3>

	<ol class="commentlist">

	
		<li class="comment even" id="comment-366">
		<div id="div-comment-366">
		<div class="comment-author">
			<cite><a href='http://www.ripi-test.ru/' rel='external nofollow'>haver</a>:<cite></div>
			<p>Возможно ли с помощью IOmeter имитировать высокую фрагментацию, может быть есть готовые профили?<br />
Не силен в английском чтобы поискать методики в англоязычном интерте.</p>
						<div class="comment-meta"><a href="trackback.html#comment-366" title="">12 Апрель 2010, 14:03</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-367">
		<div id="div-comment-367">
		<div class="comment-author">
			<cite><a href='../../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>> Возможно ли с помощью IOmeter имитировать высокую фрагментацию</p>
<p>Вопрос с фрагментацией на самом деле непростой. На этот счет существют два разных мнения, и я пока не присоединился ни к одному из них.<br />
Например Alex McDonald (http://blog.aboutnetapp.ru/archives/455) разумно утверждает, что величина фрагментированности не играет существенной роли в случае random-доступа.<br />
Независимо от того, лежит ли ваш файл цельно и последовательно, или разбросан по диску, если считывание с него будет производиться случайным образом (а именно random access нас в первую очередь должен интересовать, задачи последовательного чтения-записи это довольно узкочастные на сегодня области применения, типа считывания-записи логов БД или видео-аудио запись), то random-доступ &#8220;помноженный&#8221; на random-размещение файла (фрагментация) не дает &#8220;рандом в квадрате&#8221;, он остается все тем же случайным доступом.<br />
Теоретически, результат random access к фрагментированному файлу не должен сильно отличаться от такого же random access к нефрагментированному.</p>
						<div class="comment-meta"><a href="trackback.html#comment-367" title="">12 Апрель 2010, 16:03</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-369">
		<div id="div-comment-369">
		<div class="comment-author">
			<cite><a href='http://www.ripi-test.ru/' rel='external nofollow'>haver</a>:<cite></div>
			<p>То есть если мы будем проводить тест на random-доступ на одном и том же носителе результат все время будет одним и тем же?, но по мере увеличения фрагментации в результате неоднократного копирования перемещения и удаления файлов, работы приложений,  на данном носителе реальная производительность с реально размещенными на носителе данными понизится т.е время доступа увеличится.<br />
А тест на случайный доступ будет по прежнему показывать то же значение?<br />
Если я хочу сравнить между собой поведение нескольких разных носителей в условиях увеличения фрагментации, просто по показателям времени случайного доступа смогу ли я прогнозировать поведение их при реальной фрагментации?<br />
?? задача измерить скорость доступа к конкретным данным при реальной фрагментации неосуществима?</p>
						<div class="comment-meta"><a href="trackback.html#comment-369" title="">15 Апрель 2010, 3:01</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-370">
		<div id="div-comment-370">
		<div class="comment-author">
			<cite><a href='../../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>> То есть если мы будем проводить тест на random-доступ на одном и том же носителе результат все время будет одним и тем же?, но по мере увеличения фрагментации в результате неоднократного копирования перемещения и удаления файлов, работы приложений, на данном носителе реальная производительность с реально размещенными на носителе данными понизится т.е время доступа увеличится.</p>
<p>Нет.<br />
Принято считать, что для современных многозадачных OS и распространненых приложений, таких как OLTP-базы, характер дисковой нагрузки сегодня является преимущественно рандомным.<br />
&#8220;Есть мнение&#8221;, что в случае рандомного доступа несущественно то, насколько последовательно расположены на диске данные, если читают и пишут их все равно в случайном порядке. &#8220;Случайное расположение помноженное на случайный порядок чтения-записи не дает &#8220;случайное в квадрате&#8221;, оно по прежнему остается просто случайным&#8221;<br />
Отсутствие фрагментации улучшает характеристики доступа в основном для данных, которые читаются и пишутся последовательно, а это относительно малораспространенный набор задач.<br />
Более того, и об этом я уже тоже писал, в ряде случаев, на современных OS и современных производительных системах хранения с большим и &#8220;умным&#8221; кэшем, фрагментация даже в условиях последовательного доступа мало влияет на характеристики производительности.</p>
<p>Так это или нет - существуют разные мнения. Задача, поверьте, совсем не так проста, как кажется.<br />
Но это все, увы, пока только чужие мнения. Лично своего, основанного на каких-то моих собствнных экспериментах я пока не сложил.<br />
Главная сложность - в методологии тестирования. Я пока такую, чтобы она устраивала и меня и точность, не разработал.</p>
						<div class="comment-meta"><a href="trackback.html#comment-370" title="">15 Апрель 2010, 14:35</a>
			</div></div>
		</li>

		
	</ol>

 

<h3 id="respond">Оставить комментарий</h3>


<form style="display: none;" method="post" id="commentform">


<p><input type="text" name="author" id="author" value="" size="22" tabindex="1" />
<label for="author"><small>Имя (обязательно)</small></label></p>

<p><input type="text" name="email" id="email" value="" size="22" tabindex="2" />
<label for="email"><small>E-Mail (will not be published) (обязательно)</small></label></p>

<p><input type="text" name="url" id="url" value="" size="22" tabindex="3" />
<label for="url"><small>Сайт</small></label></p>


<!--<p><small><strong>XHTML:</strong> You can use these tags: &lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </small></p>-->

<p><textarea name="comment" id="comment" rows="10" cols="" tabindex="4"></textarea></p>

<p><input name="submit" type="submit" id="submit" tabindex="5" value="Submit Comment" />
<input type="hidden" name="comment_post_ID" value="485" />
</p>

</form>

</div>


	
	</div>

	<div id="sidebar">
		<ul>
			
			
			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Автор</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			<li class="pagenav"><h2>Страницы</h2><ul><li class="page_item page-item-153"><a href="../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul></li>
			<li><h2>Рубрики</h2>
				<ul>
					<li class="cat-item cat-item-89"><a href="../category/commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;">commands</a>
</li>
	<li class="cat-item cat-item-37"><a href="../category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;">howto</a>
</li>
	<li class="cat-item cat-item-52"><a href="../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;">justread</a>
</li>
	<li class="cat-item cat-item-51"><a href="../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;">review</a>
</li>
	<li class="cat-item cat-item-3"><a href="../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;">techtalk</a>
</li>
	<li class="cat-item cat-item-71"><a href="../category/tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;">tricks</a>
</li>
	<li class="cat-item cat-item-95"><a href="../category/utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;">utilities</a>
</li>
	<li class="cat-item cat-item-44"><a href="../category/whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;">whoisho</a>
</li>
	<li class="cat-item cat-item-1"><a href="../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;">новости</a>
</li>
	<li class="cat-item cat-item-387"><a href="../category/opros.html" title="Просмотреть все записи в рубрике &laquo;опрос&raquo;">опрос</a>
</li>
	<li class="cat-item cat-item-8"><a href="../category/translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;">переводы</a>
</li>
	<li class="cat-item cat-item-40"><a href="../category/citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;">цитаты</a>
</li>
				</ul>
			</li>

			<li><h2>Архивы</h2>
				<ul>
					<li><a href='../date/2018/01.html' title='Январь 2018'>Январь 2018</a></li>
	<li><a href='../date/2015/10.html' title='Октябрь 2015'>Октябрь 2015</a></li>
	<li><a href='../date/2015/04.html' title='Апрель 2015'>Апрель 2015</a></li>
	<li><a href='../date/2015/03.html' title='Март 2015'>Март 2015</a></li>
	<li><a href='../date/2015/01.html' title='Январь 2015'>Январь 2015</a></li>
	<li><a href='../date/2014/12.html' title='Декабрь 2014'>Декабрь 2014</a></li>
	<li><a href='../date/2014/11.html' title='Ноябрь 2014'>Ноябрь 2014</a></li>
	<li><a href='../date/2014/10.html' title='Октябрь 2014'>Октябрь 2014</a></li>
	<li><a href='../date/2014/09.html' title='Сентябрь 2014'>Сентябрь 2014</a></li>
	<li><a href='../date/2014/08.html' title='Август 2014'>Август 2014</a></li>
	<li><a href='../date/2014/07.html' title='Июль 2014'>Июль 2014</a></li>
	<li><a href='../date/2014/06.html' title='Июнь 2014'>Июнь 2014</a></li>
	<li><a href='../date/2014/05.html' title='Май 2014'>Май 2014</a></li>
	<li><a href='../date/2014/04.html' title='Апрель 2014'>Апрель 2014</a></li>
	<li><a href='../date/2014/03.html' title='Март 2014'>Март 2014</a></li>
	<li><a href='../date/2014/02.html' title='Февраль 2014'>Февраль 2014</a></li>
	<li><a href='../date/2014/01.html' title='Январь 2014'>Январь 2014</a></li>
	<li><a href='../date/2013/12.html' title='Декабрь 2013'>Декабрь 2013</a></li>
	<li><a href='../date/2013/11.html' title='Ноябрь 2013'>Ноябрь 2013</a></li>
	<li><a href='../date/2013/10.html' title='Октябрь 2013'>Октябрь 2013</a></li>
	<li><a href='../date/2013/09.html' title='Сентябрь 2013'>Сентябрь 2013</a></li>
	<li><a href='../date/2013/08.html' title='Август 2013'>Август 2013</a></li>
	<li><a href='../date/2013/07.html' title='Июль 2013'>Июль 2013</a></li>
	<li><a href='../date/2013/06.html' title='Июнь 2013'>Июнь 2013</a></li>
	<li><a href='../date/2013/05.html' title='Май 2013'>Май 2013</a></li>
	<li><a href='../date/2013/04.html' title='Апрель 2013'>Апрель 2013</a></li>
	<li><a href='../date/2013/03.html' title='Март 2013'>Март 2013</a></li>
	<li><a href='../date/2013/02.html' title='Февраль 2013'>Февраль 2013</a></li>
	<li><a href='../date/2013/01.html' title='Январь 2013'>Январь 2013</a></li>
	<li><a href='../date/2012/12.html' title='Декабрь 2012'>Декабрь 2012</a></li>
	<li><a href='../date/2012/11.html' title='Ноябрь 2012'>Ноябрь 2012</a></li>
	<li><a href='../date/2012/10.html' title='Октябрь 2012'>Октябрь 2012</a></li>
	<li><a href='../date/2012/09.html' title='Сентябрь 2012'>Сентябрь 2012</a></li>
	<li><a href='../date/2012/08.html' title='Август 2012'>Август 2012</a></li>
	<li><a href='../date/2012/07.html' title='Июль 2012'>Июль 2012</a></li>
	<li><a href='../date/2012/06.html' title='Июнь 2012'>Июнь 2012</a></li>
	<li><a href='../date/2012/05.html' title='Май 2012'>Май 2012</a></li>
	<li><a href='../date/2012/04.html' title='Апрель 2012'>Апрель 2012</a></li>
	<li><a href='../date/2012/03.html' title='Март 2012'>Март 2012</a></li>
	<li><a href='../date/2012/02.html' title='Февраль 2012'>Февраль 2012</a></li>
	<li><a href='../date/2012/01.html' title='Январь 2012'>Январь 2012</a></li>
	<li><a href='../date/2011/12.html' title='Декабрь 2011'>Декабрь 2011</a></li>
	<li><a href='../date/2011/11.html' title='Ноябрь 2011'>Ноябрь 2011</a></li>
	<li><a href='../date/2011/10/index.html' title='Октябрь 2011'>Октябрь 2011</a></li>
	<li><a href='../date/2011/09/index.html' title='Сентябрь 2011'>Сентябрь 2011</a></li>
	<li><a href='../date/2011/08.html' title='Август 2011'>Август 2011</a></li>
	<li><a href='../date/2011/07/index.html' title='Июль 2011'>Июль 2011</a></li>
	<li><a href='../date/2011/06/index.html' title='Июнь 2011'>Июнь 2011</a></li>
	<li><a href='../date/2011/05/index.html' title='Май 2011'>Май 2011</a></li>
	<li><a href='../date/2011/04/index.html' title='Апрель 2011'>Апрель 2011</a></li>
	<li><a href='../date/2011/03/index.html' title='Март 2011'>Март 2011</a></li>
	<li><a href='../date/2011/02.html' title='Февраль 2011'>Февраль 2011</a></li>
	<li><a href='../date/2011/01.html' title='Январь 2011'>Январь 2011</a></li>
	<li><a href='../date/2010/12.html' title='Декабрь 2010'>Декабрь 2010</a></li>
	<li><a href='../date/2010/11/index.html' title='Ноябрь 2010'>Ноябрь 2010</a></li>
	<li><a href='../date/2010/10/index.html' title='Октябрь 2010'>Октябрь 2010</a></li>
	<li><a href='../date/2010/09/index.html' title='Сентябрь 2010'>Сентябрь 2010</a></li>
	<li><a href='../date/2010/08.html' title='Август 2010'>Август 2010</a></li>
	<li><a href='../date/2010/07/index.html' title='Июль 2010'>Июль 2010</a></li>
	<li><a href='../date/2010/06.html' title='Июнь 2010'>Июнь 2010</a></li>
	<li><a href='../date/2010/05.html' title='Май 2010'>Май 2010</a></li>
	<li><a href='../date/2010/04/index.html' title='Апрель 2010'>Апрель 2010</a></li>
	<li><a href='../date/2010/03/index.html' title='Март 2010'>Март 2010</a></li>
	<li><a href='../date/2010/02.html' title='Февраль 2010'>Февраль 2010</a></li>
	<li><a href='../date/2010/01.html' title='Январь 2010'>Январь 2010</a></li>
	<li><a href='../date/2009/12/index.html' title='Декабрь 2009'>Декабрь 2009</a></li>
	<li><a href='../date/2009/11/index.html' title='Ноябрь 2009'>Ноябрь 2009</a></li>
	<li><a href='../date/2009/10.html' title='Октябрь 2009'>Октябрь 2009</a></li>
	<li><a href='../date/2009/09.html' title='Сентябрь 2009'>Сентябрь 2009</a></li>
	<li><a href='../date/2009/08/index.html' title='Август 2009'>Август 2009</a></li>
	<li><a href='../date/2009/07/index.html' title='Июль 2009'>Июль 2009</a></li>
	<li><a href='../date/2009/06.html' title='Июнь 2009'>Июнь 2009</a></li>
	<li><a href='../date/2009/05.html' title='Май 2009'>Май 2009</a></li>
	<li><a href='../date/2009/04.html' title='Апрель 2009'>Апрель 2009</a></li>
	<li><a href='../date/2009/03.html' title='Март 2009'>Март 2009</a></li>
	<li><a href='../date/2009/02.html' title='Февраль 2009'>Февраль 2009</a></li>
	<li><a href='../date/2009/01.html' title='Январь 2009'>Январь 2009</a></li>
	<li><a href='../date/2008/12.html' title='Декабрь 2008'>Декабрь 2008</a></li>
	<li><a href='../date/2008/11.html' title='Ноябрь 2008'>Ноябрь 2008</a></li>
	<li><a href='../date/2008/10.html' title='Октябрь 2008'>Октябрь 2008</a></li>
	<li><a href='../date/2008/09.html' title='Сентябрь 2008'>Сентябрь 2008</a></li>
	<li><a href='../date/2008/08.html' title='Август 2008'>Август 2008</a></li>
	<li><a href='../date/2008/03.html' title='Март 2008'>Март 2008</a></li>
	<li><a href='../date/2008/02.html' title='Февраль 2008'>Февраль 2008</a></li>
	<li><a href='../date/2007/12.html' title='Декабрь 2007'>Декабрь 2007</a></li>
	<li><a href='../date/2007/11.html' title='Ноябрь 2007'>Ноябрь 2007</a></li>
	<li><a href='../date/2007/10.html' title='Октябрь 2007'>Октябрь 2007</a></li>
	<li><a href='../date/2007/09.html' title='Сентябрь 2007'>Сентябрь 2007</a></li>
	<li><a href='../date/2007/08.html' title='Август 2007'>Август 2007</a></li>
	<li><a href='../date/2007/07/index.html' title='Июль 2007'>Июль 2007</a></li>
	<li><a href='../date/2007/06.html' title='Июнь 2007'>Июнь 2007</a></li>
	<li><a href='../date/2007/05.html' title='Май 2007'>Май 2007</a></li>
				</ul>
			</li>

			
					</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="../../feed">Entries (RSS)</a> and <a href="../../comments/feed">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 16 queries. 0.078 seconds. -->
	</div>
</div> <!-- page -->
</body>
</html>
	
