<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>about NetApp  &raquo; Blog Archive   &raquo; Usable Space у NetApp &ndash; что стоит за FUD? (часть 2)</title>

<link rel="stylesheet" href="../wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="about NetApp RSS Feed" href="../feed" />
<link rel="pingback" href="../xmlrpc.php.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.6" />

</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="../index.html" title="about NetApp: Системы хранения данных как предмет разговора">about NetApp</a></h1>
		<p>Системы хранения данных как предмет разговора</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="../index.html">
<input type="text" size="20" name="s" id="s" value="Поиск..."  onblur="if(this.value=='') this.value='Поиск...';" onfocus="if(this.value=='Поиск...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="navbar">
<ul id="nav">
	<li><a href="../index.html">Home</a></li>
	<li class="page_item page-item-153"><a href="../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content">

			
		<div class="navigation">
			<div class="alignleft">&laquo; <a href="661/trackback.html">О расчете дискового пространства: NetApp FAS и EMC NS &ndash; что стоит за FUD (часть 1)</a></div>
			<div class="alignright"><a href="664/trackback.html">Space Reclamation</a> &raquo;</div>
		</div>

		<div class="post" id="post-648">
			<h2 class="posttitle"><a href="648/trackback.html" rel="bookmark" title="Permanent Link to Usable Space у NetApp &ndash; что стоит за FUD? (часть 2)">Usable Space у NetApp &ndash; что стоит за FUD? (часть 2)</a></h2>
			<div class="postmetadata">12 Август 2010, 8:00 <!-- от  --></div>
			<div class="postentry">
				<p>Тема якобы катастрофического уменьшения usable space по сравнению с raw space на системах хранения NetApp занимает, по популярности, у наших конкурентов, пожалуй, третье место, сразу за страшилкой про &quot;ужасную фрагментацию&quot;, и пугалкой про &quot;эмуляцию LUN-ов поверх файлов на файловой системе&quot;. Про первых две я уже писал, и не по разу, пришла пора разобраться и с этой.   <br />Основой для поста послужил перевод статьи в блоге <a href="http://recoverymonkey.net/wordpress/2010/05/07/netapp-usable-space-beyond-the-fud/">Recoverymonkey</a>.</p>
<p>Ранее я уже рассматривал &quot;первую часть&quot; ситуации, то, как образуется <em>usable disk space</em>, то есть та емкость, которая остается для использования на дисках, после того, как мы вычтем из них parity, hot spare и ряд прочих &quot;накладных расходов&quot;. Однако это еще не все, определенный объем на дисках также занимают различные структуры данных. Я называю получившееся пространство, после того, как из <em>usable disk space</em> вычтутся прочие накладные расходы - <em>usable system space</em>.</p>
<p>Во многих виденных мной у конкурентов &quot;документах&quot; такого рода постоянно рассказывается о том, что, якобы, <em>usable system space</em> на системах хранения NetApp составляет менее 50% от купленного raw, а у одного &quot;последовательного борца&quot; с NetApp даже доходила до анекдотичных 34%.    <br />Это смешно для тех, кто знает, как оно обстоит на практике, но все еще производит впечатление на новичков, тех, кто еще не разобрался с тем, как дела обстоят на самом деле.    <br />Ну хорошо, где же истина, которая, как всегда &quot;где-то рядом&quot;?</p>
<p>Цель данного поста - рассмотреть ситуацию с тем, как и из чего образуется usable space на системах NetApp по состоянию дел и технологий на весну 2010 года.   <br />Так как системы NetApp используют свободное пространство на дисках разными способами, а не просто для &quot;хранения LUN-ов&quot; , это постоянно порождает множество непониманий в том, что означают те или иные понятия и параметры, относящиеся к распределению свободного пространства на дисках системы хранения. При этом ряд рекомендаций NetApp изменялись с течением времени, по мере выхода новых версий их OS и взросления используемых технологий. Наша цель - рассмотреть текущее положение дел и обновить понимание вопроса у тех, кто по тем или иным причинам &quot;отстал&quot;.</p>
<h3>Коротко, &quot;для тех, кому лень читать все&quot;    <br />(то, что называется &quot;Executive summary&quot; ;)</h3>
<p>В зависимости от количества и типа дисков и общего дизайна хранилища, исключая самые маленькие системы с очень небольшим количеством дисков, реальная величина usable space целиком системы NetApp может легко превышать 75% от usable space самих дисков. Я видел, например, величину в 78%. Такое значение, конечно же, обеспечивалось при использовании защиты от двойного сбой (RAID-6/DP) и включала spares. <strong>Эта величина показывает &quot;честный&quot; объем хранимых данных для NAS или SAN и не включает в себя дедупликацию, компрессию или клоны типа FlexClone; вместе со всеми перечисленными технологиями, эффективность может легко превысить и 1000%.</strong> Во многих случаях клиенты NetApp выбирают их системы хранения как раз именно потому, что системы NetApp настолько эффективны с точки зрения usable space. А теперь перейдем к подробностям…</p>
<p> <span id="more-648"></span></p>
<h3>Сколько места будет &quot;достаточно каждому&quot;?</h3>
<p>Традиционны дисковые массивы используют пространство довольно простым способом. Вы создаете RAID-группы, затем на них LUN-ы, а эти LUN-ы изображают из себя хост-серверам &quot;локальные&quot; SCSI-диски, вот и все. Понять что происходит с пространством хранения довольно просто. Суммарный размер всех LUN-ов, плюс оставшееся свободное место и есть полное usable-пространство такой системы хранения. Вы покупаете дисковый массив, который, за вычетом RAID и spares, дает вам 10TB, и это все.</p>
<p>Дисковые массивы традиционного типа иногда имеют ряд дополнительных возможностей, таких как, например, <a href="39/trackback.html">снэпшоты</a>. Однако их использование, зачастую, обставлено таким количеством ограничений и неудобств (одно из них в случае снэпшотов - заметное падение производительности), что чаще всего они или не используются вовсе, или используются в очень ограниченном объеме, что мешает им быть по настоящему полезными.</p>
<p>Поскольку системы хранения NetApp практически не страдают от этих ограничений, то пользователи не ограничивают себя в их использовании, и, зачастую, используют очень много снэпшотов на системе хранения, не только в качестве резервных копий. У нас есть пользователь, у которого на системе хранения свыше 10 тысяч снэпшотов. Они реплицируют их на другую систему хранения, могут извлечь из них данные свыше нескольких месяцев давностью, и перестали пользоваться традиционными программами создания резервных копий, сэкономив на этом немало денег, и обеспечив небывало быстрое для старой их системы резервного копирования время восстановления, поскольку в случае снэпшотов, <strong>нет <em>восстановления данных</em> как такового</strong>.</p>
<h3>Каково эффективное пространство хранения на NetApp?</h3>
<p>Если вы примете во внимание, что каждый снэпшот выглядит для вас, как пользователя, как полная копия всех ваших данных на определенный момент времени, without factoring in any deduplication at all, эффективная &quot;логическая&quot; емкость системы хранения будет во много, много раз больше ее &quot;физической&quot; емкости. Большая юридическая компания, с которой я работал, <strong>поместила около 2.5PB своих данных во всего 8TB объема delta space снэпшотов</strong> – довольно высокая эффективность, как ни смотри. Мы сейчас не говорим о резервных копиях, сделанных на дедуплицированные диски, резервных копиях, которые, чтобы ими пользоваться, надо восстановить назад на диски, – мы говорим о многих тысячах непосредственных полных &quot;копий&quot; LUN-ов, шар CIFS и NFS, которые вы можете смонтировать и использовать немедленно и непосредственно, без какого-либо процесса &quot;восстановления&quot;, занимающего время и место на системе хранения.    <br />А когда вы добавите <a href="299/trackback.html">дедупликацию</a> или thin-клонирование, то эффективность хранения может вырасти и еще больше.</p>
<h3>Дело не в том, какого размера ваш диск, а в том, как вы его используете</h3>
<p>Если вы рассматриваете систему хранения NetApp как обычный, привычный, &quot;старый добрый&quot; дисковый массив, без использования всех его преимуществ, то соотношение raw/usable space будет примерно равной привычным показателям. Когда вы начинаете использовать снэпшоты, конечно же они начинают &quot;отъедать&quot; пространство, это так. Но посмотрите, что вы <a href="269/trackback.html">получаете взамен</a>. К примеру, можно держать полные бэкапы Exchange на протяжении месяца, платя за это всего лишь незначительным увеличением занимаемого ими объема. Что это дает мне и моему бизнесу? Например:</p>
<ul>
<li>Я могу сэкономить, отказавшись от лицензий софт резервного копирования </li>
<li>Я могу сэкономить, сократив занимаемое системой хранения место и ее энергопотребление </li>
<li>Я могу обойтись без закупки дополнительных дисков для хранения резервных копий </li>
<li>Я могу отказаться от покупки дополнительных средств Continuous Data Protection данных </li>
<li>Восстановление моих данных происходит за секунды </li>
<li>Решение обеспечения катастрофоустойчивости становится гораздо проще </li>
</ul>
<p>??ли же я могу создать 150 клонов моей SQL-базы для экспериментов отдела разработки, которыми они могут свободно пользоваться и &quot;ломать&quot; одновременно, и которые займут совершенно незначительную долю места, по сравнению с традиционными &quot;копиями&quot;, место, которое на других системах занялось бы в размере 150x от размера самой базы…   <br />??ли создать тысячи клонов VM-рабочих мест в среде VDI…</p>
<p>Сколько денег я сэкономил?</p>
<p><strong>Во сколько обходится простота и скорость администрирования, в терминах операционных затрат вашего бизнеса?</strong></p>
<p>??ли, другими словами:</p>
<p><strong>Насколько эффективнее может быть ваш бизнес, если вас не ограничивают устаревшие технологии?      <br /></strong>Все дело в осознании и осознанном использовании расширенных возможностей.</p>
<h3>Что именно вы покупаете</h3>
<p>Просто для того, чтобы уяснить моменты, в изложенном далее: если вы попросите у меня систему с 10TB usable, я сконфигурирую вам систему c usable system space посчитанного с честным Base2 объемом хранения, защищенным от двойной дисковой ошибки (то есть НЕ RAID5), емкостью равной 10TB, после всех оверхедов, spares, и так далее. Я называю емкостью системы именно <em>usable system space.</em></p>
<h3>Right-sized, реальный объем против raw-объема</h3>
<p>Вот некоторые моменты, которые стоит иметь ввиду, при расчете &quot;настоящего&quot; usable-объема:</p>
<ul>
<li>Реальный usable размер диска, допустим, FC 450GB не будет равен в точности 450GB, независимо от производителя. </li>
<li>Реальная usable емкость зависит от того, использовался ли в подсчете &quot;двоичный&quot; (Base2) или &quot;десятичный&quot; (Base10) базис арифметики, а также множество других факторов.</li>
<li>Все вендоры систем хранения используют жесткие диски, поставляемые разными их производителями, поэтому при создании RAID-группы вам надо рассчитывать, что емкость составляющих ее дисков должна соответствовать самому &quot;маленькому&quot; (исчисляя в количестве секторов) диску среди поставляемых данным вендором системы хранения, иначе вы не сможете установить какой-то из попавших к вам в будущем дисков (например, пришедшем на замену вышедшему из строя, но не Hitachi, например, а Seagate) в существующий RAID, если он окажется меньше по количеству секторов, чем вы определили как емкость диска в существующем RAID. Выбор такого значения &quot;наименьшего общего&quot; числа секторов для ряда дисков разных производителей &quot;одинаковой емкости&quot; называется right-sizing. </li>
<li>В примере выше, диск &quot;450GB&quot; будет иметь right-sized Base10 пространство равное 438,3GB, и даже &quot;меньше&quot; в двоичной арифметике Base2 (402,2GB). Помните, что &quot;двоичная&quot; Base2-арифметика считает в 1K не 1000, а 1024 байта, а на больших емкостях это может давать подчас значительную “погрешность” (<a href="439/trackback.html">до 9% между TB (Base10) и TiB (Base2)</a>). Хотя для Base2 и Base10 в международном стандарте и определены различные приставки (килобайт, мегабайт и гигабайт для Base10 и &quot;кибибайт&quot;, &quot;мебибайт&quot; и &quot;гибибайт&quot; для двоичных Base2), на практике ими все еще мало кто пользуется, что вызывает неизбежную путаницу. </li>
<li>Остерегайтесь анализа, сравнений или спецификаций, которые показывают данные по емкости, основываясь на Base10 одного вендора, и Base2 другого, или raw disk space одного против right-sized у другого! <strong>Всегда спрашивайте, какой базис (Base10 или Base2) используется в том расчете, что вы видите, и каковы значения, отражающие right-sized емкость дисков! </strong>Рассчитывайте процент usable базируясь на правильных и главное - одинаково вычисленных емкостях дисков, а не на &quot;маркетинговых&quot; числах вида &quot;450GB&quot;.</li>
</ul>
<h3>Некоторые аксиомы процесса резервирования пространства</h3>
<p>Любая система хранения, на которой есть снэпшоты, клоны, и т.д. как правило требует для их использования какой-то объем дополнительного пространства. К примеру, если вы полностью заполните данными систему хранения, и захотите сделать снэпшот, это возможно у вас и получится, но дальнейшие изменения уже записанных на систему данных будут невозможны, пока вы не удалите снэпшот.</p>
<p>Как обычно, во всем этом нет никакого волшебства. <strong>Если вы собираетесь хранить многочисленные снэпшоты, то системе нужно место, чтобы хранить изменения, сделанные в данных между взятыми снэпшотами, независимо от того, кто производитель системы хранения!</strong></p>
<h3>Описание принципов организации данных на системах NetApp</h3>
<p>??з чего, рассматривая иерархически, состоят структуры хранения NetApp:</p>
<ul>
<li><em>Диски (физичские)</em></li>
<li><em>RAID-группы</em> – создаются из нескольких дисков. Типа RAID по умолчанию у NetApp это RAID-DP. Система хранения создает его автоматически, так что вам не нужно беспокоиться о деталях, таких как балансировка на бэкенде, например, и так далее. RAID-группы у NetApp обычно довольно большие , 16 дисков, иногда и больше. RAID-DP обеспечивает лучшую защиту, чем RAID10 (математика показывает, что в 163 раза лучше, чем у RAID10 и в 4000 раз лучше, чем у RAID5). </li>
<li><em>Диски Parity</em> – эти диски содержат избыточную информацию, которая необходима для восстановления данных в случае отказа дисков. RAID-DP использует 2 диска parity на группу RAID. </li>
<li><em>Диски Spares</em> – диски, которые автоматически заменяют вышедшие (или планирующие выйти) из строя. </li>
<li><em>Aggregates</em> – логическая структура, состоящая из нескольких нижележащих RAID-групп и базовый элемент структуры, на которой размещаются доступные пользователю данные. После создания aggregate (русского термина пока не устоялось, а &quot;агрегат&quot; слишком уж попахивает машиностроением) вы можете расширять его, добавляя в него диски &quot;на ходу&quot;, даже по одному. Кроме этого, располагающиеся на aggregate структуры более высокого уровня, такие как тома и LUN-ы оказываются &quot;размазанными&quot; по всем его дискам, что положительно сказывается на быстродействии. </li>
<li><em>Тома (Volumes)</em> – &quot;контейнеры данных&quot;, размещающиеся поверх Aggregate. Тома могут использоваться в NAS или нести на себе LUN-ы SAN. Тома могут принадлежать только одному Aggregate, и обычно на одном Aggregate располагается множество томов. Обычно тома могут автоматически расширяться, когда они заполняются реальными пользовательскими данными. </li>
<li><em>LUN-ы</em> – помещаются внутри томов. Они могут быть один на том, или несколько. Чаще всего используют схему с одним LUN на том. </li>
<li><em>Snapshots</em> – логические, эффективно использующие пространство структуры, содержащие мгновенные копии состояния данных на томе, или любых структур, размещающихся на томе. Есть три &quot;формы существования&quot; снэпшота как технологии (<em>Snapshot</em>, <em>SnapVault</em> и <em>FlexClone</em>) но все они базируются на сходных принципах работы. Если коротко: <em>Snapshot</em> – для краткосрочного read-only хранения, <em>Snapvault</em> – для долгосрочного, <em>Flexclone</em> – это Snapshot, в который можно писать.</li>
</ul>
<h3>Описание основных типов резервирований пространства на системах NetApp</h3>
<ol>
<li><em>Snapshot Reserve</em> – это специальная возможность, облегчающая учет пространства на томе в случае использования снэпшотов, которая определяется админом в процентах от общего объема тома. Например, если вы создаете том размером 10TB и устанавливаете для него 10% Snap Reserve, то клиентская система, подключенная к этому тому увидит его размер, доступный для своих операций, равным 9TB. Величина этого резервирования может произвольно задаваться, и даже меняться &quot;на ходу&quot;. Действительный объем пространства, занятый снэпшотами зависит от темпов записи изменений на том, произошедший между взятием одного и следующего снэпшота. Реальную ситуацию с величиной занятого в снэпшотах пространства на множестве систем (7597 штук, если быть точным) можно посмотреть <a href="http://blogs.netapp.com/shadeofblue/2008/09/think-tesseract.html">здесь</a> . Вкратце: по данным Autosupport на 7597 эксплуатируемых систем, с 127584 томами и более чем 144PB использованной емкости, было занято в почти полутора миллионах снэпшотов около 2,4PB, то есть менее 3%.</li>
<li><em>Aggregate Snap Reserve</em> – этот сравнительно малоизвестный тип резервирования пространства может помочь в случае серьезного повреждения на уровне целиком всей системы, например при катастрофическом повреждении aggregate, и прочего &quot;большого бадабума&quot;. <strong>Этот параметр включен по умолчанию, и резервирует примерно 5% пространства на aggregate</strong>. Это резервирование не обязательно к использованию, если вы только не используете SyncMirror (обычно используется в составе решения <a href="http://www.netapp.com/us/products/protection-software/metrocluster.html">Metrocluster</a>). В зависимости от того, что именно вы делаете на вашей системе, это значение можно уменьшить, например до 1%, или, при желании, отключить вовсе (меняя значения по умолчанию всегда ясно понимайте, что именно вы делаете!). </li>
<li><em>Fractional Reserve</em> – это то, что уже много лет вызывает непонимание у многих. Я уже писал о том, что такое и как используется Fractional Reserve раньше. Вкратце: это &quot;страховочная сеть&quot;, в том случае, когда вы изменили абсолютно все хранящиеся в LUN на томе данные, при этом, если у вас есть Fractional Reserve, вы по прежнему сможете создать с этого тома снэпшот. Допустим, что мы взяли снэпшот, а затем начали изменять по очереди каждый блок данных в этом томе. Величина snap delta будет пухнуть, пока не составит 100% размера LUN – <strong>это случится вне зависимости от того, какую систему хранения со снпшотами вы используете: NetApp, EMC, XIV, Compellent, 3Par, HDS, HP и т.д.</strong> Данные же должны где-то размещаться! Отличное и исчерпывающее описание того, что такое Fractional Reserve сделано <a href="http://media.netapp.com/documents/tr-3483.pdf">в этом документе</a>, рекомендую прочесть и разобраться. <a href="http://media.netapp.com/documents/tr-3827.pdf">Еще один полезный документ</a> на эту тему. Короче говоря: с параметром snapshot autodelete, и/или volume autogrow, (и при наличии места для этого роста на aggregate) <strong>вы можете установить его значение в 0</strong>. Если вы используете продукты SnapManager, они позаботятся об удалении снэпшотов самостоятельно. </li>
<li><em>System reserve</em> – это единственный параметр, не являющийся опциональным. Он установлен в 10% по умолчанию. На самом деле даже его можно изменить, но, ради вас самих, как это сделать я вам не скажу. Для резервирования этого объема есть весомые причины, и уменьшение его может потенциально вызвать серьезные проблемы в системе с высокими показателями по записи. Величина в 10% была выбрана экспериментальным путем и обеспечивает достаточную производительность. Все процессы сайзинга у NetApp учитывают это значение. Кстати, рекомендую вам поинтересоваться у инженеров других вендоров, считают ли они безопасным и правильным использовать их системы хранения заполненными на 100% данными, без никакого резерва, не вызовет ли это ущерба для производительности… Кстати говоря, вы получаете обратно эти 10% (а, зачастую и много больше), когда используете другие методы повышения эффективности хранения NetApp (например сравните типичную длину группы RAID-DP в сравнении с рекомендуемыми значениями у других производителей) так что эта &quot;потеря&quot; не будет столь важной. </li>
</ol>
<p><strong>??того:</strong> За исключением 10% системного резерва, все остальное пространство это, так или иначе, <em><strong>usable space</strong></em>.</p>
<h3>Значения по умолчанию, принятые NetApp, и некоторые рекомендации</h3>
<p>??так, подходим к самому интересному. Конкуренты уже вставляют свежие обоймы.    <br />В зависимости от того, насколько давно написана документация, которой вы собираетесь руководствоваться, и какая версия Data ONTAP установлена на вашей системе хранения, будут существовать разные рекомендации и разные принятые по умолчанию значения.</p>
<p>Вот почему, если вы посмотрите в какой-нибудь документ по сравнению систем хранения от наших конкурентов, вы почти наверняка найдете там утверждение, что, якобы, NetApp требует, чтобы место, где размещается LUN имело еще свободного, ничем не занятого пространства в объеме самого LUN, для создания fractional reserve. Эта рекомендация действительно существовала много лет назад, так как была необходима на тот момент для обеспечения безопасности данных, а других средств это сделать на тот момент еще не было. Документация с тех пор была обновлена много лет назад, в соответствии с текущей версией Data ONTAP и ее новыми возможностями, сейчас в ней указано рекомендованное значение fractional reservation в 0, что, правда, почему-то не было замечено нашими, обычно столь внимательными конкурентам, по прежнему твердящим о давно outdated требованиях. </p>
<p>??так, краткий лист рекомендованных значений для LUN:</p>
<ol>
<li><em>Snap reserve</em> – <strong>0</strong> </li>
<li><em>Fractional reserve</em> – <strong>0</strong> </li>
<li><em>Snap autodelete <strong>on</strong></em> (в случае, если вы не используете продукты SnapManager, который сам управляет процессом удаления старых снэпшотов) </li>
<li><em>Volume autogrow <strong>on</strong></em> </li>
<li>Оставляйте небольшое незанятое пространство на ваших томах, не заполняйте том на 100% одним LUN-ом (пространство, занятое LUN может быть thick, но пространство тома может быть thin-provisioned). Это пространство используется временными процессами при дедупликации, и рядом других внутренних процессов, к тому же заполнение тома целиком данными может ухудшать его производительность (кстати, это так и для большинства других систем хранения). </li>
<li>Рассмотрите возможность использовать <em><a href="36/trackback.html">thin provisioning</a></em>, даже если вы не планируете использовать oversubscribe для диска. Это решение даст вам значительную гибкость и &quot;эластичность&quot; системе хранения в долговременной перспективе.</li>
</ol>
<p>??так, посмотрите на значения по умолчанию, спросите ваших инженеров о их мнении, и, если они не возражают, измените значения по умолчанию на предложенные выше, или на рекомендованные вашими инженерами, лучше соответствующие вашей задаче. Обратите внимание, что на старых системах, даже после обновления Data ONTAP, старые значения не будут изменены (апгрейд системы не изменяет установленных ранее значений в конфигах). </p>
<p>Если вы хотите использовать thin provisioning, то, в зависимости от используемой на системе хранения версии Data ONTAP, вы можете увидеть, что включение thin provisioning на томе может автоматически изменить значение fractional reserve на 100% – но, на самом деле место на дисках при этом не занимается. Это не ставилось принудительно в версиях 7.2.x, поведение было изменено в версии 7.3.1 с установкой на 100%, затем поправлено в 7.3.3, так как всех смутило.</p>
<h3>??того</h3>
<p>Вопрос объема usаble (<em>используемого</em>) пространства зависит, прежде всего, от того, как именно это пространство будет <em>использоваться</em>. Вы можете использовать систему хранения NetApp как &quot;обычную систему хранения&quot; (помните, &quot;<em>обычный стиральный порошок</em>&quot;?), не используя ее многочисленные дополнительные возможности, и тогда соотношение raw/usable часто будет сравнимым с &quot;обычным&quot;. Однако системы хранения NetApp имеют множество дополнительных, зачастую уникальных возможностей по организации и защите данных, их использование неизбежно потребует определенных &quot;жертв&quot; в отношении места на дисках. При этом взамен вы получите новые возможности, лучшую защищенность данных, и новые возможности в бизнесе, выражающиеся, зачастую, во вполне денежном выражении. Все то, что более &quot;традиционные&quot; системы хранения вам просто не смогут предоставить.</p>
<p>Лукавство многих наших конкурентов состоит в том, что они сравнивают системы хранения, не обладающие всеми этими дополнительными возможностями, с системами NetApp, этими возможностями обладающими. Грубо говоря, это сравнения молотка и микроскопа на задаче забивания гвоздя (молоток безусловно выиграет, и по цене решения и по удобству использования;)</p>
<p>Сравнение чего бы то ли было может быть сделано честно, лишь соблюдая ряд определенных условий. Нелепо сравнивать емкость, посчитанную с использованием разных арифметических базисов. Нечестно сравнивать системы с принципиально различным набором возможностей.</p>
<p>Еще более нечестно при этом сравнении делать вид, что сравнивающему это различие в наборе предоставляемых возможностей, которые обеспечиваются этой разницей, неизвестно.</p>
							</div>
	
			<div class="postmetadata">
				<div class="postmetadata">
					Метки: <a href="tag/fud/index.html" rel="tag">fud</a>, <a href="tag/netapp/index.html" rel="tag">netapp</a>, <a href="tag/raw.html" rel="tag">raw</a>, <a href="tag/useable.html" rel="tag">useable</a><br />					Раздел: <a href="category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>					&nbsp;|&nbsp;&nbsp;<a href="648/trackback.html#respond">Комментарий</a> (<a href='648/feed'>RSS</a>)					&nbsp;|&nbsp;&nbsp;<a href="648/trackback.html" rel="trackback">Обратная ссылка</a>									 </div>
			</div>
		</div>
	
<!-- You can start editing here. -->

<div id="comments">
	<h3>Комментарии (6)</h3>

	<ol class="commentlist">

	
		<li class="comment even" id="comment-664">
		<div id="div-comment-664">
		<div class="comment-author">
			<cite>Александр:<cite></div>
			<p>Ещё +5 копеек&#8230; ;) Да, так оно и есть. У меня Fractional reserve устанавливается в 100% сразу, но это не мешает мне его поставить в 0 на ходу.. никаких проблем с этим связанных я не вижу и не встречал. Также наблюдая за местом, занимаемым снапшотами (Snap reserve), уменьшил процент Snap reserve так же на ходу. Почему не страшно уменьшать Snap reserve? Да очень просто - снапшоты могут забраться в область где лежат данные, если не хватит Snap reserve и если будет свободное место в области данных, но вот данные забраться в Snap reserve уже не могут. Как все просто&#8230; также система хранит 30 ежедневных снапшотов которые сливаются на летну всего один раз в месяц вместо того чтобы всю неделю катать инкременты и в конце недели ещё и фул (да знаю не безопасно, но это позволило выйти из кризиса нехватки ресурсов системы резервного копирования и временным недофинансированием ??Т :))</p>
<p>К слову - Clariion мне не позволит сделать даже ТАКОЕ маленькое для NetApp количество снапшотов ;)</p>
<p>P.S. что-то openid меня не идентифицирует правильно :)<br />
P.P.S. руки чешутся поофтопить сравнивая с Old School block devices&#8230; :)</p>
						<div class="comment-meta"><a href="648/trackback.html#comment-664" title="">13 Август 2010, 2:49</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-2811">
		<div id="div-comment-2811">
		<div class="comment-author">
			<cite>bbk:<cite></div>
			<p>Где можно посмотреть right-sized по дискам НетАпп&#8217;а?</p>
						<div class="comment-meta"><a href="648/trackback.html#comment-2811" title="">25 Июнь 2012, 18:21</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-2812">
		<div id="div-comment-2812">
		<div class="comment-author">
			<cite>bbk:<cite></div>
			<p>romx&gt;Есть три &#8220;формы существования&#8221; снэпшота как технологии (Snapshot, SnapVault и FlexClone)<br />
А как же SnapMirror? Вполне себе уникальная форма снепшота. Так что +1 :)</p>
						<div class="comment-meta"><a href="648/trackback.html#comment-2812" title="">25 Июнь 2012, 18:26</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-2813">
		<div id="div-comment-2813">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>bbk:</p>
<p>Например в этом блоге:<br />
<a href="1101/trackback.html" rel="nofollow">http://blog.aboutnetapp.ru/archives/1101</a></p>
						<div class="comment-meta"><a href="648/trackback.html#comment-2813" title="">25 Июнь 2012, 18:28</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-12055">
		<div id="div-comment-12055">
		<div class="comment-author">
			<cite>evans:<cite></div>
			<p>Хорошо сразано, но вот один баальшой косяк.<br />
Не стоит заменять снапшотами и зеркалированием резервные копии.<br />
Это большая ошибка и она зачастую покрывается или дизастером или фатальным(логическим) дефектом который улетает в репликацию.<br />
а в остально согласен на пять :)</p>
						<div class="comment-meta"><a href="648/trackback.html#comment-12055" title="">23 Январь 2014, 20:35</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-12062">
		<div id="div-comment-12062">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>evans:<br />
Разверните ваше утверждение, пожалуйста. Пока мне видится, что вы неправильно понимаете вопрос.</p>
						<div class="comment-meta"><a href="648/trackback.html#comment-12062" title="">24 Январь 2014, 19:12</a>
			</div></div>
		</li>

		
	</ol>

 

<h3 id="respond">Оставить комментарий</h3>


<form action="http://blog.aboutnetapp.ru/wp-comments-post.php" method="post" id="commentform">


<p><input type="text" name="author" id="author" value="" size="22" tabindex="1" />
<label for="author"><small>Имя (обязательно)</small></label></p>

<p><input type="text" name="email" id="email" value="" size="22" tabindex="2" />
<label for="email"><small>E-Mail (will not be published) (обязательно)</small></label></p>

<p><input type="text" name="url" id="url" value="" size="22" tabindex="3" />
<label for="url"><small>Сайт</small></label></p>


<!--<p><small><strong>XHTML:</strong> You can use these tags: &lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </small></p>-->

<p><textarea name="comment" id="comment" rows="10" cols="" tabindex="4"></textarea></p>

<p><input name="submit" type="submit" id="submit" tabindex="5" value="Submit Comment" />
<input type="hidden" name="comment_post_ID" value="648" />
</p>

</form>

</div>


	
	</div>

	<div id="sidebar">
		<ul>
			
			
			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Автор</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			<li class="pagenav"><h2>Страницы</h2><ul><li class="page_item page-item-153"><a href="../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul></li>
			<li><h2>Рубрики</h2>
				<ul>
					<li class="cat-item cat-item-89"><a href="category/commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;">commands</a>
</li>
	<li class="cat-item cat-item-37"><a href="category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;">howto</a>
</li>
	<li class="cat-item cat-item-52"><a href="category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;">justread</a>
</li>
	<li class="cat-item cat-item-51"><a href="category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;">review</a>
</li>
	<li class="cat-item cat-item-3"><a href="category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;">techtalk</a>
</li>
	<li class="cat-item cat-item-71"><a href="category/tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;">tricks</a>
</li>
	<li class="cat-item cat-item-95"><a href="category/utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;">utilities</a>
</li>
	<li class="cat-item cat-item-44"><a href="category/whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;">whoisho</a>
</li>
	<li class="cat-item cat-item-1"><a href="category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;">новости</a>
</li>
	<li class="cat-item cat-item-387"><a href="category/opros.html" title="Просмотреть все записи в рубрике &laquo;опрос&raquo;">опрос</a>
</li>
	<li class="cat-item cat-item-8"><a href="category/translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;">переводы</a>
</li>
	<li class="cat-item cat-item-40"><a href="category/citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;">цитаты</a>
</li>
				</ul>
			</li>

			<li><h2>Архивы</h2>
				<ul>
					<li><a href='date/2018/01.html' title='Январь 2018'>Январь 2018</a></li>
	<li><a href='date/2015/10.html' title='Октябрь 2015'>Октябрь 2015</a></li>
	<li><a href='date/2015/04.html' title='Апрель 2015'>Апрель 2015</a></li>
	<li><a href='date/2015/03.html' title='Март 2015'>Март 2015</a></li>
	<li><a href='date/2015/01.html' title='Январь 2015'>Январь 2015</a></li>
	<li><a href='date/2014/12.html' title='Декабрь 2014'>Декабрь 2014</a></li>
	<li><a href='date/2014/11.html' title='Ноябрь 2014'>Ноябрь 2014</a></li>
	<li><a href='date/2014/10.html' title='Октябрь 2014'>Октябрь 2014</a></li>
	<li><a href='date/2014/09.html' title='Сентябрь 2014'>Сентябрь 2014</a></li>
	<li><a href='date/2014/08.html' title='Август 2014'>Август 2014</a></li>
	<li><a href='date/2014/07.html' title='Июль 2014'>Июль 2014</a></li>
	<li><a href='date/2014/06.html' title='Июнь 2014'>Июнь 2014</a></li>
	<li><a href='date/2014/05.html' title='Май 2014'>Май 2014</a></li>
	<li><a href='date/2014/04.html' title='Апрель 2014'>Апрель 2014</a></li>
	<li><a href='date/2014/03.html' title='Март 2014'>Март 2014</a></li>
	<li><a href='date/2014/02.html' title='Февраль 2014'>Февраль 2014</a></li>
	<li><a href='date/2014/01.html' title='Январь 2014'>Январь 2014</a></li>
	<li><a href='date/2013/12.html' title='Декабрь 2013'>Декабрь 2013</a></li>
	<li><a href='date/2013/11.html' title='Ноябрь 2013'>Ноябрь 2013</a></li>
	<li><a href='date/2013/10.html' title='Октябрь 2013'>Октябрь 2013</a></li>
	<li><a href='date/2013/09.html' title='Сентябрь 2013'>Сентябрь 2013</a></li>
	<li><a href='date/2013/08.html' title='Август 2013'>Август 2013</a></li>
	<li><a href='date/2013/07.html' title='Июль 2013'>Июль 2013</a></li>
	<li><a href='date/2013/06.html' title='Июнь 2013'>Июнь 2013</a></li>
	<li><a href='date/2013/05.html' title='Май 2013'>Май 2013</a></li>
	<li><a href='date/2013/04.html' title='Апрель 2013'>Апрель 2013</a></li>
	<li><a href='date/2013/03.html' title='Март 2013'>Март 2013</a></li>
	<li><a href='date/2013/02.html' title='Февраль 2013'>Февраль 2013</a></li>
	<li><a href='date/2013/01.html' title='Январь 2013'>Январь 2013</a></li>
	<li><a href='date/2012/12.html' title='Декабрь 2012'>Декабрь 2012</a></li>
	<li><a href='date/2012/11.html' title='Ноябрь 2012'>Ноябрь 2012</a></li>
	<li><a href='date/2012/10.html' title='Октябрь 2012'>Октябрь 2012</a></li>
	<li><a href='date/2012/09.html' title='Сентябрь 2012'>Сентябрь 2012</a></li>
	<li><a href='date/2012/08.html' title='Август 2012'>Август 2012</a></li>
	<li><a href='date/2012/07.html' title='Июль 2012'>Июль 2012</a></li>
	<li><a href='date/2012/06.html' title='Июнь 2012'>Июнь 2012</a></li>
	<li><a href='date/2012/05.html' title='Май 2012'>Май 2012</a></li>
	<li><a href='date/2012/04.html' title='Апрель 2012'>Апрель 2012</a></li>
	<li><a href='date/2012/03.html' title='Март 2012'>Март 2012</a></li>
	<li><a href='date/2012/02.html' title='Февраль 2012'>Февраль 2012</a></li>
	<li><a href='date/2012/01.html' title='Январь 2012'>Январь 2012</a></li>
	<li><a href='date/2011/12.html' title='Декабрь 2011'>Декабрь 2011</a></li>
	<li><a href='date/2011/11.html' title='Ноябрь 2011'>Ноябрь 2011</a></li>
	<li><a href='date/2011/10/index.html' title='Октябрь 2011'>Октябрь 2011</a></li>
	<li><a href='date/2011/09/index.html' title='Сентябрь 2011'>Сентябрь 2011</a></li>
	<li><a href='date/2011/08.html' title='Август 2011'>Август 2011</a></li>
	<li><a href='date/2011/07/index.html' title='Июль 2011'>Июль 2011</a></li>
	<li><a href='date/2011/06/index.html' title='Июнь 2011'>Июнь 2011</a></li>
	<li><a href='date/2011/05/index.html' title='Май 2011'>Май 2011</a></li>
	<li><a href='date/2011/04/index.html' title='Апрель 2011'>Апрель 2011</a></li>
	<li><a href='date/2011/03/index.html' title='Март 2011'>Март 2011</a></li>
	<li><a href='date/2011/02.html' title='Февраль 2011'>Февраль 2011</a></li>
	<li><a href='date/2011/01.html' title='Январь 2011'>Январь 2011</a></li>
	<li><a href='date/2010/12.html' title='Декабрь 2010'>Декабрь 2010</a></li>
	<li><a href='date/2010/11/index.html' title='Ноябрь 2010'>Ноябрь 2010</a></li>
	<li><a href='date/2010/10/index.html' title='Октябрь 2010'>Октябрь 2010</a></li>
	<li><a href='date/2010/09/index.html' title='Сентябрь 2010'>Сентябрь 2010</a></li>
	<li><a href='date/2010/08.html' title='Август 2010'>Август 2010</a></li>
	<li><a href='date/2010/07/index.html' title='Июль 2010'>Июль 2010</a></li>
	<li><a href='date/2010/06.html' title='Июнь 2010'>Июнь 2010</a></li>
	<li><a href='date/2010/05.html' title='Май 2010'>Май 2010</a></li>
	<li><a href='date/2010/04/index.html' title='Апрель 2010'>Апрель 2010</a></li>
	<li><a href='date/2010/03/index.html' title='Март 2010'>Март 2010</a></li>
	<li><a href='date/2010/02.html' title='Февраль 2010'>Февраль 2010</a></li>
	<li><a href='date/2010/01.html' title='Январь 2010'>Январь 2010</a></li>
	<li><a href='date/2009/12/index.html' title='Декабрь 2009'>Декабрь 2009</a></li>
	<li><a href='date/2009/11/index.html' title='Ноябрь 2009'>Ноябрь 2009</a></li>
	<li><a href='date/2009/10.html' title='Октябрь 2009'>Октябрь 2009</a></li>
	<li><a href='date/2009/09.html' title='Сентябрь 2009'>Сентябрь 2009</a></li>
	<li><a href='date/2009/08/index.html' title='Август 2009'>Август 2009</a></li>
	<li><a href='date/2009/07/index.html' title='Июль 2009'>Июль 2009</a></li>
	<li><a href='date/2009/06.html' title='Июнь 2009'>Июнь 2009</a></li>
	<li><a href='date/2009/05.html' title='Май 2009'>Май 2009</a></li>
	<li><a href='date/2009/04.html' title='Апрель 2009'>Апрель 2009</a></li>
	<li><a href='date/2009/03.html' title='Март 2009'>Март 2009</a></li>
	<li><a href='date/2009/02.html' title='Февраль 2009'>Февраль 2009</a></li>
	<li><a href='date/2009/01.html' title='Январь 2009'>Январь 2009</a></li>
	<li><a href='date/2008/12.html' title='Декабрь 2008'>Декабрь 2008</a></li>
	<li><a href='date/2008/11.html' title='Ноябрь 2008'>Ноябрь 2008</a></li>
	<li><a href='date/2008/10.html' title='Октябрь 2008'>Октябрь 2008</a></li>
	<li><a href='date/2008/09.html' title='Сентябрь 2008'>Сентябрь 2008</a></li>
	<li><a href='date/2008/08.html' title='Август 2008'>Август 2008</a></li>
	<li><a href='date/2008/03.html' title='Март 2008'>Март 2008</a></li>
	<li><a href='date/2008/02.html' title='Февраль 2008'>Февраль 2008</a></li>
	<li><a href='date/2007/12.html' title='Декабрь 2007'>Декабрь 2007</a></li>
	<li><a href='date/2007/11.html' title='Ноябрь 2007'>Ноябрь 2007</a></li>
	<li><a href='date/2007/10.html' title='Октябрь 2007'>Октябрь 2007</a></li>
	<li><a href='date/2007/09.html' title='Сентябрь 2007'>Сентябрь 2007</a></li>
	<li><a href='date/2007/08.html' title='Август 2007'>Август 2007</a></li>
	<li><a href='date/2007/07/index.html' title='Июль 2007'>Июль 2007</a></li>
	<li><a href='date/2007/06.html' title='Июнь 2007'>Июнь 2007</a></li>
	<li><a href='date/2007/05.html' title='Май 2007'>Май 2007</a></li>
				</ul>
			</li>

			
					</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="../feed">Entries (RSS)</a> and <a href="../comments/feed">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 16 queries. 0.081 seconds. -->
	</div>
</div> <!-- page -->
</body>
</html>
	
