<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>about NetApp  &raquo; Blog Archive   &raquo; Что HP думает о NetApp, и как все обстоит на самом деле. Часть 1</title>

<link rel="stylesheet" href="../wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="about NetApp RSS Feed" href="../feed" />
<link rel="pingback" href="../xmlrpc.php.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.6" />

</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="../index.html" title="about NetApp: Системы хранения данных как предмет разговора">about NetApp</a></h1>
		<p>Системы хранения данных как предмет разговора</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="../index.html">
<input type="text" size="20" name="s" id="s" value="Поиск..."  onblur="if(this.value=='') this.value='Поиск...';" onfocus="if(this.value=='Поиск...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="navbar">
<ul id="nav">
	<li><a href="../index.html">Home</a></li>
	<li class="page_item page-item-153"><a href="../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content">

			
		<div class="navigation">
			<div class="alignleft">&laquo; <a href="1277/trackback.html">Вышел Flash Accel 1.2</a></div>
			<div class="alignright"><a href="1273/trackback.html">Что HP думает о NetApp, и как все обстоит на самом деле. Часть 2</a> &raquo;</div>
		</div>

		<div class="post" id="post-1272">
			<h2 class="posttitle"><a href="1272/trackback.html" rel="bookmark" title="Permanent Link to Что HP думает о NetApp, и как все обстоит на самом деле. Часть 1">Что HP думает о NetApp, и как все обстоит на самом деле. Часть 1</a></h2>
			<div class="postmetadata">5 Август 2013, 8:00 <!-- от  --></div>
			<div class="postentry">
				<p>&#160;</p>
<p>Пару недель назад мне в руки попал текст, подготовленный специалистами компании HP, продававшей систему HP 3Par, или как она сейчас называется, StoreServ 7000 против предложенного уже этому клиенту midrange NetApp. Документ относится к популярному в российском IT жанру “говнилок”, или, выражаясь интеллигентно – FUD (Fear, Uncertainity and Doubt). Как правило <a href="1266/trackback.html">такие документы</a> мне приходится встречать со стороны пресейл-инженеров компании <a href="tag/emc/index.html">EMC</a>, но впервые мне попадается в полном виде текст от HP, этим он особенно интересен. HP, как компания, находится в довольно-таки привелигированном положении на рынке, в особенности на российском. Это большая, крайне авторитетная компания “полного стека”, которая может предложить своим клиентам полный спектр оборудования, от серверов и систем хранения, активное сетевое оборудование, до шкафов и UPS. </p>
<p>Тем печальнее, что за последних 10 лет отдел систем хранения в компании был в явном “загоне”. Обладая в начале 90-х передовой и в чем-то даже революционной системой хранения EVA (Enterprise Virtual Array), компания “почивала на лаврах” и допочивалась до того, что EVA на рынке катастрофически морально устарела. Весь мир стораджей ушел вперед, за новыми модными фичами, а HP как продавала в мидрендже – EVA, в high-end ребрендированный Hitachi USP, а в энтрилевеле – DotHill, так и продавала. ?? допродавалась до катастрофических результатов. Сегодня из компаний в External Storage Top5 только HP <a href="http://www.storagenewsletter.com/images/public/sites/StorageNewsletter.com/articles/0icono12/idc_4q12_f3_540.jpg">теряет объемы продаж</a>, все остальные растут.</p>
<p>Вовремя (надеюсь) спохватившись, HP активно занялась обновлением своего стораджевого портфолио, традиционно “взяв под крыло” несколько небольших компаний с их интересными продуктами, таких как LeftHand и 3Par, и которым явно не хватало веса “продавиться” на рынок. Однако атмосфера долгого застоя в отделе стораджей все еще явно дает о себе знать. Для меня очень показательным стал разбор приведенного ниже документа, как на ладони демонстрирующего текущие проблемы <a href="http://en.wikipedia.org/wiki/HP_StorageWorks">HP StorageWorks</a> как отдела компании: устарелость использованных при подготовке инженеров материалов, крайняя узость эрудиции в области современных технологий, а как результат – низкая компетенция, по крайней мере в анализе продуктов конкурентов (я хочу думать о людях лучше, и верю, что в своих новых системах инженеры HP разбираются куда лучше, чем демонстрируют на системах конкурентов).</p>
<p>Документ сравнительно свежий, написан 11.09.2012 года в программе, зарегистрированной на имя <a href="http://www.linkedin.com/pub/%D0%B2%D0%BB%D0%B0%D0%B4%D0%B8%D0%BC%D0%B8%D1%80-%D0%BA%D0%BE%D1%80%D0%BE%D0%B1%D0%B5%D0%B9%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2/45/569/b49">Владимир Коробейников</a>, это человек, работающий на позиции storage presale в HP с 2006 года (эту информацию можно почерпнуть в свойствах файла), я не утверждаю, что текст писал именно он, но эти данные в файле имеются.</p>
<p>??так, давайте посмотрим, что по поводу NetApp FAS думает HP, и как все обстоит на самом деле, где пресейлы HP ошибаются, от незнания или преднамеренно, где и почему вводят этим документом его читающего потенциального покупателя в заблуждение, а также как намерены бороться за продажи своих систем против NetApp.</p>
<p>Я далее приведу практически весь этот обширный документ, разрывая оригинальный текст своими комментариями, но постараюсь ничего не пропускать, дабы не быть обвиненным в тенденциозном выдирании из контекста, поэтому получтся несколько длинно, и я был вынужден поделить его на несколько частей, но потерпите уж. Это будет интересно, на мой взгляд.</p>
<p>  <span id="more-1272"></span></p>
<p>Документ, попавший ко мне в руки, начинается без всякой вводной части, и первым же пунктом ниже заголовка идет это:</p>
<p><em><font color="#4f81bd">1. Массивы НР Р10000 имеют лидирующие показатели производительности: согласно независимым тестам SPC-1 (имитирующим нагрузку бизнес приложений) максимальная производительность массива Р10000 (без использования SSD-дисков) составляет 450’212 IOPs (при времени отклика 13.7ms и утилизации емкости 80.5%). </font></em></p>
<p><em><font color="#4f81bd">При этом максимальная производительность по тестам SPC-1 для массивов NetApp составляет всего 250’040 IOPs (при времени отклика 3.35ms и утилизации емкости 44%) – более чем 1.8 в раз меньше по сравнению с НР. Тестирование проводилось на шести-контроллерном кластере FAS6240 (в котором было установлено 3ТБ Flash Cache). По поводу данных тестов кластера FAS6240 можно отметить следующее:</font></em></p>
<p>Вы поняли, должно быть, зачем я прошлый пост посвятил бессмысленности использования результатов бенчмарков для рекламирования достижений вендора. Разумный человек спросит, какое отношение имеют достижения болида Формулы-1 вашей “конюшни” на последнем Grand Prix к тому, что вы мне сейчас продаете в салоне? Вы же мне продаете не этот болид, а, допустим, семейный минивэн для поездок на дачу и в супермаркет по субботам, или городской седан для поездки на работу? Да даже если и спорткар, девчонок катать, все равно, где F1, и где мы сейчас? Какое отношение имеют рекорды F1 на треке к этому вот конкретно автомобилю? Но в IT эти незамысловатые трюки все еще пользуются спросом.</p>
<p>Трогательно также смотрится эпитет “всего” по отношению к <em>четверти миллиона IOPS</em> при <em>менее 5 ms latency</em>, но относящиеся к результату конкурента. ;)</p>
<p>Но, впрочим, оставим это глумление тут. Еще раз повторюсь, бенчмарки это рекорды, установленные специальными системами для установления этих рекордов, и, как правило, больше ни для чего. Вы же покупаете не эти рекордные машины, а совсем другие. Но, раз уж HP настаивает – давайте кратко сравним, сколько в его словах правды.</p>
<p><em><font color="#4f81bd">· NetApp утверждает, что их показатели производительности лучше, чем для массива НР, поскольку получены при существенно меньшем времени отклика. Однако если посмотреть данные тестов, то можно обнаружить, что при сопоставимом (чуть меньшем) времени отклика 3.29ms массив HP P10000 показывает также практически такую же, как и кластер FAS6240 производительность 225’080 IOPs. Но при этом очевидно, что низкое время отклика в кластере FAS6240 достигнуто исключительно благодаря применению Flash (SSD) кэш (в массивах P10000 при тестировании SSD не использовались).</font></em></p>
<p>Верно, все верно. Если мы приведем производительность в IOPS в этих двух тестах к одному уровню по latency, мы увидим следующее:</p>
<p><a href="/pics/2edae55f02b3_BD36/NetApp-vs-HP-in-SPC-1.png"><img title="NetApp-vs-HP-in-SPC-1" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="NetApp-vs-HP-in-SPC-1" src="/pics/2edae55f02b3_BD36/NetApp-vs-HP-in-SPC-1_thumb.png" width="244" height="81" /></a></p>
<p>Для наглядности я сопоставил рядом два графика. Если кому-то захочется увидеть фактические цифры, сколько получилось у HP на уровне NetApp, их можно посмотреть в данных Full Disclosure report обоих систем.</p>
<p>Здесь мы видим, что при равном уровне достигнутого показателя по latency (при чуть выше чем 50% загрузки для HP, после чего задержки у них резко растут), сторадж HP достиг сравнимого (чуть меньше, но не суть) результата. ??ли, если временно не принимать в расчет latency, то в 1,8 раза выше по чисто IOPS-ам. </p>
<p>Хочу отдельно немного остановиться на том, почему вокруг низкого latency ломается столько копий в профессиональной среде, и чем он так важен. Например, <a href="http://technet.microsoft.com/en-us/library/cc966412.aspx">Microsoft в best practices для MS SQL Server</a> указывает:     <br /><em>On well-tuned I/O subsystems, ideal values would be:      <br /></em><em>1 ms for Log (ideally 1 ms on arrays with cache)      <br /></em><em>4 ms for Data on OLTP systems (ideally 10 ms or less)</em></p>
<p>Я не буду еще подробнее останавливаться на том, как связаны IOPS и Latency, и насколько низкая величина latency нужна для реальных задач, тех же баз данных, интересующихся отправлю к моим записям в этом блоге: <a href="1204/trackback.html">Что такое IOPS?</a> и <a href="1174/trackback.html">Еще о тестировании Cluster-mode в SPC-1</a>.</p>
<p><font color="#4f81bd"><em>· NetApp не смог показать более высокую производительность (более 250k IOPs), хотя тестируемая конфигурация позволяла наращивать и FlashCache (в 2 раза), и кол-во жестких дисков (в 10 раз). Это означает, что контроллеры массива FAS6240 имеют ограниченную производительность и не позволяют наращивать производительность выше 250k IOPs (для 6 контроллеров).</em></font> </p>
<p>Ну, оставим в стороне довольно легкомысленное и необъясненное никак утверждение HP про то, что “не смог”, “<font color="#4f81bd"><em>хотя тестируемая конфигурация позволяла наращивать</em></font>”, как и дальнейший высосанный из пальца вывод. Не станем гадать на кофейной гуще, NetApp показал столько, сколько хотел, и достигнутым результатом доволен, раз уж этот результат был опубликован. (в <a href="http://forums.theregister.co.uk/forum/1/2012/06/26/netapp_cluster_mode_spc_benchmark/#c_1456381">комментариях к посту на theregister</a>, dikrek, автор recoverymonkey.com указывает, что методика SPC-1 не запрещает ограничивать загрузку loadgenerators, например для достижения намеченного соотношения latency/IOPS, и утверждает, что целью было именно показать достигнутый latency на 250K IOPS, а вовсе не достичь потолка по IOPS невзирая на ухудшение latency). Возможно такая конфигурация и такой результат был показан и потому, что NetApp последовательно стремится тестировать не “зведолеты”-labqueen, не top-of-the-pops, а более или менее реальные, ориентированные на задачи, и фактически продаваемые их клиентам конфигурации. Давайте просто сравним то, что тестировал HP, и что тестировал NetApp.</font></p>
<p>Выполнявший тест SPC-1 сторадж HP имел: 8 контроллеров против 6 у NetApp, в 4,4 раза больше дисков (1920 SAS HDD) и в 3,5 раза выше цену (5.885.148 USD в ценах листпрайса, все данные – в Full Disclosure reports для обоих систем).</p>
<p>Какой поразительно несравнимый с величиной затрат результат!&#160; Заплатить в <strong>три с половиной раза больше денег</strong> и получить всего в 1,8 раза выше производительность, при существенно (примерно втрое) худших показателях latency! Эффективность? “Не, не слышал.” ;) Тут HP еще вспомнит про эффективность, погодите :)</p>
<p>Позволяла ли “тестируемая конфигурация наращивать”? Безусловно. Ведь там тестировался, в отличие от HP, даже не топовый сторадж, FAS6240 это даже не самый мощный контроллер в серии! Максмальная конфигурация для кластерной Data ONTAP – 8 контроллеров (в тесте было – 6), а Flash Cache даже на этом контроллере можно было бы увеличить в 6 раз, до 3TB, и в 12 раз с учетом возможности использовать Flash Pool. Да и дисков можно было поставить в три раза больше. Но – зачем?&#160; <br />“Обгони-ка сперва меньшого брата” (с) А.С.Пушкин ;) Так что я, в общем, понимаю лютый батхёрт HP на эту тему. ;)</p>
<p><em><font color="#4f81bd">· Важно также обратить внимание на утилизацию емкости в тестируемых конфигурациях: в кластере FAS6240 в тестах было использовано только 44% от установленной физической емкости, в массиве Р10000 – более 80%. То что NetApp тестировал свои массивы при менее чем на половину использовании установленных дисковых ресурсов еще раз подтверждает общеизвестный недостаток всех массивов NetApp – существенное падение производительности по мере роста степени утилизации дисковых ресурсов массива (см. ниже).</font></em></p>
<p>На мой взгляд, возможно инженеры HP со мною не согласятся, у них по очень многим вопросам альтернативное мнение, “подтвердить недостаток” может не <em>отсутствие</em>, а только лишь <em>наличие</em> данных, только явно и недвусмысленно проведенный компетентными людьми проверяемый и повторяемый независимо тест. Отсутствие же данных не может ничего “подтверждать”, просто, как выражаются, “<em>по определению</em>”, иначе получается пресловутое <em>“- Видишь суслика? – Нет. – А он – есть!</em>”. Видишь признаки существенного падения производительности? А оно есть! :)</p>
<p>Если же это не так, то было бы неплохо, если бы инженеры HP объяснили, почему, по их мнению, такое же “существенное падение” присуще, например, системам <a href="http://www.storageperformance.org/benchmark_results_files/SPC-1/HDS/A00128_Hitachi-HUS-150/a00128_Hitachi_Unified-Storage-150_SPC-1_full-disclosure-report.pdf">Hitachi</a> или <a href="http://www.storageperformance.org/benchmark_results_files/SPC-1/IBM/A00097_IBM_Storwize-V7000/a00097_IBM_Storwize-V7000_2-node_SPC1_full-disclosure.pdf">IBM</a>, ведь они тоже используют в тестировании пространство на дисках существенно меньше имеющейся дисковой емкости? Вероятно они тоже имеют “общеизвестный недостаток”? :)</p>
<p><em><font color="#4f81bd">Все данные и описания тестов доступны на сайте SPC: </font></em><a href="http://www.storageperformance.org/"><em><font color="#4f81bd">http://www.storageperformance.org</font></em></a><em><font color="#4f81bd">. </font></em></p>
<p><font style="background-color: #ffff00"></font><font style="style">Действительно, давайте</font> посмотрим на сайт SPC и приведенные там описания тестирования. Для NetApp там указана следующая схема распределения пространства дисков под данные бенчмарка:</p>
<p><a href="/pics/2edae55f02b3_BD36/image.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="/pics/2edae55f02b3_BD36/image_thumb.png" width="244" height="112" /></a></p>
<p>Полная физическая емкость всех дисков системы (physical raw capacity) равна 193 386 GB.    <br />Полный размер занятый данными бенчмарка, которые писались и читались: 71 522 GB     <br />Было доступно, но не использовалось (все числа округлены тут до целых GB) : 70 482 GB</p>
<p>Разница между суммой второго и третьего и величиной raw capacity это RAID parity, spares и overhead-ы разных уровней.</p>
<p>Объем тестовых данных от полной физической емкости установленных дисков - <strong>37%</strong></p>
<p>Теперь то же самое посмотрим у HP:</p>
<p><a href="/pics/2edae55f02b3_BD36/image_3.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="/pics/2edae55f02b3_BD36/image_thumb_3.png" width="244" height="110" /></a></p>
<p>Полная физическая емкость всех дисков системы (physical raw capacity): 572 736 GB    <br />Полный размер занятый данными бенчмарка, которые писались и читались: 230 400 GB</p>
<p>Объем тестовых данных от полной физической емкости установленных дисков - <strong>40%</strong></p>
<p>Разница – <strong>3%</strong></p>
<p>Это, кстати, к вопросу про эффективность использования физической емкости установленных дисков. Откуда взялось 80% в подсчете HP? Ну, разумеется, они не учитывали занятое зеркальной копией RAID-10. При этом в самом тексте они утверждают, что считают “<em><font color="#4f81bd">от установленной физической емкости</font></em>”, что неправда, они считают не от “физической емкости”, а только от того, что осталось от нее после построения RAID, а это, для RAID-10 с его 50% RAID overhead, существенное лукавство.</p>
<p>Таким образом давайте подведем черту. Практически все компании, проводившие тесты своих стораджей по SPC-1, не заполняют тестовым массивом всю доступную usable-емкость дисков, фактически я нашел ровно один тест, где можно говорить о <em>почти полной заполненности</em> – это тест <a href="http://www.storageperformance.org/benchmark_results_files/SPC-1/IBM/A00101_IBM_DS3524-Express/a00101_IBM_DS3524-Express_SPC1_full-disclosure.pdf">IBM DS3524, АКА NetApp E2600</a>, там у единственного из просмотренных Unused storage ratio составило 6,68%. У почти всех же остальных оно составляет в районе 40%. Почему? Ответ простой. У ВСЕХ систем хранения падает производительность при высоком заполнении. <strong>У ВСЕХ</strong>. Составителям SPC-1 это известно, поэтому, чтобы получить результаты, приближенные к реальным (в реальной жизни очень мало кто эксплуатирует enterprise-сторадж заполненный “под горло”), они нормируют в условиях величину Unused storage ratio при запуске теста по уровню <strong>не хуже 45%</strong>. ??менно поэтому <strong>ВСЕ</strong> тестирующиеся стораджи оставляют примерно в районе 40% неиспользованного места. ?? в этом нет никакого злоумышления и “<em>подтверждения падения производительности</em>”. Если это <strong>можно</strong> сделать по условиям тестирования, и если это объективно улучшит показатели на тесте, и сделает их более реальными – это нужно сделать (не исключено, что у HP улучшилась бы их катастрофическая latency).</p>
<p>Пруфы: <a href="http://www.storageperformance.org/benchmark_results_files/SPC-1/IBM/A00097_IBM_Storwize-V7000/a00097_IBM_Storwize-V7000_2-node_SPC1_full-disclosure.pdf">IBM Storvise V7000</a> – 38,98%. <a href="http://www.storageperformance.org/benchmark_results_files/SPC-1/IBM/A00135_IBM_XIV-Gen3-11.3/a00135_IBM_XIV_Gen3_v11.3_SPC-1_full-disclosure-report.pdf">IBM XIV Gen3</a> – 42,30%. <a href="http://www.storageperformance.org/benchmark_results_files/SPC-1/HDS/A00110_HDS_VSP/a00110_HDS-VSP_SPC1_full-disclosure.pdf">Hitachi VSP</a> – 39,42%. <a href="http://www.storageperformance.org/benchmark_results_files/SPC-1/HDS/A00128_Hitachi-HUS-150/a00128_Hitachi_Unified-Storage-150_SPC-1_full-disclosure-report.pdf">Hitachi HUS150</a> – 40,03%. <a href="http://www.storageperformance.org/benchmark_results_files/SPC-1/Oracle/A00108_Oracle-Sun-ZFS-7420c/a00108_Oracle-Sun_ZFS-7420c%20_SPC1_full-disclosure-r1.pdf">Oracle Sun ZFS 7420c</a> – 40,70% Unused space ratio при прохождении теста SPC-1.</p>
<p>Кстати, хотите посмотреть на NetApp, заполненный на блочном тесте на 90%? Можно. :) Смотрите там же <a href="http://www.storageperformance.org/benchmark_results_files/SPC-1E/NetApp/AE00004_NetApp_FAS3270A/ae00004_NetApp_FAS3270A_SPC1E_full-disclosure.pdf">результаты SPC-1/E для FAS3270 с Flash Cache</a>. Unused space ratio – <strong>11,87%</strong>, это даже круче, чем у обсуждаемого <a href="http://www.storageperformance.org/benchmark_results_files/SPC-1/HP/A00109_HP_P10000-3PAR-V800/a00109_HP-P10000-3PAR-V800_SPC1_full-disclosure.pdf">HP 3Par</a> (у него – 14,53%).</p>
<p>Позвольте на этом сеанс mythbusting-а считать оконченным :)</p>
<p><font color="#4f81bd"><em>2. NetApp предлагает 2 варианта своих массивов: с одним и с двумя контроллерами. Модели с одним контроллером имеют несколько точек отказа (в одном контроллере ничего не дублируется, кэш-память не зеркалируется) и соответственно не могут рассматриваться как полноценное отказоустойчивое решение. Любые массивы НР среднего и старшего уровней имеют, как минимум, 2 контроллера и не имеют единой точки отказа.</em></font></p>
<p>Бохтымой, из каких пыльных закоулков вытащили это? У вас в HP там что, уже лет пять competitive материалы не обновлялись? 8-) Уже несколько лет как даже cluster-mode широко пошел в продакшн, а у HP все еще “<em><font color="#4f81bd">NetApp предлагает 2 варианта: с одним и двумя контроллерами</font></em>” :) НетАпп уже предлагает варианты с двумя и восемью. А также с четырьмя и шестью, десятью и двенадцатью и вполоть до <em>двадцатьчетырьмя</em>. :)</p>
<p><em><font color="#4f81bd">3. Для обеспечения отказоустойчивости необходимо использовать «кластеризацию» двух контроллеров. Кластер состоит из двух (и только из двух) контроллеров, при этом кластер не имеет общих ресурсов: каждый контроллер владеет своими дисками (и своими томами) и имеет свои метаданные – в итоге: отсутствует какая-либо балансировка нагрузки между контроллерами кластера. Кроме того, доступ к определенному тому или физическому диску возможен только через порты одного контроллера (т.е. два контроллера не могут работать в режиме active/active), что снижает производительность. При отказе одного контроллера для переподключения томов к другому контроллеру требуется существенно более длительный интервал времени (по сравнению с массивами, в которых доступ к любому тому возможен через порты всех контроллеров), что может привести к сбою приложений. В массивах НР Р10000 (V400 и V800), P9500, F200 и F400, Р6000, Р4000 все контроллеры работают в режиме active/active, разделяют доступ ко всем дискам и томам массива. В массивах НР Р10000 (V400 и V800), F200 и F400, Р4000 поддерживается автоматическая балансировка нагрузки между контроллерами массива. Что обеспечивает и более высокую надежность, и более высокую производительность массивов НР.</font></em></p>
<p>?? снова не так. Кластер имеет от двух до 8 для SAN и до 24 контроллеров для NAS-систем, и использует single namespace, что позволяет видеть пользовательскому приложению кластер как единую сущность. NetApp, ну пригласите вы уже парней из HP на семинар по своим стораджам, что вы смотрите на то как они публично позорятся?</p>
<p><font color="#4f81bd"><em>4. Кэш на запись в системах NetApp удивительно маленький (для кэширования операций записи используется только NVRAM, а собственно кэш используется для кэширования операций чтения и для размещений там ОС ONTAP), на 1 контроллер: 256КБ (FAS2040) и 512КБ (FAS3140), 1024КБ (FAS3240). Однако реально на одном контроллере доступно будет для кэширования операций записи только половина NVRAM – из-за применяемой NetApp технологии кэширования. А в кластере (система с двумя контроллерами) из-за зеркалирования NVRAM между контроллерами доступный размер NVRAM сокращается еще в 2 раза. ??того, доступный NVRAM (кэширование операций записи) составит: 64КБ (FAS2040), 128КБ (FAS3140), 256КБ (FAS3240). В EVA4400, Р6300 и в Р2000 кэш для записи составляет 1МБ, в Р6500 – 2МБ! ?? это при том, что EVA4400 и Р2000 поддерживают максимум 96 дисков (Р6300 – 240 дисков, Р6500 – 450 дисков), а FAS3240 – 600 дисков!!!</em></font></p>
<p>Заодно и объясните им в чем разница между NVRAM и кэшем, да и как работает запись в WAFL. А то недостаток информации заменяется богатой фантазией, и сами видите что в итоге получается.</p>
<p>Три восклицательных знака это видимо свидетельство того, что человек не сдержался. :) Хороший пример FUD-а. Сперва показываем, как наш сторадж <em>почти</em> побивает NetApp в хайэнд-тестах, а спустя несколько абзацев говорим, о том, что “кэш у него маленький”. Внимательный человек обязательно спросит тут: “Ну как же так, вот у вас такой огромный кэш, а у них такой маленький, и <em>WAFL с оверхедом</em>, и блочный доступ <em>эмулируется поверх NAS,</em> почему же вы со своим огромным кэшем их и обогнали-то всего на ничего? Что-то тут не так, это же что получается? У них стораджи настолько эффективнее работают, чем у вас?” ;)</p>
<p>Ответ тут очевиден. Представление HP о том, как работает запись в NetApp не соответствует действительности, соответственно и весь вымысел, вокруг этого наверченный – пустое. Для того, чтобы понять, в чем тут дело, и как с таким <em>маленьким кэшем на запись</em> NetApp удается достигать <a href="820/trackback.html">таких высоких показателей IOPS на шпиндель</a>, нужно начать с того, что разобраться и понять, как работает <a href="http://habrahabr.ru/company/netapp/blog/99832/">WAFL</a> и <a href="http://habrahabr.ru/company/netapp/blog/113427/">RAID-DP</a> на запись. ??бо, как известно многим, дело не в размере, а в умении им пользоваться ;)</p>
<p><em><font color="#4f81bd">5. Общеизвестны проблемы NetApp, связанные с низкой скоростью чтения, высокой степенью фрагментации файловой системы и с существенным падением производительности с течением времени (по мере увеличения процента утилизации дисковых ресурсов, т.е., по мере записи данных – такого оригинального эффекта нет ни у кого из конкурентов NetApp). Все эти проблемы связаны с оригинальной файловой системой WAFL (Write Anywhere File Layout), «оптимизированной» для выполнения операций записи (запись очередного блока данных выполняется на ближайший свободный к головке диска блок), что ведет к очень сильной фрагментации и снижению скорости чтения. Фрагментация приводит к тому, что по мере заполнения дискового пространства существенно падает скорость, как чтения, так и записи. </font></em></p>
<p><em><font color="#4f81bd"></font></em></p>
<p><em><font color="#4f81bd">Чтобы убедиться в том, что производительность массива NetApp падает по мере записи данных в массив – достаточно провести простой тест с использованием IOmeter: писать в массив 1МБ блоки и каждый час измерять скорость чтения. Через 12 часов производительность массива снизится примерно в 2 раза. </font></em></p>
<p><font color="#000000">Очередные “общеизвестные сведения” <a href="820/trackback.html">не подтверждаются практикой</a>. Также опровергается это результатами sustainability test в тестировании SPC-1 (страница 28 в <a href="http://www.storageperformance.org/benchmark_results_files/SPC-1/NetApp/A00115_NetApp_FAS6240-cluster/a00115_NetApp_FAS6240-cluster_SPC-1_full-disclosure.pdf">Full Disclosure report</a>). После 60 минут ramp-up (“прогрева” кэша и стабилизации результатов), тестирование на протяжении 10 часов (600 минут) не показало сколь-нибудь значительного изменения результатов, показанных в тесте как для IOPS, так и для latency. Пруфы:</font></p>
<p><a href="/pics/2edae55f02b3_BD36/image_4.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="/pics/2edae55f02b3_BD36/image_thumb_4.png" width="244" height="191" /></a><a href="/pics/2edae55f02b3_BD36/image_5.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="/pics/2edae55f02b3_BD36/image_thumb_5.png" width="244" height="191" /></a></p>
<p>Кому верить, аудированному тесту, результаты которого в подробностях доступны на официальном вебсайте <a href="http://www.storageperformance.org/about">Storage Performance Counsil</a>, или “тестированию” неизвестной конфигурации, незнамо как настроенной, анонимными специалистов в HP, в адрес которых ниже будет еще много слов об уровне их “знаний” о NetApp – решать вам.</p>
<p><em><font color="#4f81bd">NetApp предлагает самые разные решения данной проблемы: добавить диски, перейти на более старшие модели, использовать дорогую FlashCache или периодически выполнять дефрагментацию (reallocation scan) с помощью специальной утилиты, разработанной NetApp. К сожалению, эта утилита дефрагментации дает очень слабый эффект и, что самое неприятное, использовать эту утилиту придется регулярно и достаточно часто (NetApp рекомендует использовать утилиту дефрагментации ежедневно). </font></em></p>
<p>Хотелось бы увидеть ссылку на то, что <em>NetApp предлагает</em>. Так как я этой ссылки не вижу, предлагаю считать это собственным творчеством на эту тему слабоинформированных, как я показал выше, специалистов HP. Что такое у HP “утилита дефрагментации” непонятно, но по контексту догадываюсь, что имеется ввиду имеющаяся в Data ONTAP опция реаллокирования блоков по дисковому тому и aggregate. Строго говоря reallocate не является “дефрагментацией”, как это слово понимает массовый пользователь, привыкший к “бегающим квадратикам” со времен DOS, так что тут вновь неявное введение в заблуждение читателя.</p>
<p>О “<a href="881/trackback.html">фрагментации</a>” и ее влиянии на производительность я писал в этом блоге многократно, приводил как <a href="455/trackback.html">теоретические</a> мнения, так и <a href="221/trackback.html">практические</a> <a href="225/trackback.html">выводы</a>, как для <a href="820/trackback.html">рандомного</a>, так и для <a href="466/trackback.html">секвентального</a> доступа, наконец, собственными руками <a href="1225/trackback.html">провел тест</a>, показавший на недостижимо высоком в реальной жизни уровне фрагментации тестового файла (около 250 ТЫСЯЧ фрагментов на 16 TB, чтобы уж мало не показалось;), специально в течении получаса замешивавшегося специальной утилитой, совершенно малозначимый эффект (17%).</p>
<p><em><font color="#4f81bd">??нтересно отметить, что фрагментация приводит также к существенному падению </font></em><em><font color="#4f81bd">производительности и FlashCache. </font></em></p>
<p>??нтересно, но нет подтверждений. Вновь “собственные источники компетентных инженеров HP”.</p>
<p><em><font color="#4f81bd">?? наконец, утилита дефрагментации не совместима с технологией дедупликации (см. ниже).</font></em></p>
<p>Правильный выбор слова – половина успеха в FUD. :) Под словами “несовместима” у составителя документа понимается то, что reallocate на дедуплицированных томах, просто по их природной фрагментированности “бай дизайн”, не имеет смысла и не используется. Разные логически последовательные блоки одного дедуплицированного файла или LUN просто конструктивно могут не лежать физически последовательно, принадлежа одновременно разным объектам на томе. То что если ZIP-ом пожать RAR и не получить выигрыш в месте на диске ведь не называется “ZIP не совместим с RAR”? А у HP вот – называется :) </p>
<p><em><font color="#4f81bd">Также нужно обратить внимание на то, что применение FlashCache (SSD диски) в первую очередь нацелено на борьбу с фрагментацией и низкой скоростью чтения.</font></em></p>
<p>Ответ отрицательный. :) ?? Flash Cache, и SSD в структуре Flash Pool нацелены НЕ на гипотетическую “<font color="#4f81bd"><em>борьбу с фрагментацией</em></font>” и не менее гипотетической “<em><font color="#4f81bd">низкой скоростью чтения</font></em>”, которая не подтверждается результатами объективных <a href="1173/trackback.html">публичных тестов</a>, а для уменьшения latency, снижения числа необходимых для задачи физических “дисковых шпинделей”, и достижения заданной производительности на random, и, в конечном итоге, для <a href="http://media.netapp.com/documents/tr-3799.pdf">улучшения показателей $/IOPS для системы</a>. </p>
<p><a href="/pics/2edae55f02b3_BD36/image_6.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="/pics/2edae55f02b3_BD36/image_thumb_6.png" width="644" height="407" /></a></p>
<p>На результаты можно посмотреть по уже приведенным ссылкам на сайтах с опубликованными результатами бенчмарков <a href="http://www.spec.org/benchmarks.html#nfs">SPEC SFS2008</a> и <a href="http://www.storageperformance.org/results/benchmark_results_spc1">SPC-1/E</a>. Остальное – фантазии HP. Доверять ли их уровню знаний в вопросе – судить вам.</p>
<p><em><font color="#4f81bd">6. Массивы NetApp не поддерживают современную технологию автоматического перераспределения блоков данных между различными уровнями хранения (sub-LUN Tiering). </font></em></p>
<p>Это снова не так. NetApp использует куда более эффективную на практике технологию <a href="926/trackback.html">VST – Virtual Storage Tiering</a>, которая делает то же самое, что и обычный Tiering: <em><font color="#4f81bd">“автоматически распределяет блоки данных между различными уровнями хранения”</font></em> просто в другой форме. Отдельно следует отметить, что VST как таковой у NetApp – бесплатен (денег стоят лишь платы Flash Cache или SSD в Flash Pool), а численно оценить эффективность работы Flash Cache на ваших задачах можно даже до покупки самого модуля кэширования, с помощью имеющегося в Data ONTAP средства <a href="1136/trackback.html">Predictive Cache Statistics</a>. </p>
<p>Наконец, следует отметить, что NetApp – единственный из производителей систем хранения с возможностью tiering-а, который опубликовал результаты измерения производительности со включенным tiering-ом. Что неудивительно, так как полученные результаты – отличные как для файлового (<a href="http://www.spec.org/sfs2008/results/res2009q1/sfs2008-20081215-00111.html">раз</a>, <a href="http://www.spec.org/sfs2008/results/res2009q1/sfs2008-20081215-00112.html">два</a>, <a href="http://www.spec.org/sfs2008/results/res2009q3/sfs2008-20090727-00126.html">три</a>), так и для блочного (<a href="http://www.storageperformance.org/benchmark_results_files/SPC-1E/NetApp/AE00004_NetApp_FAS3270A/ae00004_NetApp_FAS3270A_SPC1E_executive-summary.pdf">четыре</a>) доступа. У меня есть нехорошее подозрение, относительно того, отчего остальные производители со своим tiering-ом как в рот воды набрали. ;)</p>
<p><em><font color="#4f81bd">Единственное, что могут обеспечить массивы NetApp – это использование FlashCache (SSD диски) в качестве промежуточного дополнительного буфера. </font></em></p>
<p><font color="#4f81bd"><font color="#444444">Подскажу: в технике <font color="#4f81bd"><em>промежуточный дополнительный буфер</em></font> называется “кэш” (cache). ;) Это самый эффективный способ повысить быстродействие доступа к данным, будь это данные на системе хранения или же код программы в памяти, читаемого процессором. Метод кэширования данных для ускорения доступа к ним широко применяется в компьютерной индустрии с самого ее зарождения.</font></font></p>
<p>Впрочем, даже в таком простом утверждении HP сумело слажать. Дело в том, что у NetApp SSD диски могут использоваться как кэш, верно, но могут также и как хранилище, традиционным образом. Оба варианта доступны и поддерживаются, когда пользователю системы нужно именно SSD-как-диск, однако использование их как кэша обычно эффективнее.</p>
<p><em><font color="#4f81bd">7. Что касается поддержки Flash Cache – недавно появилась очень интересная информация: младшие модели массивов (FAS 3210, 3140, 2240) перестали поддерживать Flash Cache с выходом новой версии микрокода (или операционки, как угодно) ONTAP 8.1 (c предыдущими версиями все работает). NetApp объявил, что и в последующих версиях микрокода Flash Cache не будет поддерживаться на этих моделях, хотя его можно туда установить. Т.е., счастливые обладатели FAS 3210, 3140, 2240 должны либо навсегда остаться со старой версией ONTAP, либо отказаться от Flash Cache. ?? ничего, кстати, не гарантирует, что такая же история не постигнет и более счастливых обладателей других моделей FAS.</font></em></p>
<p>Она появилась не “недавно”, а более года назад, и примерно тогда же была урегулирована, выпуском специального “апдейта” Data ONTAP 8.1.1. FAS3140 не продается (End-of-Availability) уже около полутора лет и актуальной системой может считаться только у HP ;). Контроллер FAS3210 официально уходит из продажи в ноябре этого года (но, конечно, по-прежнему будет поддерживаться) и его продажи, как я знаю, практически отсутствуют, по ряду внутренних причин (с выходом 3220 он перестал быть интересен). На FAS2240 вообще никогда и не было Flash Cache (его там банально некуда поставить, эта модель не имеет слота расширения PCIe), там используется Flash Pool, и он, разумеется, доступен. Он и был, и есть. Связано обсуждаемое ограничение для некоторых младших моделей с тем, что эффективное использование Flash Cache требует значительных объемов памяти, которых на самых младших моделях недостаточно для работы с Flash Cache (они используют аналогичное решение с использованием SSD – Flash Pool). Вся новая линейка, актуальные FAS3200, разработана уже с учетом этих повысившихся требований, и данная проблема им не присуща, так что счастливые обладатели NetApp останутся счастливыми, что, впрочем, не скажешь о <em>не настолько счастливых</em> покупателях EVA. ;)</p>
<p><em><font color="#4f81bd">8. Низкая производительность массивов NetApp на операциях чтения приводит, в частности, к низкой скорости резервного копирования. Чтобы как-то решить проблему низкой скорости резервного копирования NetApp предлагает заказчикам использовать дополнительную весьма дорогую лицензию NDMP.</font></em></p>
<p>Чтобы как-то решить проблему недостатка знаний, их можно заменить фантазией и выдумками. :) Я не знаю где в HP взяли у NetApp мало того, что “<em><font color="#4f81bd">дополнительную</font></em>”, но еще и “<em><font color="#4f81bd">весьма дорогую</font></em>” лицензию NDMP, даже неловко возражать, что NDMP это протокол (<a href="http://en.wikipedia.org/wiki/NDMP">Network Data Management Protocol</a>), который присутствует во всех стораджах NetApp бесплатно. :)</p>
<p><font color="#4f81bd"><em>9. Еще одна общеизвестная проблема производительности, также связанная с оригинальной файловой системой WAFL – при удалении больших файлов производительность дискового массива весьма заметно падает (на 20-30%).</em></font> </p>
<p>Долго думал, как комментировать и реагировать ли вообще на вот такие вот “сведения”, приведенные без малейшей попытки их подтверждения. Я вот тут стараюсь, как вы заметили, почти любое свое опровержение подтверждаю пруфами и ссылками на материалы и официальные PDF-ы на сайте… Опровергать слухи дело вообще малопродуктивное, придумывать их “там” получается быстрее, чем я их тут буду опровергать. Мой читатель, что посоветуете?&#160; Вы-то должны знать, проблема-то, смотрите, “<em><font color="#4f81bd">общеизвестная</font></em>” ;). Могу лишь сказать, что я, понимая принципы работы WAFL, не вижу ни единой физической причины для массива NetApp так себя вести. Откровенно говоря и на практике с таким никогда не сталкивался. Видимо, это вымысел HP в чистом виде.</p>
<p>Но вообще, если серьезно, это FUD в классической его форме. Читает такой текст клиент, и думает: “Мамадарахая! Ты глянь! Проблема-то <em>общеизвестная</em>, написано! Одни мы, как лохи нестриженные сидим в тайге, ничо не знаем! ?? нам такое продать хотели! Спасибо добрым людям, открыли глаза.” Готово дела, Fear, Uncertainity and Doubt посеяны. :)</p>
<p><font color="#4f81bd"><em>10. Wide Striping. Максимальный размер дисковой группы (RAID-группы) в массивах FAS – 30 дисков, при этом NetApp рекомендует использовать дисковые группы меньшего размера (16-18 дисков). ?? это существенно ограничивает максимальную производительность, которую можно получить на уровне одного логического тома (LUN) – в массивах NetApp отсутствует Wide Striping. </em></font></p>
<p>На самом деле не 30, а 28 для дисков SAS или FC, и 20 для SATA (легко доступный <a href="http://www.netapp.com/us/products/storage-systems/fas6200/fas6200-tech-specs.aspx">пруф на офсайте</a>), ну, ошиблись, не поглядели на официальный сайт при написании текста, бывает. :)</p>
<p>Но тут все у HP куда хуже в другом. Господа пресейлы кажется вообще не имеют представления о том, как организовано хранение данных на дисках NetApp, и это, на мой взгляд, катастрофический фэйл. Ну как можно вообще начинать competitive, не зная того, что размер RAID-группы ВООБЩЕ никак не связан с тем, на скольки дисках лежат данные одного тома или LUN!? Парни, вы там вообще чего? FlexVol и Aggregates появились в 2004 году, вместе с Data ONTAP 7.0, а до вас это все еще не довели, что максимальный размер тома, размазанного поверх десятков RAID-групп, составляющих в Data ONTAP его aggregate, может достигать 100TB “одним писом”? ?? таки да, вы будете смеяться, но aggregate это вот и есть вайд страйпинг, вайдее не бывает!</p>
<p><em><font color="#4f81bd">В массивах НР Р10000 (V400 и V800), F200 и F400, Р6000, Р4000 размер дисковой группы не имеет ограничений по максимальному кол-ву дисков и это позволяет автоматически равномерно распределять нагрузку ввода/вывода между большим количеством дисков (Wide Striping) и за счет этого добиваться очень высокой производительности. Применение технологии Wide Striping идеально подходит для смешанной нагрузки (транзакционной и потоковой) и не требует дополнительной сложной настройки производительности.</font></em></p>
<p>Не специалист в HP, поэтому не могу прокомментировать. Догадываюсь, что под “дисковой группой” имеется ввиду НЕ RAID-группа (с трудом могу себе представить “неограниченную группу” в RAID-5), но что?</p>
<p>??рония ситуации состоит еще и в том, что, раз уж мы начали наше обсуждение с тестов SPC-1, в этом тестировании wide striping у HP как раз и не использовался, равно как не использовались и возможности load balancing между контроллерами, и даже thin provisioning, сама главная фича новых стораджей HP. Почему? Что-то с ними не так, раз вы не решились их показать на бенчмарке?</p>
<p><font color="#4f81bd"><em>11. NetApp рекомендует использовать RAID-DP – что опять же приводит к снижению производительности записи (из-за двойной записи контрольных сумм). Кроме того, расчет контрольных сумм для RAID NetApp производит на программном уровне (программные модули в среде ONTAP), в НР Р10000 (V400 и V800), F200 и F400, Р6000 для этого используются специализированные микросхемы (ASIC) – что также обеспечивает дополнительный выигрыш в производительности для массивов НР.</em></font> </p>
<p>О том, как на самом деле работает RAID-DP, почему он НЕ приводит к <em><font color="#4f81bd">“снижению производительности записи”</font></em>, о том, как происходит <em><font color="#4f81bd">“расчет контрольных сумм”</font></em> и почему <em><font color="#4f81bd">дополнительный выигрыш</font></em> не так велик, как представляется HP, хочу порекомендовать пресейлам HP хорошую статью уровня “для чайников”: <a href="http://habrahabr.ru/company/netapp/blog/113427/">RAID-4 / RAID-DP — превращаем недостатки в достоинства</a>, опубликованный пару лет назад на Хабре в блоге компании NetApp.</p>
<p><font color="#4f81bd"><em>12. Массивы NetApp не поддерживают широко применяемый RAID уровень 5.</em></font></p>
<p>Да, потому что <a href="345/trackback.html">мастдай</a>. :) Надежность его на современных больших дисках <a href="223/trackback.html">не позволяет</a> всерьез расчитывать на его использование сегодня для безотказного хранения данных.</p>
<p>Позиция NetApp в данном случае крайне проста. Несколько видов RAID существуют и используются в других системах хранения оттого, что они имеют свои достоинства, но одновременно с ними и недостатки. RAID-10 быстр и надежен, но заставляет отдать половину дисков под RAID protection, что делает его использование в сторадже крайне неэффективным с точки зрения сотношения raw/usable. RAID-5 быстр на чтение, и экономен, забирает всего один диск на группу, но <a href="http://habrahabr.ru/post/78311/">чем дальше, тем ненадежнее</a>, и страдает от write penalty, ухудшая параметры быстродействия системы при большом количестве раномной записи на том. RAID-6 очень надежен, но еще менее быстр, чем RAID-5. ??менно тот факт, что среди трех типов этих RAID нет абсолютного победителя без недостатков и заставляет мириться с неудобством использования разных типов RAID в IT-системе. Для одних данных нужнее скорость работы с ними, для других лучше выбрать надежность, а скоростью, уж так и быть, пожертвуем.</p>
<p>Однако используемый у NetApp тип RAID с двойной четностью – RAID-DP имеет преимущества всех трех перечисленных, но <a href="http://habrahabr.ru/company/netapp/blog/113427/">не имеет их недостатков</a>. Он быстр как RAID-10 (см. результаты тестов), и одновременно <a href="975/trackback.html">надежен как RAID-6</a>, расходуя на защиту данных всего два диска на длинную группу. Поэтому в NetApp фактически нет необходимости выбирать для использования объективно худшие варианты, если есть объективно лучший. Удивлены? Это оттого, что вы не читаете этот блог. :) Судите сами, ведь ВСЕ тесты, и SPC-1, с которого мы начали, проводятся NetApp с использованием на его дисках RAID-DP. ?? при этом он там достаточно быстр, чтобы побивать куда более дорогие системы с большим числом дисков в RAID-10. Очевидно, что в реальности RAID-DP не “<em><font color="#4f81bd">приводит к снижению производительности записи (из-за двойной записи контрольных сумм).</font></em>”, как ошибочно утверждает безмянный пресейл HP, а, по-видимому, даже наоборот.</p>
<p>Так что вновь я должен с огорчением признать, что пресейлы HP в данном случае, к сожалению, не имеют понятия о том, о чем они пишут текст, не разобравшись в элементарных принципах работы системы конкурента.</p>
<p><em><font color="#4f81bd">13. У NetApp крайне не эффективное и не удобное ПО управления: при конфигурировании кластера каждый из двух контроллеров нужно настраивать отдельно! Если кластеров несколько – это существенно усложняет настройку. Кроме того, у NetApp нет единого интерфейса управления: FilerView позволяет управлять только одним массивом, если требуется управление несколькими массивами нужно использовать System Manager, который работает только под Windows.</font></em></p>
<p>“Удобство” и “эффективность” в применении к ПО управления. это весьма субъективные понятия, позвольте вновь оставлю такие <em>технические</em> и <em>подтвержденные ссылками на первоисточники</em> высказывания без комментариев. Остальное же в процитированном абзаце уже устаревшие сведения. Сейчас уже есть и управление кластером в целом, и единый интерфейс управления имеется, и FilerView уже год как исчез из Data ONTAP. A <a href="http://www.netapp.com/us/products/management-software/system-manager.aspx">System Manager</a>, его сменивший, <a href="https://communities.netapp.com/community/netapp-blogs/clouds_oncommand/blog/2011/09/27/oncommand-system-manager-20-has-arrived">уже скоро два года</a>, начиная с версии 2.0, как есть не только под Windows, но также и под Linux/Unix (и даже под Mac работает), текущая версия его, кстати, уже 3.0. Парни, обновляйте свои “бородатые” competitive-даташиты. :)</p>
<hr />
<p>На этом я прерву на сегодня разбор, вторая половина документа – <a href="1273/trackback.html">в следующем посте</a>. Продолжение следует.</p>
							</div>
	
			<div class="postmetadata">
				<div class="postmetadata">
					Метки: <a href="tag/3par.html" rel="tag">3Par</a>, <a href="tag/fud/index.html" rel="tag">fud</a>, <a href="tag/hp.html" rel="tag">hp</a>, <a href="tag/netapp/index.html" rel="tag">netapp</a>, <a href="tag/storeserv.html" rel="tag">storeserv</a><br />					Раздел: <a href="category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;" rel="category tag">justread</a>,  <a href="category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>					&nbsp;|&nbsp;&nbsp;<a href="1272/trackback.html#respond">Комментарий</a> (<a href='1272/feed'>RSS</a>)					&nbsp;|&nbsp;&nbsp;<a href="1272/trackback.html" rel="trackback">Обратная ссылка</a>									 </div>
			</div>
		</div>
	
<!-- You can start editing here. -->

<div id="comments">
	<h3>Комментарии (92)</h3>

	<ol class="commentlist">

	
		<li class="comment even" id="comment-8837">
		<div id="div-comment-8837">
		<div class="comment-author">
			<cite>Евгений:<cite></div>
			<p>Я так понимаю у HP это нормальная практика убеждения клиента - несение бреда с уверенным видом. Был на их презентации по серверам - чуть не выгнали. Устав слушать явную неправду стал на каждый выдуманный аргумент громко говорить &#8220;ложь&#8221; и &#8220;не правда&#8221;. Чуть из зала не выгнали. Зато народ поддержал.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8837" title="">5 Август 2013, 12:52</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8840">
		<div id="div-comment-8840">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Евгений:</p>
<p>Толерантнее надо быть. Видите как я , почти даже удержался в рамках вежливости в тексте, хотя порой было сложно, и неделю текст вылеживался и смягчался, скажу честно, самые острые пассажи я из него вымарал. ;)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8840" title="">5 Август 2013, 13:40</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8844">
		<div id="div-comment-8844">
		<div class="comment-author">
			<cite>Dmitry:<cite></div>
			<p>Спасибо! Подняли настроение в понедельник!</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8844" title="">5 Август 2013, 19:03</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8845">
		<div id="div-comment-8845">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Dmitry:</p>
<p>Всегда пожалуйста, я еще в четверг подниму, второй частью марлезонского балета, заходите :)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8845" title="">5 Август 2013, 19:05</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8848">
		<div id="div-comment-8848">
		<div class="comment-author">
			<cite><a href='http://ua9uqb.livejournal.com/' rel='external nofollow'>Сергей</a>:<cite></div>
			<p>Спасибо!<br />
Читал с наслаждением, вспоминал свою эпопею с выбором, и попытками - оболгать и навязать.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8848" title="">5 Август 2013, 20:36</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8849">
		<div id="div-comment-8849">
		<div class="comment-author">
			<cite>k3lmiir:<cite></div>
			<p>HP очень переживает, что у них йух короткий, потому и старается внушить кастомерам, что у остальных еще короче.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8849" title="">5 Август 2013, 21:56</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8850">
		<div id="div-comment-8850">
		<div class="comment-author">
			<cite><a href='http://vmind.ru' rel='external nofollow'>Андрей Вахитов</a>:<cite></div>
			<p>Поржал&#8230;<br />
По пункту №10 могу прокоментировать насчет HP EVA. Дисковой группой называется набор дисков. Крайне нежелательно смешивать диски разного размера, смешать диски разных типов нам просто не дадут. Поверх такой дисковой группы (действительно, ограниченной только количеством дисков) мы нарезаем луны. Каждый лун размазан по всем дискам одновременно.<br />
??з плюсов - используются все диски, в том числе и хотспары. Можем держать различные типы нагрузки, если диски вытянут.<br />
??з минусов:<br />
- убогая система кэша. Приличный объем кэша съедается под ОС. Про флешкеш Ева пока не слышала;<br />
- если какому-то луну приспичит выжрать всю полезную нагрузку случайной записью - он это сделает (разве что упрется в размер очереди к луну - <a href="http://vmind.ru/2013/03/12/myth-unlimited-vm-vmfs-datastore-vaai/" rel="nofollow">http://vmind.ru/2013/03/12/myth-unlimited-vm-vmfs-datastore-vaai/</a>);<br />
- хотите независимый набор дисков? Ок, но дисковая группа размером от 8 дисков. ?? там будут свои отдельные хотспары, равные емкости двух дисков (в режиме single, четырех в режиме double).</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8850" title="">5 Август 2013, 21:58</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8851">
		<div id="div-comment-8851">
		<div class="comment-author">
			<cite><a href='http://mazday.wordpress.com/' rel='external nofollow'>Pavel</a>:<cite></div>
			<p>Для меня, как постоянного читателя нет ничего нового. Про все эти FUD уже много раз тут было написано.<br />
Очень хоорошо что все собрано в большой статье со ссылками на документацию. С еще большим удовольствием буду отправлять сюда пытливые умы.<br />
Жаль только, что выбор обычно делают не те кто читают такие статьи и переходят по ссылкам для проверки фактов.<br />
Обычно выбор делает человек который пообщался с пресейлом. В итоге кто наглее - тот лезет вперед. Как говорится чем более невероятная ложь - тем легче в нее поверить.</p>
<p>В общем жду второй части.</p>
<p>PS<br />
По поводу неограниченного размера дисковой группы у HP.<br />
Достоверных ссылок привести не могу, но есть статья на хабре <a href="http://habrahabr.ru/company/hp/blog/148353/" rel="nofollow">http://habrahabr.ru/company/hp/blog/148353/</a><br />
из которой я почерпнул некторые знания как этои vRaid работают внутри EVA.</p>
<p>&#8220;Для наглядности диски из разных полок поставлены в ряд. Схематически показан пример записи двух блоков данных по 8 МБ в RAID5 (4 блока данных и 1 блок четности) на примере EVA 4400.&#8221;<br />
и иллюстрация:<br />
<a href="http://habrastorage.org/storage2/714/e26/bb6/714e26bb6061d3e372eac6ebfe4ab7f7.jpg" rel="nofollow">http://habrastorage.org/storage2/714/e26/bb6/714e26bb6061d3e372eac6ebfe4ab7f7.jpg</a></p>
<p>Внимание вопрос! Сколько дисков одновременно используется для записи блока размером 8 Мб?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8851" title="">5 Август 2013, 22:48</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8852">
		<div id="div-comment-8852">
		<div class="comment-author">
			<cite>Dima:<cite></div>
			<p>Роман, очень занятное чтиво :) спасибо! Вопрос а с размерами NVRAM ошибки нету?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8852" title="">5 Август 2013, 22:52</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8855">
		<div id="div-comment-8855">
		<div class="comment-author">
			<cite><a href='http://vmind.ru' rel='external nofollow'>Андрей Вахитов</a>:<cite></div>
			<p>2Павел: для записи блока размером 8 мегабайт используется 5 дисков. 4 диска с данными, один - четность. ??спользуемый размер блока на диске - 2Мб.<br />
Основываюсь по памяти после прохождения курса по Еве. Если вопрос принципиален, могу поискать первоисточники.<br />
В моем комментарии имелось в виду, что один LUN будет размазан по всем дискам. К примеру, у вас EVA 8400 и 200 дисков. VRAID0 размером 400 мб уже будет размазан по всем дискам.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8855" title="">6 Август 2013, 0:38</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8863">
		<div id="div-comment-8863">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Dima:<br />
Там ошибка прежде всего с непониманием принципов работы NVRAM.<br />
А так - да, формально пространство NVRAM поделено на два попеременно заполняющихся операциями bucket-а, пока один flush-ится, второй наполняется. Я с ходу не готов ответить, действительно ли зеркалируется NVRAM между контроллерами, строго говоря для share-nothing систем это не нужно.</p>
<p>Кстати интересно, что из официальных техспеков сейчас вообще убрали емкость NVRAM, к сожалению, заблуждение, что &#8220;NVRAM это кэш&#8221; слишком распространено, решили с этим бороться.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8863" title="">6 Август 2013, 15:07</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8864">
		<div id="div-comment-8864">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>Про неограниченный размер дисковой группы улыбнуло. Классический прием подмены понятий.<br />
С одной стороны да - можно в DG запихать и все 240 шпинделей (или сколько их там по максимуму у P6500 например..). А вот дальше есть одно маленькое но.. Внутри этой группы микрокод контроллеров автоматом делит эти диски на РЕАЛЬНЫЕ дисковые группы, размер которых то ли 8, то ли 16 дисков. Размазывание блоков идет за счет vRaid&#8217;ов, которые потом выдаются как луны :)<br />
Найди два отличия от физ. и логической структуры распределения данных у нетапп?</p>
<p>Про active|active тоже посмеялся немало :))). В ЛЮБОМ массиве, хоть в самом распресамом хай-енде до каждого диска есть 2 или 4 HW-Path, соот-но какие-то из них обслуживаются контроллером-&#8221;владельцем&#8221; (да-да, понятие контроллера-оунера есть у всех). ?? значит есть preffered hw-pathы, а есть резервные пути.. Соот-но если в P10000 запросы к диску будут постоянно идти НЕ через контроллер-оунер (а в случае кривого распределения трафика между host-портами это реально), то рост латенси будет ощутимый (добавится порядка 2-4 мс на каждую операцию)..</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8864" title="">6 Август 2013, 15:21</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8865">
		<div id="div-comment-8865">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>Так что active-active - это вообще говнилка в квадрате со стороны любого вендора..</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8865" title="">6 Август 2013, 15:27</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8869">
		<div id="div-comment-8869">
		<div class="comment-author">
			<cite>Антон:<cite></div>
			<p>А можно почитать Ваш такой документ, где Вы сравниваете к примеру с EMC.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8869" title="">6 Август 2013, 16:52</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8871">
		<div id="div-comment-8871">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Антон:<br />
К сожалению, у меня нет актуального текста-мнения EMC на данную тему. Обычно, тем не менее, существует общий набор FUD-тем, большая часть упомянута в недавнем посте тут: <a href="1266/trackback.html" rel="nofollow">http://blog.aboutnetapp.ru/archives/1266</a><br />
Там же много ссылок на посты за предшествующие 6 лет существования этого блога.<br />
Ничего нового в этом списке не появляется уже давно (что, в общем, плюс в отношении NetApp;)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8871" title="">6 Август 2013, 17:00</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8873">
		<div id="div-comment-8873">
		<div class="comment-author">
			<cite>Dima:<cite></div>
			<p>Роман, так все же про емкость NVRAM, гугл выдает следующие ссылки:</p>
<p>источник: <a href="https://communities.netapp.com/thread/11998" rel="nofollow">https://communities.netapp.com/thread/11998</a><br />
&#8220;Total NVRAM Active/Active:<br />
FAS3210: 1GB<br />
FAS3240: 2GB<br />
FAS3270: 4GB&#8221;</p>
<p>источник: <a href="http://www.bull.com/catalogue/FAS_3220.pdf" rel="nofollow">http://www.bull.com/catalogue/FAS_3220.pdf</a><br />
&#8220;FAS3220 - 3.2 GB NVRAM&#8221;</p>
<p>Т.е. эти данные не верные? Просто когда выбирали СХД, тоже делали (в первую очередь для себя) всякие таблички со сравнением &#8220;а как у других вендоров СХД&#8221; и использовали эти данные :)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8873" title="">6 Август 2013, 17:56</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8874">
		<div id="div-comment-8874">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Dima:</p>
<p>Суть в том, что у &#8220;других вендоров&#8221; нет NVRAM, что с чем вы сравнивать хотите?<br />
Еще раз, NVRAM - это не кэш (по крайней мере &#8220;не просто кэш&#8221;, хотя и тот и другой измеряются в мегабайтах), принцип их работы существенно разный, чобы их можно было сравнивать напрямую, и тем более просто по емкости доступной памяти.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8874" title="">6 Август 2013, 18:01</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8875">
		<div id="div-comment-8875">
		<div class="comment-author">
			<cite><a href='http://vmind.ru' rel='external nofollow'>Андрей Вахитов</a>:<cite></div>
			<p>2nikolay_a: оптимальный размер RSS - 8 дисков. Поверх этих восьми дисков организуется Raid5. А затем на все такие Raid5 мы делаем нулевой страйп (R5-R5-R5-R5-***-R5). Размер дисковой группы ограничен только архитектурой массива.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8875" title="">6 Август 2013, 18:04</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8878">
		<div id="div-comment-8878">
		<div class="comment-author">
			<cite>Александр:<cite></div>
			<p>Жесть&#8230; что могу сказать&#8230; EMC не особо далеко ушли от HP - тот же булшит 100-летней давности толкают. Я уже просто перестал пытаться с ними спорить и пытаться им доказать, то что булшит толкают. Самое печальное то, что у кучи кастомеров в ушах куча EMCшного булшита&#8230; но как же приятно видеть как меняется взгляд людей, когда показываешь им нетапчик в работе, да ещё и в работе с каким нибудь софтом типо SnapDrive, который клепает терабайтые клоны за пару секунд и сразу подключает их к хосту&#8230; ухх..</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8878" title="">6 Август 2013, 21:21</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8901">
		<div id="div-comment-8901">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Роман, привет!</p>
<p>Текст я еще не дочитал, но не могу удержаться от замечания - завуалированно оскорблять конкретного человека, пусть и работающего на конкурента, и называть его некомпетентным и малоэрудированным - непрофессионально. Одно дело - вендорные войны (я вот тоже в конкуренте NetApp работаю, если чо :) ), а другое дело - переход на личности.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8901" title="">7 Август 2013, 12:54</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8903">
		<div id="div-comment-8903">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Minus:</p>
<p>Привет. Хорошо бы все же дочитать, потому что конкретного человека я ни в чем не оскорбляю, и не обвиняю. ?? никакого конкретного человека я не называю некомпетентным и малоэрудированным, я называю так сотрудников HP вообще, да, но не какого-то конкретного человека, отметь. Единственное имя, мной упомянутое - извлечено из свойств вордовского документа, и показывает, что это подлинный документ, вышедший из HP, а не &#8220;снято на конспиративных квартирах врагами&#8221;. Я специально, в явном виде указываю, что: <b>&#8220;я не утверждаю, что текст писал именно он, но эти данные в файле имеются.&#8221;</b>, я утверждаю тут только это. Не нужно приписывать лишнего и &#8220;вчитывать&#8221; несушествующее.<br />
Речь в данном случае не идет о закрытой информации о &#8220;личной жизни&#8221;, чтобы зто как-то оправдало бы охрану privacy. Упомянутая фамилия написана в свойства файла, профиль на LinkedIn открытый.</p>
<p>Вообще, искренне говоря, я не сторонник анонимок, и не считаю, что не подписывать такие тексты - правильно (хотяконечно, в данном случае это коллективное авторство и явная компиляция из разных кусков разных авторов, разных времен, это даже по манере текста видно).<br />
Я сам всегда ясно указываю свое авторство, когда что-то пишу, и если я в чем-то неправ - комменты всегда открыты для любых указаний на мою неправоту.</p>
<p>Мне кажется, что писать и публиковать тексты, за которые потом стыдно указывать свою фамилию, это что-то неправильное. Да, это грязная игра, но твой личный выбор, играть в нее, или сказать: &#8220;не, чуваки, давайте без меня, я пас&#8221;. Просто не надо в жизни делать вещи, за которые потом будет стыдно, прости за резкость.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8903" title="">7 Август 2013, 13:19</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8905">
		<div id="div-comment-8905">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Рома, весь вендорный FUD пишется обычно не одним человеком, как ты правильно заметил. Точнее, сначала его пишет один, потом дорабатывает другой, и т.д. Так что вполне вероятно, что ты спалил (пусть и без нарушения прайваси) имя человека, который просто создал документ. :)<br />
?? все компетитивы - обезличены как по вышеуказанной причине, так и из-за того, чтобы не переходить с уровня вендорных войн на уровень личных претензий. Ты же понимаешь, что статья &#8220;Почему VNX говно&#8221; от  Hitachi и статья &#8220;Почему VNX говно&#8221; от пресейла А.Н. будет воспринята по-разному. В первом случае - как позиция вендора, во втором - как личная позиция А.Н. Поэтому и стараются максимально обезличивать такие тексты. Есть и еще одна причина - так бывает, что люди меняют работу с одного вендора на другого :) ?? никто не может предсказать реакцию заказчика, когда он видит у себя на столе два документа, которые созданы с разницей в полгода, но подписанные одним человеком из двух разных вендоров. Диссонанс, так сказать :)<br />
Ну в общем, фиг с ним.<br />
У тебя получилась отличная статья на тему &#8220;Как не надо писать FUD&#8221; :) Вообще, конечно, странно уже как минимум то, что обычно сравнения либо сугубо предметные, вроде VSP vs VMAX40k, либо сугубо абстрактные - &#8220;наши ASIC-и круче этих ваших WAFL-ов&#8221;. А тут - все в кучу, и в результате фейл :)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8905" title="">7 Август 2013, 13:32</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8907">
		<div id="div-comment-8907">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>То Андрей Вахитов: все верно. А чем эта структура отличается от НетАпп? Только тем, что в отличие от HP НетАпп честно говорит - вот есть группа, потом аггрегат, потом луны (или тома). Не нужно подменять понятия и говорить что у НетАпп маленький размер дисковой группы, а вот у HP он огого какой большой</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8907" title="">7 Август 2013, 13:39</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8908">
		<div id="div-comment-8908">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Николай, к слову, насчет owner controller. Это есть не у всех, точнее, у midrange Hitachi (HUS) есть понятие symmetric active/active и технология dynamic virtual controller, т.е. это не стандартный ALUA, который есть у остальных.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8908" title="">7 Август 2013, 13:45</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8909">
		<div id="div-comment-8909">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>DG (дисковая группа) у HP = Aggregate (аггрегат) у НетАпп. А в документе сравнивается размер DG c размером RG (которая аналогична RSS у HP) у НетАпп. Непорядок однако..</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8909" title="">7 Август 2013, 13:46</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8910">
		<div id="div-comment-8910">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Кстати, что самое интересное насчет размера RG, так это то, что для наиболее эффективной работы wide striping на дисковом пуле нужно, чтобы RG были как можно меньшей величины, чтобы одновременно распределить данные по максимальному количеству групп.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8910" title="">7 Август 2013, 13:49</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8911">
		<div id="div-comment-8911">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>To Minus: не знаю какой-такой &#8220;symmetric active/active&#8221; есть у Hitachi и что это за зверь и с чем его едять. Я не пробовал. Но совершенно точно могу сказать, что попытки динамически перекидывать LUN между контроллерами для выравнивания и (или) балансировки нагрузки ни к чему хорошему не приводили. Это я наблюдал еще на старой доброй EVA 8k. Цифры в студию, с детальным описанием конфигурации HUS, характером нагрузки и графиками.. &#8220;На слово&#8221; я давно уже никому из вендоров не верю. Опыт знаете ли был печальный..</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8911" title="">7 Август 2013, 13:52</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8912">
		<div id="div-comment-8912">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>&#8220;Кстати, что самое интересное насчет размера RG, так это то, что для наиболее эффективной работы wide striping на дисковом пуле нужно, чтобы RG были как можно меньшей величины, чтобы одновременно распределить данные по максимальному количеству групп.&#8221; С этим спорить не буду, как и с тем, что кол-во дисков в этой самой RG обычно кратно 8.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8912" title="">7 Август 2013, 13:55</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8913">
		<div id="div-comment-8913">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Николай, я эти данные сообщил не для вступления в полемику, а просто для уточнения, что не везде используется классический ALUA. Для того, чтобы пояснить, как это работает, общения в комментариях. Поподробнее можно посмотреть вот тут (http://www.hds.com/assets/pdf/hitachi-white-paper-dynamic-virtual-controller-technology.pdf), если Роман не против наличия каких-либо ссылок в комментариях.<br />
Могу сказать, что на старой доброй EVA 8k все работало по-другому.<br />
Для того, чтобы приводить какие-то цифры, необходимо определить как минимум задачи и методику тестирования, а так же то, что является или не является результатом. В общем, в комментариях не обсудишь. Если вкратце - то, в частности, с использованием технологии не наблюдается значительного снижения производительности при работе с логическим устройством(LU) на массиве через контроллер, на данный момент не являющимся &#8220;хозяином&#8221; LU.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8913" title="">7 Август 2013, 14:02</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8914">
		<div id="div-comment-8914">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Поправка - часть моей фразы следует читать вот так - &#8220;Для того, чтобы пояснить, как это работает, общения в комментариях явно не достаточно&#8221;.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8914" title="">7 Август 2013, 14:03</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8915">
		<div id="div-comment-8915">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>?? еще одно - под снижением производительности следует понимать преимущественно увеличение времени отклика операции ввода-вывода.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8915" title="">7 Август 2013, 14:06</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8916">
		<div id="div-comment-8916">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>To minus: почитаю документ, спасибо за ссылку. именно чтобы понять как это работает. если это действительно ноу-хау от Хитачи - интересно. Но что-то мне подсказывает что это новые маркетинговые названия для старых фич якобы балансинга и т. п.. все, пошел читать :)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8916" title="">7 Август 2013, 14:12</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8919">
		<div id="div-comment-8919">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>To Minus: &#8220;?? еще одно - под снижением производительности следует понимать преимущественно увеличение времени отклика операции ввода-вывода&#8221; - именно это я наблюдал и на EVA, и на Hitachi nc 55 (надеюсь не ошибся с названием, тестировали такой массив году в 2006, HDC тогда его двигало как универсальный сторадж, видимо предвестник платформы HUS) при динамической миграции LUN. Тайм-аут по всем операциям на LUN до 30 мс и выше, в зависимости от нагрузки. Это даже не латенси, это тупо блокировка на уровне scsi команд похоже работала.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8919" title="">7 Август 2013, 14:25</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8921">
		<div id="div-comment-8921">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Речь, как я понимаю, про  NSC55. Там был обычный ALUA, то, о чем я говорил, появилось в районе 2008-2009 года на тогдашних системах AMS.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8921" title="">7 Август 2013, 14:36</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8922">
		<div id="div-comment-8922">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>Возможно, спорить не буду.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8922" title="">7 Август 2013, 14:38</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8923">
		<div id="div-comment-8923">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>Но спорить с тем, что понятие контроллер-оунер есть и у массивов линейки HUS, вы, надеюсь не будете? :_</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8923" title="">7 Август 2013, 14:44</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8925">
		<div id="div-comment-8925">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Ммм, есть, так будет написано в консоли массива :) Но это несколько отличается от привычной схемы. Весь инженерный смысл схемы symmetric active/active - это фронты, которые принадлежат обоим контроллерам, и зеркалирование кэша на чтение-запись.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8925" title="">7 Август 2013, 14:56</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8930">
		<div id="div-comment-8930">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>Гм.. читаю pdf, все больше убеждаюсь пока что этот механизм может стать таким головняком на нагруженном массиве, что мама не горюй. Если оунер меняется динамически, хост-порты якобы &#8220;общие&#8221;, то как я застрахуюсь от ситуации, когда у меня пошла пиковая нагрузка на определенный лун(ы)? Если я правильно понял, в этом случае такой лун будет постоянно мигрировать между контроллерами и для серверов он будет тупо недоступен? А если кроме всего прочего у меня на серверах имеется два FC порта и каким-либо образом реализована поддержка мультипасинга - то все.. Приложение будет висеть в режиме ожидания диска, т. к. HW-path к нему будет изменяться в цикле..<br />
Поправьте меня если я не прав.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8930" title="">7 Август 2013, 17:17</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8931">
		<div id="div-comment-8931">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>Как-то сумбурно написал, мысль не сформировалась окончательно. Но надеюсь смысл вопроса понятен?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8931" title="">7 Август 2013, 17:22</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8932">
		<div id="div-comment-8932">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Николай, я полагаю, Роман будет не очень рад, что мы тут обсуждаем что-то, отличное от NetApp :) Давайте перейдем в почту, если вы не против, я попробую прояснить ситуацию.<br />
Не могли бы вы мне прислать письмо на minnus at outlook.com?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8932" title="">7 Август 2013, 17:29</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8933">
		<div id="div-comment-8933">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>согласен. флуд закрываем.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8933" title="">7 Август 2013, 17:33</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8934">
		<div id="div-comment-8934">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Не-не, я все внимательно читаю, мне все комменты к блогу на почту сыпятся, мне тема active-active тоже интересна, потому что я пока не понимаю, как в случае полностью симметричного A-A можно обработать ситуацию когда на LUN, принадлежащий в равных правах двум контррллерам, вдруг рещили в один момент времени записать (изменить) один и тот же блок два хоста, вошедшие с разных портов рзных контроллеров. В кластерных FS для этого есть нода-арбитр, обрабатывающая в эксклюзивном режиме метаданные, но тут-то как?</p>
<p>Но тема, безусловно оффтопик, если продолжите в почте, может быть включите меня в cc:?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8934" title="">7 Август 2013, 17:34</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8935">
		<div id="div-comment-8935">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Роман, включим, конечно. Адрес твой старый, ник на мейл ру?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8935" title="">7 Август 2013, 17:42</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8937">
		<div id="div-comment-8937">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>Я напишу о результатах переписки с Minus.<br />
Вот что-то меня смущает в их механизме.. Не может лун принадлежать двум контроллерам одновременно. Видимо есть какая-то прослойка в микрокоде, которая пишет все данные на такие луны в какой-либо буфер, а потом кидает его на диск через один из контроллеров. Но как арбитрируются эти операции, как выбирается контроллер? По какому алгоритму данные скидываются из буфера на диски..?<br />
Но вариант схемы с кластерной FS имеет право на существование - HUS ведь поддерживают и NFS и CIFS.. Но тогда чем это принципиально от НетАпа отличается?:) ?? задержки могут образовываться нехилые при высокой нагрузке, т. к. тут слабым звеном могут запросто стать сами контроллеры..</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8937" title="">7 Август 2013, 17:51</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8938">
		<div id="div-comment-8938">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Николай, как раз сейчас пишу письмо. Нет, все не совсем так, как вы описываете, попробую пояснить в переписке.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8938" title="">7 Август 2013, 17:52</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-8939">
		<div id="div-comment-8939">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>Ок. Надеюсь вы не против опубликования результатов общения?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8939" title="">7 Август 2013, 18:04</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-8985">
		<div id="div-comment-8985">
		<div class="comment-author">
			<cite>IgorT:<cite></div>
			<p>Здравствуйте,<br />
Если Вы начали сравнивать NetApp и Hitachi Unified Storage, может обсудите non-disruptive upgrades и automatic deduplication. Будет очень интересно послушать.<br />
Спасибо!</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-8985" title="">9 Август 2013, 15:37</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9048">
		<div id="div-comment-9048">
		<div class="comment-author">
			<cite><a href='http://dmarck.livejournal.com/' rel='external nofollow'>Dmitry Morozovsky</a>:<cite></div>
			<p>&gt; reallocate на дефрагментированных томах, просто по их природной фрагментированности “бай дизайн”,</p>
<p>опечатка? не дедуплицированных?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9048" title="">12 Август 2013, 5:45</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9057">
		<div id="div-comment-9057">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Dmitry Morozovsky:</p>
<p>Поразительно, как на несколько сотен прочитавших, мало прочитавших внимательно. :) Поправлю счас.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9057" title="">12 Август 2013, 11:43</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9077">
		<div id="div-comment-9077">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>IgorT:</p>
<p>Мы не начинали сравнивать, просто обсудили определенные особенности архитектуры массивов :)<br />
А что именно Вас интересует в разрезе обозначенных вами тем? Если хотите что-то узнать или обсудить, то можно сделать это, например, связавшись со мной по почте, она есть тут выше в комментариях. Но если вкратце - то обновления без остановки есть и там и там, касательно дедубликации - мне не совсем ясен контекст фразы &#8220;automatic deduplication&#8221;.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9077" title="">13 Август 2013, 16:47</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9090">
		<div id="div-comment-9090">
		<div class="comment-author">
			<cite>IgorT:<cite></div>
			<p>Minus:</p>
<p>Скажем так, что о системах от Hitachi я знаю немного больше, чем о NetApp. В связи с этим и хотелось бы услышать мнение от людей, которые разбираются в системах от обоих производителей. ?? конкретно по этим 2 вопросам у меня и есть сомнения.<br />
Почему то думал, что NepApp не позволяет делать обновления без перезагрузки.<br />
По поводу “automatic deduplication” - точно знаю, что Hitachi ее делает в фоновом режиме и за ее реализацию отвечают отдельные микроконтроллеры, которые знают когда остановиться. За счет этого Hitachi обещает, что нет влияния на производительность и не нужен менеджмент со стороны админа СХД. Как именно реализован dedup у NetApp, не совсем в курсе. Хотелось бы подробностей. :)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9090" title="">13 Август 2013, 22:01</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9094">
		<div id="div-comment-9094">
		<div class="comment-author">
			<cite>Сергей:<cite></div>
			<p>Ложь HP про собственные массивы:</p>
<p>&#8220;В массивах НР Р10000 (V400 и V800), P9500, F200 и F400, Р6000, Р4000 все контроллеры работают в режиме active/active, разделяют доступ ко всем дискам и томам массива&#8221;</p>
<p>это не правда, в 3par НР Р10000 (V400 и V800) F200 и F400 диски имеют жестко закрепленных владельцев, если обращение к блоку данных идет не через контроллер-владелец и контроллер-backup, то принявший обращение контроллер становится прокси и передает данные контроллеру-владельцу по кластерной шине. Как и в NetApp. То что 3par объявляет все пути как active, не более чем внешняя иллюзия. Но в отличие от NetApp в 3par только 1/(количество контроллеров) запросов пойдут контроллеру-владельцу напрямую, остальные пойдут к нему-же но через кластерную шину.</p>
<p>&#8220;В массивах НР Р10000 (V400 и V800), F200 и F400, Р6000, Р4000 размер дисковой группы не имеет ограничений по максимальному кол-ву дисков и это позволяет автоматически равномерно распределять нагрузку ввода/вывода между большим количеством дисков (Wide Striping) и за счет этого добиваться очень высокой производительности.&#8221;</p>
<p>на самом деле в НР Р10000 (V400 и V800), F200 и F400 - 3par, ограничения следующие:<br />
RAID 5/50 (от 2+1 до 8+1)<br />
RAID 6 (4+2, 6+2, 8+2, 10+2, 14+2)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9094" title="">14 Август 2013, 1:35</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9103">
		<div id="div-comment-9103">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>IgorT:</p>
<p>NetApp умеет non-disruptive upgrades. Делается это через cf takeover/giveback в HA-паре. По-моему, это умеет сейчас любой уважающий себя вендор :)<br />
По поводу дедупликации. Дедупликация в файловых модулях HUS действительно по умолчанию функционирует в режиме, который позволяет запускать процесс дедупликации тогда, когда оказывается минимальное влияние на основные службы, плюс то, что процесс вынесен целиком на FPGA, дает минимальный оверхед на производительность. Однако, в случае NetApp также присутствуют механизмы уменьшения влияния процессов дедупликации на основные функции, плюс есть настройки, запускающие процесс в случае превышения определенного порога измененных данных на томе (в HUS реализована похожая схема). Поподробнее о дедупликации в NetApp Роман в этом блоге уже писал, если я не ошибаюсь.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9103" title="">14 Август 2013, 10:45</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9105">
		<div id="div-comment-9105">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Сергей:</p>
<p>Про Active/Active - это не ложь, это, скажем так, не совсем исчерпывающая информация. Контроллеры оба активны, так что это active/active HA-пара, однако, обработка запросов к одному и тому же тому работает именно так, как Вы сказали, и это называется ассиметричной системой доступа. Т.е. 3PAR - это asymmetric active/active массив, каким, к слову, является и NetApp. Со стороны хоста все пути будут видны как active, только те, которые ведут на &#8220;родной контроллер&#8221;, будут в состоянии Optimized, а остальные - Non-Optimized.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9105" title="">14 Август 2013, 10:55</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9108">
		<div id="div-comment-9108">
		<div class="comment-author">
			<cite>Amazi:<cite></div>
			<p>Сергей - перед тем как называть что-то ложью, почитали бы хотя бы 3PAR concept guide.<br />
nikolay_a, Minus, Сергей<br />
 3PAR - это active/active массив как по фронтендам, так и по бекенду, в отличие от того же HUS и Netapp. В HUS всем LUN-ом владеет один контроллер (и имеет ограничение на макс. кол-во IOPS на LUN, проверено тестированием). Да, он проксирует доступ с минимальными оверхедами и балансирует LUN-ы довольно прозрачно для хостов, но производительность LUN-а всё равно завязана только на один контроллер.<br />
 В 3PAR LUN (VV в терминологии 3PAR) разбивается на кол-во частей, соответствующих кол-ву контроллеров, каждый контроллер работает со своей частью LUN-а, распараллеливая нагрузку. Наружу это видится, естественно, как единый том, с A/A доступом и рекомендованной multipath-policy round-robin. Конечно же, много запросов может попасть на контроллер, который не владеет данным LBA, но оверхед от проксирования - минимальный, близкий к нулевому, т.к. всё проксирование идёт через ASIC и высокоскоростные линки (а не через FC, как у нетаппа, если запрос придёт на непарный контроллер) и используется интересный когерентный кэш-менеджмент. ?? повторю - даже единичный том будет обрабатываться всеми контроллерами. Представим упрощённую ситуацию с тремя томами, каждый из которых требует 40% процессорной мощности одного контроллера, как они будут распределены по двум контроллерам HUS? Правильно, 2/1, соответственно, один контроллер будет загружен на 80% (что очень плохо), а второй - на 40%. В случае же 2-процессорного 3PAR-а каждый контроллер будет загружен на 60%, а в случае 4+ контроллеров - пропорционально меньше. </p>
<p>Роман, вы говорите о практически неограниченном агрегате, но можно ли создать один агрегат поверх нескольких контроллеров? Когда-то нельзя было, что сейчас?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9108" title="">14 Август 2013, 14:49</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9110">
		<div id="div-comment-9110">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Хм.<br />
В 7400 дисковые полки закрепляются за парами контроллеров в случае 4-узловой системы, т.е. HA-пары соединены между собой интерконнектом. В случае распределения тома между всеми 4 контроллерами это, конечно, позитивно скажется на балансировке нагрузки и, косвенным образом, на производительности. Однако, возникает вопрос - что случается в случае потери половины массива? Т.е., если у нас есть два шасси, в которых сгруппированы попарно узлы, в случае потери одного из шасси мы теряем не просто половину массива, мы теряем все данные, так по сути мы потеряли половину LBA-адресов всех наших томов. Это действительно так? С этой точки зрения более &#8220;классическая&#8221; архитектура NetApp и тех же HUS выглядит более привлекательной - там-то ничего не потеряется.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9110" title="">14 Август 2013, 16:17</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9113">
		<div id="div-comment-9113">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Amazi:</p>
<p>Заставляете себя ждать ;)</p>
<p>> Сергей - перед тем как называть что-то ложью, почитали бы хотя бы 3PAR concept guide.</p>
<p>Я тоже не считаю, что это &#8220;эмоционально окрашенное&#8221; слово стоит использовать. Тут, конеычно не ложь. Но, скажем так: &#8220;не вся правда&#8221;.</p>
<p>> В 3PAR LUN (VV в терминологии 3PAR) разбивается на кол-во частей, соответствующих кол-ву контроллеров, каждый контроллер работает со своей частью LUN-а, распараллеливая нагрузку.</p>
<p>Правильно ли я понимаю, что в результате добавить еще два контроллера, к, допустим, системе 7400 изначально сконфигурированной и заполненной данными с двумя контроллерами, не является простым делом?<br />
Ведь исходя из ваших слов, это потребует заново переразбить LUN-ы, разбитые для двух контроллеров?<br />
Это не подначка, я правда хочу понять. Спасибо если разъясните.</p>
<p>> а не через FC, как у нетаппа</p>
<p>Поправлю: а у NetApp и не через FC, а через private 10G Ethernet в 3200, и через Infiniband в 6200.</p>
<p>> Роман, вы говорите о практически неограниченном агрегате, но можно ли создать один агрегат поверх нескольких контроллеров? Когда-то нельзя было, что сейчас?</p>
<p>Скажем так: это возможно <a href="1247/trackback.html" rel="nofollow">теоретически</a>, но решено было это <a href="1248/trackback.html" rel="nofollow">не развивать</a> и ограничить использование только теми, кто это, так получилось, что уже использует, мигрировав с Data ONTAP GX.</p>
<p>Дело в том, что работа с подобным aggregate потенциально вызывает серьезные проблемы с производительностью. Собственно про все это я <a href="1118/trackback.html" rel="nofollow">уже писал</a>, этой проблемой страдают по видимому все системы global filesystem, хороший пример - Isilon, и его результаты в SPECsfs, на которых видно, как нелинейно он масштабируется. Как и то, что хорошо это работает только на определенных workload (для Isilon - sequental read).</p>
<p>Так что вопрос стоит так: ??ли global filesystem с потенциальными проблемами с производительностью, или controller-bound volume (но global namespace, конечно), и нет проблем с производительностью и масштабированием. NetApp выбрал второе, и, как мне кажется, правильно.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9113" title="">14 Август 2013, 17:26</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9118">
		<div id="div-comment-9118">
		<div class="comment-author">
			<cite>Amazi:<cite></div>
			<p><i>Правильно ли я понимаю, что в результате добавить еще два контроллера, к, допустим, системе 7400 изначально сконфигурированной и заполненной данными с двумя контроллерами, не является простым делом?</i><br />
Является простым:) Если будут добавлены контроллеры с дисковыми ресурсами, то можно оставить всё как было или перераспределить данные и по новым дискам/контроллерам. Делается это автономно и в бекграунде процедурой релевелинга (tunesys), входящей в базовую ОС.<br />
2Minus потеря двух контроллеров - это уже вторая точка отказа, от которой практически никто не гарантирует защиту. В шасси - пассивный беклпейн. ?? что значит &#8220;потеряли&#8221;? Контроллеры поменяли, доступ восстановили. Потеря контроллеров из разных пар в 3PAR-е возможна без прекращения доступа к данным, но с доп. условиями (например, не с разницей менее времени, необходимого для перестроения кластера). Но если очень хочется, то можно создавать тома и только в рамках контроллера, делается элементарно, в этом и гибкость 3ПАР-а:)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9118" title="">14 Август 2013, 19:31</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9119">
		<div id="div-comment-9119">
		<div class="comment-author">
			<cite>Amazi:<cite></div>
			<p><i>и нет проблем с производительностью и масштабированием</i> Как это нет?:) Один том не масштабируется же за рамки контроллера:)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9119" title="">14 Август 2013, 19:34</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9142">
		<div id="div-comment-9142">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>&gt;потеря двух контроллеров - это уже вторая точка отказа, от которой практически никто не гарантирует защиту<br />
Что значит никто? :) HP позиционирует 3PAR как систему в том числе категории high-end, так что придется гарантировать. В качестве примера могу привести VSP - там может выйти из строя 3 из 4 VSD-пар (да и вообще 3/4 любых коммутируемых компонентов), и остановки доступа к данным не будет. В HUSVM каждый из двух контроллеров логически делится внутри пополам, итого 4 логических юнита, и можно потерять любые 2 без какого-либо влияния на данные.<br />
А в 3PAR, получается, можно потерять только строго определенную &#8220;половину&#8221; массива (в случае 4 контроллеров), и при этом еще и произойдет полная остановка доступа к данным, т.е. нужно ждать пока заменят контроллер или контроллерную пару. Я, конечно, извиняюсь, но такого себе даже на рынке midrange в последнее время никто не позволяет. :)<br />
Если же эту модную фичу не использовать, то 3PAR превращается в обычный ALUA массив, о чем и шла речь изначально. Самое смешное то, что вы сейчас делаете ровно то, что обычно делает HP в своих диалогах с заказчиками - сначала постулируете о какой-то супер-фиче, а когда заходит речь о значительных ограничениях (всякая мелочь, типа остановки доступа к данным при потере одного из двух контроллерных шасси), то возможность &#8220;создавать тома только в рамках контроллера&#8221; приводится как пример немерянной гибкости 3PAR :)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9142" title="">15 Август 2013, 11:43</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9143">
		<div id="div-comment-9143">
		<div class="comment-author">
			<cite>Amazi:<cite></div>
			<p>Minus не передёргивайте. Системы проектируются в расчёте на SPoF. В 3PAR-овском hi-end вообще единое шасси на 8 контроллеров, попробуйте его потерять:) ?? попробуйте в VSP потерять пару кэш-плат, массив сразу станет, две пары VSD из одной DKC - станет.<br />
<i>А в 3PAR, получается, можно потерять только строго определенную “половину” массива (в случае 4 контроллеров), и при этом еще и произойдет полная остановка доступа к данным, т.е. нужно ждать пока заменят контроллер или контроллерную пару.</i><br />
А перечитать еще раз?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9143" title="">15 Август 2013, 12:18</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9144">
		<div id="div-comment-9144">
		<div class="comment-author">
			<cite>Amazi:<cite></div>
			<p>Minus так что будет, если в HUS VM потерять оба физических контроллера, как вы предлагаете сделать в 3ПАР?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9144" title="">15 Август 2013, 12:22</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9146">
		<div id="div-comment-9146">
		<div class="comment-author">
			<cite>Amazi:<cite></div>
			<p>Minus и при локализации томов на контроллер (что противоречит best practice, кстати), получим не ALUA массив, а frontend A/A, как у HUS. Как я уже говорил, оверхед при проксировании - минимальный.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9146" title="">15 Август 2013, 12:29</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9147">
		<div id="div-comment-9147">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>??нтересно, откуда такая информация о VSP. Я могу вас уверить, что обе описанные ситуации не приводят к полной остановке массива, иначе грош цена такому high-end&#8217;у. Может, вы забыли упомянуть что-нибудь малозначимое, навроде того, что это были две единственные кэш-платы в массиве, да и в VSP было только две VSD-пары?<br />
Про потерю строго определенной половины я, конечно, написал несколько не то. ??мел ввиду, что при потере тех самых контроллеров в одном шасси приведет к полной остановке массива. ВНЕЗАПНО.<br />
О HUSVM, еще раз. Это двухконтроллерный массив, поэтому, конечно же, отключение обоих контроллеров приведет к его остановке. Однако, как я сказал, в нем может выйти из строя ЛЮБАЯ ПОЛОВ??НА - и все будет работать. А у 3PAR - почему-то нет.<br />
Насчет frontend A/A - хост все пути увидит как optimized в обсуждаемом случае? ?? правильно ли я понимаю, что в этом случае &#8220;передать&#8221; том другому контроллеру затруднительно?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9147" title="">15 Август 2013, 12:52</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9150">
		<div id="div-comment-9150">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>?? вот что еще интересно.<br />
Если вы говорите о &#8220;frontend A/A, как у HUS&#8221;, то прямая аналогия возможна только в том случае, если у нас в кэше зеркалируются все операции, в том числе записи. То есть, другими словами, в случае 3PAR должен быть задействован механизм Persistent Cache. Но что делать бедным обладателям двух-контроллерных систем 3 PAR, ведь, как известно, Persistent Cache только &#8220;Supported on all quad-node and larger HP 3PAR arrays&#8221;. Получается, все те, у кого только два контроллера, обречены на &#8220;However, when a single controller fails, storage performance is not just cut in half. Instead, it drops an additional 20–30% as dual controller arrays go into “write-through” mode, suspending the use of write caching for data integrity reasons. &#8221;<br />
Это действительно так?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9150" title="">15 Август 2013, 13:22</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9151">
		<div id="div-comment-9151">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Ммм, не совсем верно сформулировал. Верно ли, что без механизма Persistent Cache двухконтроллерные системы 3PAR обречены на те самые 20-30% потери производительности при операциях не через &#8220;родной контроллер&#8221; в случае локализации томов отдельно на каждом контроллере по причине отсутствия механизмов зеркалирования всех операций в кэше обоих контроллеров?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9151" title="">15 Август 2013, 13:26</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9153">
		<div id="div-comment-9153">
		<div class="comment-author">
			<cite>Amazi:<cite></div>
			<p>2Minus если выпадает пара кэш-плат, массив теряет часть кэша с данными в нём. Помните же, что в отличие от 3PAR в VSP данные зеркалируются только в рамках пары плат. Что по-вашему он должен при этом делать?:) При этом, кстати, потребуется полный рестор, т.к. данные уже будут неконсистентны. Читайте документацию. Также почитайте, как и когда VSP выключает кэш на запись при воходе из строя одной кэш-платы и что такое Cache Persistence в 3PAR.<br />
Любая половина из 2-х контроллеров - это сильно:) Что вы оцениваете как половину в 8-узловом 3ПАР-е и каким образом его единое для всех контроллеров шасси сможет выйти из строя? Какой это будет порядок ошибки? Еще раз повторю - более отсутствия SPoF никто из вендоров ничего не обещает (вроде, я не всех вендоров знаю).<br />
В случае же слабосвязанных кластеров типа Нетаппа или Сторвайза - насколько заказчику будет легче, если он потеряет доступ к части данных, а не всем?:)<br />
Еще раз - 3PAR использует не ALUA (точнее использует, но только для федеративной инфраструктуры, когда два массива на разных площадках видятся, как один), а обычный RR и в рамках одного массива все пути для него равнозначны. Передача тома другому контроллеру не имеет смысла, т.к. оверхед проксирования минимальный.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9153" title="">15 Август 2013, 14:05</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9154">
		<div id="div-comment-9154">
		<div class="comment-author">
			<cite>Amazi:<cite></div>
			<p>Minus как же вы выборочно читаете документацию и то, что я писал ранее. Persistent Cache в 4+ контроллерных системах позволяет после выхода из строя одного из контроллеров оставить весь оставшийся кэш доступным на зеркалированную запись и не имеет никакого отношения к проксированию (non-local access в терминологии 3PAR). ??ли вы хотите сказать, что в случае выхода из строя одного из контроллеров, HUS(VM) не выключает кэш на запись? Рисковые парни, до этого этим только ЕМС занималось, да и то крайне не рекомендовало включать данный режим.</p>
<p>Повторю в 3-й раз, если абоненту не приходит сообщение с первого:) Оверхед проксирования - на уровне нескольких процентов при максимально нагруженной системе. ?? снова повторю &#8220;локализации томов отдельно на каждом контроллере&#8221; - не бест практайс.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9154" title="">15 Август 2013, 14:13</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9157">
		<div id="div-comment-9157">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Ну вот мы и пришли к тому, что должна сдохнуть конкретная пара плат. Только вы забыли сказать, что при этом проблемы будут наблюдаться в пределах того DKC, где оно сдохло.<br />
Еще раз, про половину. У нас получается какой-то сюрреалистичский разговор. Я вам говорю - если например в 3PAR 7400 умирает нафиг шасси с Node 0/1, то помирает все, так из-за того, что VV размазаны между контроллерами . А вы мне - а если вы отключите оба контроллера HUSVM, он же тоже помрет! Естественно, блин, помрет. Только в 3PAR и половину-то отключить нельзя, вот в чем дело.<br />
Еще раз про ALUA. Ответьте, пожалуйста, всем жаждущим владельцам 2-контроллерных систем 3PAR - каковы будут потери производительности в случае операций записи через не-родной контроллер в случае локализации томов отдельно на каждом контроллере? Т.е укажите величину этого самого &#8220;минимального оверхеда проксирования&#8221;, когда заказчик не может использовать Persistent Cache, так как контроллеров у него два? ?? какая польза в этом случае от frontend A/A?<br />
Ну а про &#8220;передача тома другому контроллеру не имеет смысла&#8221; - это классическое &#8220;это не те дроиды, которых вы ищете&#8221; :)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9157" title="">15 Август 2013, 14:25</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9160">
		<div id="div-comment-9160">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Amazi:</p>
<p>Давайте по порядку.<br />
Вы сказали, что &#8220;при локализации томов на контроллер (что противоречит best practice, кстати), получим не ALUA массив, а frontend A/A, как у HUS.&#8221;<br />
На что я вам резонно возражаю, что для того, чтобы &#8220;было как в HUS&#8221;, нужно зеркалировать между контроллерами все операции из кэша, то есть, нужно иметь механизм Persistent Cache, верно? ?? задаю резонный вопрос - как будет происходить проксирование в 2-контроллерных системах, можно с примером, что будет с блоком данных который идет от хоста на массив.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9160" title="">15 Август 2013, 14:33</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9163">
		<div id="div-comment-9163">
		<div class="comment-author">
			<cite>Amazi:<cite></div>
			<p>Когда я говорю про пару плат, то естественно имеются в виду парные кэш платы, а не какие-то там еще. Проблема будут array-wide, т.к. кэш - глобальный. Подумайте, что происходит, если пропала насовсем часть данных, которые были в кэше, да не записались на диск. Повторю - читайте ToO и MM. То же самое, что и в случае 3ПАР-овских контроллеров.<br />
Вы понимаете, что такое SPoF? Как выход из строя 2 контроллеров относится к SPoF? Зачем отключать половину? Вы экстремал? Попробуйте отключить DKC (или как там она у HDS называется) в VSP:)<br />
Я вам описал, что такое Persistent Cache и для чего он применяется, повторить еще раз?:)<br />
Естественно, что в двухконтроллерной системе при рабочих обоих контроллерах кэш на запись зеркалируется. Как же иначе? Возможный оверхед я уже тоже указал.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9163" title="">15 Август 2013, 14:48</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9164">
		<div id="div-comment-9164">
		<div class="comment-author">
			<cite>Amazi:<cite></div>
			<p>А пример вам смогут показать на любом семинаре HP, приходите:) ??ли переходите в личку, чтобы не загромождать дискуссию Роман знает мой емейл либо можно в личку на хоботе.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9164" title="">15 Август 2013, 14:51</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9165">
		<div id="div-comment-9165">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Видимо, каждый из нас останется при своем мнении. :) Я до сих пор считаю что подход &#8220;У нас 4 контроллера, помереть могут два, но не любые&#8221; несколько странный.<br />
Вообще, тема диалога зашла в глубокий оффтопик, так как блог все-таки про NetApp, а не про технологические преимущества 3PAR и Hitachi. Я предлагаю перейти на общение в почту - minnus at outlook.com. Конечно, если есть желание.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9165" title="">15 Август 2013, 15:00</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9166">
		<div id="div-comment-9166">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>О! Консенсус! :)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9166" title="">15 Август 2013, 15:00</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9169">
		<div id="div-comment-9169">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Minus: Amazi:</p>
<p>Вы тут просто не начинайте какашками кидаться, а джентльменские разговоры-то всегда пожалуйста :)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9169" title="">15 Август 2013, 15:55</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9171">
		<div id="div-comment-9171">
		<div class="comment-author">
			<cite>Amazi:<cite></div>
			<p>Minus Представьте себе RAID10. Сколько дисков может помереть при сохранении доступа к данным при двухдисковом  RAID10 (RAID1)? Правильно, половина. А если дисков таки больше, например, восемь? Теоретически-то половина, а практически - один:)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9171" title="">15 Август 2013, 19:24</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9172">
		<div id="div-comment-9172">
		<div class="comment-author">
			<cite>Minus:<cite></div>
			<p>Давайте переведем дискуссию в почту, я свою выше написал :)<br />
??нтересно было бы продолжить диалог, авось, оба что-то новое узнаем. :)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9172" title="">15 Август 2013, 19:55</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9174">
		<div id="div-comment-9174">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Minus: Amazi:</p>
<p>Если что - я тоже тут, если не против, то я бы тоже послушал.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9174" title="">15 Август 2013, 20:45</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9192">
		<div id="div-comment-9192">
		<div class="comment-author">
			<cite>Aaz:<cite></div>
			<p>Amazi: &#8220;читайте ToO и MM.&#8221;<br />
дайте пожалуйста ссылки на документы, почитать.<br />
Minus: Amazi:<br />
Продолжайте, а&#8230; Очень уж интересно.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9192" title="">16 Август 2013, 14:28</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9225">
		<div id="div-comment-9225">
		<div class="comment-author">
			<cite>Stormkiller:<cite></div>
			<p>Немного про эктив/эктив. На рынке нет ни одного дискового массива эктив/эктив, т.к. под этим имеется ввиду одновременная запись в единый блок  данных обоими контроллерами массива при арбитраже самим массивом. А вы все тут говорите об эктив/пэссив в чистом виде. То, что второй контроллер подхватывает работу первого, это все о том же. Единственное, что я видел - это GPRS от IBM , но это другая тема. Поправьте , если не прав.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9225" title="">17 Август 2013, 18:28</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9226">
		<div id="div-comment-9226">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Stormkiller:</p>
<p>Это зависит от того, что именно вы понимаете под работой &#8220;active/active&#8221; возможность одновременного доступа к одному блоку с разных контррллеров - это только одна из трактовок данного понятия. Можно, однако, считать, что &#8220;active/active&#8221; это просто одновременная работа двух контроллеров, не обязательно с записью в один блок данных. Вообще говоря, это тоже будет &#8220;active/active&#8221;, так что тут вопрос в терминологии и в определении термина, и определять его можно по разному, и в этом не будет никакой нечестности. Совсем не любой задаче жизненно нужно иметь одновременный доступ на запись с обоих контроллеров системы, поэтому такое ограничение термина мне кажется несколько надуманным.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9226" title="">17 Август 2013, 18:35</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9284">
		<div id="div-comment-9284">
		<div class="comment-author">
			<cite>Odna Ptichka:<cite></div>
			<p>2 AMAZI:<br />
А по существу коллеги из HP  могут ответь по вопросам поднятым Романом?</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9284" title="">20 Август 2013, 13:47</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9285">
		<div id="div-comment-9285">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>Odna Ptichka:</p>
<p>Так у меня тут фактически и нет вопросов, а, по существу, одни &#8220;ответы&#8221;, указывающие на плохой уровень знаний технологий и продуктов конкурента, с которым пресейлы этого вендора пытаются написать competitive-документ. Собственно задачей поста было привлечь внимание к этому факту, так как плохо разбирающиеся в теме люди, например потенциальные клиенты, которые в равной мере плохо знают что NetApp, что HP, могут все перечисленное принимать за правду, поэтому являются благодатной почвой для &#8220;заливания мозгов&#8221;.<br />
??ли вы про мои вопросы об апгрейде и рестрайпе данных выше в комментариях? Ну, в общем, я получил ответ, поставил соответствующую пометку в личном списке.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9285" title="">20 Август 2013, 13:53</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9310">
		<div id="div-comment-9310">
		<div class="comment-author">
			<cite>Artur:<cite></div>
			<p>Очень интересно читать такие дискуссии.<br />
Но прочитав все вышеозвученное, я так и не понял в чем же преимущество подхода 3Par перед NetaApp и всеми другими не тру active/active массивами.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9310" title="">21 Август 2013, 18:50</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9312">
		<div id="div-comment-9312">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>To Artur<br />
Да ничем :) Нет полноценного актив-актив решения в случае железных стораджей. Ни у одного из вендоров. Полноценный актив-актив доступ на запись и чтение данных к одним и тем же блокам может быть только в случае cluster FS (GPFS, GFS, Lustre и т. п.). Все остальное - лишь попытки приблизится к этому. Воможно что 3PAR достаточно близко подошли к такой схеме, если верить утверждению Amazi о том, что данные в один лун могут писаться с 4-х контроллеров одновременно. Но я в этом почему-то не верю, т. к. реально данные пишутся из КЭША, общего для ПАРЫ контроллеров (если я правильно разобрался с терминологией 3PAR). Т. е. у 3PAR в случае конфигурации с 4-мя и 8-и контроллерами мы имеем слабосвязанный кластер между ПАРАМ?? контроллеров. Соот-но ни о каком реальном разделяемом (арбитрируемом) доступе к луну с 4-х контроллеров одновременно речи не идет.<br />
To Romx<br />
@Это зависит от того, что именно вы понимаете под работой “active/active&#8221;@ - я лично понимаю под этим полноценный арбитрируемый доступ к к одному НАБОРУ блоков (не не к одному блоку :))) с разных контроллеров (сколько бы их ни было в массиве) в один момент времени. Проще говоря, если я запросил выборку на 1 Тб данных из а этот запрос в идеале был бы распараллелен между любым кол-вом контроллеров и выдан мне за время N/кол-во контроллеров, а не за N.<br />
Все остальное это не более чем относительно успешные (или не успешные) попытки выжать лишние мс и имеющегося решения. ?? зачастую эти попытки приводят к совершенно противоположным результатам у реальных заказчиков.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9312" title="">21 Август 2013, 20:20</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9313">
		<div id="div-comment-9313">
		<div class="comment-author">
			<cite><a href='../index.html' rel='external nofollow'>romx</a>:<cite></div>
			<p>nikolay_a:<br />
Позиция NetApp в данном вопросе прагматична. Если это &#8220;фича ради фичи&#8221;, или если это редко востребованная в реальных задачах возможность (и которую можно сравнительно просто решить каким-то иным, обходным путем), но которая приводит при ее реализации к существенному усложнению (читай - &#8220;удорожанию и непредсказуемости производительности&#8221;), то ну ее нафиг такую фичу. :)</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9313" title="">21 Август 2013, 20:26</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9314">
		<div id="div-comment-9314">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>Romx:<br />
НетАпп хотя бы честен в своих обещаниях. А для России это большая редкость. Как сказал один хороший человек из московского представительства - &#8220;мы ж не бусы с зеркальцами папуасам впариваем&#8221;:)<br />
А вот поведение пресейлов некоторых других вендоров (не буду показывать пальцем) именно так и выглядит.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9314" title="">21 Август 2013, 20:37</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9315">
		<div id="div-comment-9315">
		<div class="comment-author">
			<cite>Stormkiller:<cite></div>
			<p>nikolay_a:</p>
<p>Да , тут полностью поддержу.</p>
<p>Какая-то надуманная функция, никому не нужная. Если доступ к данным не параллелится , то ну ее и это не эктив эктив.</p>
<p>?? кстати &#8220;т. к. реально данные пишутся из КЭША, общего для ПАРЫ контроллеров (если я правильно разобрался с терминологией 3PAR&#8221; - тут тоже непонятно как идет арбитраж и пишутся ли данные в одну группу блоков данных ? Непонятно.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9315" title="">21 Август 2013, 20:37</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9317">
		<div id="div-comment-9317">
		<div class="comment-author">
			<cite>nikolay_a:<cite></div>
			<p>Пока читал про 3PAR - возник вопрос - чем же их конфигурация из, например, 4-х контроллеров отличается от нетапа с 4-мя контроллерами. Те же HA-пары, та же в общем-то логика обработки &#8220;чужих&#8221; данных. Лишний раз убедился, что хорошие инженеры работают и в 3PAR и в NetApp.<br />
Жаль только что HP купила 3PAR. Печальный пример полного остутствия развития архитектуры EVA доставшегося от DEC (Compaq) наводит на грустные мысли о будущем 3PAR :(. Будут выжимать из чужих инженерных решений бабло по максимуму, а потом выкинут на помойку..</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9317" title="">21 Август 2013, 21:28</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-9360">
		<div id="div-comment-9360">
		<div class="comment-author">
			<cite>Artur:<cite></div>
			<p>У продавцов HP 3Par наметилась печальная тенденция. Они теперь в ТЗ пытаются прописsdать поддержку active/active контроллеров и неприемлимость ALUA.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9360" title="">23 Август 2013, 13:05</a>
			</div></div>
		</li>

		
		<li class="comment even" id="comment-9447">
		<div id="div-comment-9447">
		<div class="comment-author">
			<cite>zerg:<cite></div>
			<p>??нтересная дискуссия вышла. А по-моему active/active в том виде в котором есть(LUSTRE/GFS итд) - отлично работает. Кому надо тот использует эти кластерные ФС.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-9447" title="">29 Август 2013, 17:59</a>
			</div></div>
		</li>

		
		<li class="comment odd" id="comment-10132">
		<div id="div-comment-10132">
		<div class="comment-author">
			<cite>litweg:<cite></div>
			<p>Artur,<br />
Тенденция прописывать в любое ТЗ поддержку active-active объяснить легко, если знать как они работают. Дело в том, что у них есть внутренний документик (FRP) в котором прописаны все фичи массива, начиная со всякой базовой фигни вроде поддержки ОС и заканчивая тем как у них реализованы более сложные функции. Для 7400 у них там аж 58 пунктов. Поэтому чем больше &#8220;заточек&#8221; пресейл нусуёт в ТЗ - тем лучше. Тем больше вероятность что все не порежут.</p>
<p>К дискусии могу добавить только одно - 7400 может потерять два или даже три контроллера (главное не одновременно) и кеш не потеряется, т.к. при потере контроллера он перезеркалируется на другой, &#8220;живой&#8221; контроллер.</p>
						<div class="comment-meta"><a href="1272/trackback.html#comment-10132" title="">30 Сентябрь 2013, 3:12</a>
			</div></div>
		</li>

		
	</ol>

 

<h3 id="respond">Оставить комментарий</h3>


<form action="http://blog.aboutnetapp.ru/wp-comments-post.php" method="post" id="commentform">


<p><input type="text" name="author" id="author" value="" size="22" tabindex="1" />
<label for="author"><small>Имя (обязательно)</small></label></p>

<p><input type="text" name="email" id="email" value="" size="22" tabindex="2" />
<label for="email"><small>E-Mail (will not be published) (обязательно)</small></label></p>

<p><input type="text" name="url" id="url" value="" size="22" tabindex="3" />
<label for="url"><small>Сайт</small></label></p>


<!--<p><small><strong>XHTML:</strong> You can use these tags: &lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </small></p>-->

<p><textarea name="comment" id="comment" rows="10" cols="" tabindex="4"></textarea></p>

<p><input name="submit" type="submit" id="submit" tabindex="5" value="Submit Comment" />
<input type="hidden" name="comment_post_ID" value="1272" />
</p>

</form>

</div>


	
	</div>

	<div id="sidebar">
		<ul>
			
			
			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Автор</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			<li class="pagenav"><h2>Страницы</h2><ul><li class="page_item page-item-153"><a href="../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul></li>
			<li><h2>Рубрики</h2>
				<ul>
					<li class="cat-item cat-item-89"><a href="category/commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;">commands</a>
</li>
	<li class="cat-item cat-item-37"><a href="category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;">howto</a>
</li>
	<li class="cat-item cat-item-52"><a href="category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;">justread</a>
</li>
	<li class="cat-item cat-item-51"><a href="category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;">review</a>
</li>
	<li class="cat-item cat-item-3"><a href="category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;">techtalk</a>
</li>
	<li class="cat-item cat-item-71"><a href="category/tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;">tricks</a>
</li>
	<li class="cat-item cat-item-95"><a href="category/utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;">utilities</a>
</li>
	<li class="cat-item cat-item-44"><a href="category/whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;">whoisho</a>
</li>
	<li class="cat-item cat-item-1"><a href="category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;">новости</a>
</li>
	<li class="cat-item cat-item-387"><a href="category/opros.html" title="Просмотреть все записи в рубрике &laquo;опрос&raquo;">опрос</a>
</li>
	<li class="cat-item cat-item-8"><a href="category/translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;">переводы</a>
</li>
	<li class="cat-item cat-item-40"><a href="category/citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;">цитаты</a>
</li>
				</ul>
			</li>

			<li><h2>Архивы</h2>
				<ul>
					<li><a href='date/2018/01.html' title='Январь 2018'>Январь 2018</a></li>
	<li><a href='date/2015/10.html' title='Октябрь 2015'>Октябрь 2015</a></li>
	<li><a href='date/2015/04.html' title='Апрель 2015'>Апрель 2015</a></li>
	<li><a href='date/2015/03.html' title='Март 2015'>Март 2015</a></li>
	<li><a href='date/2015/01.html' title='Январь 2015'>Январь 2015</a></li>
	<li><a href='date/2014/12.html' title='Декабрь 2014'>Декабрь 2014</a></li>
	<li><a href='date/2014/11.html' title='Ноябрь 2014'>Ноябрь 2014</a></li>
	<li><a href='date/2014/10.html' title='Октябрь 2014'>Октябрь 2014</a></li>
	<li><a href='date/2014/09.html' title='Сентябрь 2014'>Сентябрь 2014</a></li>
	<li><a href='date/2014/08.html' title='Август 2014'>Август 2014</a></li>
	<li><a href='date/2014/07.html' title='Июль 2014'>Июль 2014</a></li>
	<li><a href='date/2014/06.html' title='Июнь 2014'>Июнь 2014</a></li>
	<li><a href='date/2014/05.html' title='Май 2014'>Май 2014</a></li>
	<li><a href='date/2014/04.html' title='Апрель 2014'>Апрель 2014</a></li>
	<li><a href='date/2014/03.html' title='Март 2014'>Март 2014</a></li>
	<li><a href='date/2014/02.html' title='Февраль 2014'>Февраль 2014</a></li>
	<li><a href='date/2014/01.html' title='Январь 2014'>Январь 2014</a></li>
	<li><a href='date/2013/12.html' title='Декабрь 2013'>Декабрь 2013</a></li>
	<li><a href='date/2013/11.html' title='Ноябрь 2013'>Ноябрь 2013</a></li>
	<li><a href='date/2013/10.html' title='Октябрь 2013'>Октябрь 2013</a></li>
	<li><a href='date/2013/09.html' title='Сентябрь 2013'>Сентябрь 2013</a></li>
	<li><a href='date/2013/08.html' title='Август 2013'>Август 2013</a></li>
	<li><a href='date/2013/07.html' title='Июль 2013'>Июль 2013</a></li>
	<li><a href='date/2013/06.html' title='Июнь 2013'>Июнь 2013</a></li>
	<li><a href='date/2013/05.html' title='Май 2013'>Май 2013</a></li>
	<li><a href='date/2013/04.html' title='Апрель 2013'>Апрель 2013</a></li>
	<li><a href='date/2013/03.html' title='Март 2013'>Март 2013</a></li>
	<li><a href='date/2013/02.html' title='Февраль 2013'>Февраль 2013</a></li>
	<li><a href='date/2013/01.html' title='Январь 2013'>Январь 2013</a></li>
	<li><a href='date/2012/12.html' title='Декабрь 2012'>Декабрь 2012</a></li>
	<li><a href='date/2012/11.html' title='Ноябрь 2012'>Ноябрь 2012</a></li>
	<li><a href='date/2012/10.html' title='Октябрь 2012'>Октябрь 2012</a></li>
	<li><a href='date/2012/09.html' title='Сентябрь 2012'>Сентябрь 2012</a></li>
	<li><a href='date/2012/08.html' title='Август 2012'>Август 2012</a></li>
	<li><a href='date/2012/07.html' title='Июль 2012'>Июль 2012</a></li>
	<li><a href='date/2012/06.html' title='Июнь 2012'>Июнь 2012</a></li>
	<li><a href='date/2012/05.html' title='Май 2012'>Май 2012</a></li>
	<li><a href='date/2012/04.html' title='Апрель 2012'>Апрель 2012</a></li>
	<li><a href='date/2012/03.html' title='Март 2012'>Март 2012</a></li>
	<li><a href='date/2012/02.html' title='Февраль 2012'>Февраль 2012</a></li>
	<li><a href='date/2012/01.html' title='Январь 2012'>Январь 2012</a></li>
	<li><a href='date/2011/12.html' title='Декабрь 2011'>Декабрь 2011</a></li>
	<li><a href='date/2011/11.html' title='Ноябрь 2011'>Ноябрь 2011</a></li>
	<li><a href='date/2011/10/index.html' title='Октябрь 2011'>Октябрь 2011</a></li>
	<li><a href='date/2011/09/index.html' title='Сентябрь 2011'>Сентябрь 2011</a></li>
	<li><a href='date/2011/08.html' title='Август 2011'>Август 2011</a></li>
	<li><a href='date/2011/07/index.html' title='Июль 2011'>Июль 2011</a></li>
	<li><a href='date/2011/06/index.html' title='Июнь 2011'>Июнь 2011</a></li>
	<li><a href='date/2011/05/index.html' title='Май 2011'>Май 2011</a></li>
	<li><a href='date/2011/04/index.html' title='Апрель 2011'>Апрель 2011</a></li>
	<li><a href='date/2011/03/index.html' title='Март 2011'>Март 2011</a></li>
	<li><a href='date/2011/02.html' title='Февраль 2011'>Февраль 2011</a></li>
	<li><a href='date/2011/01.html' title='Январь 2011'>Январь 2011</a></li>
	<li><a href='date/2010/12.html' title='Декабрь 2010'>Декабрь 2010</a></li>
	<li><a href='date/2010/11/index.html' title='Ноябрь 2010'>Ноябрь 2010</a></li>
	<li><a href='date/2010/10/index.html' title='Октябрь 2010'>Октябрь 2010</a></li>
	<li><a href='date/2010/09/index.html' title='Сентябрь 2010'>Сентябрь 2010</a></li>
	<li><a href='date/2010/08.html' title='Август 2010'>Август 2010</a></li>
	<li><a href='date/2010/07/index.html' title='Июль 2010'>Июль 2010</a></li>
	<li><a href='date/2010/06.html' title='Июнь 2010'>Июнь 2010</a></li>
	<li><a href='date/2010/05.html' title='Май 2010'>Май 2010</a></li>
	<li><a href='date/2010/04/index.html' title='Апрель 2010'>Апрель 2010</a></li>
	<li><a href='date/2010/03/index.html' title='Март 2010'>Март 2010</a></li>
	<li><a href='date/2010/02.html' title='Февраль 2010'>Февраль 2010</a></li>
	<li><a href='date/2010/01.html' title='Январь 2010'>Январь 2010</a></li>
	<li><a href='date/2009/12/index.html' title='Декабрь 2009'>Декабрь 2009</a></li>
	<li><a href='date/2009/11/index.html' title='Ноябрь 2009'>Ноябрь 2009</a></li>
	<li><a href='date/2009/10.html' title='Октябрь 2009'>Октябрь 2009</a></li>
	<li><a href='date/2009/09.html' title='Сентябрь 2009'>Сентябрь 2009</a></li>
	<li><a href='date/2009/08/index.html' title='Август 2009'>Август 2009</a></li>
	<li><a href='date/2009/07/index.html' title='Июль 2009'>Июль 2009</a></li>
	<li><a href='date/2009/06.html' title='Июнь 2009'>Июнь 2009</a></li>
	<li><a href='date/2009/05.html' title='Май 2009'>Май 2009</a></li>
	<li><a href='date/2009/04.html' title='Апрель 2009'>Апрель 2009</a></li>
	<li><a href='date/2009/03.html' title='Март 2009'>Март 2009</a></li>
	<li><a href='date/2009/02.html' title='Февраль 2009'>Февраль 2009</a></li>
	<li><a href='date/2009/01.html' title='Январь 2009'>Январь 2009</a></li>
	<li><a href='date/2008/12.html' title='Декабрь 2008'>Декабрь 2008</a></li>
	<li><a href='date/2008/11.html' title='Ноябрь 2008'>Ноябрь 2008</a></li>
	<li><a href='date/2008/10.html' title='Октябрь 2008'>Октябрь 2008</a></li>
	<li><a href='date/2008/09.html' title='Сентябрь 2008'>Сентябрь 2008</a></li>
	<li><a href='date/2008/08.html' title='Август 2008'>Август 2008</a></li>
	<li><a href='date/2008/03.html' title='Март 2008'>Март 2008</a></li>
	<li><a href='date/2008/02.html' title='Февраль 2008'>Февраль 2008</a></li>
	<li><a href='date/2007/12.html' title='Декабрь 2007'>Декабрь 2007</a></li>
	<li><a href='date/2007/11.html' title='Ноябрь 2007'>Ноябрь 2007</a></li>
	<li><a href='date/2007/10.html' title='Октябрь 2007'>Октябрь 2007</a></li>
	<li><a href='date/2007/09.html' title='Сентябрь 2007'>Сентябрь 2007</a></li>
	<li><a href='date/2007/08.html' title='Август 2007'>Август 2007</a></li>
	<li><a href='date/2007/07/index.html' title='Июль 2007'>Июль 2007</a></li>
	<li><a href='date/2007/06.html' title='Июнь 2007'>Июнь 2007</a></li>
	<li><a href='date/2007/05.html' title='Май 2007'>Май 2007</a></li>
				</ul>
			</li>

			
					</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="../feed">Entries (RSS)</a> and <a href="../comments/feed">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 16 queries. 0.155 seconds. -->
	</div>
</div> <!-- page -->
</body>
</html>
	
