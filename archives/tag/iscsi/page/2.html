<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>about NetApp   &raquo; iscsi</title>

<link rel="stylesheet" href="../../../../wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="about NetApp RSS Feed" href="../../../../feed" />
<link rel="pingback" href="../../../../xmlrpc.php.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.6" />

</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="../../../../index.html" title="about NetApp: Системы хранения данных как предмет разговора">about NetApp</a></h1>
		<p>Системы хранения данных как предмет разговора</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="../../../../index.html">
<input type="text" size="20" name="s" id="s" value="Поиск..."  onblur="if(this.value=='') this.value='Поиск...';" onfocus="if(this.value=='Поиск...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="navbar">
<ul id="nav">
	<li><a href="../../../../index.html">Home</a></li>
	<li class="page_item page-item-153"><a href="../../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content">

	
			<p>Posts tagged &#8216;iscsi&#8217;</p>

	 		
		<div class="navigation">
			<div class="alignleft"></div>
			<div class="alignright"><a href="../index.html">Next Entries &raquo;</a></div>
		</div>

						
			<div class="post" id="post-234">
				<h2 class="posttitle"><a href="../../../234/trackback.html" rel="bookmark" title="Permanent Link to Кризис - время искать оптимальные решения. Часть 2">Кризис - время искать оптимальные решения. Часть 2</a></h2>
				<div class="postmetadata">9 Апрель 2009, 7:29 <!-- от  --></div>
				<div class="postentry">
					<p>Почти всегда, начиная разговор с клиентом по поводу использования iSCSI вместо Fibre Channel, раз за разом я сталкиваюсь с одним упорным возражением:</p>
<p><i>&#8220;Ну&#8230; хм&#8230; Это же медленно!&#8221;</i></p>
<p>Ну, казалось бы, очевидно: FC это 4Gb/s, а iSCSI - 1Gb/s, &#8220;один&#8221; ведь в четыре раза меньше, чем  &#8220;четыре&#8221; ведь так?</p>
<p>Давайте разберем что здесь на самом деле &#8220;медленно&#8221; и медленно ли.</p>
<p>Для определенности давайте рассматривать какую-нибудь реальную задачу.</p>
<p>Вот пример:<br />
Требуется система хранения данных для консолидации данных 4 серверов, 1 файловый сервер и 3 сервера баз данных. Необходимо обеспечить двухпутевое отказоустойчивое подключение.</p>
<p>Но сперва немного теории.</p>
<p>Я уже писал на тему странного спутывания в восприятии совершенно разных параметров канала передачи данных: &#8220;полосы пропускания&#8221; (анг. &#8220;bandwith&#8221;) и &#8220;скорости&#8221; (анг. &#8220;speed&#8221;).<br />
Для интересующихся подробностями просто сошлюсь на <a href="../../../38/trackback.html">ранее опубликованный пост</a>, а остальным перескажу вкратце.<br />
&#8220;Скорость&#8221; канала передачи данных равна скорости света в соответствующей среде, и она постоянная, вне зависимости, используем мы 10Mb/s Ethernet или 16GB/s Infiniband.<br />
Переводя на аналогии из &#8220;повседневной жизни&#8221; это ограничение скорости на дороге - 100 km/h.<br />
Все автомобили по дороге передвигаются с разрешенной скоростью, и ее не превышают по причине физического ее ограничения на уровне физических констант.</p>
<p>В чем же отличие?<br />
В полосе пропускания.<br />
Полоса пропускания - это &#8220;рядность автострады&#8221;, это способность пропустить через себя &#8220;много данных&#8221; сразу. Но многорядность автострады никак не ускоряет движение одинокого автомобиля, проезжающего раз в минуту.</p>
<p>Несколько парадоксальный вывод, который я делал в том посте требует некоторого волевого усилия для осознания.<br />
Неважно, насколько &#8220;быстрым&#8221; (с какой ширины полосой пропускания) интерфейсом соединена ваша система хранения с сервером, если объемы обработки данных этим сервером не достигают потолка имеющейся полосы пропускания.</p>
<p>Если скорость считывания и записи сервера с системы хранения, например, не превышают 10 Мбит/с, то <b>совершенно неважно для быстродействия</b>, используете ли вы 100Mbit/s Fast Ethernet, FC, Infiniband, или подставьте_любой_баззворд_из_презентации.<br />
Если вы не используете даже имеющуюся полосу пропускания целиком, то расширение ее &#8220;неиспользуемой части&#8221; в 10 раз не приведет к сколь-нибудь значимому увеличению реального быстродействия системы.</p>
<p><i>Да, я знаю про разницу в латентности разных интерфейсов, о перспективности того или иного решения в будущем, о функциональных возможностях, давайте не станем углубляться в детали для того, чтобы рассмотреть лес за деревьями, именно он в данном случае важен, а не теоретические вариации, укладывающиеся в статистический разброс 5%</i></p>
<p>Вернемся к нашей практической системе хранения для 4 серверов.<br />
В ходе предварительного анализа производительности, наиболее нагруженный сервер баз данных показал, по данным Windows Performance Monitor, следующие показатели:</p>
<p>Disk Read bytes/s   2700902/Average   63587550/Max<br />
Disk Write bytes/s   736811/Average    1616167/Max </p>
<p>То есть, самый нагруженный сервер системы, в максимуме нагрузки, достигал порога чтения всего, примерно, в 60-65 мегабайт в секунду!<br />
Это всего лишь (в пике дневной нагрузки, прошу заметить!) около 55-60% от полосы пропускания одного интерфейса Gigabit Ethernet, или, в случае типовой нагрузки в 2.5-3MB/s, всего около 2-3% от полосы пропускания GigE!</p>
<p>Возможно в данном случае мы упираемся в предел возможности локальных дисков серверов, на смену которым призвана встать система хранения, и сервер имеет большой запас по производительности, если мы обеспечим ему широкую полосу пропускания для данных? Но нет, показатель Disk Read/Write Queue редко когда превышает значение 8-9, что означает относительно слабо нагруженную дисковую подсистему, значит в дисковую производительность сервер практически не упирается.</p>
<p>??так, давайте посчитаем. В случае нашей рассмотренной выше небольшой IT-системы из четырех серверов, в случае выбора FC нам необходимы:<br />
1. по два однопортовых или по одному двухпортовому FC HBA на каждый сервер - 8 однопортовых или 4 двухпортовых (QLogic QLE2462 2port - 700$ * 4 = 2400$)<br />
2. два FC-коммутатора (недостаточно встроенных FC-портов для подключения всех 6 линков) допустим, пусть это будут массовые и недорогие Brocade 200E - 4000$ * 2 = 8000$.<br />
3. Лицензия на FC (в зависимости от выбранного массива цена варьируется, например для системы типа FAS2050 это около 1200$ для одноконтроллерной и 2400$ для двухконтроллерной, отказоустойчивой, &#8220;кластерной&#8221; системы)<br />
4. ПО поддержки многопутевости (стоит заметить, что в поставке Windows средство обеспечения многопутевости MPIO не поддерживает FC, только iSCSI, и использование MPIO с FC требует установки дополнительного программного модуля, так называемого DSM, обычно предлагаемого поставщиком решения системы хранения, он недорог, но тоже не 0$)<br />
5. Кабеля FC optical LC-LC для подключения серверов к коммутаторам (8 шт) и коммутаторов к массиву (2 шт) (LC-LC optical 5m - 50$ * 10 = 500$).<br />
6. затраты на монтаж и настройку (варьируется).<br />
Кажется ничего не забыл :)</p>
<p>??того, нетрудно видеть, только на возможность использования протокола Fibre Channel мы потратим по меньшей мере около 12-15 тысяч долларов! При этом, как я показал выше, эти 12 тысяч совершенно не увеличат производительность получившейся системы. Они потрачены исключительно &#8220;на понты&#8221;, на возможность бросить в разговоре с коллегами &#8220;а, мы тут файбер ченэл себе прикупили&#8221;. :)<br />
&#8220;Хороший понт дороже денег&#8221;, не спорю. ;) Но 12 тысяч это 12 тысяч. Тем более в наше непростое время на дворе.</p>
<p>Но если бы мы использовали эти, вполне существенные деньги, на что-нибудь действительно дающее реальный эффект, например на пару дополнительных серверов для других задач, <del>премию сисадминам</del> оплату услуг хорошего программиста-оптимизатора баз данных, или, например, в случае системы хранения данных, на дополнительные 10-12 дисков, то <b>за те же деньги</b> мы бы получили (см. ранее про IOPS дисков) систему хранения по меньшей мере на 1800-2500 IOPS быстрее!</p>
<p>?? только за счет отказа от &#8220;крутого&#8221;, &#8220;понтового&#8221;, но избыточного, и поэтому совершенно &#8220;неполезного&#8221; в данном случае Fibre Channel.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../index.html" rel="tag">iscsi</a>, <a href="../../netapp/index.html" rel="tag">netapp</a>, <a href="../../technology.html" rel="tag">technology</a><br />					Раздел: <a href="../../../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;" rel="category tag">justread</a>,  <a href="../../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../234/trackback.html#comments" title="Комментарий к записи Кризис - время искать оптимальные решения. Часть 2">Комментарии (3)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-168">
				<h2 class="posttitle"><a href="../../../168/trackback.html" rel="bookmark" title="Permanent Link to Публикации на русском языке">Публикации на русском языке</a></h2>
				<div class="postmetadata">22 Сентябрь 2008, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p><a href="http://www.vd.verysell.ru/files/ie/330_5_DOCUMENT_space_reclamation.pdf">Статья &#8220;Уменьшение стоимости хранения за счет экономии дискового пространства&#8221; о использовании сравнительно новой и все еще пока малоизвестной опции Space Reclamation в SnapDrive.</a></p>
<p><a href="http://www.vd.verysell.ru/files/ie/330_4_DOCUMENT_oracle_on_nfs.pdf">Статья &#8220;Oracle на NFS&#8221;, о некоторых аспектах все еще пока не слишком распространенного способа хранения данных баз Oracle на NAS-системе, с использованием NFS.</a></p>
<p><a href="http://www.vd.verysell.ru/files/ie/330_2_DOCUMENT_netapp_dedup_&#038;_vmware_dr.pdf">О плюсах и преимуществах использования дедупликации NetApp в задачах построения катастрофоустойчивых конфигураций на VMware Virtual Infrastructure.</a></p>
<p><a href="http://www.vd.verysell.ru/files/ie/330_6_DOCUMENT_Exchange_2007-LLC-CCR.pdf">О некоторых аспектах отказоустойчивого использования Exchange 2007 и его встроенных средств репликации LCR и CCR.</a></p>
<p><a href="http://www.vd.verysell.ru/files/ie/330_7_DOCUMENT_Oracle_on_FC.pdf">Вторая часть серии про работу Oracle на NetApp, на этот раз на FC.</a></p>
<p><a href="http://www.vd.verysell.ru/files/ie/330_8_DOCUMENT_Storage_block_alignment_with_VMware.pdf">Руководство по правильному выравниванию структур создаваемых виртуальных дисков виртуальных машин в среде VMware, относительно блоков данных систем хранения NetApp. </a></p>
<p><a href="http://www.vd.verysell.ru/files/ie/330_12_DOCUMENT_MS_Exch_SP1_BP.PDF">Руководство Best Practices по развертыванию хранилища MS Exchange 2007 SP1 на системе хранения NetApp.</a></p>
<p><a href="http://www.vd.verysell.ru/files/ie/330_11_DOCUMENT_Oracle_on_NetApp_Part_III.PDF">Статья о том, почему при использовании Oracle на системах NetApp протокол доступа, FC, iSCSI или NFS, на самом деле не важен, и как добиться этого.</a></p>
<p><a href="http://www.vd.verysell.ru/files/ie/330_10_DOCUMENT_NetBackup_Vault_Integration_with_NetApp_VTL.PDF">Руководство по интеграции средств системы NetApp VTL и ПО NetBackup Vault.</a></p>
<p><a href="http://www.vd.verysell.ru/files/ie/330_13_DOCUMENT_A-SIS%20Comes%20of%20Age.pdf">Статья &#8220;A-SIS созрела&#8221;, о том, как устроена, как работает, и что может вам дать технология дедупликации в системах хранения NetApp.</a></p>
<p><a href="http://www.vd.verysell.ru/files/ie/330_16_DOCUMENT_Tackle%20the%20Top%20Three%20VMware%20Backup%20Challenges.pdf">Статья о трех задачах резервного копирования в VMware, и как можно их решить с использованием средств предлагаемых NetApp. </a></p>
<p><a href="http://www.vd.verysell.ru/files/ie/330_14_DOCUMENT_Choosing%20the%20Right%20Backup%20Technology.pdf">О использовании систем хранения NetApp для резервного копирования Disk-to-Disk, и какие преимущества имеет такая система перед традиционными решениями.</a></p>
<p><a href="http://www.vd.verysell.ru/files/ie/330_15_DOCUMENT_FAS3100%20-%20R.pdf">О том, как создавалась FAS3100, какие цели были поставлены, и как удалось создать экономически эффективную систему хранения midrange-класса.</a></p>
<p>А подписаться на получение новых выпусков можно <a href="http://www.vd.verysell.ru/suppliers/netapp/documentation/">на странице компании Verysell Distribution</a>.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../backup/index.html" rel="tag">backup</a>, <a href="../../deduplication/index.html" rel="tag">deduplication</a>, <a href="../../documents.html" rel="tag">documents</a>, <a href="../../exchange.html" rel="tag">exchange</a>, <a href="../../fc.html" rel="tag">fc</a>, <a href="../index.html" rel="tag">iscsi</a>, <a href="../../netapp/index.html" rel="tag">netapp</a>, <a href="../../nfs/index.html" rel="tag">nfs</a>, <a href="../../oracle/index.html" rel="tag">oracle</a>, <a href="../../restore.html" rel="tag">restore</a>, <a href="../../snapdrive.html" rel="tag">snapdrive</a>, <a href="../../vmware/index.html" rel="tag">vmware</a><br />					Раздел: <a href="../../../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;" rel="category tag">justread</a>,  <a href="../../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../168/trackback.html#comments" title="Комментарий к записи Публикации на русском языке">Комментарии (2)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-167">
				<h2 class="posttitle"><a href="../../../167/trackback.html" rel="bookmark" title="Permanent Link to VMware и протоколы. Любопытная аналитика.">VMware и протоколы. Любопытная аналитика.</a></h2>
				<div class="postmetadata">18 Сентябрь 2008, 10:47 <!-- от  --></div>
				<div class="postentry">
					<p>Любопытные цифры приведены в аналитическом отчете ESG (Enterprise Strategy Group Inc.), опубликованном в начале этого года (<a href="http://www.netapp.com/us/library/analyst-reports/ar1055.html">доступен на сайте NetApp</a>).</p>
<p>Более половины (<strong>54%</strong>) из 329 опрошенных ответило, что, после внедрения решеня серверной виртуализации, объемы хранения увеличились (причем ответ &#8220;<em>свыше 20%</em>&#8221; дали <strong>18%</strong> от этого количества).</p>
<p><strong>68%</strong> ответивших считают, что FibreChannel есть <em>&#8220;технология, предлагающая максимальную производительность&#8221;</em> (и всего <strong>22%</strong> ответили так для NFS).</p>
<p>Всего <strong>19%</strong> считают о NFS, что она <em>&#8220;наилучшим образом оптимизирована для задач виртуализации серверов&#8221;</em> (против <strong>49%</strong> FC и <strong>45%</strong> iSCSI) </p>
<p>При этом среди тех, кто уже использует то или иное решение, ситуация обратная.<br />
<em>&#8220;Мы уже используем эту технологию и она нас полностью устраивает&#8221;</em> <strong>65%</strong> назвали NFS, и уже только <strong>53%</strong> FC.  </p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../fc.html" rel="tag">fc</a>, <a href="../index.html" rel="tag">iscsi</a>, <a href="../../nfs/index.html" rel="tag">nfs</a>, <a href="../../vmware/index.html" rel="tag">vmware</a><br />					Раздел: <a href="../../../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;" rel="category tag">justread</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../167/trackback.html#comments" title="Комментарий к записи VMware и протоколы. Любопытная аналитика.">Комментарии (3)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-155">
				<h2 class="posttitle"><a href="../../../155/trackback.html" rel="bookmark" title="Permanent Link to «Передний край» – iWARP">«Передний край» – iWARP</a></h2>
				<div class="postmetadata">20 Август 2008, 7:43 <!-- от  --></div>
				<div class="postentry">
					<p><strong>Что есть что на горизонте.</strong></p>
<p>Стремительное продвижение технологий в повседневность IT-служб иногда поразительно. Сегодня, когда интерфейсы Gigabit Ethernet устанавливаются уже даже в ноутбуки, реальностью становится 10Gigabit Ethernet, который еще пару лет назад был чем-то из области лабораторных изысканий. Что же принесет нам этот виток скоростной гонки интерфейсов – давайте посмотрим.</p>
<p><strong>RDMA</strong></p>
<p><strong>RDMA </strong>это <strong>Remote DMA</strong>. Для тех, кто за заботами сегодняшнего дня забыл об основах, позволю себе немного поликбезничать.<br />
<strong>DMA</strong>, или <strong>Direct Memory Access</strong>, это классическая технология ввода-вывода данных с помощью специального программируемого контроллера DMA – прямого доступа к памяти.</p>
<p>Ввод-вывод данных, одна из основных операций в вычислительной системе, может осуществляться разными путями. Например путем процессорных операций. Процессор берет байт из порта ввода и заносит его в ячейку памяти. ??ли наоборот, считывает его из ячейки памяти и отправляет в порт вывода. Ясно видно, что эти операции чрезвычайно загружают собой процессор, ведь такое действие надо совершить с каждым байтом (или вернее «словом», оно может быть и многобайтным).</p>
<p>Проблема с загрузкой процессора при вводе-выводе была решена использованием процедуры DMA – Direct Memory Access. Процессор единожды сообщает специальному контроллеру DMA, с какого или в какой адрес в памяти он желает осуществить перемещение данных, а контроллер исполняет, по завершении уведомляя процессор об исполнении. Получает или передает байты жестким дискам, выводит массивы данных в видеоконтроллер или превращает «цифру» в звук.<br />
Результат обычно весьма впечатляющ. IT-шники со стажем должны помнить, какой эффект давал переход жестких дисков персональных компьютеров с режима PIO (Programmed Input-Output) к DMA (и в дальнейшем к UltraDMA), степень загрузки процессора на интенсивных дисковых операциях снижалась в разы.</p>
<p>Но DMA это лишь локальные операции, проще говоря, возможные только в области памяти и устройств одного компьютера. А что если сделать технологию DMA возможной для разных и между компьютерами?<br />
Так родилась идея <strong>RDMA </strong>– <strong>Remote Direct Memory Access</strong>.</p>
<p>Технология эта отнюдь не нова. За ее разработкой следит представительный <nofollow><a href="http://www.rdmaconsortium.org/home">RDMA Consortium</a></nofollow>, куда входят многие гранды индустрии, такие как IBM, Cisco, NetApp, EMC, HP, Intel, Microsoft, общим числом около 50. Она шумела как новинка еще в 1998 году, а в 2003 году RDMA Consortium объявил о завершении всех запланированных спецификаций. Однако множество проблем в реализации ограничили ее применение high-end HPC (high-performance computing) системами. RDMA той или иной форме применялась на системах Cray, Silicon Graphics и ряде других, столь же легендарных «небожителей».<br />
Однако шли годы, и то, что было уделом экспериментальных и сверхвысокопроизводительных вычислений стало нашей повседневностью, вот и до 10G Ethernet очередь дошла.</p>
<p>Основной идеей, родившей и развивающей RDMA как концепцию, была «размещать нужные данные непосредственно в память приложения», минуя многочисленное каскадное буферирование «из буферов сетевого адаптера в буфера сетевого протокола, из него в буфера OS, из них в буфера дисков, и так далее». ??менно поэтому в приложении к RDMA часто используется термин «zero-copy», то есть «отсутствие копирования», имея ввиду, конечно же, вот такое вот многократное промежуточное копирование между источником и получателем данных.</p>
<p>Наиболее известной реализацией RDMA и его «zero-copy» в применении к системам передачи данных на сегодняшний день является Infiniband, разработанный в соответствии с этими требованиями. На сегодняшний день это наиболее известная сетевая система для высокопроизводительных кластерных интерконнектов, в свое время, за счет своей открытости и меньшей цены, вытеснившая из этой области проперитарный Myrinet. </p>
<p><strong>iSCSI – SCSI over IP</strong><br />
Я уже не раз писал о iSCSI, и останавливаться подробно наверное нет смысла. Сегодня уже все так или иначе находящиеся в теме систем хранения знают что это. <strong>iSCSI </strong>это способ передавать обычные и привычные SCSI-пакеты «упакованными» (модное словечко: «инкапсулированными») в IP-пакеты, и транспортировать их в любой среде передачи IP, например по Ethernet-сети. Тем самым между сервером и его жесткими дисками может находиться не традиционный 68-жильный кабель WideSCSI, а сетевые карты, ethernet-коммутаторы, провода Cat5, СКС, и прочие привычные скорее для «сетевиков» вещи. В наше время, когда в области передачи данных все явственнее происходит конвергенция «все в Ethernet-провод», когда даже будущее такого консервативного протокола как FibreChannel его основным локомотивом, компанией Bocade, видится, по ее заявлениям, в виде <strong>FCoE – FibreChannel-over-Ethernet</strong>, ничего удивительного, что iSCSI нашел себе сегодня широчайшее применение. </p>
<p><strong>TOE – TCP Offload Engine</strong><br />
iSCSI, как протокол в целом, состоит, по сути, из двух независимых частей. Также отдельно они, как правило, и реализуются в оборудовании. Одна часть – «SCSI», и все относящееся к этому протоколу. Вторая – «i» - TCP/IP и все касающееся его.<br />
Как известно, iSCSI может быть реализован полностью программно, и, в ряде случаев это совсем неплохой выбор, недорогой и исключительно гибкий. При этом задачи поддержки протокола осуществляет специальная программа – <strong>iSCSI Initiator</strong>, которые сейчас существуют во всех распространенных операционных системах. Эта программа создает в системе «виртуальный SCSI-адаптер», с которым могут обычным образом взаимодействовать прикладные программы. В дальнейшем она производит на центральном процессоре системы собственно задачи инкапсуляции SCSI-пакетов в IP-пакеты и отправку их драйверу сетевого интерфейса Ethernet, как обычное приложение или драйвер.</p>
<p>Такая модель дает нам беспрецедентную гибкость реализации, однако, очевидно, создает дополнительную нагрузку на центральный процессор, которую, при скоростях вплоть до Gigabit Ethernet еще можно обычно игнорировать, но на скоростях 10Gigabit Ethernet это уже становится сложно. Поэтому для 10GigE-систем как правило применяются те или иные «аппаратные» реализации.</p>
<p>«Аппаратизация» iSCSI может быть осуществлена раздельно по рассмотренным выше частям. Мы можем сделать сетевую карту, которая будет самостоятельно производить всю TCP/IP-шную рутину, такую как расчет контрольных сумм и сборка фрагментов, такое устройство называется <strong>TCP Offload Engine – TOE</strong>. При этом «SCSI-адаптер» в системе у нас остается виртуальным. </p>
<p>Либо сделать полную реализацию обоих частей протокола, то есть аппаратный SCSI-адаптер, на выходе которого будет не WideSCSI-разъем, а сетевой интерфейс, медный или оптический. Реализация же самого протокола для системы и ее приложений, как и ранее, будет для приложения и операционной системы полностью скрыта.</p>
<p>Как правило адаптеры 10Gbit Ethernet имеют в себе либо TCP Offload Engine, сохраняя программную реализацию SCSI, на CPU системы, в драйвере. Либо полную аппаратную реализацию. Такие адаптеры принято называть, как и в FibreChannel-системах – <strong>HBA – Host Bus Adapter</strong>.</p>
<p><strong>iWARP</strong><br />
<strong>iWARP </strong>это <strong>Internet Wide Area RDMA Protocol </strong>– протокол работы RDMA по IP-сетям, основанный на концепциях Virtual Inerface Architecture, и, в определенном смысле, может рассматриваться как некий «Infiniband-over-IP».</p>
<p>С того момента, когда возросшие скорости Ethernet-сетей стали явной проблемой для чисто программной реализации TCP/IP, разработчики задумались над методами разгрузки процессоров, и одним из них стал TOE – TCP Offload Engine – аппаратная реализация TCP/IP на микросхеме контроллера ethernet-адаптера. Такое решение значительно разгружает центральный процессор от задач поддержки передачи данных, которая теперь, в значительной мере, может осуществляться самим контроллером сети. Особенно это стало важно при увеличении скорости и переходе к 10Gbit Ethernet, работа над такими объемами может серьезно нагрузить и довольно мощный современный процессор. А ведь у него есть и другие задачи, кроме как считать контрольные суммы IP-пакетов. </p>
<p>Чаще всего с помощью iWARP передаются такие «вышележащие» протоколы, как <strong>SCSI RDMA Protocol </strong>(SRP), <strong>iSCSI Extensions for RDMA</strong> (iSER), <strong>Sockets Direct Protocol</strong> (SDP) и <strong>NFS-over-RDMA</strong>.<br />
Как видите, интерес Network Appliance к данной технологии понятен и объясним.</p>
<p><strong>iSER – iSCSI Extensions for RDMA</strong> - это расширение протокола iSCSI, позволяющее ему работать по сетям, предоставляющим RDMA-сервис, например по Infiniband или iWARP. Он позволяет передавать данные непосредственно из и в буфер данных SCSI, минуя многочисленные промежуточные копирования данные из одного буфера в другой при традиционной обработке и передаче данных.<br />
Целью создания <strong>iSER </strong>была попытка избежать проблемы фрагментации TCP при работе «классического» iSCSI, который, как вы помните, унаследовал от TCP/IP сетей, кроме массы полезного, и неприятную проблему фрагментации, которая, на больших скоростях передачи, характерных для 10Gbit Ethernet может приводить к заметному ухудшению latency. Суть проблемы заключается в том, что, при передаче, согласно природе TCP, пакеты могут приходить получателю в произвольном порядке, и дело получателя расставить их в нужном порядке, прежде чем передавать на обработку. Однако, пока получателю не придет пакет «номер два», он не может передать в SCSI буфер уже принятые пакеты номер «один», «три», «четыре» … «десять», которые вынуждены дожидаться прихода заплутавшего по сети «второго».<br />
Вследствие этого возможны плохопредсказуемые задержки, которые были незначительны на небольших скоростях, но уже не могут игнорироваться на высоких.<br />
Для решения этой проблемы <strong>iSER </strong>использует «zero-copy»-возможности RDMA вместо обычного способа инкапсуляции в TCP.<br />
В качестве протокола передачи на транспортном уровне может использоваться, кроме «нативного» <strong><nofollow><a href="http://en.wikipedia.org/wiki/Sockets_Direct_Protocol">SDP </a></nofollow></strong>– Socket Direct Protocol, и специально разработанный для потоковых передач протокол <strong><nofollow><a href="http://en.wikipedia.org/wiki/Stream_Control_Transmission_Protocol">SCTP </a></nofollow></strong>– Stream Control Transmission Protocol (RFC4960), являющийся функционально объединяющим преимущества TCP и UDP для целей передачи «потоковых» данных. </p>
<p>Первоначально этот протокол разрабатывался для целей передачи телефонии через IP, но прекрасно подошел и для других потоковых нужд современной Сети. Поддержка SCTP широко присутствует во множестве распространенных операционных системах, например IBM AIX v5, Cisco IOS v12, FreeBSD v7, Linux 2.4/2.6, HP-UX, Sun Solaris 10.<br />
RDMA и NetApp</p>
<p>Компанию <strong>NetApp </strong>и <strong>RDMA </strong>связывает многое. NetApp является одним из учредителей вышеупомянутого <strong>RDMA Consortium</strong>, и еще в 2002 году начала продавать любопытный продукт для своих систем хранения - <strong>DAFS Database Accelerator</strong>, решение, базирующееся на протоколе <strong>DAFS – Direct Access File System</strong>. Это RDMA-based протокол, ориентированный на работу с высокопроизводительными базами данных.<br />
Однако, несмотря на хорошие бенчмарки, согласно которым доступ к сетевому хранилищу NFSv4 через сетевой интерфейс (использовалась специальная карта Emulex VirtualInterface) превосходил по параметрам доступ к локальным дискам системы, продукт не стал бестселлером, и вскоре незаметно исчез из прайс-листа, по видимому придя на рынок слишком рано.</p>
<p>Но сегодня продукты c RDMA появляются на рынке, используя уже широко и активно распространяющиеся 10Gbit Ethernet-системы. Среди их производителей стоит назвать, например, такие имена, как <strong>Chelsio Communications</strong>, производящий такой интересный продукт, как <strong>Chelsio S310SR</strong> – 10G-адаптер с TCP Offload Engine, аппаратным iSCSI, виртуализацией и RDMA. Причем цена за пару, в так называемом <nofollow><a href="http://chelsio.com/products_10g_adapters.html">Evaluation Kit </a></nofollow>на сайте производителя, показана ниже чем 2000$ за карты с SR optical interface и ниже 1500$ за карты с «медным» CX4.<br />
Существуют и версии в «мезонинном» исполнении, для установки в blade-системы, например в HP Type II Blade Systems или IBM Blade Center H.</p>
<p>Любопытно будет также ознакомиться с тестами и бенчмарками. Они, хотя и «вендорские бенчмарки», относиться к которым надо достаточно осмотрительно, но показывают потенциальные возможности новой технологии.</p>
<p><strong><nofollow><a href="http://www.chelsio.com/assetlibrary/products/NFS_RDMA_IB_iWARP.pdf">Experiences with NFS over IB and iWARP RDMA</a></nofollow></strong><br />
<em>OpenFabric Workshop, Sonoma, CA<br />
May 1, 2007</em></p>
<p><strong><nofollow><a href="http://www.chelsio.com/assetlibrary/products/Cluster_Symposium_2005_Presenta.pdf">InfiniBand and 10-Gigabit Ethernet for I/O in Cluster Computing</a></nofollow></strong><br />
<em>July 26-28 Cluster Symposium 2005</em></p>
<p><strong><nofollow><a href="http://www.chelsio.com/assetlibrary/products/HotInterconnect_2005.pdf">Performance Characterization of a 10-Gigabit Ethernet TOE</a></nofollow></strong></p>
<p><strong><nofollow><a href="http://www.chelsio.com/assetlibrary/products/Cluster_2005_Techical_Report_OS.pdf">Head-to-TOE Evaluation of High-Performance Sockets over Protocol Ofﬂoad Engines</a></nofollow></strong></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../10g.html" rel="tag">10G</a>, <a href="../index.html" rel="tag">iscsi</a>, <a href="../../netapp/index.html" rel="tag">netapp</a>, <a href="../../rdma.html" rel="tag">rdma</a>, <a href="../../technology.html" rel="tag">technology</a>, <a href="../../techtalk/index.html" rel="tag">techtalk</a><br />					Раздел: <a href="../../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../155/trackback.html#comments" title="Комментарий к записи «Передний край» – iWARP">Комментарии (8)</a>									 </div>
			</div>
	
		
		<div class="navigation">
			<div class="alignleft"></div>
			<div class="alignright"><a href="../index.html">Next Entries &raquo;</a></div>
		</div>
		
	
	</div>
	<div id="sidebar">
		<ul>
			
			
			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Автор</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			<li class="pagenav"><h2>Страницы</h2><ul><li class="page_item page-item-153"><a href="../../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul></li>
			<li><h2>Рубрики</h2>
				<ul>
					<li class="cat-item cat-item-89"><a href="../../../category/commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;">commands</a>
</li>
	<li class="cat-item cat-item-37"><a href="../../../category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;">howto</a>
</li>
	<li class="cat-item cat-item-52"><a href="../../../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;">justread</a>
</li>
	<li class="cat-item cat-item-51"><a href="../../../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;">review</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;">techtalk</a>
</li>
	<li class="cat-item cat-item-71"><a href="../../../category/tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;">tricks</a>
</li>
	<li class="cat-item cat-item-95"><a href="../../../category/utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;">utilities</a>
</li>
	<li class="cat-item cat-item-44"><a href="../../../category/whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;">whoisho</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;">новости</a>
</li>
	<li class="cat-item cat-item-387"><a href="../../../category/opros.html" title="Просмотреть все записи в рубрике &laquo;опрос&raquo;">опрос</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../../category/translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;">переводы</a>
</li>
	<li class="cat-item cat-item-40"><a href="../../../category/citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;">цитаты</a>
</li>
				</ul>
			</li>

			<li><h2>Архивы</h2>
				<ul>
					<li><a href='../../../date/2018/01.html' title='Январь 2018'>Январь 2018</a></li>
	<li><a href='../../../date/2015/10.html' title='Октябрь 2015'>Октябрь 2015</a></li>
	<li><a href='../../../date/2015/04.html' title='Апрель 2015'>Апрель 2015</a></li>
	<li><a href='../../../date/2015/03.html' title='Март 2015'>Март 2015</a></li>
	<li><a href='../../../date/2015/01.html' title='Январь 2015'>Январь 2015</a></li>
	<li><a href='../../../date/2014/12.html' title='Декабрь 2014'>Декабрь 2014</a></li>
	<li><a href='../../../date/2014/11.html' title='Ноябрь 2014'>Ноябрь 2014</a></li>
	<li><a href='../../../date/2014/10.html' title='Октябрь 2014'>Октябрь 2014</a></li>
	<li><a href='../../../date/2014/09.html' title='Сентябрь 2014'>Сентябрь 2014</a></li>
	<li><a href='../../../date/2014/08.html' title='Август 2014'>Август 2014</a></li>
	<li><a href='../../../date/2014/07.html' title='Июль 2014'>Июль 2014</a></li>
	<li><a href='../../../date/2014/06.html' title='Июнь 2014'>Июнь 2014</a></li>
	<li><a href='../../../date/2014/05.html' title='Май 2014'>Май 2014</a></li>
	<li><a href='../../../date/2014/04.html' title='Апрель 2014'>Апрель 2014</a></li>
	<li><a href='../../../date/2014/03.html' title='Март 2014'>Март 2014</a></li>
	<li><a href='../../../date/2014/02.html' title='Февраль 2014'>Февраль 2014</a></li>
	<li><a href='../../../date/2014/01.html' title='Январь 2014'>Январь 2014</a></li>
	<li><a href='../../../date/2013/12.html' title='Декабрь 2013'>Декабрь 2013</a></li>
	<li><a href='../../../date/2013/11.html' title='Ноябрь 2013'>Ноябрь 2013</a></li>
	<li><a href='../../../date/2013/10.html' title='Октябрь 2013'>Октябрь 2013</a></li>
	<li><a href='../../../date/2013/09.html' title='Сентябрь 2013'>Сентябрь 2013</a></li>
	<li><a href='../../../date/2013/08.html' title='Август 2013'>Август 2013</a></li>
	<li><a href='../../../date/2013/07.html' title='Июль 2013'>Июль 2013</a></li>
	<li><a href='../../../date/2013/06.html' title='Июнь 2013'>Июнь 2013</a></li>
	<li><a href='../../../date/2013/05.html' title='Май 2013'>Май 2013</a></li>
	<li><a href='../../../date/2013/04.html' title='Апрель 2013'>Апрель 2013</a></li>
	<li><a href='../../../date/2013/03.html' title='Март 2013'>Март 2013</a></li>
	<li><a href='../../../date/2013/02.html' title='Февраль 2013'>Февраль 2013</a></li>
	<li><a href='../../../date/2013/01.html' title='Январь 2013'>Январь 2013</a></li>
	<li><a href='../../../date/2012/12.html' title='Декабрь 2012'>Декабрь 2012</a></li>
	<li><a href='../../../date/2012/11.html' title='Ноябрь 2012'>Ноябрь 2012</a></li>
	<li><a href='../../../date/2012/10.html' title='Октябрь 2012'>Октябрь 2012</a></li>
	<li><a href='../../../date/2012/09.html' title='Сентябрь 2012'>Сентябрь 2012</a></li>
	<li><a href='../../../date/2012/08.html' title='Август 2012'>Август 2012</a></li>
	<li><a href='../../../date/2012/07.html' title='Июль 2012'>Июль 2012</a></li>
	<li><a href='../../../date/2012/06.html' title='Июнь 2012'>Июнь 2012</a></li>
	<li><a href='../../../date/2012/05.html' title='Май 2012'>Май 2012</a></li>
	<li><a href='../../../date/2012/04.html' title='Апрель 2012'>Апрель 2012</a></li>
	<li><a href='../../../date/2012/03.html' title='Март 2012'>Март 2012</a></li>
	<li><a href='../../../date/2012/02.html' title='Февраль 2012'>Февраль 2012</a></li>
	<li><a href='../../../date/2012/01.html' title='Январь 2012'>Январь 2012</a></li>
	<li><a href='../../../date/2011/12.html' title='Декабрь 2011'>Декабрь 2011</a></li>
	<li><a href='../../../date/2011/11.html' title='Ноябрь 2011'>Ноябрь 2011</a></li>
	<li><a href='../../../date/2011/10/index.html' title='Октябрь 2011'>Октябрь 2011</a></li>
	<li><a href='../../../date/2011/09/index.html' title='Сентябрь 2011'>Сентябрь 2011</a></li>
	<li><a href='../../../date/2011/08.html' title='Август 2011'>Август 2011</a></li>
	<li><a href='../../../date/2011/07/index.html' title='Июль 2011'>Июль 2011</a></li>
	<li><a href='../../../date/2011/06/index.html' title='Июнь 2011'>Июнь 2011</a></li>
	<li><a href='../../../date/2011/05/index.html' title='Май 2011'>Май 2011</a></li>
	<li><a href='../../../date/2011/04/index.html' title='Апрель 2011'>Апрель 2011</a></li>
	<li><a href='../../../date/2011/03/index.html' title='Март 2011'>Март 2011</a></li>
	<li><a href='../../../date/2011/02.html' title='Февраль 2011'>Февраль 2011</a></li>
	<li><a href='../../../date/2011/01.html' title='Январь 2011'>Январь 2011</a></li>
	<li><a href='../../../date/2010/12.html' title='Декабрь 2010'>Декабрь 2010</a></li>
	<li><a href='../../../date/2010/11/index.html' title='Ноябрь 2010'>Ноябрь 2010</a></li>
	<li><a href='../../../date/2010/10/index.html' title='Октябрь 2010'>Октябрь 2010</a></li>
	<li><a href='../../../date/2010/09/index.html' title='Сентябрь 2010'>Сентябрь 2010</a></li>
	<li><a href='../../../date/2010/08.html' title='Август 2010'>Август 2010</a></li>
	<li><a href='../../../date/2010/07/index.html' title='Июль 2010'>Июль 2010</a></li>
	<li><a href='../../../date/2010/06.html' title='Июнь 2010'>Июнь 2010</a></li>
	<li><a href='../../../date/2010/05.html' title='Май 2010'>Май 2010</a></li>
	<li><a href='../../../date/2010/04/index.html' title='Апрель 2010'>Апрель 2010</a></li>
	<li><a href='../../../date/2010/03/index.html' title='Март 2010'>Март 2010</a></li>
	<li><a href='../../../date/2010/02.html' title='Февраль 2010'>Февраль 2010</a></li>
	<li><a href='../../../date/2010/01.html' title='Январь 2010'>Январь 2010</a></li>
	<li><a href='../../../date/2009/12/index.html' title='Декабрь 2009'>Декабрь 2009</a></li>
	<li><a href='../../../date/2009/11/index.html' title='Ноябрь 2009'>Ноябрь 2009</a></li>
	<li><a href='../../../date/2009/10.html' title='Октябрь 2009'>Октябрь 2009</a></li>
	<li><a href='../../../date/2009/09.html' title='Сентябрь 2009'>Сентябрь 2009</a></li>
	<li><a href='../../../date/2009/08/index.html' title='Август 2009'>Август 2009</a></li>
	<li><a href='../../../date/2009/07/index.html' title='Июль 2009'>Июль 2009</a></li>
	<li><a href='../../../date/2009/06.html' title='Июнь 2009'>Июнь 2009</a></li>
	<li><a href='../../../date/2009/05.html' title='Май 2009'>Май 2009</a></li>
	<li><a href='../../../date/2009/04.html' title='Апрель 2009'>Апрель 2009</a></li>
	<li><a href='../../../date/2009/03.html' title='Март 2009'>Март 2009</a></li>
	<li><a href='../../../date/2009/02.html' title='Февраль 2009'>Февраль 2009</a></li>
	<li><a href='../../../date/2009/01.html' title='Январь 2009'>Январь 2009</a></li>
	<li><a href='../../../date/2008/12.html' title='Декабрь 2008'>Декабрь 2008</a></li>
	<li><a href='../../../date/2008/11.html' title='Ноябрь 2008'>Ноябрь 2008</a></li>
	<li><a href='../../../date/2008/10.html' title='Октябрь 2008'>Октябрь 2008</a></li>
	<li><a href='../../../date/2008/09.html' title='Сентябрь 2008'>Сентябрь 2008</a></li>
	<li><a href='../../../date/2008/08.html' title='Август 2008'>Август 2008</a></li>
	<li><a href='../../../date/2008/03.html' title='Март 2008'>Март 2008</a></li>
	<li><a href='../../../date/2008/02.html' title='Февраль 2008'>Февраль 2008</a></li>
	<li><a href='../../../date/2007/12.html' title='Декабрь 2007'>Декабрь 2007</a></li>
	<li><a href='../../../date/2007/11.html' title='Ноябрь 2007'>Ноябрь 2007</a></li>
	<li><a href='../../../date/2007/10.html' title='Октябрь 2007'>Октябрь 2007</a></li>
	<li><a href='../../../date/2007/09.html' title='Сентябрь 2007'>Сентябрь 2007</a></li>
	<li><a href='../../../date/2007/08.html' title='Август 2007'>Август 2007</a></li>
	<li><a href='../../../date/2007/07/index.html' title='Июль 2007'>Июль 2007</a></li>
	<li><a href='../../../date/2007/06.html' title='Июнь 2007'>Июнь 2007</a></li>
	<li><a href='../../../date/2007/05.html' title='Май 2007'>Май 2007</a></li>
				</ul>
			</li>

			
					</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="../../../../feed">Entries (RSS)</a> and <a href="../../../../comments/feed">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 15 queries. 0.081 seconds. -->
	</div>
</div> <!-- page -->
</body>
</html>
