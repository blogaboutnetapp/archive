<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>about NetApp   &raquo; 2013 &raquo; Май</title>

<link rel="stylesheet" href="../../../wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="about NetApp RSS Feed" href="../../../feed" />
<link rel="pingback" href="../../../xmlrpc.php.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.6" />

</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="../../../index.html" title="about NetApp: Системы хранения данных как предмет разговора">about NetApp</a></h1>
		<p>Системы хранения данных как предмет разговора</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="../../../index.html">
<input type="text" size="20" name="s" id="s" value="Поиск..."  onblur="if(this.value=='') this.value='Поиск...';" onfocus="if(this.value=='Поиск...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="navbar">
<ul id="nav">
	<li><a href="../../../index.html">Home</a></li>
	<li class="page_item page-item-153"><a href="../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content">

	
			<p>Archive for Май 2013</p>

				
		<div class="navigation">
			<div class="alignleft"></div>
			<div class="alignright"></div>
		</div>

						
			<div class="post" id="post-1260">
				<h2 class="posttitle"><a href="../../1260/trackback.html" rel="bookmark" title="Permanent Link to SnapMirror, часть 1">SnapMirror, часть 1</a></h2>
				<div class="postmetadata">27 Май 2013, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Как-то довольно давно у меня в блоге не появлялось постов про технические фичи. Оно и понятно, блог ведется с 2007 года, и наверное уже про все в той или иной мере я уже или писал, или упоминал в предыдущие годы,<strike> сколько можно-то уже</strike>.</p>
<p>Тем не менее все равно остаются темы, на которые хотелось бы иметь больше информации “простым человеческим языком”, многие фичи NetApp, как я заметил, именно поэтому и не используются широко, потому что раз никто не пользуется – мало информации, а раз мало информации – вот никто и не пользуется. Так что начнем со сравнительно&#160; неплохо известного <em>в принципе</em>: с средства репликации SnapMirror.</p>
<p><strong>SnapMirror </strong>это средство синхронной или асинхронной репликации данных как между двумя физическими системами хранения, так и для томов внутри одной системы хранения. Репликация идет по IP-сети, и в этом ее существенное отличие от других решений репликации, других вендоров, которые часто предпочитают FC.</p>
<p>Для начала несколько слов о том, в чем разница между двумя системами репликации, имеющимися у NetApp. Это <strong>Sync</strong>Mirror и <strong>Snap</strong>Mirror.</p>
<p>??сторически SyncMirror была синхронной репликацией (только), а SnapMirror – асинхронной (только). В те времена было все просто и понятно. Если нужна синхронная репликация – первое, асинхроная – второе. Напомню разницу: синхроная репликация – это такая, на которой сигнал “готово, записано” от стораджа к записыващему приложению не отдается до тех пор, пока блок данных не будет записан <strong>??</strong> на исходный сторадж, <strong>??</strong> на его реплику. Сперва пишем блок на локальный, потом передаем его на удаленный, записываем там, получаем ответ “записано” с удаленного, и только после этого сигналим “записано, продолжай” приложению.</p>
<ul>
<li><strong>Плюсы:</strong> Мы гарантированно имеем два стораджа в синхронной, идентичной копии. Если блок не записан на удаленную систему, то и на локальной он не записан, и приложение об этом знает. Никакой потери данных и рассинхронизации из-за обрыва связи между стораджами нет “по определению”. Это самый надежный способ.</li>
<li><strong>Минусы:</strong> Это, одновременно, и самый медленный способ с точки зрения приложения. Нетрудно видеть, что скорость работы с приложением, bandwidth между приложением и стораджем, равен скорости работы, bandwidth между локальным и удаленным стораджем. Если у вас приложение подключено к стораджу по 8Gb FC, а канал между стораджами, находящимися в синхронной репликации, составляет 10Mb/s, то максимальная скорость передачи данных между приложением и локально подключенным по FC 8Gb стораджем будет составлять не более 10 мегабит в секунду, то есть будет равным скорости межстораджевого канала репликации.</li>
</ul>
<p>Отсюда видно, почему синхронная репликация крайне редко применяется в “географически” разнесенных решениях, а там, где она применяется в таких решениях, например в NetApp Metrocluster, это сложная и дорогая конструкция, с отдельной “фабрикой” репликации, занятой только этим.</p>
<p>Гораздо чаще на практике для репликации двух систем хранения используют так называемую “асинхронную” репликацию. В этом случае локальная система сразу сигналит “записано” приложению, а потом, с определенным интервалом, шлет обновления на удаленную систему – “Эй, тут у меня есть свежак, прими!”</p>
<ul>
<li><strong>Плюсы:</strong> Производительность работы приложения с локальным стораджем максимальна, канал репликации не ограничивает производительность приложения. Кроме того существенно экономится и ресурсы самого канала. Представим себе, что приложение каждые несколько миллисекунд изменияет один блок данных. В случае синхронной репликации, каждое такое изменение должно быть передано на удаленную систему. А в случае асинхронной репликации – только одно, состояние этого блока на момент начала репликации, или же итоговое его значение после всех изменений.</li>
<li><strong>Минусы:</strong> Удаленная копия никогда не становится идентичной локальной. Она ее всегда догоняет, но, если изменения непрерывны, всегда отстает, и этот интервал отставания называется “лагом репликации”. Более того, если не предпринимать специальных мер, то приложение может и не узнать, что каких-то данных на удаленной системе нет, или они не соответствуют данным локальной системы.</li>
</ul>
<p>Некоторым промежуточным вариантом является так называемая “полусинхронная” или “квазисинхронная” репликация, то есть пока успеваем физически – синхронная, когда не успеваем – не тормозим локальную систему, а переходим в асинхронный режим, и синхронизируемся так, пока не догоним, после чего опять переходим в “синхрон”.</p>
<p>Так вот, в свете всего вышеизложенного, <strong>SyncMirror</strong> это в чистом виде <strong>синхронная</strong> репликация, причем на достаточно низком уровне. Так как вы помните, что в NetApp его RAID это просто то, как функционирует его файловая система WAFL, можно считать, что SyncMirror это просто в этой файловой системе функция RAID-1, “зеркалирование”, “мирроринг”, или, вернее будет, RAID-41 или RAID-61, как принято называть комбинированные уровни, одни, поверх уже имеющихся других.</p>
<p>На сегодня SyncMirror в ее изначальной форме широко применяется только в Metrocluster.</p>
<p><strong>SnapMirror</strong> – это дело другое. Она изначально создавалась как асинхронная репликация на сравнительно “высоком” уровне дисковых абстракций. Однако впоследствии удалось к ней добавить синхронный и полусинхронный режим работы, и сегодня вы можете выбирать нужный вам режим просто указывая нужный ключ в настройках в конфиге.</p>
<p>Обратите внимание также, что в текущей лицензионной модели <strong>Sync</strong>Mirror бесплатно входит в Data ONTAP Essentials, то есть присутствует бесплатно на любой системе хранения, а вот <strong>Snap</strong>Mirror стоит денег, причем довольно существенных, и это отдельная лицензия.</p>
<p>Ну и, наконец, слово <em>Snap</em> в названии как бы намекает нам, что за технология использована при реализации репликации – это снэпшоты, или разностные “снимки состояния” соответствующего тома. При организации репликации сначала осуществляется так называемый baseline transfer, то есть передача исходного состояния. Это довольно продолжительная и емкая по ресурсам задача, когда целиком весь объем данных реплицируемого тома передается с локальной на удаленную систему. Зато потом, когда завершен baseline transfer на удаленную систему по каналу репликации передаются только изменения от одного цикла репликации до другого, они, обычно, сравнительно невелики по объему. Технически сторадж для этого делает специальный служебный, обычно невидимый пользователю снэпшот с реплицируемого тома, а затем получившиеся изменения передает на удаленную систему, “накатывая” их на тот том, находящийся в специальном состоянии <em>restricted</em>, после чего служебный снэпшот удаляется, на следующий цикл обновления операция повторяется.</p>
<p>??так, разобравшись с тем, что является, и что не является SnapMirror, перейдем к деталям. Продолжение следует.</p>
<p><strong>SnapMirror, Часть 2</strong>.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../tag/snapmirror.html" rel="tag">snapmirror</a><br />					Раздел: <a href="../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../1260/trackback.html#comments" title="Комментарий к записи SnapMirror, часть 1">Комментарии (6)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1258">
				<h2 class="posttitle"><a href="../../1258/trackback.html" rel="bookmark" title="Permanent Link to VServers &ndash; теперь Storage Virtual Machines (SVM)">VServers &ndash; теперь Storage Virtual Machines (SVM)</a></h2>
				<div class="postmetadata">20 Май 2013, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Одной из специфических особенностей “инженерного мЫшления”, исторически присущего компании NetApp, является зачастую весьма странные и вызванные какими-то глубинными процессами названия фич. Зачастую они закрепляются как официальные, видимо выйдя из недр программистских групп, а создаватели <em>брендов и торговых марок</em> из программтстов – те еще.</p>
<p>Вспомните хотя бы загадочный Fractional Reserve, над которым сломал голову не один человек, включая в свое время и меня самого (сегодня он в документации постепенно заменяется на гораздо более понятный LUN Overwrite Reserve). Оттуда же, допустим, vif, и прочие загадочные аббревиатуры, последние были некоторое время назад официально переименованы в куда более понятный ifgrp.</p>
<p>Дошел черед и до VServer, краеугольного понятия Clustered ONTAP. Даже за вычетом того, что нынче в начале термина “V” – <strike><em>значит Вендетта</em></strike> почти что <em>зарегистрированная торговая марка VMware</em>, сам по себе термин “VServer” – крайне неясен и <em>несамоописывающ</em>.</p>
<p>?? вот, я с радостью отметил, что в <a href="http://virtualstorageguy.com/2013/05/03/software-defined-storage-the-evolution-of-storage/">новых материалах NetApp</a> наметилось новое переименование – VServer теперь SVM – Storage Virtual Machines. Я давно, объясняя людям то, как работает Cluster-mode, делал это через аналогию с куда более знакомым и понятным кластером VM в VMware VSphere. Отрадно видеть, что теперь одним <strike>инженерным</strike> непонятным термином в лексиконе NetApp стало меньше.</p>
<p>Опять же, это торит интересную тропинку к новому баззворду индустрии – Software-defined Storage.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../tag/cluster-mode/index.html" rel="tag">cluster-mode</a>, <a href="../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../tag/svm.html" rel="tag">svm</a>, <a href="../../tag/vserver.html" rel="tag">vserver</a><br />					Раздел: <a href="../../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;" rel="category tag">justread</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../1258/trackback.html#respond" title="Комментарий к записи VServers &ndash; теперь Storage Virtual Machines (SVM)">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1261">
				<h2 class="posttitle"><a href="../../1261/trackback.html" rel="bookmark" title="Permanent Link to Организационное">Организационное</a></h2>
				<div class="postmetadata">19 Май 2013, 21:52 <!-- от  --></div>
				<div class="postentry">
					<p>Я бы хотел отдельно, и явно видимо для всех указать на существование отныне в блоге особого полиси на комментирование.</p>
<p>В этом блоге, как вы заметили, вы можете комментировать без регистрации (зарегистрироваться, впрочем, тоже можно). Однако обязательным условием для этого теперь без исключений будет <strong>предоставление в форме комментария реального email для обратной связи</strong>.<br />
Сам этот email не публикуется в комментарии, и вижу его <strong>только я</strong>.</p>
<p>Также я бы хотел пояснить некоторые особенности комментирования без регистрации в этом блоге:<br />
Первый комментарий нового для блога комментирующего встает на премодерацию, и я его вручную разрешаю тогда, когда дохожу до админки блога. Обычно это быстро, иногда может занять до нескольких дней. Несмотря на то, что посты публикуются регулярно, я не всегда в онлайне.<br />
В дальнейшем новые комменты от того же комментатора будут автоматически разрешаться без премодерации. Но если вы решите придумать новый <em>еще более остроумный</em> ник, или поменяете email, то скорее всего вы опять попадете в очередь премодерации.</p>
<p>Очень редко я бываю вынужден поставить на премодерацию отдельных комментаторов. Обычно это результат несогласия их с другим основным правилом полиси комментирования этого блога: <em>&#8220;ведите дискусию вежливо, уважительно, даже если придерживаетесь по обсуждаемому вопросу иных взглядов, и будьте аргументированны в высказываемых утверждениях.&#8221;</em>.<br />
Могу отметить, что за 6 лет существования этого блога, таких набралось всего трое, так что это случаи исключительные, что меня, надо сказать, радует. Значит моя аудитория все же состоит из джентльменов. :)</p>
<p>Что же касается &#8220;политики реального емайла&#8221;, то, прежде всего,<br />
Обратите внимание, что иногда, в особенности если у меня будут сомнения по поводу того, что указанный в комментарии адрес pupkin@hotmail.com - ваш реальный, читаемый адрес, не удивляйтесь, если я на него напишу. ?? не обижайтесь если, не получив ответа, или получив <em>mailbox does not exist</em>, сочту вас спамером.</p>
<p>Кроме того, ряд явно фэйковых емэйлов, вида xxx@xxx.xxx или 123@abc.com, и прочее такое же, автоматически отбрасывается моим спамфильтром. Это значит, что даже если вы написали интересный комент, я смогу извлечь его из горы спама только когда (или вернее будет сказать &#8220;если&#8221;) вдруг зайду в папку spam, в которой у меня еженедельно скапливается по 250-300 комментов про <em>ca$h l0ans v!agra c1al1s дeвчёнки с вeбкaми</em>, и которые вы не видите только потому, что спам-фильтр в блоге не дремлет. Захожу я туда скорее случайно, и очень редко. Делайте выводы.</p>
<p>Если вдруг у вас возникнет вопрос &#8220;зачем?&#8221;, хотя, как мне кажется, вопрос &#8220;почему комментариям требуется подпись?&#8221; для джентльменов, из которых состоит моя аудитория, не должен возникать по определению, то ответ, думаю, будет всем прост и понятен. Также как я подписываюсь под всеми моими текстами, также и любому пишущему реплику в ответ не должно быть стыдно под своими словами поставить свою подпись, не правда ли, джентльмены?</p>
				</div>
		
				<div class="postmetadata">
										Раздел: <a href="../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../1261/trackback.html#comments" title="Комментарий к записи Организационное">1 комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1257">
				<h2 class="posttitle"><a href="../../1257/trackback.html" rel="bookmark" title="Permanent Link to Снова про EMC VNX">Снова про EMC VNX</a></h2>
				<div class="postmetadata">13 Май 2013, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Так как я теперь, стихийным образом (вернее будет сказать попустительством EMC, похоже положившим на продвижение VNX в русскоязычном интернете крупный дюймовый болт) являюсь, в некотором роде, неожиданно для себя, <a href="https://www.google.ru/search?hl=en&amp;as_q=EMC+VNX&amp;lr=lang_ru&amp;cr=countryRU">авторитетным источником информации</a> про <a href="http://yandex.ru/yandsearch?text=EMC+VNX&amp;lr=213">эту модель стораджей</a>, будем пользоваться сим фактом. ?? сегодня вам очередной перевод из блога Recoverymonkey, с очередными укусами за жёппу ;).</p>
<p>Напоминаю, что тексты, которые я публикую в этом блоге на правах переводов, являются переводами, а не моими текстами, поэтому спорить со мной, наезжать в коментах, или упрекать в чем-либо, например за тон изложения – бесполезно. Сходите по приведенной ссылке, и если испытываете той или иной степени попаболь от того, что автор пишет – скажите это <a href="http://recoverymonkey.org/2013/05/06/more-emc-vnx-caveats/">вот прямо там</a>.</p>
<h2><a href="http://recoverymonkey.org/2013/05/06/more-emc-vnx-caveats/">Еще несколько предостережений про EMC VNX</a></h2>
<p><a href="http://recoverymonkey.org/2013/05/06/more-emc-vnx-caveats/"><u><font color="#0066cc">http://recoverymonkey.org/2013/05/06/more-emc-vnx-caveats/</font></u></a>.</p>
<p>Недавно, когда мне по работе пришлось столкнуться с конкурентным предложением нашим клиентам в виде системы хранения EMC VNX, я заметил, что EMC использует несколько утверждений для доказательства своего превосходства (или, хотя бы не отставания).</p>
<p>Я уже писал в недалеком прошлом вот <a href="http://recoverymonkey.org/2011/01/13/questions-to-ask-emc-regarding-their-new-vnx-systems/">эту</a> статью (есть <a href="../../868/trackback.html">перевод</a>, прим. romx), и сегодня я хочу углубленнее рассмотреть несколько аспектов. Обсуждаемые сегодя темы:</p>
<ol>
<li>Эффективность хранения на VNX </li>
<li>Утверждение, что LUN-ы могут обслуживаться обоими контроллерами </li>
<li>Утверждение, что autotiering помогает в большинстве задач </li>
<li>Утверждение, что сторадж-пулы – это просто </li>
<li>Производительность thin provisioning </li>
<li>Новые снэпшоты VNX </li>
</ol>
<p>Я буду указывать по каждому утверждению ссылки на актуальные документы EMC, а то иначе это ничем не будет отличаться от работы “маркетингового робота”.</p>
<h3>Эффективность хранения на VNX</h3>
<p>EMC любит утверждать, что на ее системах не требуется отдать 10% пространства в “налог” OS, как это требуется у NetApp <em>(WAFL reserve, прим. romx)</em>. Однако, как утверждается по&#160; <a href="https://community.emc.com/message/713193">ссылке</a> рекомендации best practices указывают, что на <em>autotiered pool</em>, как минимум 10% свободного места должны быть всегда доступны <strong>на каждом из tier-ов</strong>, для обеспечения его нормальной работы.</p>
<p>Также присутствует минимально 3GB оверхеда на каждом LUN, плюс оверхед на метаданные, который вычисляется по формуле, приведенной в статье по ссылке. Плюс дополнительно метаданные, если вы используете дедупликацию.</p>
<p>Моя позиция: Не бывает бесплатного сыра. Если вы хотите новых фич, использующих для своей работы пулы, за это есть определенная цена. В противном случае продолжайте использовать традиционные RAID-группы, там нет новых фич, но они дают гораздо более предсказуемую производительность и характер использования пространства дисков.</p>
<h3>LUN-ы могут обслуживаться обоими контроллерами, обеспечивая “load balancing”</h3>
<p>Вот тут пошло веселье. Утверждается, что <em>LUN ownership</em> может быть мгновенно переключен с одного контроллера VNX на другой, чтобы обеспечить балансировку их загрузки. Ну, как всегда тут есть тонкости. Важно также отметить здесь, что на момент написания этого поста, в VNX не было никаких средств для организации автоматической балансировки <em>LUN ownership</em> в зависимости от загрузки контроллеров.</p>
<ol>
<li>Если это делается с традиционными RAID LUN-ами: Передача <em>LUN ownership</em> делается без проблем. Это так, как было всегда. </li>
<li>Если же LUN находится в пуле – это история другая. <strong>Нет способа быстро переключить <em>LUN ownership</em> для такого LUN, без существенного влияния этого процесса на производительность системы. </strong></li>
</ol>
<p>Обильная информация по тому поводу может быть найдена <a href="https://community.emc.com/docs/DOC-22906">здесь</a>. Говоря коротко: Вы не можете менять <em>LUN ownership</em>, при использовании пулов, вместо этого вам придется перенести содержимое LUN, на другой LUN, на другом контроллере (именно на другой LUN, перенос LUN-а “как есть” может создать проблемы), в противном случае готовьтесь заплатить производительностью.</p>
<h3>Утверждение, что autotiering помогает на большинстве задач</h3>
<p>Не торопитесь. <em>(в оригинале: “Not so FAST”, прим. romx).</em> Собственные документы EMC, такие как “best practice guides” полны предупреждений и замечаний, относительно использования autotiering. Несмотря на то, что эта фича фактически пропагандируется в каждой кампании продаж, как создающее множество преимуществ гигантское достоинство.</p>
<p>Вот, например, очень подробный документ “<a href="https://community.emc.com/servlet/JiveServlet/previewBody/19006-102-3-67659/h10739-emc-scaling-performance-oracle-virtual-machine-wp.pdf">EMC Scaling performance for Oracle Virtual Machine</a>“, этот график найден там на странице 35:</p>
<p><img title="fastoracle[1]" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="fastoracle[1]" src="/pics/fce3d4f9ee55_DCDB/fastoracle1.png" width="600" height="403" /></p>
<p>Стрелки добавил я. Отметьте, что наибольшее преимущество в производительности достигается тогда, когда кэш правильно сконфигурирован с точки зрения сайзинга.<strong> Дополнительные 5 SSD для VNX tiering (FAST VP) почти не дают существенного повышения производительности на задаче с нагрузкой типа базы данных.</strong></p>
<p>Можно только гадать, какой прирост дали бы эти 4 SSD, если бы были установлены не в autotiering, а увеличили бы кэш… </p>
<p>Быть может, если бы все 8 SSD были бы использованы как all-flash-storage, это было бы даже еще быстрее, чем 4 cache SSD и 5 tier SSD, но это просто лишний раз продемонстрирует слабый “замах” autotiering-а FAST-VP и недостатки его маркетинга.</p>
<h3>Утверждение, что storage pools это упрощение работы со стораджем</h3>
<p>Типичный подход сэйла EMC к пользователю для продажи VNX это: используйте единый, суперпупер-простой пул дисков с автотирингом данных на нем. Однако вопреки тому, что утверждает маркетинговое шоу, к сожалению, с использованием пулов VNX сложность снижается совсем не так, как это обещается, наприме просто потому что пулы рекомендуются совсем не для любой задачи и не для любой рабочей нагрузки. Рассмотрим типовой сцеарий развертывания VNX, смоделированный по документам best practice:</p>
<ol>
<li>Журнальные LUN-ы RecoverPoint рекомедуется держать на отдельной группе RAID10 </li>
<li>LUN-ы SQL log на отдельной группе RAID10 </li>
<li>Exchange 2010 log LUN-ы на отдельной группе RAID10&#160; </li>
<li>Exchange 2010 data LUN-ы могут находиться в пуле, но лишь в случае, если он состоит из однотипных дисков, в противном случае нужно использовать несколько традиционных RAID-групп </li>
<li>SQL data могут быть помещены на autotiered pool </li>
<li>VM могут быть на отдельном пуле, или жить совместно на пуле SQL </li>
<li>Репозиторий VDI linked clone может использовать SSD в отдельной группе RAID10 </li>
</ol>
<p>Ну, отлично. Я понимаю все достоинства разделения ввода-вывода, которыми продиктованы рекомендации выше. Однако “продающая” позиция компании в отношении пулов и autotiering это то, что они призваны снизить сложность, общую стоимость решения, улучшить производительность и эффективность распределения пространства. Ясно, что вряд ли все приведенные варианты могут одновременно встретиться в одном стораже на практике. Но что за причина, отчего они не могут быть в одном, или двух пулах, и использовать какой-то вид QoS на массиве, чтобы обеспечить приоритезацию трафика?</p>
<p>?? что получится, если вы отдали лишнего на диски под традиционные RAID-группы в примере выше? Как насчет вернуть или перераспределить это неиспользуемое там пространство другим задачам?</p>
<p>А что насчет варианта, когда места не хватает, как просто вам будет добавить немножко пространства или производительности? (Не в 2-3 раза, допустим, а всего на 20% больше). Сможете вы расширить традиционные VNX RAID-группы на несколько дисков?</p>
<p><strong>?? как там насчет общей эффективности хранения, если все эти задачи нам придется держать отдельно друг от друга?</strong> Хмммм… </p>
<p>Для подробностей смотрите документы по дизайну хранилища под <a href="http://www.emc.com/collateral/hardware/white-papers/h8888-exch-2010-storage-best-pract-design-guid-emc-storage.pdf">Exchange</a> и <a href="http://www.emc.com/collateral/hardware/white-papers/h8987-mssql-vnx5700-wp.pdf">SQL</a>.</p>
<h2>Производительность thin provisioning</h2>
<p>О,это просто здорово. Производительность VNX thin provisioning сильно хуже в сравнении с <em>thick</em>, а они оба – в сравнении с традиционными RAID-группами. Проблема с производительнстью возникает прежде всего вследствие того, как VNX выделяет пространство при записи на thin LUN. При этом используются блоки, <font style="background-color: #ffff00"></font><font style="style">размером</font> 8KB. Хорошее описание того, как распределяется пространство на сторадж-пуле можно найти <a href="http://vjswami.com/2011/03/05/emc-storage-pool-deep-dive-design-considerations-caveats/">здесь</a>&#160;<em>(у меня есть </em><a href="../../969/trackback.html"><em>перевод</em></a><em>, прим. romx)</em>. VNX пишет в пулы сементами, размером 1GB. Thick LUN-ы резервируют столько сегментов, размеров 1GB, сколько необходимо, и производительность получается вполне приемлемая. Thin LUN-ы не резервируют место, и, тем самым, не имеют возможности оптимизировать записи и чтения – в результате начинается фрагментация, вдобавок к более высокой загрузке CPU, дискового оверхеда, больше занимается памяти контроллера, все это для обслуживания thin LUN-ов. </p>
<p>Вновь смотрим документ по <a href="http://www.emc.com/collateral/hardware/white-papers/h8888-exch-2010-storage-best-pract-design-guid-emc-storage.pdf">дизайну хранилища под Exchange 2010</a>, страница 23:</p>
<p><img title="vnxthin[1]" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="vnxthin[1]" src="/pics/fce3d4f9ee55_DCDB/vnxthin1.png" width="600" height="241" /></p>
<p>Снова, стрелки на скриншоте, выделяющие важные моменты, добавлены мной:</p>
<ol>
<li>Thin provisioning не рекомендован для высокой нагрузки на VNX </li>
<li>Конечно, он такой медленный сам по себе, что вы должны делать ваши thin pools хотя бы на RAID10!!! </li>
</ol>
<p>Но погодите, thin provisioning придуман для экономии места на дисках, а теперь я должен использовать его на RAID10, который это место просто пожирает?</p>
<p>Какой-то нонсенс.</p>
<p>А что если пользователь желает повышенную надежность и, поэтому, хочет использовать RAID6 на весь пул? Как быстро с этим будет работать thin provisioning?</p>
<p>А, вдобавок у VNX нет способа устранить фрагментацию, которая бесчинствует на их thin LUN-ах. Только через миграцию на другой LUN.</p>
<h3>Новые снэпшоты VNX</h3>
<p>В VNX появился способ облегчить удар по производительности, присущий традиционным снэпшотам FLARE, перейдя от метода создания снэпшота COFW (Copy On First Write) на ROFW (Redirect On First Write).</p>
<p>Проблема?</p>
<p>Новым снэпшотам VNX требуется использование пулов и thin LUN-ов. Это кажется только технической особеностью, но…</p>
<p>Это те самые две фичи VNX, которые существенно понижают его производительность.</p>
<p>Есть и другие существенные проблемы с новыми сэпшотами VNX, но это тема другого поста. Так что ничего удивительного, что EMC проталкивает RecoverPoint гораздо активнее, чем свои снэпшоты…</p>
<h3>??того</h3>
<p>Существует маркетинг, и существует “инженерная” реальность.</p>
<p>Поскольку VNX может работать как с пулами, так и с традиционными RAID-группами, маркетинг мудро выбрал не слишком вдаваться в детали о том, что с чем там у него работает.</p>
<p>Реальность же состоит в том, что все новые фичи работают только с пулами. Но тут есть несколько весьма существенных засад.</p>
<p>Если вы рассматриваете вариант покупки VNX – по меньшей мере убедитесь, что понимаете, какая из проталкиваемых маркетингом фич будет работать для конкретно вашей задачи. Попросите сделать полную схему разбиения системы на LUN-ы (LUN layout).</p>
<p>?? опять же, мы никак еще не говорили про использование RAID-6 для защиты данных в пуле, это опять же отдельная история для отдельного поста.</p>
<p>D</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../tag/emc/index.html" rel="tag">emc</a>, <a href="../../tag/vnx.html" rel="tag">vnx</a><br />					Раздел: <a href="../../category/translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;" rel="category tag">переводы</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../1257/trackback.html#comments" title="Комментарий к записи Снова про EMC VNX">Комментарии (11)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-1256">
				<h2 class="posttitle"><a href="../../1256/trackback.html" rel="bookmark" title="Permanent Link to VSC для VMware Web Client UI">VSC для VMware Web Client UI</a></h2>
				<div class="postmetadata">6 Май 2013, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Как вы уже, наверняка, знаете, после выхода версии ESXi 5.1, VMware объявила, что это будет последняя версия, поддерживающая “толстый клиент” vSphere. В дальнейшем поддержка традиционного, “толстого” клиента будет прекращена, и вся работа с vSphere будет происходить через так называемый Web Client UI, работающий в веббраузере.</p>
<p>Все бы хорошо, но есть существенная сложность – многочисленные, написанные вендорами плагины для VCenter, в частности NetApp Virtual Storage Console – VSC. Подобные плагины, для работы с системой хранения из интерфейса клиента VCenter, написали под свои стораджи почти все крупные вендоры. Но все они работают с “толстым клиентом”. По этой причине для тех, кто использует соответствующие стораджи, и управляет ими через пдобные плагины, наступают тревожные времена. Успеют ли соответствующие вендоры выкатить новые версии своих плагинов до того, как наступит время отказаться от “толстого клиента”?</p>
<p>NetApp пока неофициально объявил, что в среде Web Client UI будет работать новая версия VSC 5.0, она запланирована к выходу в конце этого года. Это будет существенно переработанная версия, что связано с тем, что изменяется сама логика работы и интеграции подобных плагинов. Так, например, ресурсы стораджа (контроллеры и VServers в Cluster-mode) будут интегрированы в стадартный inventory VCenter. Также, наконец, закончится процесс интеграции модулей VSC в “единое операционное пространство”.</p>
<p>Как вы, возможно, помните, нынешняя ситуация, с отдельными модулями Monitoring &amp; Host Configuration, Provisioning &amp; Cloning, Optimization &amp; Migration, и Backup &amp; Recovery, это отголосок того, что раньше VSC был надстройкой над несколькими различными продуктами, такими как SnapManager for Virtual Infrastructure (SMVI), Rapid Cloning Utility, и так далее, которые существовали отдельно, сами по себе, как отдельные продукты. Потом поверх них надстроили интеграционный плагин VSC, некую общую консоль, но продукты, тем не менее, еще долго оставались самостоятельными, даже когда они впоследствии вошли в состав VSC как его компоненты. Однако логически это разделение функциональностей по модулям еще сохранялось (и сохраняется сейчас), когда никакой физической разделенности на фактические модули за этим уже нет. Вот, наконец, в VSC 5.0 нам пообещали, что от этого намерены избавиться.</p>
<p>Кстати, кто в курсе темы, прокомментируйте, а у EMC уже есть плагин для VNX под VCenter Web Client UI?</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../tag/plugin.html" rel="tag">plugin</a>, <a href="../../tag/vmware/index.html" rel="tag">vmware</a>, <a href="../../tag/vsc.html" rel="tag">vsc</a>, <a href="../../tag/vsphere/index.html" rel="tag">vsphere</a>, <a href="../../tag/web-client.html" rel="tag">web client</a><br />					Раздел: <a href="../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../1256/trackback.html#comments" title="Комментарий к записи VSC для VMware Web Client UI">1 комментарий</a>									 </div>
			</div>
	
		
		<div class="navigation">
			<div class="alignleft"></div>
			<div class="alignright"></div>
		</div>
		
	
	</div>
	<div id="sidebar">
		<ul>
			
			
			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Автор</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			<li class="pagenav"><h2>Страницы</h2><ul><li class="page_item page-item-153"><a href="../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul></li>
			<li><h2>Рубрики</h2>
				<ul>
					<li class="cat-item cat-item-89"><a href="../../category/commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;">commands</a>
</li>
	<li class="cat-item cat-item-37"><a href="../../category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;">howto</a>
</li>
	<li class="cat-item cat-item-52"><a href="../../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;">justread</a>
</li>
	<li class="cat-item cat-item-51"><a href="../../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;">review</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;">techtalk</a>
</li>
	<li class="cat-item cat-item-71"><a href="../../category/tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;">tricks</a>
</li>
	<li class="cat-item cat-item-95"><a href="../../category/utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;">utilities</a>
</li>
	<li class="cat-item cat-item-44"><a href="../../category/whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;">whoisho</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;">новости</a>
</li>
	<li class="cat-item cat-item-387"><a href="../../category/opros.html" title="Просмотреть все записи в рубрике &laquo;опрос&raquo;">опрос</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../category/translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;">переводы</a>
</li>
	<li class="cat-item cat-item-40"><a href="../../category/citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;">цитаты</a>
</li>
				</ul>
			</li>

			<li><h2>Архивы</h2>
				<ul>
					<li><a href='../2018/01.html' title='Январь 2018'>Январь 2018</a></li>
	<li><a href='../2015/10.html' title='Октябрь 2015'>Октябрь 2015</a></li>
	<li><a href='../2015/04.html' title='Апрель 2015'>Апрель 2015</a></li>
	<li><a href='../2015/03.html' title='Март 2015'>Март 2015</a></li>
	<li><a href='../2015/01.html' title='Январь 2015'>Январь 2015</a></li>
	<li><a href='../2014/12.html' title='Декабрь 2014'>Декабрь 2014</a></li>
	<li><a href='../2014/11.html' title='Ноябрь 2014'>Ноябрь 2014</a></li>
	<li><a href='../2014/10.html' title='Октябрь 2014'>Октябрь 2014</a></li>
	<li><a href='../2014/09.html' title='Сентябрь 2014'>Сентябрь 2014</a></li>
	<li><a href='../2014/08.html' title='Август 2014'>Август 2014</a></li>
	<li><a href='../2014/07.html' title='Июль 2014'>Июль 2014</a></li>
	<li><a href='../2014/06.html' title='Июнь 2014'>Июнь 2014</a></li>
	<li><a href='../2014/05.html' title='Май 2014'>Май 2014</a></li>
	<li><a href='../2014/04.html' title='Апрель 2014'>Апрель 2014</a></li>
	<li><a href='../2014/03.html' title='Март 2014'>Март 2014</a></li>
	<li><a href='../2014/02.html' title='Февраль 2014'>Февраль 2014</a></li>
	<li><a href='../2014/01.html' title='Январь 2014'>Январь 2014</a></li>
	<li><a href='12.html' title='Декабрь 2013'>Декабрь 2013</a></li>
	<li><a href='11.html' title='Ноябрь 2013'>Ноябрь 2013</a></li>
	<li><a href='10.html' title='Октябрь 2013'>Октябрь 2013</a></li>
	<li><a href='09.html' title='Сентябрь 2013'>Сентябрь 2013</a></li>
	<li><a href='08.html' title='Август 2013'>Август 2013</a></li>
	<li><a href='07.html' title='Июль 2013'>Июль 2013</a></li>
	<li><a href='06.html' title='Июнь 2013'>Июнь 2013</a></li>
	<li><a href='05.html' title='Май 2013'>Май 2013</a></li>
	<li><a href='04.html' title='Апрель 2013'>Апрель 2013</a></li>
	<li><a href='03.html' title='Март 2013'>Март 2013</a></li>
	<li><a href='02.html' title='Февраль 2013'>Февраль 2013</a></li>
	<li><a href='01.html' title='Январь 2013'>Январь 2013</a></li>
	<li><a href='../2012/12.html' title='Декабрь 2012'>Декабрь 2012</a></li>
	<li><a href='../2012/11.html' title='Ноябрь 2012'>Ноябрь 2012</a></li>
	<li><a href='../2012/10.html' title='Октябрь 2012'>Октябрь 2012</a></li>
	<li><a href='../2012/09.html' title='Сентябрь 2012'>Сентябрь 2012</a></li>
	<li><a href='../2012/08.html' title='Август 2012'>Август 2012</a></li>
	<li><a href='../2012/07.html' title='Июль 2012'>Июль 2012</a></li>
	<li><a href='../2012/06.html' title='Июнь 2012'>Июнь 2012</a></li>
	<li><a href='../2012/05.html' title='Май 2012'>Май 2012</a></li>
	<li><a href='../2012/04.html' title='Апрель 2012'>Апрель 2012</a></li>
	<li><a href='../2012/03.html' title='Март 2012'>Март 2012</a></li>
	<li><a href='../2012/02.html' title='Февраль 2012'>Февраль 2012</a></li>
	<li><a href='../2012/01.html' title='Январь 2012'>Январь 2012</a></li>
	<li><a href='../2011/12.html' title='Декабрь 2011'>Декабрь 2011</a></li>
	<li><a href='../2011/11.html' title='Ноябрь 2011'>Ноябрь 2011</a></li>
	<li><a href='../2011/10/index.html' title='Октябрь 2011'>Октябрь 2011</a></li>
	<li><a href='../2011/09/index.html' title='Сентябрь 2011'>Сентябрь 2011</a></li>
	<li><a href='../2011/08.html' title='Август 2011'>Август 2011</a></li>
	<li><a href='../2011/07/index.html' title='Июль 2011'>Июль 2011</a></li>
	<li><a href='../2011/06/index.html' title='Июнь 2011'>Июнь 2011</a></li>
	<li><a href='../2011/05/index.html' title='Май 2011'>Май 2011</a></li>
	<li><a href='../2011/04/index.html' title='Апрель 2011'>Апрель 2011</a></li>
	<li><a href='../2011/03/index.html' title='Март 2011'>Март 2011</a></li>
	<li><a href='../2011/02.html' title='Февраль 2011'>Февраль 2011</a></li>
	<li><a href='../2011/01.html' title='Январь 2011'>Январь 2011</a></li>
	<li><a href='../2010/12.html' title='Декабрь 2010'>Декабрь 2010</a></li>
	<li><a href='../2010/11/index.html' title='Ноябрь 2010'>Ноябрь 2010</a></li>
	<li><a href='../2010/10/index.html' title='Октябрь 2010'>Октябрь 2010</a></li>
	<li><a href='../2010/09/index.html' title='Сентябрь 2010'>Сентябрь 2010</a></li>
	<li><a href='../2010/08.html' title='Август 2010'>Август 2010</a></li>
	<li><a href='../2010/07/index.html' title='Июль 2010'>Июль 2010</a></li>
	<li><a href='../2010/06.html' title='Июнь 2010'>Июнь 2010</a></li>
	<li><a href='../2010/05.html' title='Май 2010'>Май 2010</a></li>
	<li><a href='../2010/04/index.html' title='Апрель 2010'>Апрель 2010</a></li>
	<li><a href='../2010/03/index.html' title='Март 2010'>Март 2010</a></li>
	<li><a href='../2010/02.html' title='Февраль 2010'>Февраль 2010</a></li>
	<li><a href='../2010/01.html' title='Январь 2010'>Январь 2010</a></li>
	<li><a href='../2009/12/index.html' title='Декабрь 2009'>Декабрь 2009</a></li>
	<li><a href='../2009/11/index.html' title='Ноябрь 2009'>Ноябрь 2009</a></li>
	<li><a href='../2009/10.html' title='Октябрь 2009'>Октябрь 2009</a></li>
	<li><a href='../2009/09.html' title='Сентябрь 2009'>Сентябрь 2009</a></li>
	<li><a href='../2009/08/index.html' title='Август 2009'>Август 2009</a></li>
	<li><a href='../2009/07/index.html' title='Июль 2009'>Июль 2009</a></li>
	<li><a href='../2009/06.html' title='Июнь 2009'>Июнь 2009</a></li>
	<li><a href='../2009/05.html' title='Май 2009'>Май 2009</a></li>
	<li><a href='../2009/04.html' title='Апрель 2009'>Апрель 2009</a></li>
	<li><a href='../2009/03.html' title='Март 2009'>Март 2009</a></li>
	<li><a href='../2009/02.html' title='Февраль 2009'>Февраль 2009</a></li>
	<li><a href='../2009/01.html' title='Январь 2009'>Январь 2009</a></li>
	<li><a href='../2008/12.html' title='Декабрь 2008'>Декабрь 2008</a></li>
	<li><a href='../2008/11.html' title='Ноябрь 2008'>Ноябрь 2008</a></li>
	<li><a href='../2008/10.html' title='Октябрь 2008'>Октябрь 2008</a></li>
	<li><a href='../2008/09.html' title='Сентябрь 2008'>Сентябрь 2008</a></li>
	<li><a href='../2008/08.html' title='Август 2008'>Август 2008</a></li>
	<li><a href='../2008/03.html' title='Март 2008'>Март 2008</a></li>
	<li><a href='../2008/02.html' title='Февраль 2008'>Февраль 2008</a></li>
	<li><a href='../2007/12.html' title='Декабрь 2007'>Декабрь 2007</a></li>
	<li><a href='../2007/11.html' title='Ноябрь 2007'>Ноябрь 2007</a></li>
	<li><a href='../2007/10.html' title='Октябрь 2007'>Октябрь 2007</a></li>
	<li><a href='../2007/09.html' title='Сентябрь 2007'>Сентябрь 2007</a></li>
	<li><a href='../2007/08.html' title='Август 2007'>Август 2007</a></li>
	<li><a href='../2007/07/index.html' title='Июль 2007'>Июль 2007</a></li>
	<li><a href='../2007/06.html' title='Июнь 2007'>Июнь 2007</a></li>
	<li><a href='../2007/05.html' title='Май 2007'>Май 2007</a></li>
				</ul>
			</li>

			
					</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="../../../feed">Entries (RSS)</a> and <a href="../../../comments/feed">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 14 queries. 0.087 seconds. -->
	</div>
</div> <!-- page -->
</body>
</html>
