<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>about NetApp   &raquo; 2011 &raquo; Апрель</title>

<link rel="stylesheet" href="../../../../wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="about NetApp RSS Feed" href="../../../../feed" />
<link rel="pingback" href="../../../../xmlrpc.php.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.6" />

</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="../../../../index.html" title="about NetApp: Системы хранения данных как предмет разговора">about NetApp</a></h1>
		<p>Системы хранения данных как предмет разговора</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="../../../../index.html">
<input type="text" size="20" name="s" id="s" value="Поиск..."  onblur="if(this.value=='') this.value='Поиск...';" onfocus="if(this.value=='Поиск...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="navbar">
<ul id="nav">
	<li><a href="../../../../index.html">Home</a></li>
	<li class="page_item page-item-153"><a href="../../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content">

	
			<p>Archive for Апрель 2011</p>

				
		<div class="navigation">
			<div class="alignleft"><a href="page/2.html">&laquo; Previous Entries</a></div>
			<div class="alignright"></div>
		</div>

						
			<div class="post" id="post-901">
				<h2 class="posttitle"><a href="../../../901/trackback.html" rel="bookmark" title="Permanent Link to Конкурс &ldquo;экономия пространства на NetApp&rdquo;">Конкурс &ldquo;экономия пространства на NetApp&rdquo;</a></h2>
				<div class="postmetadata">28 Апрель 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Все блоги вокруг меня проводят среди своих читателей те или иные конкурсы. Отличную идею подсмотрел я в <a href="http://communities.netapp.com">communities.netapp.com</a>, воспользуюсь ей в своих целях.</p>
<p>Не так давно, споря в комментариях по поводу эффективности работы дедупликации, я предложил показывать всем желающим их результаты space savings с помощью вывода команды консоли <code>df –s</code>.</p>
<p>Мой оппонент утверждал, что величина достигаемой дедупликации “в реальных системах, а не по словам маркетологов” совсем незначительна, и значимость дедупликации данных сильно преувеличена нетаппом.    <br />Я же возражал, что это не так, и это легко проверить, сделав вывод команды <code>df –s</code> и посмотрев величину в графе <code>% savings</code>.</p>
<p>Так вот, “удваиваю это предложение”!</p>
<p>Я принимаю от вас ваши результаты df –s, а затем, чтобы простимулировать вас в этом начинании, разыграю между всеми приславшими, случайным образом, код подарочного сертификата.</p>
<p>На выбор предлагается:</p>
<ul>
<li>Подарочный сертификат магазина OZON.ru (1000 рублей) </li>
<li>Gift card Apple iTunes (25$) </li>
<li>Amazon gift card (25$) </li>
</ul>
<p>Выигравший получит на свой email любой один, по вашему выбору (ну то есть если кто-то не любит Apple, и iTunes Gift Card ему не нужна, значит можно выбрать другой вариант).</p>
<p>Дальше вы полученный код можете использовать как захотите, например для приобретения программ в Appstore, или книжек/музыки на Amazon или OZON.ru. На ОЗОНе рекомендую, кстати, книгу коллеги-блоггера, и автора <a href="http://vm4.ru">vm4.ru</a> – <a href="http://www.ozon.ru/context/detail/id/5774310/">Администрирование VMware vSphere 4.1</a>.</p>
<p>Ограничим эту затею ровно месяцем с момента публикации этого предложения.    <br />Ваши ставки принимаются по e-mail: <a href="mailto:romx@mail.ru">romx@mail.ru</a> или в комментариях к этому посту.</p>
<p>Отдельно уточню, что это не “пузомерка”, “победа” определяется случайным образом, а не по величине достигнутой экономии пространства. Принимаются любые результаты, даже 1%, если у вас достигнут только такой.    <br />Хотя, конечно, хотелось бы, чтобы хотя бы дедупликация у вас была включена и работала.</p>
<p>Вывод этой команды выглядит примерно так:</p>
<p><code>&gt; df -s -g      <br />Filesystem used saved %saved       <br />/vol/vol1/ 1279GB 668GB 34%       <br />/vol/vol2/ 1462GB 239GB 14%       <br />/vol/vol3/ 1133GB 270GB 19%</code></p>
<p>Будет совсем хорошо, если вы вместе с результатами хотя бы в нескольких словах охарактеризуете свои данные. Например: <em>“/vol/vol1/virt – nfs-хранилище виртуальных машин VMware, /vol/files/ – файлы домашних папок пользователей, /vol/db-luns/db1…db8 – тома для LUN-ов базы данных MS SQL2005 по FCP”</em></p>
<p>Полученные данные, безусловно, будут храниться приватно, а если результаты и будут опубликованы в этом блоге, то в анонимизированном виде, защищая privacy вас и ваших систем. Если вы вообще в принципе против какой бы то ни было публикации их – укажите это. На возможность получить приз это не повлияет.</p>
<p>PS. <a href="../../../871/trackback.html#comment-1302">Один участник</a> у меня, кстати, уже есть в комментариях к <a href="../../../871/trackback.html">тому посту</a>.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/deduplication/index.html" rel="tag">deduplication</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/savings.html" rel="tag">savings</a>, <a href="../../../tag/konkurs.html" rel="tag">конкурс</a><br />					Раздел: <a href="../../../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;" rel="category tag">justread</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../901/trackback.html#comments" title="Комментарий к записи Конкурс &ldquo;экономия пространства на NetApp&rdquo;">Комментарии (11)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-872">
				<h2 class="posttitle"><a href="../../../872/trackback.html" rel="bookmark" title="Permanent Link to EMC убедительно демонстрирует проблемы VNX">EMC убедительно демонстрирует проблемы VNX</a></h2>
				<div class="postmetadata">27 Апрель 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>В моем блоге очередной перевод поста в блоге Recoverymonkey (Dimitris Kr.)</p>
<p>Я бы хотел обратить внимание читателей, что то, что публикуется по средам, это <strong>переводы</strong>. Я стараюсь сохранять манеру и стиль оригинального автора, потому что это – <strong>перевод</strong>. Лично я могу быть несогласен (или согласен, как получится) с излагаемой позицией, но, так как это не мои собственные тексты, за исключением небольших сокращений, я стараюсь их не править, и переводить в том виде, в котором они были опубликованы их авторами. Если у вас есть возражения по существу написанного, то не нужно писать их в комментариях к этому посту, и вообще к “средовым” переводным постам мне, сюда. Если вы хотите подискутировать с автором – напишите непосредственно ему, я всегда оставляю ссылки на оригинальные публикации. Спасибо за понимание. А теперь – как всегда острая и полемическая статья Recoverymonkey, с очередной шпилькой в адрес EMC VNX.</p>
<h3>EMC conclusively proves that VNX bottlenecks NAS performance</h3>
<p>Posted on <a href="http://recoverymonkey.org/2011/02/24/emc-conclusively-proves-that-vnx-bottlenecks-nas-performance/">February 24, 2011</a> by <a href="http://recoverymonkey.org/author/admin/">Dimitris</a></p>
<p>Немного провокативный заголовок, не правда ли?</p>
<p>Позвольте мне объяснить.</p>
<p>EMC опубликовала новые результаты SPEC SFS в рамках своей маркетинговой кампании (которая работает, смотрите чем я занят – я говорю о них).</p>
<p>Если по-простому, то EMC получила почти 500 тысяч SPEC SFS NFS IOPS (уточню последнее, чтобы не спутать с “блочными” IOPS в SPC-1) на следующей конфигурации:</p>
<ul>
<li><strong>Четыре</strong> (4) полностью независимых массивах VNX, каждый на дисках SSD (всего 8 контроллеров, так как каждый массив имеет 2 контроллера).</li>
<li><strong>Пять</strong> (5) Celerra VG8 NAS heads/gateways (1 как spare), по одному поверх каждого VNX</li>
<li><strong>Две</strong> (2) Control Station</li>
<li><strong>Восемь</strong> (8) экспортов&#160; файловых систем (по две на каждую голову VG8/VNX)</li>
<li>Несколько пулов хранения (по крайней мере один на каждую VG8) – без совместного доступа, например с других контроллеров, без переноса данных с других контроллеров. </li>
<li>Всего <strong>60TB</strong> пространства NAS под RAID5 (или по 15TB с каждого массива)</li>
</ul>
<p>Этот пост не о том, что приведенная конфигурация нереальная и дорогая (никто не заплатит 6 миллионов долларов за 60TB в NAS). Как я понял, EMC старается опубликовать наилучший результат теста путем объединения в кучу нескольких отдельных массивов с SSD. Это в принципе нормально, если понимать детали.</p>
<p>Претензии мои тут в том, как это подается.</p>
<p>EMC говорит о тестируемой конфигурации очень расплывчато (за деталями приходится идти <a href="http://www.spec.org/sfs2008/results/res2011q1/sfs2008-20110207-00177.txt">непосредственно на сайт SPEC</a>). В рекламных материалах просто говорится, что <em>EMC VNX показала результат </em><span lang="RU"><em>497623 SPECsfs2008_nfs.v3 операций в секунду</em>. Это что-то типа того, как если бы вы сказали, что нормально пройти четверым первоклассникам на сеанс в кино “до 18”, потому что, дескать, “всем четырем вместе больше 18”.</span></p>
<p><span lang="RU">Нет, более правильно и корректно было бы сказать, что четыре массива VNX, работающих отдельно и независимо друг от друга, показали результат <strong>124405</strong> SPECsfs2008_nfs.v3 IOPS&#160; - <strong><u>каждый</u></strong>.</span></p>
<p><span lang="RU">EMC просто сложила результаты четырех отдельных, независимых устройств вместе!</span></p>
<p><span lang="RU">У NetApp <a href="http://www.spec.org/sfs2008/results/res2010q4/sfs2008-20101018-00172.html">уже есть результат SPEC SFS для FAS6240</a>, где всего два контроллера выдают <strong>190675</strong> SPEC NFS IOPS, в одной системе, настоящем unified, без нагромождения отдельных контроллеров, без использования SSD (на обычных SAS, плюс большой кэш), то есть на реальной, практической конфигурации, которую мы продаем ежедневно, а не на каком-то там лабораторном “звездолете”.</span></p>
<p><span lang="RU">Если сделать также, как поступил EMC, то есть сложить четыре таких системы вместе (в случае NetApp, у нас при этом можно использовать <a href="http://media.netapp.com/documents/ds-2951.pdf">Cluster-mode</a>, с общим файловером между этими четырьмя нодами ), то мы получим следующие результаты:</span></p>
<ul>
<li><span lang="RU"><strong>762700</strong> SPEC SFS NFS операций</span></li>
<li><span lang="RU"><strong>8</strong> экспортируемых файловых систем</span></li>
<li><span lang="RU"><strong>334TB</strong> usable пространства в RAID-DP (в <em>тысячи</em> раз надежнее RAID-5)</span></li>
</ul>
<p><span lang="RU">Какой вариант, по вашему, более выгодная покупка? Та что более быстрая, 343TB с большей надежностью, или та, что медленнее, 60TB и меньше надежности? ;)</span></p>
<p><span lang="RU">Пользователи других систем также могут легко проделывать такой же трюк с умножением их результатов измерений, вперед!</span></p>
<p><span lang="RU">Если же говорить серьезно, то, что побудило меня так озаглавить пост, это факт того, что тестирование EMC убедительно продемонстрировало, что VNX сам по себе является узким местом. Фактически мы видим, что VNX может обслуживать только <em>одну</em> “голову” VG8 на максимальной для себя скорости, зачем и понадобилось четыре отдельных системы для демонстрации нужного результата. Таким образом, факт того, что VNX может иметь над собой до 8 “голов” Celerra ничего не значит, так как в такой системе back-end это и есть ограничивающий производительность фактор.</span></p>
<p><span lang="RU">Но с одной “головой” NAS вы будете ограничены доступным объемом в 256TB, столько одна голова Celerra может адресовать на момент написания статьи. Впрочем, этого достаточно для обычного пользователя.</span></p>
<p><span lang="RU">Любопытно, а те “головы” NAS, которые продаются вместе с VNX, медленнее, чем VG8, и насколько? Понятно, что большинство пользователей будут использовать те “головы”, что идут в комплекте, так как это обходится дешевле. Как быстро работают они? Уверен, клиенты хотели бы знать как быстро работает именно то, что они, обычно, покупают.</span></p>
<p><span lang="RU">Также очень интересно, как быстро работает RAID6.</span></p>
<p><span lang="RU">А вообще было бы здорово измерять бенчмарки именно того, что пользователь на самом деле покупает, а не абстрактных “болидов Formula 1”!</span></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/benchmark/index.html" rel="tag">benchmark</a>, <a href="../../../tag/emc/index.html" rel="tag">emc</a>, <a href="../../../tag/nfs/index.html" rel="tag">nfs</a>, <a href="../../../tag/sfs.html" rel="tag">sfs</a>, <a href="../../../tag/spec.html" rel="tag">spec</a>, <a href="../../../tag/vnx.html" rel="tag">vnx</a><br />					Раздел: <a href="../../../category/translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;" rel="category tag">переводы</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../872/trackback.html#comments" title="Комментарий к записи EMC убедительно демонстрирует проблемы VNX">Комментарии (7)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-884">
				<h2 class="posttitle"><a href="../../../884/trackback.html" rel="bookmark" title="Permanent Link to Смотрим внимательно на EMC VNX/VNXe. Часть 3">Смотрим внимательно на EMC VNX/VNXe. Часть 3</a></h2>
				<div class="postmetadata">25 Апрель 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Продолжим наше “журналистское расследование” и пройдем детальнее по моделям и семействам. Начнем с младшей серии – VNXe, которая, вследствие именитости вендора и привлекательности цены вызвала большой интерес на отечественном массовом рынке.</p>
<p>На что же следует обратить внимание, останавливая свой выбор на EMC VNXe, из того, о чем, часто, самим EMC упоминается вскользь. ??ли, как пишет один блоггер, <em>“всегда читайте то, что написано на странице самым мелким шрифтом”</em>. Вооружимся лупой и приступим к чтению :)</p>
<p>Как я уже писал в первой части, очевидной целью VNX/VNXe на рынке являются системы NetApp, слишком очевидно, что многое в них сделано с прицелом “ответ на”. А поэтому давайте определим, с какими системами NetApp соответствующие модели EMC VNXe конкурируют, и оценим их плюсы и минусы.</p>
<p>VNXe – это системы “младшего” семейства. ??х естественным конкурентом являются модели 2000-й серии NetApp FAS, а также, отчасти, модель 3210 из “новых”. Напомню, что серия 2000 у NetApp состоит на сегодня из трех моделей, это FAS2020 и 2050, производящиеся <a href="../../../8/trackback.html">с 2007 года</a>, и подходящих к концу своей активной карьеры, и более новой <a href="../../../420/trackback.html">FAS2040</a>. Также частично в это семейство попадает <a href="../../../743/trackback.html">FAS3210</a>.</p>
<p>Совершенно естественно, что для VNXe возможности FAS2000 надо “крыть”, что, впрочем, по идее, не должно быть сложным, перебивать системы 4-летней давности.</p>
<p>В серии VNXe имеются две модели – <strong>VNXe 3100</strong> и <strong>VNXe 3300</strong>. </p>
<p><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/pics//image85.png" width="221" height="57" /><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/pics//image86.png" width="229" height="80" />    <br />VNXe 3100 превосходит по формальным параметрам FAS2020 (было бы удивительно, если бы новая система проигрывала бы по ним системе 4-летней давности;), например по максимальному количеству дисков (96 у 3100 против 60 у 2020) и больше кэш памяти (8GB против 2GB). Однако VNXe 3300 проигрывает по максимальному количеству дисков системе FAS2040 (120 против 136 дисков), но превосходит по объемам кэша (24 против 8 GB). Также в системах класса FAS2000 нет опции 10GB Ethernet, она появляется только на 3210.</p>
<p>Однако давайте посмотрим внимательнее на сторону общих ???факапов’ ;)</p>
<p>Как я уже мельком упоминал в первой части, EMC решила в VNXe <strong>полностью отказаться от FC</strong>. FibreChannel в VNXe не предлагается даже как опция. В чем-то я даже соглашусь с таким решением, как вы знаете я последовательный сторонник <em>Ethernet storage</em>, но если в случае FAS2020 у нас есть выбор, продолжать использовать FC или нет, то в VNXe это решили за нас. Все, FC – вчерашний день. Его в этих системах не будет. Точка.     <br />Как опция есть 10G Ethernet (для 3300 только). впрочем, как я понимаю, это <strong>не Unified Target</strong>, завести в него все интерфейсы и протоколы, и сделать в нем FCoE не выйдет. Также вопрос, насколько 10G Ethernet полноценно потянет внутренняя шина. В новых 3200/6200 у NetApp шина сделана PCIe 2.0, вдвое более широкая, чем обычный PCIe, не в последнюю очередь именно ради комфортного и достаточного обеспечения работы 10G Ethernet портов.</p>
<p>Довольно теоретическое ограничение для систем “малого класса” на количество LUN/Vol. У 3100 <strong>допустимо максимум 128 LUN и 256 Vol</strong> (512 у 3300), что сильно меньше, чем 1024 у FAS2020, хотя я&#160; не думаю, что такая маленькая система, как 3100 сможет упереться в 128 LUN-ов в реальной жизни. Но держать в памяти стоит.</p>
<p>Самая серьезная проблема, с которой столкнутся будущие покупатели VNXe, это, на мой взгляд, <strong>невозможность апгрейда с data-in-place</strong> (то есть с сохранением данных “на их местах”, на дисках) на более “взрослые” системы VNX, а также, если вы уже клиент EMC, то невозможности data-in-place с ваших текущих систем, например AX4 или NX4.</p>
<p>Если вы переросли VNXe, и захотели перейти на VNX, то не обманывайтесь похожестью аббревиатур, различие тут не в одной маленькой буковке ???<em>e</em>’.     <br />EMC VNX и VNXe это <strong>принципиально разные по внутреннему устройству системы</strong>. Просто перенестись между ними не выйдет, как и не выйдет перейти, например, с сегодняшней вашей Clariion AX4 или CX4-120, или Celerra NX4, на VNXe.     <br />Переход возможен только с полным переносом данных со старой на новую. Старую систему забэкапили, остановили, вынули, новую собрали и поставили, проинсталлировали и разбили, и данные на нее восстановили. Старую можно попробовать продать на eBay ;)</p>
<p>У FAS2000 тоже не все в порядке с апгрейдабельностью на midrange, увы, это общая плата за дешевизну, но у них вы хотя бы штатно можете взять все ваши имеющиеся полки с дисками расширения и переключить их, прямо кабелями, на контроллер новой системы, будь то хоть даже FAS6280, и все данные увидятся, поднимутся и заработают немедленно после физического переключения. ?? в любом случае вы сможете использовать диски и полки от старых систем на новых. Новая серия FAS3200/6200, как и более ранние, поддерживает как FC, так и SAS.</p>
<p>По софту. Я уже говорил в первой части о определенных проблемах софтверного плана, остановлюсь на этом более подробно.</p>
<p>Я уже упоминал, что дедупликация на VNX/VNXe <strong>только пофайловая</strong>, то есть работает на NAS-уровне только, и дедуплицирует <strong>только полностью идентичные файлы</strong>, в отличие от субфайловой/блочной дедупликации NetApp, которая может дедуплицировать и содержимое различных файлов, если внутри у них есть сходные фрагменты. Пример – разные файлы vmdk с разными виртуальными машинами в них, но с идентичной OS, и, следовательно, сильно совпадающих по содержимому. В целом файлы vmdk не одинаковы, но в значительной мере идентичны внутри.    <br />Как показывает исследование (например см. публикацию с конференции FAST’11: <a href="http://www.usenix.org/events/fast11/tech/full_papers/Meyer.pdf">A Study of Practical Deduplication</a>), субфайловая дедупликация сравнительно маленькими блоками (в случае NetApp размер фиксированного блока равен 4KB) более эффективна, чем файловая.     <br />Следует также помнить, что “файловая” дедупликация EMC не работает на самых “вкусных” с точки зрения дедупликации задачах, например на NFS-хранилище для VMware, где NetApp стабильно показывает 70-90% снижения занимаемого данными объема.</p>
<p>Возможно, во второй половине года, будет объявлено о выпуске блочной дедупликации у VNX. Обещаю тогда, когда она стант официально доступна, внимательно рассмотеть ее, прочитать все написанное мелким шрифтом (есть ощущение, что радость придет далеко не всем), и рассказать вам о ней.</p>
<p>Репликация для VNXe имеется <strong>только асинхронная</strong>. Конечно, асинхронная репликация более востребована, особенно на небольших системах, но тут опять же “все выбрали за нас”. “Вам не нужна синхронная репликация” (и рукой так, по джедайски;). Кроме того, репликация также не имеет никаких средств оптимизации (например компрессии) трафика, передаваемого по WAN. Это возможно сделать какими-то сторонними, внешними средствами, например с помощью устройств <a href="http://www.netwell.ru/production/riverbed/riverbed_about.php">Riverbed</a>, но у NetApp эта “компрессия” встроена.</p>
<p><strong>Нет собственных средств для offsite-backup</strong>, например чего-то аналогичного <a href="../../../879/trackback.html">SnapVault</a>, а хранение снэпшотов на дисках системы по прежнему больно ударяет по производительности, каковой проблемы лишен NetApp.</p>
<p><strong>SnapSure несовместим с дедупликацией (single-instancing) и компрессией.</strong> Либо снэпшоты, либо дедупликация и компрессия. Если вы планируете использовать дедупликацию и компрессию, вы сильно сокращаете набор доступных вам для этих данных возможностей, таких как клоны и снэпшоты.</p>
<p><strong>Компрессия – постпроцесная</strong>, то есть как дедупликация в NetApp. Сперва записали много, а потом что-то вернули когда отработают процессы. У NetApp компрессия онлайн. То есть вы “на ходу” записываете на диски меньше.</p>
<p>Дедупликация и компрессия работают только на файловом уровне, а размер файлового тома <strong>не может превышать 16TB</strong>. Компрессия и дедупликация <strong>не работает для LUN-ов, VMDK, файлов PST, данных Oracle over dNFS, и прочего подобного</strong>.</p>
<p>Когда EMC говорит о полной сертификации под VMware, то тут есть определенная доля лукавства. В настоящий момент, по моим данным, <strong>VNXe 3100 сертифицирован только как NAS, а VNXe 3300 – только как iSCSI</strong> (если на момент публикации это уже изменилось – поправьте меня). Я уже писал ранее, в части 1, как все непросто с так называемым <em>Unified Storage</em> (делает жест “кавычки” пальцами рук;) в <em>понимании EMC</em>. ?? следовательно как все непросто с функциональной совместимостью между NAS и iSCSI SAN в такой конструкции.</p>
<p>Сильно муссируется факт принадлежности VMware компании EMC, из этого как-бы естественно должен вытекать вывод, что системы EMC для VMware <em>“более родные”</em>, однако тут не все так просто. Несмотря на то, что 70% акций VMware действительно принадлежит EMC, VMware (<a href="http://finance.yahoo.com/q?s=VMW&#038;ql=1">VMW</a>) это independently listed company, то есть ее акции котируются на бирже независимо от акций <a href="http://finance.yahoo.com/q?s=EMC&#038;ql=1">EMC </a>(а вот, например, Isilon (<a href="http://finance.yahoo.com/lookup?s=ISLN">ISLN</a>), или Data Domain (<a href="http://finance.yahoo.com/lookup?s=DDUP">DDUP</a>) других недавних покупок EMC – уже нет), и она во многом самостоятельно определяет свою политику на рынке. Парадоксально, но, если мне не изменяет память, отношения технологического партнерства у VMware с NetApp чуть ли не более продолжительные, чем с собственно EMC! Они были установлены еще до &#8220;покупки&#8221; VMware!</p>
<p>У VNXe (сейчас) нет возможности использовать SSD, а следовательно – <strong>нет FASTcache</strong>. У NetApp для FAS2000 тоже нет FlashCache, зато он есть в FAS3210, который вполне можно, умеючи, “умять” по цене в “старшие low-enterprise”, если Flash вам понадобится. Тем не менее помните, что когда EMC говорит про FASTcache, это не относится к VNXe.</p>
<p><strong>Нет FAST VP</strong> – автоматизированного storage tiering, с переносом данных с SAS на NL-SAS.</p>
<p><strong>Нет официальных, подтвержденных данных о производительности новой архитектуры</strong>. Ну то есть заталкивать девушек в Mini это прикольно и честно-благородно, но все же как там насчет <strike>баб</strike> производительности, а? ??звините, что я вам весь пафос момента сбиваю, нам бы вот на IOPS-ы бы посмотреть, а? ;)    <br />Впрочем, про производительность и о “EMC’s approach” к этому вопросу это мы еще поговорим в среду и далее.</p>
<p>Да, несомненно системы VNXe имеют поразительно низкую для своего класса цену. Но, строго говоря, “цена ниже рыночной” должна вас сперва насторожить (а только потом – обрадовать). Если VNXe так хорош, то почему его отдают так дешево? Нет ли тут <em>some gotchas</em>, как выражаются наши англоязычные друзья? Ведь не секрет, что в энтерпрайзе&#160; “потребительская ценность” есть сумма из:</p>
<p><strong>Цена железа + бренд + потребительские свойства = потребительская ценность</strong></p>
<p>Если бренд высок у обоих вендоров, если цена физического железа примерно равна, то низкую цену для потребителя на выходе мы можем получить только за счет какой-то недостачи в потребительских свойствах, по сравнению с аналогичным продуктом конкурента, какую мы и постараемся замаскировать “привлекательной ценой”. Либо же объявленная цена есть фактический “порог рентабельности”, а значит нет надежд на значительную скидку в процессе привычного торга в “треугольнике” <em>вендор-партнер-клиент</em>.</p>
<p>Да, цена у NetApp обычно высока, но почему именно она высока, я уже писал <a href="../../../770/trackback.html">в посте ранее</a>. За большую цену и возможностей вам достается больше. Для многих это достаточный аргумент, для кого-то – нет. Но я бы хотел, чтобы вы помнили очень хорошую фразу в отношении цены покупки в IT: <em>“Деньги вы экономите один раз и “дядины”, а геморрой покупаете надолго и свой”.     <br /></em>Пусть не застилает вам глаза <em>низкая цена</em>.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/emc/index.html" rel="tag">emc</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/vnx.html" rel="tag">vnx</a>, <a href="../../../tag/vnxe.html" rel="tag">vnxe</a><br />					Раздел: <a href="../../../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;" rel="category tag">review</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../884/trackback.html#comments" title="Комментарий к записи Смотрим внимательно на EMC VNX/VNXe. Часть 3">Комментарии (5)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-881">
				<h2 class="posttitle"><a href="../../../881/trackback.html" rel="bookmark" title="Permanent Link to Откуда вообще берется фрагментация?">Откуда вообще берется фрагментация?</a></h2>
				<div class="postmetadata">21 Апрель 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Так что же там на самом деле происходит с фрагментацией на NetApp?</p>
<p>Давайте, для начала, разберемся с основами. Я в этом блоге уже не раз писал о проблеме фрагментации, и желающих сошлю в более ранние посты, например <a href="../../../221/trackback.html">сюда</a> и <a href="../../../225/trackback.html">сюда</a>.</p>
<p>К сожалению тема фрагментации данных на WAFL до сих пор остается в некотором роде <a href="http://dic.academic.ru/dic.nsf/enc3p/333174">эзотерическим</a> знанием. Связано это, в первую очередь с тем, как мне представляется, что рассказ о фрагментации и необходимом противодействии ему, затрагивает ряд чувствительных особенностей функционирования WAFL, деталях, которые NetApp, по разным причинам (совсем не обязательно злонамеренным), разглашать пока не хочет.</p>
<p>Поэтому официальная позиция состоит в рекомендации, в случае, если влияние фрагментации в вашем конкретном случае, проявляется негативно (она, кстати, может и не проявляться), то включать wafl reallocate ( <code>reallocate on / reallocate start [/vol/volname]</code>) и спать счастливо.</p>
<p>Вообще же FUD вокруг <em>non-contiguous wafl blocks allocation</em> построен (впрочем, как и почти любой FUD) вокруг плохого представления технических деталей процесса и иногда чистосердечного, а чаще злонамеренного “непонимания” этих деталей. Давайте, для начала, разберем как же записываются данные в WAFL, по крайней мере на том уровне, на котором нам этот процесс показывает NetApp.</p>
<p>Но начать придется издалека.</p>
<p>   <a href="../../../881/trackback.html#more-881" class="more-link"><small>Continue reading &#8216;Откуда вообще берется фрагментация?&#8217; &raquo;</small></a></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/fragmentation.html" rel="tag">fragmentation</a>, <a href="../../../tag/fud/index.html" rel="tag">fud</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/wafl/index.html" rel="tag">wafl</a><br />					Раздел: <a href="../../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../881/trackback.html#comments" title="Комментарий к записи Откуда вообще берется фрагментация?">Комментарии (12)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-868">
				<h2 class="posttitle"><a href="../../../868/trackback.html" rel="bookmark" title="Permanent Link to Смотрим на EMC VNX/VNXe внимательно. Часть 2">Смотрим на EMC VNX/VNXe внимательно. Часть 2</a></h2>
				<div class="postmetadata">20 Апрель 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>&#160;</p>
<p>Сегодня у нас не просто дюжина, а целых <a href="http://recoverymonkey.org/2011/01/13/questions-to-ask-emc-regarding-their-new-vnx-systems/">три дюжины ножей</a> в спину EMC-шной “революции”, “неудобные вопросы” к EMC по поводу VNX/VNXe от блоггера <a href="http://recoverymonkey.org/">Recoverymonkey</a> (Dimitris Krekoukias), общим числом 36, опубликованные в его блоге.</p>
<p>Dimitris – сотрудник NetApp, но ведущий собственный, автономный и независимый блог, вне blogs.netapp.com, пишущий много интересного, так что переводы его публикаций в этом блоге будут появляться часто.</p>
<p>Беспрецедентная маркетинговая шумиха, поднятая вокруг старта новых продуктов EMC – систем VNX/VNXe не должна совсем запорошить нам глаза, настолько, чтобы мы не могли критически проанализировать возможные недостатки новой системы, а их, если посмотреть внимательно, хватает. ?? в особенности остановимся на многократно повторяемом EMC-персонами в отношении новых систем слово <em>Unified</em>.&#160; <br />Немного сокращенный перевод поста <em>recoverymonkey</em> предлагается сегодня вашему вниманию.</p>
<h3>Questions to ask EMC regarding their new VNX systems…</h3>
<p>Posted on <a href="http://recoverymonkey.org/2011/01/13/questions-to-ask-emc-regarding-their-new-vnx-systems/">January 13, 2011</a> by <a href="http://recoverymonkey.org/author/admin/">Dimitris</a></p>
<ol>
<li>Возьмем, к примеру, систему VNX емкостью&#160; 100TB. Допустим, что мы отдали <em>все</em> 100TB под NAS. Допустим, что все 100TB были первоначально заполнены данными, но затем, год спустя, объемы данных в NAS уменьшились, и сейчас занимают всего 70TB. Могу я взять эти освободившиеся 30TB и <em>немедленно</em> использовать их под FC? Ну хранилище же теперь “unified”, так? Без необходимости нарушать&#160; best practices для размещения LUN на Celerra? </li>
<li>Является ли VNX (или хотя бы NS, стоящая перед ним) системой, сертифицированной на “пять девяток”? (Это так для CX, но как насчет комбинации CX/NS?) </li>
<li>Где в архитектуре принципиальная разница с тем, что было до сих пор? Все выглядит так, что у вас есть 2 штуки CX SP, и перед ними NAS gateways. Выглядит очень похоже на то что было, и по прежнему в этом нет ничего <em>unified</em>. Давайте все же привнесем немного правды в рекламу! Только маленькие VNXe выглядят чуть иными (не с точки зрения софта, но хотя бы с точки зрения количества корпусов, на которых это работает). </li>
<li>Кажется новые системы лицензируются по емкости? </li>
<li>Могут ли новые системы использовать больше 2TB в FAST Cache? (больше чем текущий CLARiiON CX4-960) </li>
<li>Как дела с гранулярностью при использовании RecoverPoint при репликации NAS-части? Кажется там необходимо реплицировать весь NAS как единый чанк, как одну большую consistency group, с необходимостью использовать Celerra Replicator для большей гранулярности? </li>
<li>Как дела с гранулярностью при восстановлении NAS в RecoverPoint? Нельзя сделать восстановление на уровне отдельного файла или даже тома? </li>
<li>Можно ли сделать обновление с сохранением данных на дисках, в случае уже имеющихся CX3 или CX4 (data-in-place upgrade) или это обновление с полной заменой (forklift upgrade)? </li>
<li>Почему FASTv2 не рекомендован для Exchange 2010? </li>
<li>Может ли FAST на VNX исключать из анализа ряд периодов времени, которые могут сбить его алгоритм, например период создания резервной копии данных? </li>
<li>А FAST файлового уровня это по прежнему отдельная подсистема? </li>
<li>Почему для VNXe в принципе нет варианта использовать FC? </li>
<li>Можно ли обновиться с VNXe на VNX? </li>
<li>А на VNXe есть FAST? </li>
<li>Почему FAST по-прежнему использует такой огромный и неэффективный чанк размером аж 1GB? </li>
<li>Почему такие функции, как блочный доступ, NAS и репликация по прежнему требуют использования отдельного друг от друга железа и софта? </li>
<li>Почему по-прежнему существуют две различные системы создания снэпшотов? </li>
<li>Ну хотя бы теперь блочные снэпшоты не вызывают такого огромного падения производительности? Кстати, как дела со снэпшотами на NAS? </li>
<li>Хотя бы теперь мы можем хранить снэпшоты на системе подолгу, например год, если это нам необходимо? </li>
<li>Почему предлагается целых 4(четыре!) разных средства репликации? (Mirrorview, Celerra Replicator, Recoverpoint, SAN copy) </li>
<li>Что там о сих пор делают в таком количестве все эти разные OS? (Windows в StorageProcessor, Linux в Control Station и RecoverPoint, DART в NAS-blades, может быть больше, если вы захотите добавить Rainfinity и Atmos) </li>
<li>Почему по-прежнему нет дедупликации для FC и iSCSI? </li>
<li>Почему нет дедупликации для памяти/кэша? </li>
<li>Наконец, почему нет суб-файловой дедупликации вообще? </li>
<li>Почему Celerra по-прежнему ограничена объемом 256TB на один data mover? </li>
<li>?? Celerra по-прежнему ограничена объемом 16TB на том? ??ли нам нужна еще одна, <em>полностью отдельная система</em> (Isilon), чтобы получить объем тома больше 16TB? </li>
<li>Celerra по-прежнему не умеет совместно использовать том между data movers? ??ли для этого опять нужен Isilon? </li>
<li>Почему мы не можем передавать все протоколы по одному 10Gb-линку, если VNX это настоящий “unified”? </li>
<li>Устранены ли проблемы с производительностью при использовании thin provisioning ? </li>
<li>Устранены ли проблемы с “узким горлом” (bottlenecks) для пула? </li>
<li>Можем ли мы в самом деле делать stripe/restripe в пуле FLARE? Когда добавляем пространство? С использованием thin provisioning? </li>
<li>Для того, чтобы использовать thin provisioning, по-прежнему нужна миграция данных? </li>
<li>Устранены ли проблемы с низкой эффективностью RAID5 и RAID6 при записи? ?? каким образом? </li>
<li>Будут ли бенчмарки для новых систем показываться для RAID6, или это будет, по-прежнему, только RAID10? Как насчет участия в бенчмарках SPC-1? </li>
<li>Почему EMC по-прежнему обходит стороной тот факт, что ее <em>пулы</em> теперь построены с использованием файловой системы? Может быть потому, что они продолжают утверждать, что такое, де, не <em>настоящий SAN</em>, даже в совсем <a href="http://chucksblog.emc.com/chucks_blog/2010/10/more-on-pnfs.html">недавних утверждениях</a>? </li>
<li>Теперь, когда EMC использует файловую систему чтобы получить в CX SPs функциональность пулов, thin provisioning, компрессии и auto-tiering (и, возможно, дедупликаци в будущем), как собирается решаться проблема фрагментации? (О как повернулась ситуация!) </li>
</ol>
<p>Таким образом, когда EMC говорит о “Unified Storage”, они на самом деле имеют ввиду “Unified Management”. Было бы здорово, если бы они были честными, и так бы это и говорили, о <em>“наших новых системах хранения, с новым единым управлением, пусть и не unified-архитектурой”.</em>     <br />Но <em>“новые системы хранения с unified-управлением но не-unified-архитектурой”</em> гораздо хуже выговаривается, чем “unified storage”.     <br />Unified Management, к сожалению,&#160; не может помочь решить многих нижележаших проблем и ограничений, хотя, безусловно, позволяет показать ряд впечатляющих демонстраций.</p>
<p>Крутой GUI под которым находится наскоро слепленный <em>франкенсторадж</em> с использованием множества различных технологий, это конечно “работает” для пользователя, и винегрет под общей крышкой хорошо замаскирован снаружи, пока все… как правило в самый неподходящий для этого момент.</p>
<p>Конечно, средства управления это основной “интерфейс к системе” для конечного пользователя, многие люди не заботятся о том, что там, за ним, внутри, у них нет ни времени, ни склонности учиться. Я просто хочу пригласить их узнать побольше, начать думать о том, как оно там устроено внутри, потому что когда там внутри устраиваются какие-то трюки, и когда внешний GUI прикрывает разрозненных 4-5 различных продуктов, собранных под ним вместе, и когда оно перестает работать так, как задумано, то вас могут начать “футболить” между 3-4 различными и плохо связанными между собой группами поддержки, которые будут пытаться выяснить, какой из продуктов в итоге явился причиной проблемы.</p>
<p>Всегда думайте в плане того, что будет, если что-то пойдет “не так”, и всегда предполагайте, что вещь сломается – только в этом случае вы будете иметь готовыми надлежащие процедуры, и будете готовы к худшему.</p>
<p>?? всегда помните, что чем сложнее машина, тем сложнее найти поломку, тем сложнее ее починить, когда она сломалась (а она сломается, они всегда ломаются, все и всегда). Никакая внешняя красота не заменяет чистого и простого инженерного решения внутри.</p>
<p>Конечно, <a href="http://www.wired.com/gadgetlab/2010/03/ok-go-rube-goldberg/">машина в стиле Rube Goldberg-а</a> это прикольно, если прикол есть ваша конечная цель.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/emc/index.html" rel="tag">emc</a>, <a href="../../../tag/recoverymonkey.html" rel="tag">recoverymonkey</a>, <a href="../../../tag/unified.html" rel="tag">unified</a>, <a href="../../../tag/vnx.html" rel="tag">vnx</a>, <a href="../../../tag/vnxe.html" rel="tag">vnxe</a><br />					Раздел: <a href="../../../category/translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;" rel="category tag">переводы</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../868/trackback.html#respond" title="Комментарий к записи Смотрим на EMC VNX/VNXe внимательно. Часть 2">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-871">
				<h2 class="posttitle"><a href="../../../871/trackback.html" rel="bookmark" title="Permanent Link to Смотрим на EMC VNX/VNXe внимательно. Часть 1">Смотрим на EMC VNX/VNXe внимательно. Часть 1</a></h2>
				<div class="postmetadata">18 Апрель 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Ну вот, как я и обещал раньше, дав поднятой маркетинговыми <em>лаунчами</em> пыли осесть, взбутетененной мути – отстояться, а объективным данным и анализам – появиться, начнем мы в этом блоге серию постов про продукт нашего ближайшего “соседа”-конкурента, новинку EMC, системы хранения серии VNX/VNXe.</p>
<p>Напомню, что в январе EMC с большим шумом и беспрецедентным размахом выкатил ряд новинок, и главную – новую линейку систем хранения младшего-среднего “энтерпрайза” – EMC VNX/VNXe, приходящую на смену классическим CLARiiON/Celerra.    <br />Шум при этом был настолько большой и гм-м.. <em>странный</em> по форме, что сразу возникло подозрение, что этим масштабным <em>лаунчем</em> и <em>сценическим шоу</em> пытаются отвлечь внимание от определенных недостатков и “недоработок” продукта.</p>
<p>Следует отметить, что, безусловно, выпуск VNX это большой шаг EMC, причем шаг в правильном направлении. ?? пусть злые языки сейчас говорят, что EMC, мол, выпустила новый сторадж, “чтобы было как у NetApp”, мы отметем эти реплики с мест как неорганизованные (с). Приятно, конечно, когда мировой лидер взялся реализовать, пусть и с многолетним опозданием, решения, которые придумала и много лет продвигала значительно меньшая компания, тем самым признавая ее приоритет в этом вопросе, и правильность ее пути. Но все же это решение EMC. Что же нового в этих полностью новых системах хранения?</p>
<p>Ну-у, у них теперь крутая интегрированная система управления Unisphere.</p>
<p>А что там в аппаратной части? Как оно вообще, этот новый Unified Architecture?&#160; <br />Новые процессора, переход на SAS-диски и SAS-интерфейсы к полкам (велкам ту зе клаб, наконец-то). Новые передние панели, очень эффектные :)     <br />…?? все?     <br />А вот похоже на то, что и все. Удивлены? Да не то слово.</p>
<p>Но как же, как же, ведь нам обещали новую, прогрессивную, передовую Unified Architecture, нечто по-настоящему новое, оно где? Оно ведь есть?</p>
<p>Ну-у… Давайте посмотрим, что появилось нового.    <br />Слева – классическая Celerra NS, справа – новый VNX.</p>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/pics//image83.png" width="769" height="423" /></p>
<p>Может быть я недостаточно фанат EMC (что очевидно), но по моему нам пытаются продать то же самое, но, в лучших традициях ритейла, “теперь в новой, удобной упаковке”, <strike>с банановым вкусом</strike>. :)</p>
<p>Да, VNX действительно может отдавать данные на дисках по разным, как блочным, так и файловым протоколам, это то, что “у нас в деревне” называется <em>multiprotocol</em>.&#160; <br />Но Multiprotocol это все же не то же самое, что Unified.     <br />Рядом, но не то же самое.</p>
<p>Это все равно, как если бы некто, с большим шумом объявил бы о ребрендинге и новом, прогрессивном логотипе компании <strong><font color="#0000ff">ЗЕЛЕНОГО</font></strong> цвета. Зеленый это экологичность, он несет в себе стабильность, позитивность, дружественность…     <br />- Погодите, – перебиваете вы докладчика – я что-то не понял. Вы говорите “зеленый”, но логотип же – синий?     <br />- Да какая разница, – отвечают вам, зеленый это теперь новый оттенок синего! Главное что он – <strong><font color="#0000ff">ЗЕЛЕНЫЙ</font></strong>, новый, и прогрессивный!</p>
<p>Самое печальное в этой истории, что когда такая маркетинговая и сейловая машина, какой располагает сегодня EMC, начнет настойчиво твердить рынку, что зеленый – это новый оттенок синего, а мультипротокольность – это и есть unified architecture, то рынок неизбежно, в конце концов, и сам поверит, что черное - белое (просто плохо освещенное) , зеленое – синее (ну, другой оттенок просто), а Unified Architecture – это собрать пять ящиков под тремя OS в одном шкафу, и продать клиенту по одной накладной.</p>
<p>Давайте все же остановимся на некоторых очевидных недостатках и проблемах для клиента при переходе на VNX/VNXe, видимых, так сказать, с “нашего берега” этой реки:   <br /><em><font color="#666666">(Прошу держать в памяти, что я не являюсь специалистом по оборудованию EMC, и что если где-то здесь, или в любом другом посте, где я говорю о продуктах конкурентов, я допускаю неточность или ошибку, не стесняйтесь мне на нее указать, я поправлю это место, спасибо.)</font></em></p>
<ul>
<li><strong>Полный отказ от “старых” дисковых полок, подключаемых по FC.</strong> Невозможность сделать data-in-place upgrade, то есть с сохранением данных на уже существующих дисках. Ну и что, что у вас уже два шкафа с дисками EMC под год назад купленный Кларион CX4 и 24&#215;7 ERP-база на них? Купите еще два шкафа дисков, скопируете, потом старые продадите кому-нибудь. </li>
<li><strong>Forklift upgrade даже и с VNXe на VNX</strong>, как бы ни были похожи аббревиатуры моделей – апгрейд только целиком, никакого data-in-place (с сохранением данных). &#8220;Внутри&#8221; VNX от VNXe отличаются сильно, не позволяя прямого перехода. </li>
<li><strong>Для VNXe нет FC как интерфейса подключения.</strong> Вообще нет.&#160; <br />Да, VNXe это entry level, и использование entry level с FC это, обычно, overkill, но, допустим, у вас есть уже развитая FC-инфраструктура с “большими” стораджами, и вам понадобилось включить в нее небольшой вспомогательный сторадж, для бэкапа-ли, для удаленной реплики, неважно. Включить в FC-фабрику VNXe вы не можете. Просто некуда. </li>
<li><strong>В VNXe нет FASTcache.</strong> Нет и не будет. Увы. </li>
<li><strong>По-прежнему полностью раздельная архитектура.</strong> Отдельно блочный сторадж (под FLARE), отдельно файловый гейтвей data mover (под DART), отдельно Control Station (под Linux), отдельно объектный гейтвей Athmos. С общим, снаружи, управлением под Unisphere. Никакого Unified Target.</li>
<li><strong>Только файловая дедупликация.</strong> Значит нет дедупликации для LUN-ов, например для Datastore под VMFS в VMware. Совсем нет. А для файлов эффективность меньше, чем в случае субфайловой/блочной дедупликации. Кстати для VMware и Oracle по NFS ее нет тоже.</li>
<li><strong>Множество разнородных софтверных средств для одних и тех же задач.</strong> Три разных инструмента для использования снэпшотов (<em>SnapSure</em> (file), <em>SnapView</em> (block), <em>RecoverPoint SE/CDP</em> (block)), три – для репликации (<em>Replicator</em> (file), <em>MirrorView</em> (block), <em>RecoverPoint SE/CRR</em> (block)), два – для локальных клонов (<em>SnapSure</em> (file), <em>SnapView Clones</em> (block)). Все с разными функциональными возможностями и особенностями применения. </li>
<li><strong>Capacity-based licensing.</strong> Низкая цена “на старте” может оказаться совсем не такой низкой, если вам понадобится увеличить емкость (а вам понадобится ее увеличить, это, в нынешнем мире, неизбежно) – готовьтесь платить еще, позже. </li>
</ul>
<p>В среду читайте перевод статьи блоггера <em>recoverymonkey</em> о <em>вопросах к EMC</em> по поводу запуска VNX, а далее, на следующей неделе, в понедельник и четверг соответственно, мы рассмотрим подробнее каждое семейство, VNXe и VNX, и то как, и чем они собираются конкурировать с системами NetApp.</p>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/pics//image84.png" width="640" height="365" /></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/emc/index.html" rel="tag">emc</a>, <a href="../../../tag/vnx.html" rel="tag">vnx</a>, <a href="../../../tag/vnxe.html" rel="tag">vnxe</a><br />					Раздел: <a href="../../../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;" rel="category tag">review</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../871/trackback.html#comments" title="Комментарий к записи Смотрим на EMC VNX/VNXe внимательно. Часть 1">Комментарии (18)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-879">
				<h2 class="posttitle"><a href="../../../879/trackback.html" rel="bookmark" title="Permanent Link to Что такое SnapVault и куда это применить?">Что такое SnapVault и куда это применить?</a></h2>
				<div class="postmetadata">14 Апрель 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>В новых Software Bundles, которые приходят новым покупателям систем NetApp часто включены лицензии на SnapVault (пример – Windows Bundle для распродажных FAS2020, о которых я <a href="../../../831/trackback.html">писал ранее</a>). Однако, к сожалению, всё еще не все хорошо представляют себе как это работает, как может применяться, и чем может быть полезно.</p>
<p>SnapVault это средство D2D Backup для систем хранения NetApp (а в случае использования Open Systems SnapVault – OSSV – и для обычных серверов), использующее их возможности по созданию и удаленному хранению снэпшотов.</p>
<p>Как вы знаете, в отличие от всех прочих систем хранения, использующих то, что у них также называется “снэпшоты”, NetApp не только не возражает, но даже поощряет хранить снэпшоты долговременно, непосредственно на дисках. Дело в том, что хранение снэпшотов на дисках, как своеобразной локальной “резервной копии”, вместе с собственно данными, не приводит к падению производительности всей системы хранения, как это происходит с COW (Copy-On-Write) “снэпшотами”. Поэтому на всех системах, кроме NetApp, снэпшоты используются лишь как “временное хранилище” состояния данных. Создали снэпшот в ночной тиши слабозагруженного датацентра, быстро слили на ленты или другое архивное хранилище, и скорее удалить.</p>
<p><a href="/pics//netapp-emc-snapshots.jpg"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="NetApp-EMC-snapshots" border="0" alt="NetApp-EMC-snapshots" src="/pics//netapp-emc-snapshots-thumb.jpg" width="345" height="262" /></a></p>
<p>Не все <strike>йогурты</strike> снэпшоты одинаково полезны. :)</p>
<p>Но в случае NetApp вы можете локально хранить десятки, если не сотни снэпшотов, и почти мгновенно с них восстановиться в случае сбоя. Однако разумные требования безопасности рекомендуют не хранить резервную копию вместе с оригинальными данными, во избежание ее повреждения вместе с оригинальным датасетом (например при физическом повреждении системы хранения).    <br />Это не означает, что ее нельзя там хранить совсем, но локально сохраненная копия по крайней мере не должна быть единственной резервной копией ваших данных!</p>
<p>Было бы разумно если и хранить копию локально, для максимально быстрого восстановления данных, то отдельный набор – удаленно, на тот нечастый, но возможный случай, когда локальная копия будет повреждена, например вместе со всем хранилищем.</p>
<p>Однако копирование снэпшотов “наружу”, на внешний массив, обычным образом, лишает нас всех преимуществ механизма снэпшотов. Такая “обычная копия” займет место, равное физической емкости всего набора данных, для каждого скопированного снэпшота, а не привычного нам для снэпшотов “разностного” объема, когда каждый снэпшот, видясь как индивидуальный набор данных, занимает только разницу в измененных блоках, в сравнении с предшествующим ему снэпшотом.</p>
<p>Было бы неплохо и копировать снэпшоты наружу как-то “по-снэпшотному”, сохраняя эту их эффективность использования места.    <br />??менно это и делает SnapVault.     <br />SnapVault – это способ хранить снэпшоты рабочих данных на внешнем хранилище, но “по-снэпшотному”, экономя пространство хранения.</p>
<p>Лицензии на SnapVault существуют в двух “ролях”. Одна называется <em>SnapVault Primary</em>, а вторая – <em>SnapVault Secondary</em>.</p>
<p><strong>SnapVault Primary</strong> – это лицензия, которая нужна для системы, служащей <em>источником данных</em>, это та система хранения, на которой хранятся непосредственно “боевые” данные, копию которых мы хотим сохранить.</p>
<p><strong>SnapVault Secondary</strong> – это лицензия, устанавливаемая на <em>получателя резервных копий</em>. На систему, которая хранит резервные копии от одной или нескольких SnapVault Primary систем.</p>
<p>В качестве SnapVault Primary может также работать так называемый <strong>Open Systems SnapVault (OSSV)</strong> – программный продукт (его для NetАpp написала компания Syncsort), устанавливаемый непосредственно на сервера под управлением Windows/Linux/etc и позволяющий им играть роль SnapVault Primary систем, делать на них снэпшоты (разумеется с определенными ограничениями, присущими то или иной OS), передавать их на хранение на систему SnapVault Secondary (В роли SV-Sec может быть только NetApp, нет OSSV Secondary), и восстанавливать их с таких снэпшотов, при необходимости.</p>
<p>Как и для чего можно применить SnapVault?</p>
<p>Например можно централизованно хранить резервные копии данных от множества отделений основного бизнеса, где, очень часто, нет достаточного бюджета и ресурсов для организации полноценного бэкап-решения. В случае использования SnapVault вам нужно только раз настроить расписание на удаленных системах и политики хранения резервных копий на центральном хранилище (это может быть выделенная система, или же пространство на основной системе хранения NetApp головной компании, с лицензией SV-Secondary на ней. А с использованием OSSV это можно делать и без систем NetApp в качестве Primary. ?? в дальнейшем резервные копии от всех систем будут автоматически, по расписанию, приходить на ваше хранилище с ролью SV-Secondary в главном датацентре.</p>
<p><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="SnapVault1" border="0" alt="SnapVault1" src="/pics//snapvault1.png" width="626" height="436" /></p>
<p>При этом только в первый раз будет передан полный объем хранения (так называемая baseline copy) для создания первоначального “снимка”, в дальнейшем через каналы передачи данных будет передаваться уже только “разностная” информация, например только измененные за день работы блоки данных.    <br />Допустим, что общий объем данных на вашей удаленной системе хранения равен 100GB. Но в течении суток меняется только около гигабайта.     <br />Тогда при первом, baseline transfer, будет передано все 100GB (это можно сделать, например, локально, перед тем, как отвезти систему хранения в удаленный офис), а затем, при ежедневном копировании, будет передаваться всего 1GB. ?? целый месяц ежедневных резервных копирований полной системы на Secondary-системе в центральном офисе займет всего около 130GB.</p>
<p>Также можно использовать SnapVault и для организации удаленной копии данных для Primary-системы для “квази-DR” решения. При этом в качестве резервного хранилища для мощной SnapVault Primary может служить недорогая и с невысокой производительностью, достаточной только для приема и хранения реплики данных, система с лицензией SnapVault Secondary.</p>
<p><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="SnapVault2" border="0" alt="SnapVault2" src="/pics//snapvault2.png" width="575" height="332" /></p>
<p>Совместно и интегрированно с NetApp SnapVault могут работать такие программные продукты, как CommVault Sympana Suite и Syncsort Backup Express.</p>
<p>Настраивать и управлять работой SnapVault можно как из командной строки, так и с помощью отдельного программного продукта NetApp – Protection Manager, который также сейчас поставляется в составе многих бандлов, например в ONTAP Essential для FAS3200/6200.</p>
<p>Наилучший способ углубиться в тему – прочесть <a href="http://www.netapp.com/us/library/technical-reports/tr-3487.html">TR-3487 SnapVault Best Practices Guide</a>,     <br />и <a href="http://www.netapp.com/us/library/technical-reports/tr-3466.html">TR-3466 Open Systems SnapVault Best Practices Guide</a>.</p>
<p><i>Я помню, что обещал вам &#8220;исследование&#8221; по истории фрагментации в файловых системах, но что-то у меня пока куражу нет его дописать на нужном уровне, придется подождать. Читайте пока про SnapVault, а на следущих две недели у меня спланирована большая программа по углубленному &#8220;полосканию косточек&#8221; EMC VNX/VNXe. Не переключайте ваши браузеры, будет интересно. :)</i></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/ossv.html" rel="tag">ossv</a>, <a href="../../../tag/snapshots.html" rel="tag">snapshots</a>, <a href="../../../tag/snapvault.html" rel="tag">snapvault</a><br />					Раздел: <a href="../../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../879/trackback.html#comments" title="Комментарий к записи Что такое SnapVault и куда это применить?">Комментарии (3)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-863">
				<h2 class="posttitle"><a href="../../../863/trackback.html" rel="bookmark" title="Permanent Link to В библиотеку FUD-а ;) HP о дедупликации.">В библиотеку FUD-а ;) HP о дедупликации.</a></h2>
				<div class="postmetadata">13 Апрель 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>В сегодняшнем переводе у нас будет еще один активный блоггер NetApp, <a href="http://blogs.netapp.com/drdedupe/biography.html">Larry Freeman</a>, пишущий с ником <a href="http://blogs.netapp.com/drdedupe">Dr.Dedupe</a>. Его основная тема в блоге – технология дедупликации в системах хранения NetApp, а поводом для переведенного поста – “<em>Неспровоцированная агрессия</em>” в отношении NetApp со стороны HP, которая выпустила в свет документ, под названием “<a href="http://blogs.netapp.com/files/hp_challenges-with-netapp-dedup.pdf">Understanding the Challenges Associated with NetApp’s Deduplication</a>” – “Разбор проблем, связанных с технологией дедупликацией NetApp”.</p>
<p>Ну что-ж, ответом на <em>неспровоцированную агрессию</em> будет наше <em>принуждение к миру</em>. ;)</p>
<h3>HP Launches an Unprovoked Attack on NetApp Deduplication</h3>
<p><em>By Larry Freeman AKA Dr.Dedupe</em></p>
<p><em></em></p>
<p>На днях я наткнулся на приведенный ссылкой выше документ, опубликованный HP, и озаглавленный “<em>Разбор проблем, связанных с технологией дедупликации NetApp”</em>. Я хочу поблагодарить HP за их попытку указать нам на наши проблемы, и постараюсь ответить взаимностью позже в моем блоге.</p>
<p>К сожалению, документ HP содержит много утверждений, которые либо вводят в заблуждение читающего, либо просто являются неправдой. Поэтому, в интересах точной журналистики, я использую сегодня мой блог, чтобы предложить мои ответы.</p>
<p><strong>Утверждение HP:</strong></p>
<p>“<em>Первичные данные</em>&#160;<font color="#a5a5a5">(здесь и далее я буду переводить слово <em>primary</em> как “первичные”, этим словом принято называть основные, активные, “боевые” данные приложений, в противоположность данным резервных копий и архивов, например. Прим. romx)</font> <em>имеют случайный характер&#160; доступа по своей природе. Дедупликация приводит к тому, что различные блоки данных записываются в различные места диска. NetApp WAFL усугубляет проблему, записывая данные в свободные места, ближайшие к головке записи дисков. Чтение данных вызывает пересборку этих блоков, в формат пригодный для чтения приложением. Оверхед, вызываемый этой пересборкой данных, оказывает влияние на производительность, обычно на 20-50%”</em></p>
<p><strong>Ответ Dr.Dedupe:</strong></p>
<p>NetApp WAFL (Write Anywhere File Layout) – это структура размещения произвольно расположенных данных на диске, оптимизированная на производительность доступа к ним. Дедупликация еще более “рандомизирует” эту структуру, переназначая указатели на блоки данных и удаляя дубликаты. После дедупликации производительность на чтении иногда слегка возрастает, иногда слегка падает, однако подавляющее большинство пользователей говорят, что не заметили никакой разницы вообще. Важным моментом является то, что мы не перемещаем данные как таковые, просто переставляем на их блоки указатели. Если вы хотите получше разобраться в том, как работает наша технология, то я рекомендую посмотреть <a href="http://blogs.netapp.com/drdedupe/2010/04/how-netapp-deduplication-works.html#tp">пример работы дедупликации</a>.</p>
<p><strong>Утверждение HP:</strong></p>
<p><em>“Когда клиенты NetApp испытывают проблемы с производительностью, первая рекомендация NetApp это не использовать дедупликацию”</em></p>
<p><strong>Ответ Dr.Dedupe:</strong></p>
<p>На самом деле, когда наши клиенты испытывают <em>проблемы с производительностью</em>, первая рекомендация это обнаружить причину, вызвавшую проблемы с производительностью. Зачем выключать дедупликацию, если не она вызвала проблему? Полагаю, что HP поступает точно также, сперва надо найти причину, прежде чем советовать какие-то действия по исправлению ситуации. ??ли тут HP случайно выстрелила сама в себя? Эй, HP, давайте вы не будете строить предположений, что мы советуем нашим клиентам, пока на самом деле не позвоните в нашу поддержку?</p>
<p><strong>Утверждение HP:</strong></p>
<p><em>“Снижение темпов роста емкостей хранения имеет большое значение, и экономит затраты пользователя. Однако для первичных данных другие технологии, например Thin Provisioning обеспечивают сходные результаты уменьшения объемов, но без сопутствующего снижения производительности; эти возможности имеются у HP P4000 и HP InServ.”</em></p>
<p><strong>Ответ Dr.Dedupe:</strong></p>
<p>Заметьте, HP не сказала “<em>эти возможности имеются <strong>только </strong>у HP P4000 и HP InServ.”</em> Потому что у систем NetApp тоже есть Thin Provisioning, а также много других технологий уменьшения занимаемых объемов хранения и повышения их эффективности, которые могут использоваться как по по отдельности, так и друг с другом, одновременно:</p>
<ul>
<li>Дедупликация </li>
<li>Thin Provisioning </li>
<li>Эффективно расходующие место снэпшоты </li>
<li>Виртуальные клоны данных </li>
<li>Thin-репликация </li>
<li>RAID-DP </li>
<li>Онлайн-компрессия данных </li>
<li>Автоматический виртуальный tiering c дисками SATA </li>
</ul>
<p>Я знаю, это кажется очевидным, но напрашивается тема для статьи “<em>Проблемы, связанные с технологиями экономии пространства хранения у HP</em>”.</p>
<p><strong>Утверждение HP: </strong></p>
<p><em>“Метод с фиксированными участками [используемый NetApp] означает, что изменения в данных могут привести к очень плохому результату дедупликации… ??спользование метода с переменной длиной участка позволяет HP StorOnce D2D обеспечить более интеллектуальный и эффективный подход к дедупликации.”</em></p>
<p><strong>Ответ Dr.Dedupe:</strong></p>
<p>Ох, черт. Неужели мне так и придется писать это, снова и снова? NetApp записывает все данные в блоки (ну, то есть “<em>участки</em>”), размером 4KB. За прошедшие 20 лет мы сделали довольно неплохую работу по оптимизации того, насколько быстро мы можем писать и читать эти “участки”. Наиболее простой и быстрый способ дедупликации в нашем случае, это получать “цифровой отпечаток пальца” каждого такого участка, и сканировать базу этих “отпечатков” на дубликаты. Это лучший вариант для одновременного использования дедупликации в обоих сферах применения, как для первичных данных, так и для резервных копий. Достаточная экономия пространства хранения и минимальное влияние на производительность. В HP читают <strong>хоть что-нибудь</strong> в моем блоге? Переменные участки это хорошо для экономии места, но совсем не так здорово для производительности. Кто более интеллектуален и эффективен? Судите сами.</p>
<p><strong>Утверждение HP:</strong></p>
<p><em>“NetApp так обеспокоен производительностью своей технологии дедупликации, что Крис Каммингс, старший директор решений защиты данных в NetApp, сказал в интервью CRN, что пользователи должны понимать “возможности падения производительности при использовании этой технологии”, когда они решат ее использовать.      <br /></em><em>HP обычно находит 95% дублирующихся данных в резервных копиях и дедуплицирует их без воздействия на производительность первичного хранилища”</em></p>
<p><strong>Ответ Dr.Dedupe:</strong></p>
<p>Ну, HP, вот тут вы меня по настоящему разозлили. Прежде всего вы привели цитату из слов Криса Каммингса, сказанную еще в августе 2008 года, я уверен, что если бы вы могли вернуться назад во времени, вы бы могли найти консервативный комментарий о любой новой технологии от того, кто заботится о клиенте. Но фактом является то, что сегодня для нас это уже не новая технология, и мы рекомендуем ее использование нашим клиентам без каких-либо опасений.    <br />Насчет того, что <em>дедупликация на устройстве хранения резервных копий не влияет на производительность первичного хранилища</em> – дык! :)</p>
<p><strong>Утверждение HP:</strong></p>
<p><em>“Когда вы покупаете решение HP – это как симфонический оркестр; каждая часть специализирована, но стандартизована по компонентам, оптимизирована, но идет в ногу со всей остальной системой. Это не коробка, подходящая для всего, это Конвергентная ??нфраструктура HP.”</em></p>
<p><strong>Ответ Dr.Dedupe:</strong></p>
<p>Вместо того, чтобы писать труд о проблемах технологии другого производителя, лучше бы HP исследовала проблемы, с которыми сталкиваются пользователи сегодня – а именно о том, что они борются с постоянным ростом объемов данных в условиях сокращающегося IT-бюджета. Может тогда бы стало понятно лицемерие сравнения с оркестром. Когда HP хочет продать пользователям оркестр в 120 человек, NetApp продает компактный, но эффективный джаз-бенд.</p>
<p><strong>Утверждение HP:</strong></p>
<p><em>“NetApp не обеспечивает достаточной гибкости для сложных сред резервного копирования сегодняшнего дня”</em></p>
<p><strong>Ответ Dr.Dedupe:</strong></p>
<p>Погодите минутку, что произошло? Кажется я что-то пропустил? Я думал, что мы говорим о проблемах дедупликации у NetApp, как это мы вдруг перескочили на <em>гибкость резервного копирования</em>? Это что, такой способ сбить читателя перепрыгивая с темы на тему?</p>
<p><strong>Утверждение HP:</strong></p>
<p><em>“Снэпшоты это часть решения по защите данных, но их для полной защиты данных недостаточно. Требования долговременного хранения не обеспечиваются только лишь снэпшотами. Конвергентная ??нфраструктура HP предлагает лидирующее решение , включающее в себя StoreOnce для дисковой дедупликации, обеспечивая законченную стратегию защиты данных”</em></p>
<p><strong>Ответ Dr.Dedupe:</strong></p>
<p>Снэпшоты? А теперь мы говорим про снэпшоты? ??звините меня, HP, не могли бы вы все же не скакать с темы на тему? “<strong>Разбор проблем, связанных с технологией дедупликацией NetApp</strong>”, вы помните? Ну, с другой стороны, я так понял, что просто “<em>проблемы</em>” у нас закончились…</p>
<p>Dr.Dedupe (<a href="http://blogs.netapp.com/drdedupe">http://blogs.netapp.com/drdedupe</a>)</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/dedupe.html" rel="tag">dedupe</a>, <a href="../../../tag/deduplication/index.html" rel="tag">deduplication</a>, <a href="../../../tag/fud/index.html" rel="tag">fud</a>, <a href="../../../tag/hp.html" rel="tag">hp</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../../category/translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;" rel="category tag">переводы</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../863/trackback.html#comments" title="Комментарий к записи В библиотеку FUD-а ;) HP о дедупликации.">Комментарии (5)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-874">
				<h2 class="posttitle"><a href="../../../874/trackback.html" rel="bookmark" title="Permanent Link to О &ldquo;дефрагментации&rdquo;">О &ldquo;дефрагментации&rdquo;</a></h2>
				<div class="postmetadata">11 Апрель 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>“Усилиями” наших конкурентов все нынешние и будущие пользователи NetApp проинформированы, что “у этих netapp”, дескать, “огромная фрагментация”. Как обычно в области FUD (<a href="http://en.wikipedia.org/wiki/Fear,_uncertainty_and_doubt">Fear, uncertainty and doubt</a>), строится это все вокруг плохого понимания предмета, слабой технической подготовки “обрабатываемого”, а порой и откровенной манипуляции фактами. Отсутствие же ясного понимания темы, к сожалению, вызывает к жизни довольно много “техномистицизма” и накрученных вокруг догадок и слухов, которые, как и положено слухам, кормят и размножают сами себя.</p>
<p>В четверг я опубликую заметку о “теории” возникновения фрагментации на дисках вообще, интересующиеся отсылаются в нее. А пока хотел лишь обратить внимание читателей на прискорбную тенденцию, с которой встречаюсь уже не впервой.</p>
<p>Пользователи NetApp, которые не особенно копенгаген в технических деталях, но которым надули в уши про “ужасную фрагментацию на NetApp”, считают, что раз что-то на NetApp, значит это что-то надо “дефрагментировать”, и чем чаще, тем лучше. Причем под “дефрагментировать” обычно понимается виндовый defrag.exe, или же еще какой Diskeeper.&#160; <br />Прискорбное заблуждение.</p>
<p>Еще более прискорбным оно становится, если дело происходит на диске виртуальной машины.</p>
<p>Если вы внимательно прочли наш <a href="http://www.netwell.ru/production/techbiblioteka.php">переводной Best Practices</a> по работе с <a href="../../../789/trackback.html">VMware</a> или <a href="../../../570/trackback.html">Hyper-V</a>,то должны были обратить внимание на строгое указание не использовать дефрагментатор OS на дисках, расположенных на системе хранения NetApp, будь то iSCSI/FC LUN, смонтированный на сервер, или же VHD/vmdk виртуальной машины.</p>
<p>Дело в том, что дефрагментатор в OS, это программа, которая ничего не знает о той, часто непростой структуре, что лежит под тем, что она считает “обычным жестким диском”. Она видит нечто (LUN), которое представляется ей обычным жестким диском, с секторами, головками и цилиндрами, но в случае LUN все это не имеет настоящего физического смысла. Под таким “псевдо-диском” могут лежать структуры RAID, или те или иные структуры организации его физических блоков (в случае NetApp – WAFL, в случае других систем, других вендоров – другие структуры) . На этом уровне работает непростая&#160; дорогостоящая логика оптимизации доступа в больших системах хранения, которая знает как, и умеет оптимизировать доступ к своим данным. ?? вмешательство в эту логику примитивной “дефрагментации” на уровне OS не только бессмысленно, но и нежелательно. ?? уж точно никак с помощью defrag.exe не справиться с проблемой “фрагментации данных на NetApp”, ситуацию можно только ухудшить.</p>
<p>В случае конкретно NetApp, выполнение “дефрагментации” на уровне клиентской OS или виртуальной машины:</p>
<ol>
<li>Резко увеличивает объемы, занимаемые снэпшотами, так как пространство диска на NetApp со взятым снэпшотом занимает только изменения (записи), сделанные на нем после создания снэпшота, а “дефрагментация” при работе перезаписывает почти весь диск, то вы обнаружите, что снэпшот после такой “дефрагментации” практически удвоит занимаемое вашим томом на дисках место </li>
<li>Портит оптимизацию доступа на уровне системы хранения, так как то, что, по мнению дефрагментатора, лежит рядом и последовательно, физически, на уровне системы хранения, и собственно физических дисков, может лежать совсем НЕ рядом и НЕ последовательно, и наоборот. </li>
<li>Замусоривает кэш и загружает канал ввода-вывода бессмысленными операциями. </li>
</ol>
<p>?? в итоге – не приводит ни к чему, так как “фрагментацию” на уровне самого NetApp так не исправить, скорее наоборот, многочисленными перезаписями ее можно только ухудшить.</p>
<p>Если вы все равно не осилили все написанное выше, то просто следуйте простым советам:</p>
<ul>
<li><strong>Не используйте дефрагментацию в OS</strong> (defrag.exe, Diskeeper, Norton Defrag, etc.) для данных, расположенных на системе хранения NetApp. В том числе отключите автоматическую оптимизацию (Boot Time Optimization) и фоновую дефрагментацию дисков в OS Windows. </li>
<li>Не обращайте внимания на величины “фрагментации”, указываемые самой OS для LUN-ов и дисков виртуальных машин, размещенных на NetApp. </li>
<li>Для минимизации эффекта фрагментации записи непосредственно на дисках системы хранения NetApp используйте включение по расписанию встроенный в Data ONTAP реаллокатор (reallocate on / reallocate start [/vol/volname]). </li>
</ul>
<p>&#160;</p>
<p>&#160;</p>
<p><font color="#cccccc">ЗЫ. Вообще писалось все это смешно. Я сел а ноут, написал заголовок: “Несколько слов о дефрагментации”, и начал писать. Спустя два часа и примерно к конце третьего килобайта написанного я остановился, хмыкнул, посмотрел на заголовок… ?? удалил из него “Несколько слов”, так как на “несколько слов” получающийся трактат никак не тянул. :)      <br />В конце концов я решил разделить тему. В первую часть вынести все же “несколько слов”, те, которые и намеревался написать, а в четверговый пост пустить всю остальную “теорию большого взрыва”, которую, возможно, кому-то захочется прочитать, чтобы разобраться в деталях темы.</font></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/fragmentation.html" rel="tag">fragmentation</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/reallocate.html" rel="tag">reallocate</a>, <a href="../../../tag/wafl/index.html" rel="tag">wafl</a><br />					Раздел: <a href="../../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../874/trackback.html#comments" title="Комментарий к записи О &ldquo;дефрагментации&rdquo;">Комментарии (3)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-867">
				<h2 class="posttitle"><a href="../../../867/trackback.html" rel="bookmark" title="Permanent Link to Оптимизация производительности. Часть 4. fcstat">Оптимизация производительности. Часть 4. fcstat</a></h2>
				<div class="postmetadata">7 Апрель 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Рассмотрим еще одну полезную команду для глубокой диагностики, позволяющую находить и анализировать проблемы канала передачи данных от диска к контроллерам на системах, использующих интерфейс FC к дискам. Это системы с полками DS14, которые постепенно заменяются на дисковые полки, работающие по SAS, в новых моделях FAS, но все еще широко распространенные в продакшне.</p>
<p>Как вы помните из <a href="../../../839/trackback.html">первой серии этой темы</a>, проблемы в канале передачи между дисками и контроллером системы хранения занимает в сформулированном там Top5 проблем, вызывающих падение производительности, второе место.</p>
<p><code>     <br />na_fcstat - Fibre Channel stats functions </code></p>
<p><strong>Формат:</strong> <code>     <br />fcstat link_stats [ adapter number ]       <br />fcstat fcal_stats [ adapter number ]       <br />fcstat device_map [ adapter number ] </code></p>
<p>   <a href="../../../867/trackback.html#more-867" class="more-link"><small>Continue reading &#8216;Оптимизация производительности. Часть 4. fcstat&#8217; &raquo;</small></a></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/fcstat.html" rel="tag">fcstat</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/optimization.html" rel="tag">optimization</a>, <a href="../../../tag/performance/index.html" rel="tag">performance</a>, <a href="../../../tag/troubleshooting.html" rel="tag">troubleshooting</a><br />					Раздел: <a href="../../../category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../../../category/tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../867/trackback.html#comments" title="Комментарий к записи Оптимизация производительности. Часть 4. fcstat">Комментарии (4)</a>									 </div>
			</div>
	
		
		<div class="navigation">
			<div class="alignleft"><a href="page/2.html">&laquo; Previous Entries</a></div>
			<div class="alignright"></div>
		</div>
		
	
	</div>
	<div id="sidebar">
		<ul>
			
			
			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Автор</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			<li class="pagenav"><h2>Страницы</h2><ul><li class="page_item page-item-153"><a href="../../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul></li>
			<li><h2>Рубрики</h2>
				<ul>
					<li class="cat-item cat-item-89"><a href="../../../category/commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;">commands</a>
</li>
	<li class="cat-item cat-item-37"><a href="../../../category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;">howto</a>
</li>
	<li class="cat-item cat-item-52"><a href="../../../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;">justread</a>
</li>
	<li class="cat-item cat-item-51"><a href="../../../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;">review</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;">techtalk</a>
</li>
	<li class="cat-item cat-item-71"><a href="../../../category/tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;">tricks</a>
</li>
	<li class="cat-item cat-item-95"><a href="../../../category/utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;">utilities</a>
</li>
	<li class="cat-item cat-item-44"><a href="../../../category/whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;">whoisho</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;">новости</a>
</li>
	<li class="cat-item cat-item-387"><a href="../../../category/opros.html" title="Просмотреть все записи в рубрике &laquo;опрос&raquo;">опрос</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../../category/translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;">переводы</a>
</li>
	<li class="cat-item cat-item-40"><a href="../../../category/citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;">цитаты</a>
</li>
				</ul>
			</li>

			<li><h2>Архивы</h2>
				<ul>
					<li><a href='../../2018/01.html' title='Январь 2018'>Январь 2018</a></li>
	<li><a href='../../2015/10.html' title='Октябрь 2015'>Октябрь 2015</a></li>
	<li><a href='../../2015/04.html' title='Апрель 2015'>Апрель 2015</a></li>
	<li><a href='../../2015/03.html' title='Март 2015'>Март 2015</a></li>
	<li><a href='../../2015/01.html' title='Январь 2015'>Январь 2015</a></li>
	<li><a href='../../2014/12.html' title='Декабрь 2014'>Декабрь 2014</a></li>
	<li><a href='../../2014/11.html' title='Ноябрь 2014'>Ноябрь 2014</a></li>
	<li><a href='../../2014/10.html' title='Октябрь 2014'>Октябрь 2014</a></li>
	<li><a href='../../2014/09.html' title='Сентябрь 2014'>Сентябрь 2014</a></li>
	<li><a href='../../2014/08.html' title='Август 2014'>Август 2014</a></li>
	<li><a href='../../2014/07.html' title='Июль 2014'>Июль 2014</a></li>
	<li><a href='../../2014/06.html' title='Июнь 2014'>Июнь 2014</a></li>
	<li><a href='../../2014/05.html' title='Май 2014'>Май 2014</a></li>
	<li><a href='../../2014/04.html' title='Апрель 2014'>Апрель 2014</a></li>
	<li><a href='../../2014/03.html' title='Март 2014'>Март 2014</a></li>
	<li><a href='../../2014/02.html' title='Февраль 2014'>Февраль 2014</a></li>
	<li><a href='../../2014/01.html' title='Январь 2014'>Январь 2014</a></li>
	<li><a href='../../2013/12.html' title='Декабрь 2013'>Декабрь 2013</a></li>
	<li><a href='../../2013/11.html' title='Ноябрь 2013'>Ноябрь 2013</a></li>
	<li><a href='../../2013/10.html' title='Октябрь 2013'>Октябрь 2013</a></li>
	<li><a href='../../2013/09.html' title='Сентябрь 2013'>Сентябрь 2013</a></li>
	<li><a href='../../2013/08.html' title='Август 2013'>Август 2013</a></li>
	<li><a href='../../2013/07.html' title='Июль 2013'>Июль 2013</a></li>
	<li><a href='../../2013/06.html' title='Июнь 2013'>Июнь 2013</a></li>
	<li><a href='../../2013/05.html' title='Май 2013'>Май 2013</a></li>
	<li><a href='../../2013/04.html' title='Апрель 2013'>Апрель 2013</a></li>
	<li><a href='../../2013/03.html' title='Март 2013'>Март 2013</a></li>
	<li><a href='../../2013/02.html' title='Февраль 2013'>Февраль 2013</a></li>
	<li><a href='../../2013/01.html' title='Январь 2013'>Январь 2013</a></li>
	<li><a href='../../2012/12.html' title='Декабрь 2012'>Декабрь 2012</a></li>
	<li><a href='../../2012/11.html' title='Ноябрь 2012'>Ноябрь 2012</a></li>
	<li><a href='../../2012/10.html' title='Октябрь 2012'>Октябрь 2012</a></li>
	<li><a href='../../2012/09.html' title='Сентябрь 2012'>Сентябрь 2012</a></li>
	<li><a href='../../2012/08.html' title='Август 2012'>Август 2012</a></li>
	<li><a href='../../2012/07.html' title='Июль 2012'>Июль 2012</a></li>
	<li><a href='../../2012/06.html' title='Июнь 2012'>Июнь 2012</a></li>
	<li><a href='../../2012/05.html' title='Май 2012'>Май 2012</a></li>
	<li><a href='../../2012/04.html' title='Апрель 2012'>Апрель 2012</a></li>
	<li><a href='../../2012/03.html' title='Март 2012'>Март 2012</a></li>
	<li><a href='../../2012/02.html' title='Февраль 2012'>Февраль 2012</a></li>
	<li><a href='../../2012/01.html' title='Январь 2012'>Январь 2012</a></li>
	<li><a href='../12.html' title='Декабрь 2011'>Декабрь 2011</a></li>
	<li><a href='../11.html' title='Ноябрь 2011'>Ноябрь 2011</a></li>
	<li><a href='../10/index.html' title='Октябрь 2011'>Октябрь 2011</a></li>
	<li><a href='../09/index.html' title='Сентябрь 2011'>Сентябрь 2011</a></li>
	<li><a href='../08.html' title='Август 2011'>Август 2011</a></li>
	<li><a href='../07/index.html' title='Июль 2011'>Июль 2011</a></li>
	<li><a href='../06/index.html' title='Июнь 2011'>Июнь 2011</a></li>
	<li><a href='../05/index.html' title='Май 2011'>Май 2011</a></li>
	<li><a href='index.html' title='Апрель 2011'>Апрель 2011</a></li>
	<li><a href='../03/index.html' title='Март 2011'>Март 2011</a></li>
	<li><a href='../02.html' title='Февраль 2011'>Февраль 2011</a></li>
	<li><a href='../01.html' title='Январь 2011'>Январь 2011</a></li>
	<li><a href='../../2010/12.html' title='Декабрь 2010'>Декабрь 2010</a></li>
	<li><a href='../../2010/11/index.html' title='Ноябрь 2010'>Ноябрь 2010</a></li>
	<li><a href='../../2010/10/index.html' title='Октябрь 2010'>Октябрь 2010</a></li>
	<li><a href='../../2010/09/index.html' title='Сентябрь 2010'>Сентябрь 2010</a></li>
	<li><a href='../../2010/08.html' title='Август 2010'>Август 2010</a></li>
	<li><a href='../../2010/07/index.html' title='Июль 2010'>Июль 2010</a></li>
	<li><a href='../../2010/06.html' title='Июнь 2010'>Июнь 2010</a></li>
	<li><a href='../../2010/05.html' title='Май 2010'>Май 2010</a></li>
	<li><a href='../../2010/04/index.html' title='Апрель 2010'>Апрель 2010</a></li>
	<li><a href='../../2010/03/index.html' title='Март 2010'>Март 2010</a></li>
	<li><a href='../../2010/02.html' title='Февраль 2010'>Февраль 2010</a></li>
	<li><a href='../../2010/01.html' title='Январь 2010'>Январь 2010</a></li>
	<li><a href='../../2009/12/index.html' title='Декабрь 2009'>Декабрь 2009</a></li>
	<li><a href='../../2009/11/index.html' title='Ноябрь 2009'>Ноябрь 2009</a></li>
	<li><a href='../../2009/10.html' title='Октябрь 2009'>Октябрь 2009</a></li>
	<li><a href='../../2009/09.html' title='Сентябрь 2009'>Сентябрь 2009</a></li>
	<li><a href='../../2009/08/index.html' title='Август 2009'>Август 2009</a></li>
	<li><a href='../../2009/07/index.html' title='Июль 2009'>Июль 2009</a></li>
	<li><a href='../../2009/06.html' title='Июнь 2009'>Июнь 2009</a></li>
	<li><a href='../../2009/05.html' title='Май 2009'>Май 2009</a></li>
	<li><a href='../../2009/04.html' title='Апрель 2009'>Апрель 2009</a></li>
	<li><a href='../../2009/03.html' title='Март 2009'>Март 2009</a></li>
	<li><a href='../../2009/02.html' title='Февраль 2009'>Февраль 2009</a></li>
	<li><a href='../../2009/01.html' title='Январь 2009'>Январь 2009</a></li>
	<li><a href='../../2008/12.html' title='Декабрь 2008'>Декабрь 2008</a></li>
	<li><a href='../../2008/11.html' title='Ноябрь 2008'>Ноябрь 2008</a></li>
	<li><a href='../../2008/10.html' title='Октябрь 2008'>Октябрь 2008</a></li>
	<li><a href='../../2008/09.html' title='Сентябрь 2008'>Сентябрь 2008</a></li>
	<li><a href='../../2008/08.html' title='Август 2008'>Август 2008</a></li>
	<li><a href='../../2008/03.html' title='Март 2008'>Март 2008</a></li>
	<li><a href='../../2008/02.html' title='Февраль 2008'>Февраль 2008</a></li>
	<li><a href='../../2007/12.html' title='Декабрь 2007'>Декабрь 2007</a></li>
	<li><a href='../../2007/11.html' title='Ноябрь 2007'>Ноябрь 2007</a></li>
	<li><a href='../../2007/10.html' title='Октябрь 2007'>Октябрь 2007</a></li>
	<li><a href='../../2007/09.html' title='Сентябрь 2007'>Сентябрь 2007</a></li>
	<li><a href='../../2007/08.html' title='Август 2007'>Август 2007</a></li>
	<li><a href='../../2007/07/index.html' title='Июль 2007'>Июль 2007</a></li>
	<li><a href='../../2007/06.html' title='Июнь 2007'>Июнь 2007</a></li>
	<li><a href='../../2007/05.html' title='Май 2007'>Май 2007</a></li>
				</ul>
			</li>

			
					</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="../../../../feed">Entries (RSS)</a> and <a href="../../../../comments/feed">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 14 queries. 0.112 seconds. -->
	</div>
</div> <!-- page -->
</body>
</html>
