<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>about NetApp   &raquo; 2011 &raquo; Июнь</title>

<link rel="stylesheet" href="../../../../wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="about NetApp RSS Feed" href="../../../../feed" />
<link rel="pingback" href="../../../../xmlrpc.php.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.6" />

</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="../../../../index.html" title="about NetApp: Системы хранения данных как предмет разговора">about NetApp</a></h1>
		<p>Системы хранения данных как предмет разговора</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="../../../../index.html">
<input type="text" size="20" name="s" id="s" value="Поиск..."  onblur="if(this.value=='') this.value='Поиск...';" onfocus="if(this.value=='Поиск...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="navbar">
<ul id="nav">
	<li><a href="../../../../index.html">Home</a></li>
	<li class="page_item page-item-153"><a href="../../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content">

	
			<p>Archive for Июнь 2011</p>

				
		<div class="navigation">
			<div class="alignleft"><a href="page/2.html">&laquo; Previous Entries</a></div>
			<div class="alignright"></div>
		</div>

						
			<div class="post" id="post-942">
				<h2 class="posttitle"><a href="../../../942/trackback.html" rel="bookmark" title="Permanent Link to Project Mercury &ndash; эксперименты в области кэширования во flash">Project Mercury &ndash; эксперименты в области кэширования во flash</a></h2>
				<div class="postmetadata">30 Июнь 2011, 7:00 <!-- от  --></div>
				<div class="postentry">
					<p>Любопытная <a href="http://www.theregister.co.uk/2011/06/17/netapp_project_mercury/">статья</a> обнаружилась в веб-журнале The Register.</p>
<p>На конференции FAST’11 NetApp читал доклад о <a href="http://www.usenix.org/events/fast11/posters_files/Byan.pdf">экспериментах в рамках проекта Mercury</a>, где исследовалась интересная модель использования flash-памяти для кэширования данных серверов приложений.    <br />Аналогичным работами также занимаются и другие участники “топа вендоров”, например о Project Lightning недавно на своей конференции рассказывал EMC, кроме этого <a href="http://www.theregister.co.uk/2011/06/15/dell_app_servers_getting_flash/">аналогичные эксперименты</a> проделывал Dell, активно прорывающийся в “самую высшую лигу”.</p>
<p><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/pics//image104.png" width="409" height="366" /></p>
<p>Суть эксперимента состояла в возможнеости связать кэш во flash memory на сервере приложений, с централизованным дисковым хранилищем, чтобы позволить виртуальным машинам использовать сетевой сторадж не теряя преимуществ от использования объемного локального кэша на самом сервере.</p>
<p>Отмечу, что пока речь идет лишь о концепции, научной работе и экспериментах, и до воплощения в коммерческом продукте пока неблизко. Но идея интересная.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/cache.html" rel="tag">cache</a>, <a href="../../../tag/flash/index.html" rel="tag">flash</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;" rel="category tag">review</a>,  <a href="../../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>,  <a href="../../../category/citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;" rel="category tag">цитаты</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../942/trackback.html#respond" title="Комментарий к записи Project Mercury &ndash; эксперименты в области кэширования во flash">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-948">
				<h2 class="posttitle"><a href="../../../948/trackback.html" rel="bookmark" title="Permanent Link to Сравнение производительности протоколов на примере Oracle 11g/RHEL">Сравнение производительности протоколов на примере Oracle 11g/RHEL</a></h2>
				<div class="postmetadata">29 Июнь 2011, 8:53 <!-- от  --></div>
				<div class="postentry">
					<p>??нтересный <a href="http://www.netapp.com/us/library/technical-reports/tr-3932.html">отчет</a> опубликовала сегодня тестовая лаборатория NetApp, анализировавшая производительность Oracle 11g на RHEL и системе хранения NetApp.</p>
<p>Для затравки вам картинка:</p>
<p><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/pics//image105.png" width="739" height="383" /></p>
<p>Полностью читать – там:    <br /><strong>Red Hat Enterprise Linux Protocol Performance Comparison with Oracle Database 11g Release 2      <br /></strong><a href="http://www.netapp.com/us/library/technical-reports/tr-3932.html">http://www.netapp.com/us/library/technical-reports/tr-3932.html</a></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/11g.html" rel="tag">11g</a>, <a href="../../../tag/dnfs.html" rel="tag">dnfs</a>, <a href="../../../tag/fc.html" rel="tag">fc</a>, <a href="../../../tag/fcoe.html" rel="tag">FCoE</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/nfs/index.html" rel="tag">nfs</a>, <a href="../../../tag/oracle/index.html" rel="tag">oracle</a>, <a href="../../../tag/rhel.html" rel="tag">rhel</a><br />					Раздел: <a href="../../../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;" rel="category tag">justread</a>,  <a href="../../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../948/trackback.html#respond" title="Комментарий к записи Сравнение производительности протоколов на примере Oracle 11g/RHEL">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-945">
				<h2 class="posttitle"><a href="../../../945/trackback.html" rel="bookmark" title="Permanent Link to NetApp E-series, краткий FAQ">NetApp E-series, краткий FAQ</a></h2>
				<div class="postmetadata">27 Июнь 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Прошло 3 месяца с момента объявления о покупке NetApp-ом у LSI его подразделения про разработке и продаже внешних дисковых систем, которое было известно под именем Engenio (ESG).</p>
<p>Я не собирался к этой теме возвращаться (по крайней мере часто), как и вообще к теме FC-систем &quot;традиционной архитектуры&quot;, которые приобрела, вместе с Engenio, NetApp, так как, в целом, лично мне, они не очень интересны.</p>
<p>К сожалению, я обратил внимание, что в рунете вокруг этой истории раздулся какой-то непонятно-скандальный &quot;ажиотаж&quot;, и возникло много непонимания, поэтому я, этим постом, постараюсь ответить на основные вопросы, развеять слухи и заблуждения, вокруг этой истории возникшие.</p>
<p>&#160;</p>
<p><strong>Что именно купил NetApp?</strong></p>
<p>NetApp приобрел у компании LSI ее подразделение, занимавшееся разработкой, производством и продажей OEM-партнерам дисковых систем хранения &quot;традиционной&quot; архитектуры блочных FC-систем.</p>
<p>Подразделение носило название Engenio, и, в основном, было известно как OEM-поставщик. Напрямую Engenio эти системы, как я знаю, не продавало, однако являлось (и является), по всей видимости, крупнейшим OEM-производителем в этой области. Engenio производила и поставляла своим партнерам, для их продажи такие популярные и широкораспрстраненные системы, которые рынок знал, как IBM DS35xx, DS4700 и 4800, DS5xxx, Sun StorEdge 35xx и 6xxx, а также ряд систем Dell, SGI и Teradata.</p>
<p>&#160;</p>
<p><strong>Что НЕ купил NetApp?</strong></p>
<p>Сама компания LSI, материнская, по отношению к своему дочернему подразделению Engenio, продолжает работать как и раньше. Все, что разрабатывала и производила сама LSI продолжает разрабатывать и производить она сама. Это: серверные RAID-контроллеры, прошивки для них, HBA, а также линейка продуктов ONStor. Все это НЕ было приобретено с Engenio, также как не была приобретена сама LSI. Компания LSI и относящиеся к ней продукты продолжают свое существование.</p>
<p>&#160;</p>
<p><strong>Что еще было приобретено, вместе с Engenio?</strong></p>
<p>Вместе с Engenio были “приобретены” отношения Engenio с ее OEM-партнерами, например IBM, Oracle, и так далее.</p>
<p>&#160;</p>
<p><strong>Какие системы входят в линейку NetApp E-series?</strong></p>
<p>Это E2600, E5400 и E7900.</p>
<p>&#160;</p>
<p><strong>Кто и как теперь будет разрабатывать и производить системы хранения Engenio?</strong></p>
<p>??х по прежнему будет разрабатывать и производить команда, ранее работавшая как Engenio, и теперь вошедшая в состав NetApp.</p>
<p>&#160;</p>
<p><strong>Кто и как теперь будет продавать системы Engenio?</strong></p>
<p>Несмотря на то, что системы Engenio теперь называются NetApp E-series, напрямую, через каналы NetApp и его партнеров, они продаваться не будут. Они будут продаваться через прежние каналы Engenio и его OEM-партнеров, а также через нескольких специализрованных VAR-реселлеров в США (только), которые будут продавать &quot;коробочное решение&quot; для Full-motion Video в US Public Sector.</p>
<p>&#160;</p>
<p><strong>Как это отразится на OEM-отношениях NetApp и бывшей Engenio с их партнерами?</strong></p>
<p>Пока это не отразится никак. Все ранее заключенные соглашения о OEM продолжают действовать. Не в последнюю очередь (если не в первую) вместе с Engenio NetApp покупала и крупнейшее по объемам в отрасли портфолио OEM-контрактов.</p>
<p>&#160;</p>
<p><strong>Как это отразится на нынешних OEM-отношениях NetApp, например с IBM или Fujitsu?</strong></p>
<p>Никак не отразится. Все нынешние отношения с партнерами и OEM, как NetApp, так и Engenio останутся и напрямую они не пересекаются.</p>
<p>&#160;</p>
<p><strong>Зачем это все?</strong></p>
<p>Ну, во-первых, за 480 миллионов был куплен рынок, объемом 750 миллионов в год (2010). Что, по нынешним временам, само по себе неплохо.</p>
<p>Во-вторых, вместе с Engenio была приобретена большая, лояльная и объемная сеть OEM-отношений, которых у NetApp ранее почти не было (если не считать отношений с IBM).</p>
<p>В третьих, NetApp получила продукт, ориентированный на растущий нишевой рынок, в котором NetApp ранее не играл и имеющиеся у него системы туда плохо подходили (об этом подробнее ниже).</p>
<p>&#160;</p>
<p><strong>Что это за нишевой рынок?</strong></p>
<p>Это рынок для &quot;неинтеллектуальных&quot; систем хранения традиционной блочной FC-архитектуры, для задач, требовательных по bandwidth (полосе пропускания).</p>
<p>Это сравнительно небольшой сегмент (по оценке NetApp это 5 миллиардов долларов к 2014 году, сравните с 47 миллиардами для unified systems самого NetApp, спрогнозированных на тот же 2014).</p>
<p>Пример таких систем - хранилища с большим bandwidth (полосой пропускания) для записи данных Full-motion Video, спутниковых потоковых данных, геосейсмики, науки, а также для специфических задач, например для использования в хранилище под проекты архитектуры Hadoop (о Hadoop – позже).</p>
<p>Еще раз напомню, что <strong>NetApp E-series не будет продаваться в традиционном канале продаж NetApp</strong>, и не будет конкурировать с привычными NetApp FAS, эти системы покупаются для расширения предложения в узком, ранее неохваченном сегменте рынка, под узкий круг заказчиков систем такого рода (причем, как я подозреваю, под уже существующего конкретного крупного госзаказчика <em>из трех букв</em>, уж больно много подробностей об этом решении), с которыми будут работать традиционные OEM-партнеры Engenio.</p>
<p>&#160;</p>
<p><strong>Означает ли это отказ от развития и продвижения FAS и Unified-архитектуры?</strong></p>
<p>Нет, не означает. Просто предложение расширяется в те сегменты рынка, где нынешние возможности систем NetApp избыточны, и экономически неоправданны.</p>
<p>&#160;</p>
<p><strong>Означает ли это признание неудачи в развитии Unified Architecture?</strong></p>
<p>Нет, не означает. Приобретенная линейка E-series ориентирована на специализированный рынок с узким набором специфических требований. Для прежних сегментов рынка по прежнему будет развиваться и продвигаться unified архитектура и системы с ее использованием.</p>
<p>&#160;</p>
<p><strong>В чем преимущества существующих систем unified-архитектуры, NetApp FAS?</strong></p>
<p>Надежность хранения, эффективность использования, высокая управляемость, интегрированные средства защиты данных и автоматизации, в том числе на уровне приложений, средства репликации, катастрофоустойчивости. </p>
<p>Основное направление развития систем NetApp FAS – увеличения возможностей по управлению данными и переход к виртуализированному “облачному” хранению.</p>
<p>&#160;</p>
<p><strong>В чем преимущества существующих систем &quot;классической&quot; архитектуры, NetApp E-series?</strong></p>
<p>Высокая линейная производительность на запись и чтение, сверхбольшая производительность по полосе пропускания и IOPS, высокая плотность “упаковки” хранилища (1,8PB в 40U).</p>
<p>Основное направление развития систем NetApp E-series – увеличение производительности на специальных типах нагрузки и повышение плотности хранения.</p>
<p>&#160;</p>
<p><strong>Существуют ли планы по слиянию этих платформ?</strong></p>
<p>Нет, таких планов нет. Две платформы будут существовать независимо, как, например, существовали в продуктовом portfolio NetApp, в свое время, FAS и VTL.</p>
<p>&#160;</p>
<p><strong>Существуют ли планы по отказу от развития Unified Architecture (FAS)?</strong></p>
<p>Нет, таких планов нет. Системы Unified Architecture (FAS) по прежнему будут развиваться и продвигаться.</p>
<p>&#160;</p>
<p><strong>Существуют ли планы по закрытию и прекращению развития продуктов Engenio?</strong></p>
<p>Ну а вы бы, купив за 480 миллионов &quot;живыми деньгами&quot; успешный бизнес, принесший в прошедшем году около 750 миллионов, стали бы его убивать ради удовлетворения каких-то своих амбиций? Нонсенс.</p>
<p>&#160;</p>
<p><strong>Означает ли возникновение в продуктовой линейке решений на базе E-series отказ от систем NetApp C-mode?</strong></p>
<p>Нет, не означает, они нацелены на разные рынки, как и FAS 7-mode.</p>
<p>&#160;</p>
<p><strong>Ожидаются ли изменения в поддержке продуктов LSI/Engenio в системах NetApp V-series?</strong></p>
<p>Нет, изменения не планируются, поддержка будет осуществляться как и ранее, в прежнем объеме.</p>
<p>&#160;</p>
<p><strong>Существую ли планы по переносу Data ONTAP/WAFL на системы E-series?</strong></p>
<p>Нет, таких планов нет.</p>
<p>&#160;</p>
<p><strong>Есть ли планы использовать аппаратные RAID LSI в системах NetApp?</strong></p>
<p>Нет, таких планов нет.</p>
<p>&#160;</p>
<p><strong>С какими системами будет конкурировать новое решение NetApp для Full-motion Video? EMC? HP?</strong></p>
<p>На самом деле нет. Это конкурент для систем Data Direct Network (если вы такого производителя знаете), а также, отчасти, для BlueArc и Isilon. Это, повторюсь, нишевое специализированное решение, традиционные системы EMC или HP для него не подходят также, как не подходит NetApp FAS.</p>
<p>&#160;</p>
<p><strong>Что там за возня с Hadoop, и что это вообще такое?</strong></p>
<p>Скоро расскажу. :)</p>
<p>&#160;</p>
<p><strong>Что я еще не знаю интересного об этой сделке? ;)</strong></p>
<p>Нынешний CEO NetApp, Tom Georgens, до прихода в NetApp был руководителем Engenio.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/e-series.html" rel="tag">e-series</a>, <a href="../../../tag/engenio.html" rel="tag">engenio</a>, <a href="../../../tag/lsi.html" rel="tag">lsi</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;" rel="category tag">review</a>,  <a href="../../../category/whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;" rel="category tag">whoisho</a>,  <a href="../../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../945/trackback.html#comments" title="Комментарий к записи NetApp E-series, краткий FAQ">Комментарии (6)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-936">
				<h2 class="posttitle"><a href="../../../936/trackback.html" rel="bookmark" title="Permanent Link to EMC FASTcache и NetApp Flash Cache">EMC FASTcache и NetApp Flash Cache</a></h2>
				<div class="postmetadata">23 Июнь 2011, 7:00 <!-- от  --></div>
				<div class="postentry">
					<p>Как мне тут не раз уже попеняли, некорректно сравнивать <em>tiering-as-datamoving</em> и <em>tiering-as-caching</em>, то есть, например, NetApp Flash Cache и EMC FAST VP. Допустим, как я ни старался в <a href="../../../926/trackback.html">соответствующей статье</a>, я вас не убедил, что обе эти формы повышения эффективности системы хранения для пользователя есть суть одно. </p>
<p>Хорошо, давайте рассмотрим отдельно особенности, достоинства и недостатки только Flash Cache (PAM-II) и FASTcache.</p>
<p>Во первых, конечно, вы бы могли вместе со мной поехдничать о извилистом пути достижения цели у EMC. Сперва превратить flash-память в &quot;диски&quot; в форме SSD, а затем из этих дисков эмулировать &quot;память&quot; кэша. Ну ладно, допустим не смогли напрямую, оказалось проще через &quot;двойную эмуляцию&quot;.</p>
<p>Во-вторых если мы посмотрим на то, как у EMC предполагается использовать SSD диски под FASTcache, вы, уверен, вместе со мной поразитесь неффективности.</p>
<p>Допустим, мы разворачиваем систему хранения для 1000 рабочих мест под десктопную виртуализацию на XenDesktop. <a href="http://itzikr.wordpress.com/2011/06/08/citrix-xendesktopp-5-on-emc-vnx-match-made-in-heaven-part1/">Рекомендуемая схема</a> включает в себя три диска SSD, из которых один - hotspare, а два других образуют &quot;зеркало&quot; RAID-1. Таким образом, очевидно, что эффективность использования flash в такой конструкции будет примерно 33%, то есть одна треть от купленной емкости flash. Да, при увеличении объема FASTcache, кроме роста цены будет расти и эффективность использования, но она никогда не превысит 50%, за счет использования RAID-1 (плюс hotspare). Больше половины затраченных на SSD денег будут простаивать. По контрасту, если вы покупаете 256GB Flash Cache, вы можете использовать под кэширование и ускорение работы с данными все 256GB, сто процентов от затраченных на них денег.</p>
<p>В третьих, стоит обратит внимание, что использование SSD как дисков вынуждает EMC разместить этот кэш &quot;снаружи&quot; контроллера, в &quot;петле&quot; дискового ввода-вывода на интерфейсе SAS. В то время, как у NetApp плата Flash Cache располагается непосредственно на системной шине контроллера, на PCIe (PCIe v2.0 x8 в моделях 3200/6200, пропускная способность 32Gbit/s в каждом направлении). То есть взаимодействие контроллера с кэшем в случае FASTcache такое: данные пришли через ввод-вывод на контроллер, по каналу SAS к дискам, вышли через другой порт и записались на SSD по интерфейсу SAS. Затем, если к данным кэша обращение, они должны считаться через дисковый канал ввода-вывода по SAS обратно в контроллер, и отдаться через третий канал ввода-вывода, собственно инициатору запроса, по FC или iSCSI, или NFS/CIFS. Все это, безусловно, нагружает и так не бесконечные возможности дискового канала ввода-вывода к полкам, и, потенциально, может привести к ограничению производительности.</p>
<p>Наконец, стоит помнить, что, хотя в FASTcache удалось значительно снизить размер оперируемого &quot;чанка&quot; до 64KB, против гигабайта в FAST-&quot;просто&quot;, все же этот размер достаточно велик для многих задач, работающих в random read/write, размер блока кэша, значительно превышающий рабочий для соответствующей файловой системы или задачи, например блока базы данных, также снижает эффективность использования такого кэша, если, допустим, только 4KB из блока в 64KB нам действительно нужны (при 100% random это довольно обычная ситуация), то это значит, что эффективность кэша составляет лишь 1/16 от своего фактического объема.</p>
<p>Что же в плюсах? Очевидно, что это активно &quot;педалируемая&quot; EMC возможность работы такого кэша на запись. Особенно на это нажимают в сравнении с NetApp Flash Cache, который на запись не работает, и эта возможность действительно производит впечатление на тех людей, которые не особенно разбираются как там у NetApp все устроено, и знают только то, что &quot;что-то иметь это гораздо лучше чем не иметь&quot;, и уж все знают, что запись надо кэшировать, без кэширования запись на диски очень медленная, это знает даже начинающий пользователь, впервые покупающий кэш-контроллер в сервер.</p>
<p>Чем прежде всего занимается кэш на запись?   <br />Давайте рассмотрим на примере.</p>
<p>Когда клиент записывает блок данных на систему хранения, то, при наличии кэша на запись, этот блок максимально быстро в него помещается, и клиенту отдается сообщение “OK, принято”, клиент не ждет физического помещения блока в сектор жесткого диска, а может продолжать работать, словно записываемый блок уже записан, например отправить следующий блок.    <br />Запись ускоряется путем ее буферизации, и, в дальнейшем, сортировкой и упорядочением процессов записи.</p>
<p>Хотя современный жесткий диск и позволяет обращаться к произвольным фрагментам записанной на него информации, чем отличается от, например, магнитной ленты, которая позволяет считывать и записывать ее только последовательно, однако не позволяет эту произвольно размещенную (random) информацию считывать и записывать _одновременно_, поскольку это физически ограничено возможностями магнитных головок диска.</p>
<p>Если у нас есть жесткий диск, и мы не используем кэширование, то три клиента, пишущих на этот диск, будут вынуждены выстроиться в очередь. Сперва диск спозиционирует головки и дождется подхода нужного сектора для записи блока данных клиента A, а пославшие на запись свой блок клиенты B и C будут вынуждены ждать, затем головки будут переставлены в новое место, диск дождется, когда мимо головок проедет блок, который требуется перезаписать клиенту B, и перезапишет его, а если за это время у клиента A появился еще один блок на запись, то он поставится в очередь следом за блоком клиента C, и будет ожидать, пока выполнятся все операции перед ним.</p>
<p>Все эти процессы, как вы понимаете, механические, неспешны, и занимают не микросекунды, как операции в памяти, а миллисекунды, иногда десятки миллисекунд. Несмотря на то, что жесткий диск - устройство произвольной записи, эти произвольные записи не могут быть осуществлены одновременно.</p>
<p><img src="http://blogs.netapp.com/.a/6a00d8341ca27e53ef013485986fca970c-pi" /></p>
<p>Ради создания хотя бы иллюзии одновременности и организуется кэш на запись. Приложения записывают свои данные в кэш записи, получают сразу же ответ &quot;готово&quot; и идут сочинять новые блоки на запись, не дожидаясь того, что данные физически поместятся на диск.</p>
<p>Кэш же внутри себя удерживает блок, ожидая подходящего момента на запись, а также оптимизирует записи, с тем, чтобы уменьшить &quot;пробег&quot; магнитных головок по диску, и возможно оптимальным образом перекомпонует записи так, чтобы уложить их максимально эффективным, с точки зрения head seek-а, способом.</p>
<p>Принципиальное отличие WAFL тут состоит в том, что WAFL не перезаписывает блоки уже записанные на диске, и значит при записи клиенты гораздо меньше ожидают seek-а. Вы помните, что в WAFL записи можно провести &quot;чохом&quot;, в выделенный сегмент, а не переписывать по одному блоку, мечась по всему диску, здесь и там, ожидая, когда подъедет под головку тот или иной блок. Поэтому даже без традиционного кэширования записи на WAFL клиентские записи быстро оказываются на дисках.</p>
<p>Строго говоря, большой кэш означает, что, используя транспортную аналогию, записи быстро встают в очередь на посадку, но совсем не значит, что при этом они быстро сядут и поедут.</p>
<p>WAFL оптимизирован именно на минимальное время от момента прихода данных &quot;на остановку&quot; и до входа их &quot;в автобус&quot; жесткого диска, превращая записи в записи последовательного порядка (sequental) из поступающих записей в произвольном порядке (random).</p>
<p><img src="http://blogs.netapp.com/.a/6a00d8341ca27e53ef0133f2735a39970b-pi" width="467" height="307" /></p>
<p>Результат хорошо иллюстрируется <a href="http://blogs.netapp.com/dropzone/2010/07/does-your-data-wait-in-line.html">экспериментом</a>, в котором один aggregate, состоящий из трех дисков SATA 1TB 7200rpm, в RAID-DP (2p+1d), то есть, фактически, из одного действующего диска, показывает при random write блоком 4KB не типичные для SATA 70-80 IOPS, а более 4600!</p>
<p><img src="http://blogs.netapp.com/.a/6a00d8341ca27e53ef013485986fe9970c-pi" /></p>
<p><img src="http://blogs.netapp.com/.a/6a00d8341ca27e53ef013485987007970c-pi" /></p>
<p>Объяснение этому простое - записи, поступающие на диск теряют свою &quot;рандомность&quot;, и &quot;секвентализируются&quot;. Около четырех с половиной тысяч IOPS random-записи на один диск SATA - это как раз то, отчего в системах NetApp нет свойственной для &quot;классических систем&quot; острой необходимости в кэше записи на уровне контроллера.</p>
<p>Таким образом запись действительно надо кэшировать для &quot;классических&quot; систем, да, безусловно, это так. Но это совсем не так безусловно для &quot;неклассических&quot; дисковых структур, используемых, например, в NetApp.</p>
<p>Вот почему NetApp Flash Cache не используется на запись данных, работая всем своим объемом только на чтение. Вот почему необходимость кэширования записи для WAFL не столь безоговорочна, как для <em>&quot;классических&quot;</em> дисковых структур.</p>
<p>Потому, что в WAFL необходимость обязательного кэширования данных при записи существенно ниже, чем для &quot;традиционных&quot; систем. </p>
<p>Это позволило, среди прочего, кстати, значительно упростить алгоритмическую составляющую процесса кэширования, ведь не секрет, что правильная обработка кэширования на запись часто создает значительные проблемы, особенно в наиболее эффективном режиме write-back.</p>
<p>А это, в свою очередь, снизило количество возможных ошибок (как программного кода реализации, так и ошибок при использовании) удешевило устройство и упростило использование.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/cache.html" rel="tag">cache</a>, <a href="../../../tag/emc/index.html" rel="tag">emc</a>, <a href="../../../tag/fastcache.html" rel="tag">fastcache</a>, <a href="../../../tag/flash/index.html" rel="tag">flash</a>, <a href="../../../tag/flashcache.html" rel="tag">flashcache</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/ssd/index.html" rel="tag">ssd</a><br />					Раздел: <a href="../../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../936/trackback.html#comments" title="Комментарий к записи EMC FASTcache и NetApp Flash Cache">Комментарии (25)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-937">
				<h2 class="posttitle"><a href="../../../937/trackback.html" rel="bookmark" title="Permanent Link to Результаты розыгрыша &ldquo;Покажи всем свой df &ndash;s&rdquo;">Результаты розыгрыша &ldquo;Покажи всем свой df &ndash;s&rdquo;</a></h2>
				<div class="postmetadata">22 Июнь 2011, 10:23 <!-- от  --></div>
				<div class="postentry">
					<p>Прошу извинить меня, что я так затянул с розыгрышем. Я тут как раз переезжал в другое полушарие :)</p>
<p>??так, у нас было семь участников: </p>
<p>
<table style="width: 48pt; border-collapse: collapse" border="0" cellspacing="0" cellpadding="0" width="64">
<colgroup><col style="width: 48pt" width="64" /></colgroup>
<tbody>
<tr style="height: 15pt" height="20">
<td style="border-bottom: #f0f0f0; border-left: #f0f0f0; background-color: transparent; width: 48pt; height: 15pt; border-top: #f0f0f0; border-right: #f0f0f0" height="20" width="64"><font color="#000000" size="3" face="Calibri">minnus</font></td>
</tr>
<tr style="height: 15pt" height="20">
<td style="border-bottom: #f0f0f0; border-left: #f0f0f0; background-color: transparent; height: 15pt; border-top: #f0f0f0; border-right: #f0f0f0" height="20"><font color="#000000" size="3" face="Calibri">Rafaelich</font></td>
</tr>
<tr style="height: 15pt" height="20">
<td style="border-bottom: #f0f0f0; border-left: #f0f0f0; background-color: transparent; height: 15pt; border-top: #f0f0f0; border-right: #f0f0f0" height="20"><font color="#000000" size="3" face="Calibri">Zinovik</font></td>
</tr>
<tr style="height: 15pt" height="20">
<td style="border-bottom: #f0f0f0; border-left: #f0f0f0; background-color: transparent; height: 15pt; border-top: #f0f0f0; border-right: #f0f0f0" height="20"><font color="#000000" size="3" face="Calibri">Dmitriy</font></td>
</tr>
<tr style="height: 15pt" height="20">
<td style="border-bottom: #f0f0f0; border-left: #f0f0f0; background-color: transparent; height: 15pt; border-top: #f0f0f0; border-right: #f0f0f0" height="20"><font color="#000000" size="3" face="Calibri">Kosmatiy</font></td>
</tr>
<tr style="height: 15pt" height="20">
<td style="border-bottom: #f0f0f0; border-left: #f0f0f0; background-color: transparent; height: 15pt; border-top: #f0f0f0; border-right: #f0f0f0" height="20"><font color="#000000" size="3" face="Calibri">panavartan</font></td>
</tr>
<tr style="height: 15pt" height="20">
<td style="border-bottom: #f0f0f0; border-left: #f0f0f0; background-color: transparent; height: 15pt; border-top: #f0f0f0; border-right: #f0f0f0" height="20"><font color="#000000" size="3" face="Calibri">Александр</font></td>
</tr>
</tbody>
</table>
<p>Я сходил на random.org, и он мне сказал, что разыгрываемый приз получит участник номер 5: ник Kosmatiy.</p>
<p>Напомню, что мы разыгрывали gift certificate Apple iTunes, или gift certificate Amazon на 25$, или же подарочный сертификат магазина OZON на 1000 рублей, любой один из трех, по выбору победившего.</p>
<p>Победитель, свяжись со мной по адресу <a href="mailto:romx@mail.ru">romx@mail.ru</a>, чтобы сделать свой выбор и получить выигрыш.</p>
<p>Надеюсь, что вскоре мы проведем еще не один такой розыгрыш, осталось только придумать тему, так что шансы на подарок еще будут. :)</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/gift.html" rel="tag">gift</a><br />					Раздел: <a href="../../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../937/trackback.html#comments" title="Комментарий к записи Результаты розыгрыша &ldquo;Покажи всем свой df &ndash;s&rdquo;">Комментарии (5)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-933">
				<h2 class="posttitle"><a href="../../../933/trackback.html" rel="bookmark" title="Permanent Link to NetApp OnCommand 5.0 &ndash; что это?">NetApp OnCommand 5.0 &ndash; что это?</a></h2>
				<div class="postmetadata">20 Июнь 2011, 9:57 <!-- от  --></div>
				<div class="postentry">
					<p>На днях NetApp объявил о выходе нового продукта, а вернее будет даже семейства продуктов под общим названием OnCommand 5.0 Вы, как и я, уверен, также недолюбливаете стиль маркетинговых прессрелизов, поэтому давайте пробьемся через поток “синергий и конвергенций”, “новых видений и комплексных решений” и попробуем понять, что собой представляет новый продукт.</p>
<p>NetApp OnCommand 5.0 это результат интеграции нескольких собственных продуктов NetApp (System Manager, My Autosupport, SnapManager, Protection/Provision/Operations Manager, Virtual Storage Console (VSC), а также ApplianceWatch), с двумя сравнительно недавними приобретениями – системы для мониторинга, анализа и планирования <a href="http://blogs.netapp.com/extensible_netapp/2008/12/san-screen-50.html">SANscreen</a>, приобретенный вместе с компанией Onaro в 2008 году, и продукта BalancePoint, приобретенного с компанией Akorri в феврале 2011. Все эти продукты теперь интегрированы под общей платформой – <strong>OnCommand</strong>.</p>
<p>OnCommand будет поставляться в двух частях – платной <strong>OnCommand Insight</strong>, и бесплатной <strong>OnCommand Basic</strong>.</p>
<p><img src="http://static.fosketts.net/wp-content/uploads/2011/06/NetApp-OnCommand-Family.jpg" /></p>
<p>Если вы уже знакомы с SANscreen (вряд ли, но все же), то ранее существовавшие функциональные модули его переименованы и объединены в составе продукта <strong>OnCommand Insight</strong> для лучшей архитектурной ясности: </p>
<ul>
<li><strong>OnCommand Insight Assure</strong> включил в себя компоненты SANscreen <strong>Service Insight</strong>, <strong>Service Assurance</strong>, и <strong><a href="http://blogs.netapp.com/storage_nuts_n_bolts/2008/02/sanscreens-vm-i.html">VM Insight</a></strong>.</li>
<li><strong>OnCommand Insight Perform</strong> это бывший <strong>Application Insight</strong>.</li>
<li><strong>OnCommand Insight Plan</strong> это бывший <strong>Capacity Manager</strong></li>
</ul>
<p>О <strong>Akorri BalancePoint</strong> стоит отдельно рассказать подробнее, но для общего представления стоит начать со <a href="http://blogs.netapp.com/storage_nuts_n_bolts/2011/03/a-balancepoint-of-view.html">статьи Ника Триантоса в его блоге</a>. BalancePoint это довольно объемный продукт, поставляемый как преднастроенная виртуальная машина под OS Debian Linux, со всеми необходимыми предустановленными, настроенными и связанными компонентами, с размером диска 80 или 200GB, в зависимости от нужного количества обслуживаемых виртуальных или физических серверов.</p>
<ul>
<li>Продукт Akorri BalancePoint, стал <strong>OnCommand Insight Balance</strong></li>
</ul>
<p><img src="http://static.fosketts.net/wp-content/uploads/2011/06/NetApp-OnCommand-Insight-Family.jpg" /></p>
<p><strong>OnCommand Insight</strong> можно будет покупать как целиком, так и по отдельности, любой из его четырех компонентов. А <strong>OnCommand Basic</strong> будет доступен бесплатно. Все семейство OnCommand появится в продаже и загрузке с 1 сентября 2011 года.</p>
<p>Обратите также внимание, что OnCommand Insight, хотя и выпущен компанией-производителем хорошо вам знакомых систем хранения, но работает он со всей вашей IT-инфраструктурой, не обязательно и не только с системами хранения NetApp. Строго говоря, даже вообще наличие систем хранения от NetApp для использования средств OnCommand Insight не обязательно, это продукт для инфраструктуры в целом, для VMware vSphere, MS Hyper-V, FC-коммутаторов Brocade, сетевых коммутаторов и маршрутизаторов Cisco, систем хранения EMC или HP – для всех.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/balancepoint.html" rel="tag">balancepoint</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/oncommand.html" rel="tag">oncommand</a>, <a href="../../../tag/sanscreen.html" rel="tag">sanscreen</a><br />					Раздел: <a href="../../../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;" rel="category tag">review</a>,  <a href="../../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../933/trackback.html#comments" title="Комментарий к записи NetApp OnCommand 5.0 &ndash; что это?">1 комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-922">
				<h2 class="posttitle"><a href="../../../922/trackback.html" rel="bookmark" title="Permanent Link to Перенос root volume">Перенос root volume</a></h2>
				<div class="postmetadata">16 Июнь 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Вы уже знаете, что каждая система хранения NetApp, вернее даже каждый ее контроллер, обязательно имеет на подключенных к нему дисках специальный, обычно самый первый, том, так называемый <em>root volume</em> или vol0. На этом томе хранится содержимое настроек и установок внутренней OS Data ONTAP (для знакомых с миром UNIX OS скажу проще – /etc), а также много всего прочего, включая директорию документации и веб-интерфейса, прошивки дисков, конфиг-файлы репликации и прочее жизненно необходимое. Такая схема позволяет легко и просто менять контроллер системы хранения, ведь если все индивидуальные настройки системы находятся на дисковых полках, вместе с данными, а в контроллере только ядро, то подключенный на замену новый (даже другого типа) контроллер загрузится, обнаружит и подключит /etc с дисков, и загрузится в той конфигурации и с теми самыми настройками, которыми обладал старый контроллер.</p>
<p>Том <em>root vol</em>, обычно vol0, создается при начальной установке системы и очень часто уже никогда не меняется. Но что делать, если нам понадобилось изменить положение root vol, создать новый, на других дисках, например? Каким образом правильно перенести root vol на новый том?</p>
<p>Допустим, мы мигрируем с 7.x на 8.0.1, и хотим использовать 64-bit aggregate only. Так как в настоящий момент нет средства преобразовать 32-bit, 7.x-style aggregate в новый, 64-bit, нам придется создать на пустых дисках новый 64-bit aggregate, затем перенести в него <em>root vol</em> и другое содержимое старого aggregate, затем убить старый aggregate и добавить его диски в новый.</p>
<p>??ли, например, наша старая система когда-то создала свой <em>root vol</em> на старых дисках FC 144GB, а теперь мы используем SAS 600GB, и хотим вывести старые полки из эксплуатации, перенеся их содержимое на новые, в том числе и <em>root vol</em>.</p>
<p>Но как вы догадываетесь, <em>root vol</em> это немного особенный том, недостаточно его просто скопировать, надо чтобы его опознало ядро Data ONTAP как “свое”.</p>
<p>Посмотрим на имеющуюся картину:</p>
<p><code>filer&gt; vol status      <br />Volume State Status Options       <br />vol1 online raid_dp create_ucode=on       <br />vol0 online raid4 <font color="#ff0000">root</font>, create_ucode=on</code></p>
<p>Как вы видите, том vol0 имеет специальный атрибут – <strong>root</strong>.</p>
<p>Начнем с того, что на нужном aggregate создадим том, который будет в будущем нашим новым <em>root vol</em>.</p>
<p><code>&gt; vol create &lt;new_root_volname&gt; &lt;aggrname&gt; &lt;size&gt; </code></p>
<p>Размер тома (size) следует выбрать согласно рекомендациям для используемого типа контроллера (он зависит от используемого в контроллере объема памяти, потому что на нем должно быть место для сброса core dump, “если что-то пошло не так” и дальнейшей диагностики проблем системы, кроме того определенный объем занимают файлы самой OS).</p>
<p>Рекомендованные значения размеров тома:    <br />Для 7.3.х:     <br />FAS2020 – 10GB, FAS2050 – 12GB, FAS2040, FAS3140 – 16GB, FAS3160 – 23GB, FAS3170, FAS6040 – 37GB, FAS6080 – 69GB. </p>
<p>Для 8.х.х:    <br />FAS2040, 3040, 3140 – 160GB,&#160; остальные – 250GB.</p>
<p>Напомню, что размер тома вы можете увеличить и после его создания, но не более, чем на 95% от объема его содержащего aggregate. Проверить доступную емкость aggregate можно командой df -A</p>
<p>Скопируем содержимое старого тома в новый том, например используя ndmpcopy.</p>
<p>Убедимся что ndmp daemon включен или включим его, если он выключен.</p>
<p><code>&gt; ndmpd on </code></p>
<p>Скопируем содержимое тома в новый том. В отличие от копирования “через хост”, эта операция осуществляется внутренними средствами системы хранения и не нагружает канал передачи данных.</p>
<p><code>&gt; ndmpcopy /etc /vol/new_root_vol/etc</code></p>
<p><code>Ndmpcopy: Starting copy [ 2 ] &#8230;      <br />Ndmpcopy: filer: Notify: Connection established       <br />Ndmpcopy: filer: Notify: Connection established       <br />Ndmpcopy: filer: Connect: Authentication successful       <br />Ndmpcopy: filer: Connect: Authentication successful       <br />Ndmpcopy: filer: Log: DUMP: creating &quot;/vol/vol0/../snapshot_for_backup.4&quot; snapshot.       <br />Ndmpcopy: filer: Log: DUMP: Using subtree dump       <br />Ndmpcopy: filer: Log: DUMP: Date of this level 0 dump: Mon Mar 7 10:18:18 2005.       <br />Ndmpcopy: filer: Log: DUMP: Date of last level 0 dump: the epoch.       <br />Ndmpcopy: filer: Log: DUMP: Dumping /etc to NDMP connection       <br />Ndmpcopy: filer: Log: DUMP: mapping (Pass I)[regular files]       <br />Ndmpcopy: filer: Log: DUMP: mapping (Pass II)[directories]       <br />Ndmpcopy: filer: Log: DUMP: estimated 365193 KB.       <br />Ndmpcopy: filer: Log: DUMP: dumping (Pass III) [directories]       <br />Ndmpcopy: filer: Log: RESTORE: Mon Mar 7 10:18:25 2005: Begin level 0 restore       <br />Ndmpcopy: filer: Log: RESTORE: Mon Mar 7 10:18:25 2005: Reading directories from the backup       <br />Ndmpcopy: filer: Log: DUMP: dumping (Pass IV) [regular files]       <br />Ndmpcopy: filer: Log: RESTORE: Mon Mar 7 10:18:28 2005: Creating files and directories.       <br />Ndmpcopy: filer: Log: RESTORE: Mon Mar 7 10:18:32 2005: Writing data to files.       <br />Ndmpcopy: filer: Log: DUMP: dumping (Pass V) [ACLs]       <br />Ndmpcopy: filer: Log: RESTORE: Mon Mar 7 10:19:06 2005: Restoring NT ACLs.       <br />Ndmpcopy: filer: Log: RESTORE: RESTORE IS DONE       <br />Ndmpcopy: filer: Notify: restore successful       <br />Ndmpcopy: filer: Log: DUMP: 365298 KB       <br />Ndmpcopy: filer: Log: DUMP: DUMP IS DONE       <br />Ndmpcopy: filer: Log: DUMP: Deleting &quot;/vol/vol0/../snapshot_for_backup.4&quot; snapshot.       <br />Ndmpcopy: filer: Notify: dump successful       <br />Ndmpcopy: Transfer successful [ 49 seconds ]       <br />Ndmpcopy: Done</code></p>
<p>Укажем для OS, что созданный том и есть наш новый root vol</p>
<p><code>&gt; vol options new_root_vol root</code></p>
<p><code>Mon Mar 7 10:21:24 PST [filer: fmmbx_instanceWorke:info]: Disk 8a.37 removed from primary mailbox set      <br />Mon Mar 7 10:21:24 PST [filer: fmmbx_instanceWorke:info]: Disk 8a.36 removed from primary mailbox set       <br />Mon Mar 7 10:21:24 PST [filer: fmmbx_instanceWorke:info]: Disk 8a.35 is a primary mailbox disk       <br /><font color="#ff0000">volume new_vol_root will become root volume at the next boot</font>.</code></p>
<p>При необходимости переименуем новый том понятным именем</p>
<p><code>&gt; vol rename new_root_vol rootvol </code></p>
<p>Если вы использовали NAS-шары на старом томe (например для доступа к содержимому /etc и корня root vol, автоматически при инсталляции создаются шары etc$ и c$), они будут автоматически переставлены на новые места. Проверьте это, и, при необходимости, поправьте.</p>
<p><code>&gt; cifs shares </code></p>
<p><code>&gt; exportfs </code></p>
<p>Проверьте новые настройки томов</p>
<p><code>filer&gt; vol status      <br />Volume State Status Options       <br />vol1 online raid_dp create_ucode=on       <br />vol0 online raid4 create_ucode=on       <br />rootvol online raid4 <font color="#ff0000">root</font>, raidsize=4, create_ucode=on </code></p>
<p>Как вы видите, созданный вами том rootvol теперь является <strong>root</strong>.</p>
<p>Перезагрузитесь (в кластерной системе вместо перезагрузки можно сделать кластерный takeover/giveback), и убедитесь, что все хорошо.</p>
<p><code>&gt; reboot </code></p>
<p>Готово, вы перенесли <em>root volume</em> на новое место.</p>
</p>
<p><strong>UPD:</strong> Как правильно заметили в комментариях, я забыл еще одну операцию. Дело в том, что после переноса root vol перестает работать доступ по https в FilerView и System Manager. Поэтому необходимо перегенерировать SSL-сертификаты из командной строки:</p>
<p><code><br />
filer> options ssl.enable off<br />
filer> secureadmin setup ssl<br />
filer> options ssl.enable on<br />
</code></p></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/replace.html" rel="tag">replace</a>, <a href="../../../tag/root.html" rel="tag">root</a>, <a href="../../../tag/root-vol.html" rel="tag">root vol</a><br />					Раздел: <a href="../../../category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../../../category/utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;" rel="category tag">utilities</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../922/trackback.html#comments" title="Комментарий к записи Перенос root volume">Комментарии (15)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-920">
				<h2 class="posttitle"><a href="../../../920/trackback.html" rel="bookmark" title="Permanent Link to Network boot">Network boot</a></h2>
				<div class="postmetadata">13 Июнь 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Как вы, возможно, слышали, загрузить систему хранения NetApp можно по сети, сравнительно традиционным для UNIX-систем способом загрузки OS (ядра и rootfs) через TFTP. Это может помочь, например, если из за неисправности имеющегося ядра, которое располагается в системах NetApp на внутренней CF-карточке.</p>
<p>Для того, чтобы загрузиться с TFTP необходимо при загрузке прервать обычное выполнение процедуры загрузки нажав при включении системы Ctrl-C (или в случае повреждения собственного загрузочного ядра OS система окажется там сама), оставшись в “биосе”. В качестве “биоса” в системах хранения NetApp используется специальный загрузчик, под названием LOADER (в более ранних системах, например FAS270 или FAS3020/3050 использовался немного другой метод – CFE – Common Firmware Environment).</p>
<p>Как для LOADER, так и для CFE для загрузки системы хранения с помошью netboot вам нужно скачать с сайта NetApp netboot-версию OS Data ONTAP нужной вам версии и типа платформы (для современных систем это всегда версия с индексом платформы Q, для FAS3020/3050 индекс платформы будет E, для старых, MIPS-based систем, например FAS270 – M). </p>
<p>Netboot-версия Data ONTAP 7.3.5.1 (наиболее свежей 7.х на момент написания этого поста) имеет размер 27,4MB (7351_netboot.q), версия Data ONTAP 8.0.1 – 144,6MB (801_netboot_q.tgz) и представляют собой kernel и rootfs завернутые в tar.gz, загружающиеся традиционным образом в память.</p>
<p>Далее вам следует установить и настроить в сети, доступной системе хранения, сервер TFTP, и положить туда скачанный образ.</p>
<p>В подсказке LOADER необходимо настроить сетевой интерфейс и запустить сетевую загрузку.</p>
<p><code>LOADER&gt; ifconfig e0a -addr=192.168.1.10 -mask=255.255.255.0 -gw=192.168.1.1     <br />e0a: Link speed: 1000BaseT FDX       <br />Device e0a:&#160; hwaddr 00-A0-98-03-48-AB, ipaddr 192.168.1.10, mask 255.255.255.0       <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; gateway 192.168.1.1, nameserver not set</code></p>
<p>Доступные опции для команды ifconfig можно посмотреть введя в подсказке LOADER команду <code>help ifconfig</code></p>
<p>Проверяем работу сети пингуя default gateway:</p>
<p><code>LOADER&gt; ping 192.168.1.1      <br />192.168.1.1 (192.168.1.1) is alive       <br />192.168.1.1 (192.168.1.1): 1 packets sent, 1 received</code></p>
<p>Запускаем команду netboot</p>
<p><code>LOADER&gt; netboot tftp://192.168.1.11/tftproot/netapp_7.2.3_x86_64      <br />Loading:. . . . . . . . . . . </code></p>
<p>Далее Data ONTAP загружается обычным образом. Если /etc , хранящийся на root volume, при этом доступен, то система запустится штатным образом, восстановив все рабочие настройки, если же система повреждена значительно, и, например /etc также&#160; недоступен, то можно попробовать загрузиться без /etc (выбрав соответствующую опцию в boot menu) инициализировать диски, создать новый aggregate, и запустить установку OS “начисто”.</p>
<p>Обратите внимание, что для netboot доступны только встроенные ethernet-порты, не те, что возможно у вас на системе установлены на карте расширения, которая в момент начальной загрузки еще недоступна. </p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/howto/index.html" rel="tag">howto</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../../tag/netboot.html" rel="tag">netboot</a>, <a href="../../../tag/tricks/index.html" rel="tag">tricks</a><br />					Раздел: <a href="../../../category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../../../category/tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;" rel="category tag">tricks</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../920/trackback.html#comments" title="Комментарий к записи Network boot">Комментарии (2)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-932">
				<h2 class="posttitle"><a href="../../../932/trackback.html" rel="bookmark" title="Permanent Link to iCloud и NetApp?">iCloud и NetApp?</a></h2>
				<div class="postmetadata">9 Июнь 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Глазастый блоггер Stephen Foskett (блог PackRat) <a href="http://blog.fosketts.net/2011/06/06/datacenter-equipment-apple">углядел</a> на фотографиях с презентации Apple о ее новом датацентре в Северной Каролине, который будет использоваться под iCloud, стораджи NetApp в стойках.</p>
<p>Не секрет, что круг клиентов NetApp куда шире, чем те Success Stories, о которых упомянуто на официальном сайте (в России с опубликованными Success Stories внедрений и совсем “бедно”, несмотря на то, что системы NetApp продаются в России и Казахстане очень успешно). Любопытно, порой, бывает встретить такие имена среди пользователей NetApp.</p>
<p>Собственно сами фотографии:</p>
<p><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="Apple-Racks-2" border="0" alt="Apple-Racks-2" src="/pics//apple-racks-2.jpg" width="640" height="427" /></p>
<p>2,3 – различные сервера HP (вероятнее всего DL360G7 и DL380G7), опознанные по характерному виду и фиолетовым элементам на треях дисков :)</p>
<p>4,5 – ясно видная передняя панель корпуса 6U контроллера FAS6200, сверху и снизу (а также рядом, в соседней стойке, ближе к фотографирующему) окруженная несколькими дисковыми полками DS2246.</p>
<p>Кроме указанного, на <a href="http://static.fosketts.net/wp-content/uploads/2011/06/Apple-Racks-1-300x200.jpg">фотографиях</a> также замечены характерные рэки стоек <a href="http://www.teradata.com/t/extreme-data-appliance/">Teradata Extreme Data Appliance</a>.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/apple.html" rel="tag">apple</a>, <a href="../../../tag/icloud.html" rel="tag">icloud</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;" rel="category tag">justread</a>,  <a href="../../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../932/trackback.html#comments" title="Комментарий к записи iCloud и NetApp?">Комментарии (2)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-919">
				<h2 class="posttitle"><a href="../../../919/trackback.html" rel="bookmark" title="Permanent Link to Замена диска на конкретный из spare">Замена диска на конкретный из spare</a></h2>
				<div class="postmetadata">6 Июнь 2011, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Хотя в подавляющем большинстве случаев это и не является необходимым в практике администратора, однако в Data ONTAP имеется механизм принудительного “вывода из строя” и замены диска на конкретный диск из spare.</p>
<p>Для принудительного назначения диска “вышедшим из строя” можно использовать команду </p>
<p><code>&gt; disk fail &lt;disk.name&gt;</code></p>
<p><strong>ОСТОРОЖНО!</strong> Эта команда относительно легко доступна, а вот “обратная” ей disk unfail требует повышенного уровня привилегий, <strike>и доступна только джедаям от третьего уровня и выше</strike>. Помеченный как fail диск становится для системы на самом деле fail, и никакие “вынуть-вставить” его от этого состояния не лечат!</p>
<p>Эта команда не позволяет назначить на замену конкретный spare. Если же стоит задача именно корректно заменить один конкретный диск на конкретный другой из блока spare, то следует применить команду </p>
<p><code>&gt; disk replace start [-f] disk.name sparedsik.name</code></p>
<p>Эта команда инициирует процесс Rapid RAID Recovery, при котором, напоминаю, считывается все доступное содержимое непосредственно со “сбойного” диска, а не восстанавливается из parity, как при “обычном” RAID Recovery, что гораздо быстрее и меньше нагружает систему, а все что считать таким образом не удалось уже восстанавливается традиционным способом.</p>
<p>После завершения RAID Recovery назначенный для замены диск заменяется на указанный из spare, а сам, в свою очередь, передается в блок spare.</p>
<p>Отменить начавшуюся процедуру замены можно командой </p>
<p><code>&gt; disk replace stop disk.name</code></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../../tag/disk.html" rel="tag">disk</a>, <a href="../../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../../category/commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../../919/trackback.html#respond" title="Комментарий к записи Замена диска на конкретный из spare">Комментарий</a>									 </div>
			</div>
	
		
		<div class="navigation">
			<div class="alignleft"><a href="page/2.html">&laquo; Previous Entries</a></div>
			<div class="alignright"></div>
		</div>
		
	
	</div>
	<div id="sidebar">
		<ul>
			
			
			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Автор</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			<li class="pagenav"><h2>Страницы</h2><ul><li class="page_item page-item-153"><a href="../../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul></li>
			<li><h2>Рубрики</h2>
				<ul>
					<li class="cat-item cat-item-89"><a href="../../../category/commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;">commands</a>
</li>
	<li class="cat-item cat-item-37"><a href="../../../category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;">howto</a>
</li>
	<li class="cat-item cat-item-52"><a href="../../../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;">justread</a>
</li>
	<li class="cat-item cat-item-51"><a href="../../../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;">review</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;">techtalk</a>
</li>
	<li class="cat-item cat-item-71"><a href="../../../category/tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;">tricks</a>
</li>
	<li class="cat-item cat-item-95"><a href="../../../category/utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;">utilities</a>
</li>
	<li class="cat-item cat-item-44"><a href="../../../category/whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;">whoisho</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;">новости</a>
</li>
	<li class="cat-item cat-item-387"><a href="../../../category/opros.html" title="Просмотреть все записи в рубрике &laquo;опрос&raquo;">опрос</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../../category/translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;">переводы</a>
</li>
	<li class="cat-item cat-item-40"><a href="../../../category/citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;">цитаты</a>
</li>
				</ul>
			</li>

			<li><h2>Архивы</h2>
				<ul>
					<li><a href='../../2018/01.html' title='Январь 2018'>Январь 2018</a></li>
	<li><a href='../../2015/10.html' title='Октябрь 2015'>Октябрь 2015</a></li>
	<li><a href='../../2015/04.html' title='Апрель 2015'>Апрель 2015</a></li>
	<li><a href='../../2015/03.html' title='Март 2015'>Март 2015</a></li>
	<li><a href='../../2015/01.html' title='Январь 2015'>Январь 2015</a></li>
	<li><a href='../../2014/12.html' title='Декабрь 2014'>Декабрь 2014</a></li>
	<li><a href='../../2014/11.html' title='Ноябрь 2014'>Ноябрь 2014</a></li>
	<li><a href='../../2014/10.html' title='Октябрь 2014'>Октябрь 2014</a></li>
	<li><a href='../../2014/09.html' title='Сентябрь 2014'>Сентябрь 2014</a></li>
	<li><a href='../../2014/08.html' title='Август 2014'>Август 2014</a></li>
	<li><a href='../../2014/07.html' title='Июль 2014'>Июль 2014</a></li>
	<li><a href='../../2014/06.html' title='Июнь 2014'>Июнь 2014</a></li>
	<li><a href='../../2014/05.html' title='Май 2014'>Май 2014</a></li>
	<li><a href='../../2014/04.html' title='Апрель 2014'>Апрель 2014</a></li>
	<li><a href='../../2014/03.html' title='Март 2014'>Март 2014</a></li>
	<li><a href='../../2014/02.html' title='Февраль 2014'>Февраль 2014</a></li>
	<li><a href='../../2014/01.html' title='Январь 2014'>Январь 2014</a></li>
	<li><a href='../../2013/12.html' title='Декабрь 2013'>Декабрь 2013</a></li>
	<li><a href='../../2013/11.html' title='Ноябрь 2013'>Ноябрь 2013</a></li>
	<li><a href='../../2013/10.html' title='Октябрь 2013'>Октябрь 2013</a></li>
	<li><a href='../../2013/09.html' title='Сентябрь 2013'>Сентябрь 2013</a></li>
	<li><a href='../../2013/08.html' title='Август 2013'>Август 2013</a></li>
	<li><a href='../../2013/07.html' title='Июль 2013'>Июль 2013</a></li>
	<li><a href='../../2013/06.html' title='Июнь 2013'>Июнь 2013</a></li>
	<li><a href='../../2013/05.html' title='Май 2013'>Май 2013</a></li>
	<li><a href='../../2013/04.html' title='Апрель 2013'>Апрель 2013</a></li>
	<li><a href='../../2013/03.html' title='Март 2013'>Март 2013</a></li>
	<li><a href='../../2013/02.html' title='Февраль 2013'>Февраль 2013</a></li>
	<li><a href='../../2013/01.html' title='Январь 2013'>Январь 2013</a></li>
	<li><a href='../../2012/12.html' title='Декабрь 2012'>Декабрь 2012</a></li>
	<li><a href='../../2012/11.html' title='Ноябрь 2012'>Ноябрь 2012</a></li>
	<li><a href='../../2012/10.html' title='Октябрь 2012'>Октябрь 2012</a></li>
	<li><a href='../../2012/09.html' title='Сентябрь 2012'>Сентябрь 2012</a></li>
	<li><a href='../../2012/08.html' title='Август 2012'>Август 2012</a></li>
	<li><a href='../../2012/07.html' title='Июль 2012'>Июль 2012</a></li>
	<li><a href='../../2012/06.html' title='Июнь 2012'>Июнь 2012</a></li>
	<li><a href='../../2012/05.html' title='Май 2012'>Май 2012</a></li>
	<li><a href='../../2012/04.html' title='Апрель 2012'>Апрель 2012</a></li>
	<li><a href='../../2012/03.html' title='Март 2012'>Март 2012</a></li>
	<li><a href='../../2012/02.html' title='Февраль 2012'>Февраль 2012</a></li>
	<li><a href='../../2012/01.html' title='Январь 2012'>Январь 2012</a></li>
	<li><a href='../12.html' title='Декабрь 2011'>Декабрь 2011</a></li>
	<li><a href='../11.html' title='Ноябрь 2011'>Ноябрь 2011</a></li>
	<li><a href='../10/index.html' title='Октябрь 2011'>Октябрь 2011</a></li>
	<li><a href='../09/index.html' title='Сентябрь 2011'>Сентябрь 2011</a></li>
	<li><a href='../08.html' title='Август 2011'>Август 2011</a></li>
	<li><a href='../07/index.html' title='Июль 2011'>Июль 2011</a></li>
	<li><a href='index.html' title='Июнь 2011'>Июнь 2011</a></li>
	<li><a href='../05/index.html' title='Май 2011'>Май 2011</a></li>
	<li><a href='../04/index.html' title='Апрель 2011'>Апрель 2011</a></li>
	<li><a href='../03/index.html' title='Март 2011'>Март 2011</a></li>
	<li><a href='../02.html' title='Февраль 2011'>Февраль 2011</a></li>
	<li><a href='../01.html' title='Январь 2011'>Январь 2011</a></li>
	<li><a href='../../2010/12.html' title='Декабрь 2010'>Декабрь 2010</a></li>
	<li><a href='../../2010/11/index.html' title='Ноябрь 2010'>Ноябрь 2010</a></li>
	<li><a href='../../2010/10/index.html' title='Октябрь 2010'>Октябрь 2010</a></li>
	<li><a href='../../2010/09/index.html' title='Сентябрь 2010'>Сентябрь 2010</a></li>
	<li><a href='../../2010/08.html' title='Август 2010'>Август 2010</a></li>
	<li><a href='../../2010/07/index.html' title='Июль 2010'>Июль 2010</a></li>
	<li><a href='../../2010/06.html' title='Июнь 2010'>Июнь 2010</a></li>
	<li><a href='../../2010/05.html' title='Май 2010'>Май 2010</a></li>
	<li><a href='../../2010/04/index.html' title='Апрель 2010'>Апрель 2010</a></li>
	<li><a href='../../2010/03/index.html' title='Март 2010'>Март 2010</a></li>
	<li><a href='../../2010/02.html' title='Февраль 2010'>Февраль 2010</a></li>
	<li><a href='../../2010/01.html' title='Январь 2010'>Январь 2010</a></li>
	<li><a href='../../2009/12/index.html' title='Декабрь 2009'>Декабрь 2009</a></li>
	<li><a href='../../2009/11/index.html' title='Ноябрь 2009'>Ноябрь 2009</a></li>
	<li><a href='../../2009/10.html' title='Октябрь 2009'>Октябрь 2009</a></li>
	<li><a href='../../2009/09.html' title='Сентябрь 2009'>Сентябрь 2009</a></li>
	<li><a href='../../2009/08/index.html' title='Август 2009'>Август 2009</a></li>
	<li><a href='../../2009/07/index.html' title='Июль 2009'>Июль 2009</a></li>
	<li><a href='../../2009/06.html' title='Июнь 2009'>Июнь 2009</a></li>
	<li><a href='../../2009/05.html' title='Май 2009'>Май 2009</a></li>
	<li><a href='../../2009/04.html' title='Апрель 2009'>Апрель 2009</a></li>
	<li><a href='../../2009/03.html' title='Март 2009'>Март 2009</a></li>
	<li><a href='../../2009/02.html' title='Февраль 2009'>Февраль 2009</a></li>
	<li><a href='../../2009/01.html' title='Январь 2009'>Январь 2009</a></li>
	<li><a href='../../2008/12.html' title='Декабрь 2008'>Декабрь 2008</a></li>
	<li><a href='../../2008/11.html' title='Ноябрь 2008'>Ноябрь 2008</a></li>
	<li><a href='../../2008/10.html' title='Октябрь 2008'>Октябрь 2008</a></li>
	<li><a href='../../2008/09.html' title='Сентябрь 2008'>Сентябрь 2008</a></li>
	<li><a href='../../2008/08.html' title='Август 2008'>Август 2008</a></li>
	<li><a href='../../2008/03.html' title='Март 2008'>Март 2008</a></li>
	<li><a href='../../2008/02.html' title='Февраль 2008'>Февраль 2008</a></li>
	<li><a href='../../2007/12.html' title='Декабрь 2007'>Декабрь 2007</a></li>
	<li><a href='../../2007/11.html' title='Ноябрь 2007'>Ноябрь 2007</a></li>
	<li><a href='../../2007/10.html' title='Октябрь 2007'>Октябрь 2007</a></li>
	<li><a href='../../2007/09.html' title='Сентябрь 2007'>Сентябрь 2007</a></li>
	<li><a href='../../2007/08.html' title='Август 2007'>Август 2007</a></li>
	<li><a href='../../2007/07/index.html' title='Июль 2007'>Июль 2007</a></li>
	<li><a href='../../2007/06.html' title='Июнь 2007'>Июнь 2007</a></li>
	<li><a href='../../2007/05.html' title='Май 2007'>Май 2007</a></li>
				</ul>
			</li>

			
					</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="../../../../feed">Entries (RSS)</a> and <a href="../../../../comments/feed">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 14 queries. 0.104 seconds. -->
	</div>
</div> <!-- page -->
</body>
</html>
