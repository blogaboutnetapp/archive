<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>about NetApp   &raquo; 2010 &raquo; Ноябрь</title>

<link rel="stylesheet" href="../../../wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />
<link rel="alternate" type="application/rss+xml" title="about NetApp RSS Feed" href="../../../feed" />
<link rel="pingback" href="../../../xmlrpc.php.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.6" />

</head>

<body>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="../../../index.html" title="about NetApp: Системы хранения данных как предмет разговора">about NetApp</a></h1>
		<p>Системы хранения данных как предмет разговора</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="../../../index.html">
<input type="text" size="20" name="s" id="s" value="Поиск..."  onblur="if(this.value=='') this.value='Поиск...';" onfocus="if(this.value=='Поиск...') this.value='';"/>
</form>
	</div> 
	<!-- Search ends here-->
		
</div>

<div id="navbar">
<ul id="nav">
	<li><a href="../../../index.html">Home</a></li>
	<li class="page_item page-item-153"><a href="../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul>
</div>
<div id="wrapper">

	<div id="content">

	
			<p>Archive for Ноябрь 2010</p>

				
		<div class="navigation">
			<div class="alignleft"><a href="11/page/2.html">&laquo; Previous Entries</a></div>
			<div class="alignright"></div>
		</div>

						
			<div class="post" id="post-773">
				<h2 class="posttitle"><a href="../../773/trackback.html" rel="bookmark" title="Permanent Link to Команда lock">Команда lock</a></h2>
				<div class="postmetadata">29 Ноябрь 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Продолжим нашу серию про не слишком известные, но полезные команды, “в записную книжку админа”. На очереди у нас уже однажды упоминавшаяся команда lock. </p>
<p>Напомню вкратце. В системе совместного доступа, какой является NAS, для того, чтобы обеспечить отсутствие конфликтов доступа, используется метод так называемого “локирования” доступа к файлу.&#160; Это необходимо для предотвращения возможности одновременной, но неснхронизированной записи в один и тот же файл от разных клиентов, не знающих о том, что сосед тоже решил изменить тот же самый файл, уже открытый одним клиентом. Для предотвращения такой ситуации, первый открывший файл клиент получает исключительные права на запись в файл (локирует файл на запись), остальные же – только на чтение, до тех пор, пока первый клиент не закончит записи в файл.   <br />Возможно два типа локирования, так называемый <em>file lock</em>, при котором ограничивается доступ на запись в файл целиком для всех, кроме залокировавшего файл на запись клиента, и <em>byte range lock</em>, при котором ограничивается запись к определенному участку файла.</p>
<p>С помощью команды <strong>lock status</strong> можно посмотреть, какой хост и какой пользователь локировал тот или иной файл на NAS-системе.</p>
<p><code>fas1&gt;&#160; lock status –p cifs –h&#160; </code><em>(показывает локи сортированные по имени хоста)</em><code>      <br /><font style="background-color: #ffffa0">CIFS host=172.18.2.107(VUSER01-VPC)</font> owner=administrator state=GRANTED mode=Read-       <br />denyN oplock=None fsid=0&#215;0e1d66f7 fileid=0&#215;000000d3       <br />path=\word.doc(/vol/vol0/share1/word.doc) </code>    <br />&#160; <br /><code>fas1&gt; lock status –p cifs –o </code><em>(показывает локи, сортированные по пользователю или владельцу)</em><code>      <br /><font style="background-color: #ffffa0">CIFS owner=root</font> host=10.34.17.49(PC002-XP) pid=65279 offset=2147483539 len=1       <br />excl=yes state=GRANTED fsid=0&#215;0e1d66f7 fileid=0&#215;000000d3       <br />path=\word.doc(/vol/vol0/share1/word.doc) </code></p>
<p>Снять же ненужное (например ошибочно “зависшее”) локирование можно командой:</p>
<p><code>fas1&gt; lock break -f file [-o owner -h host] [-p proto] </code></p>
<p>Обратите внимание, что, хотя команда lock break –f и поддерживается, но при использовании NFS v4 ее применение не рекомендуется, по причине ряда ненужных побочных эффектов снятия локирования таким образом.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../tag/commands/index.html" rel="tag">commands</a>, <a href="../../tag/lock.html" rel="tag">lock</a>, <a href="../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../category/commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;" rel="category tag">commands</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../773/trackback.html#respond" title="Комментарий к записи Команда lock">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-772">
				<h2 class="posttitle"><a href="../../772/trackback.html" rel="bookmark" title="Permanent Link to Компрессия на WAFL &ndash; некоторые подробности">Компрессия на WAFL &ndash; некоторые подробности</a></h2>
				<div class="postmetadata">25 Ноябрь 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Как я уже писал раньше, начиная с Data ONTAP 8.0.1, для пользователей систем хранения NetApp становится доступной опция компрессии хранимых на дисках данных. Эта возможность довольно популярна среди современных файловых систем, например она хорошо работает в NTFS. Теперь эта возможность, дополняющая дедупликацию, появилась у NetApp.</p>
<p>Прозрачная онлайн-компрессия происходит в момент, когда файл данных находится в памяти на пути к дискам. После компрессии, сжатый файл записывается на диск, а при считывании – читается сжатым, а затем распаковывается в памяти, и передается запросившему его распакованным. Большим преимуществом такой схемы является то, что все эти процессы являются прозрачными для пользователя и его приложений. Ему не надо заботиться о запаковке и распаковке, он всегда записывает и получает обратно свой исходный файл, всеми операциями по его преобразованию занимается OS.</p>
<p>Преимущество хранения скомпрессированного файла очевидно. В такой форме файлы занимают значительно меньше места на диске. Насколько меньше – зависит от характера данных. Например уже обработанные тем или иным компрессором файлы, а также цифровое видео и аудио, обычно также сжатое тем или иным алгоритмом, уже практически не сжимается. ??сполняемые файлы, например программы, сжимаются примерно на 25-35%. Файлы данных, такие, как документы Word и Excel – обычно на 30-50 процентов.</p>
<p>Недостаток, в принципе, тоже очевиден. Операции запаковки и распаковки больше обычного нагружают процессор системы. Насколько сильно – зависит от характера данных, а также мощности процессоров.</p>
<p>Еще одним неявным преимуществом хранения данных в таком виде, которое часто недооценивается, является, как ни парадоксально, улучшение показателей производительности считывания с дисков для сжатых файлов. Ведь если мы храним файл, сжатый на 50%, то для того, чтобы считать его с дисков (сжатый), нам придется прочесть с этих дисков в память поток байт вдвое меньший, чем для некомпрессированного файла. Лучше, следовательно, могут стать и показатели IOPS системы.    <br />Платим за это мы потенциально большей нагрузкой на процессор, все верно. Однако, в наше время, производительности процессоров на такие несложные, хорошо известные и эффективные алгоритмы, как онлайн-компрессия, хватает с огромным запасом.&#160; Во многих случаях разница в загрузке процессора даже оказывается ниже измеряемого уровня. Пожертвовать ради увеличения дисковой производительности единицами процентов загрузки процессоров, мощность которых непрерывно растет кадый год, по сравнению с показателями в IOPS для дисков, которые застыли и не улучшаются уже довольно давно, бывает вполне неплохим вариантом “обмена”.</p>
<p>Однако реализация онлайн-компрессии связана с необходимостью решения ряда технических проблем. Например, неэффективно было бы компрессировать весь файл целиком, ведь это потребовало бы держать его целиком в памяти, более того, при необходимости изменения данных в середине такого файла, нам пришлось бы считать его в память целиком, разархивировать, изменить запрошенные участки, а затем заархивировать и записать его назад на диски, причем целиком.</p>
<p>Теоретически мы могли бы попробовать архивировать отдельно составляющие файл блоки WAFL размером 4KB, используя компрессию на уровне блоков , но что делать с высвободившемся от такой компрессии местом? WAFL не может работать с местом на таком “субблочном” уровне. Если у нас есть файл, который занимает 3 блока WAFL по 4KB, то еть имеет размер в 12KB, и файл сжимается вдвое, то после компрессии на уровне блоков WAFL мы получим три наполовину пустых блока WAFL, однако свободное место на них (так называемые tail-ы) использовать не получится – субблочное пространство не адресуется в ONTAP, и файл по прежнему будет занимать три блока – 12KB.</p>
<p>Выход – в использовании групповой обработки. Каждый хранимый файл последовательно делится на так называемые compression groups, размером 32KB, то есть состоящие из 8 блоков WAFL, с которыми и производятся неободимые операции. Compression Groups рассматриваются как единый объект воздействия компрессии. Поделенный на такие группы файл считывается только в той части, что необходима. Если нам нужно изменить блок данных в середине, то считывается в память 32KB данных, содержащих данный блок, блок изменяется, и затем группа компресируется и записывается.</p>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="compression-1" border="0" alt="compression-1" src="/pics//compression-1.jpg" width="400" height="139" /></p>
<p>Любопытно, что перед тем, как компрессировать группу, Data ONTAP проводит “на лету” оценку эффективности компрессии. Если компрессия незначительна (очевидно, что это менее 1/8 размера), то группа записывается в исходном виде. Таким образом, файл сжатого видео, записанный на “сжатый” том, будет записан в “исходном” его состоянии, время и процессор на сжатие явно несжимаемго не тратятся. Оценка же производится для 32KB групп. Если внутри в целом несжимаемого файла обнаружится последовательный блок размером 32KB и более, пригодный для сжатия, он будет сжат обычным образом.</p>
<p>Как обычно, коротко, в вопросах и ответах.</p>
<p>Q: Сколько это стоит?    <br />А: Данная лицензия будет доступна бесплатно, как, например, было и есть с дедупликацией.</p>
<p>Q: Это будет работать только для Data ONTAP 8?    <br />A: Нет, еще какое-то время будет продолжаться развитие ветви “семерки”, и, по предварительным данным, в ней тоже будет доступна компрессия. Если у вас активна подписка на обновление ПО, и вы можете поставить новую версию ONTAP на вашу систему, в ней будет и компрессия. Но вообще говоря, стоит уже задуматься о переходе на Generation 8.</p>
<p>Q: Это вместо дедупликации?    <br />A: Нет, это работает независимо, и может компресировать даже уже дедуплицированные тома! ?? дедупликацию, и компрессию, вы можете использовать независимо, и даже одновременно, на одних и тех же томах.</p>
<p>Q: А если дедупликация уже дедуплицировала, разве остается что-то, что можно еще и сжать?    <br />A: Конечно. Вот, например, описание эксперимента, в котором оценивалась эффектвноссть дедупликации и компрессии: <a href="http://habrahabr.ru/blogs/sysadm/104979/">http://habrahabr.ru/blogs/sysadm/104979/</a>     <br />Кроме этого, представим, что у нас на диске лежит сто одинаковых документов. После дедупликации у нас на диске останутся занятыми только блоки одного экземпляра (и по 99 ссылок на них из других файлов). Но этот единственный файл, в свою очередь также можно скомпрессировать! На дедупликацию и содержимое остальных, дедуплицированных файлов это не повлияет. Они просто будут ссылться на компрессированные блоки.</p>
<p>Q: Когда компрессировать получается лучше, чем дедуплицировать?    <br />A1: Представим себе, что на диске лежит множество файлов, которые уникальны по содержимому. То есть, например, текстовая база документов. Каждый, кто архивировал текстовые файлы знает, что такие файлы хорошо компрессируются. Однако вероятнее всего, в неповторяющихся файлах, дедупликация будет неэффективна. Ведь в таких файлах наверняка нет кусков по 4KB размером, строго идентичных до байта. Любая неидентичность в пределах блока WAFL в 4KB отменяет возможность дедупликации.     <br />A2: Другой вариант, сильно ухудшающий возможности дедупликации – смещение. Даже незначительное смещение в содержимом файлов мешает правильно сработать дедупликации. Но ничуть не ухудшает возможности компрессии.</p>
<p>Q: А что вообще лучше, дедупликация или компрессия?    <br />A: Для разных применений – лучше разное. Что-то лучше дедуплицируется, пример – файлы дисков виртуальных машин, что-то – компрессируется, пример – большинство баз данных, или хоумдиры документов с малым количеством дублирующихся между разными пользователями данных, или бэкапы с переменным смещением, сильно портящие “статистику” дедупликации. Наконец, вы можете компрессировать уже дедуплицированные данные.    <br />Конечно, дедупликация несколько меньше нагружает систему по процессорным ресурсам и почти не влияет на производительность, так как работает, в отличие от компрессии, в “оффлайне”. Но в ряде случаев и нагрузкой компрессии можно пренебречь, а экономия пространства – штука нелишняя. Смотрите по обстановке.</p>
<p>Q: Круто, спасибо!    <br />A: Да на здоровье :)</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../tag/compression.html" rel="tag">compression</a>, <a href="../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../tag/techtalk/index.html" rel="tag">techtalk</a><br />					Раздел: <a href="../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../772/trackback.html#comments" title="Комментарий к записи Компрессия на WAFL &ndash; некоторые подробности">Комментарии (2)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-770">
				<h2 class="posttitle"><a href="../../770/trackback.html" rel="bookmark" title="Permanent Link to Правда ли, что NetApp &ldquo;всегда дороже&rdquo;?">Правда ли, что NetApp &ldquo;всегда дороже&rdquo;?</a></h2>
				<div class="postmetadata">22 Ноябрь 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>По поводу якобы высоких цен на NetApp я обычно провожу вот какое, уже традиционное у нас в блоге &quot;автомобильное&quot; сравнение.</p>
<p>Почему NetApp оказывается &quot;вдвое дороже на том же количестве дисков&quot;? Почему вообще бессмысленно соревноваться с конкурентами по &quot;цене за определенное число дисков&quot;?</p>
<p>Допустим, мы объявляем &quot;тендер&quot; по покупке автомобиля, но так как мы пока не слишком большие специалисты в этой области, то список требований &quot;тендера&quot; невелик. Допустим там будет количество колес, грузоподьемность и объем двигателя - 1600 куб.см. Ну вот не специалисты мы, знаем только, что автомобиль он на 4 колесах и с двигателем, и двигатель, нам сказали, что 1600 будет нам в самый раз.</p>
<p>Этим условиям удовлетворяет вазовская &quot;шестерка&quot;-классика и Toyota Corolla (все совпадения с реальными названиями - случайны, все торговые марки принадлежат их владельцам;).</p>
<p>?? тот и другой заявленный на &quot;тендер&quot; автомобиль имеет 4 колеса, кузов, грузоподъемность и двигатель - 1600 куб.см.</p>
<p>Формально все требования удовлетворены в обоих случаях.   <br />Однако по цене Toyota получается значительно дороже.    <br />Почему?</p>
<p>Потому что у нее &quot;в базе&quot;, в базовой комплектации, кондиционер, АКПП, подогрев сидений, встроенная DVD-аудиосистема, мотор, при том же объеме, боле мощный и одновременно экономичный.   <br />Выше и цена, что естественно.</p>
<p>Если мы будем ориентироваться только на формальные &quot;тендерные&quot; требования, то выбор очевиден, если обе машины удовлетворяют заявленным требованиям, и одна из них значительно дороже, чем другая, то выиграет та, что дешевле.</p>
<p>Однако в реальной жизни выбор часто не столь очевиден :)</p>
<p>Да, конечно, цена важна, но кроме цены важны также и предлагаемые за эти деньги возможности. ?? очень часто именно возможности &quot;решают&quot; выбор. Однако если вы никогда не пробовали, что такое кондиционер в автомобиле летом, или что такое АКПП в многочасовой городской пробке, или насколько отличается с точки зрения семейного бюджета мотор с расходом 8 литров по городскому циклу от мотора в 11 литров на 100 км, то вы, на этапе покупки, часто, не сможете оценить важность всех этих возможностей.</p>
<p>??нтересно, что если мы будем сравнивать более объективно, чем &quot;по кубатуре двигла, и только&quot;, и попробуем &quot;уравнять&quot; вазовскую &quot;классику&quot; по набору фич, даже если это и было бы возможно, то, в результате, мы почти наверняка получим более дорогую, чем Toyota машину!</p>
<p>Конечно, есть такие автовладельцы, которые полностью удовлетворены возможностями вазовской &quot;классики&quot; и не хотят ничего иного. Причины этому могут быть самые разные.    <br />Никогда не пробовали ничего лучше, и считают, что АКПП и кондиционер это буржуйские излишества - частый пример. ??ли на самом деле нет больше денег, ну вот совсем нет. ??ли же, наконец, на ту небольшую нишу применения, например возить ящики с рассадой на дачу, и правда вполне достаточно ВАЗа.</p>
<p>Приведенная аналогия очень хорошо соответствует ситуации с NetApp. Да, если мы поставим в качестве требований, например, количество дисков, то система NetApp часто, по &quot;прайслистовой цене&quot;, будет дороже. Но одновременно она будет, за эти деньги, иметь значительно больше возможностей. Возможностей, &quot;в базе&quot;, которых просто не будет у более дешевого конкурента.</p>
<p>В случае же, если вы захотите добавить эти возможности на системе конкурента, то значительно вырастет и их цена, подчас превышая и цену NetApp.</p>
<p>Не всегда &quot;быть в два раза дешевле&quot; одновременно означает &quot;быть в два раза лучше&quot;   <br />Не всегда &quot;решает&quot; только цена.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../tag/competition.html" rel="tag">competition</a>, <a href="../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../tag/price.html" rel="tag">price</a><br />					Раздел: <a href="../../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;" rel="category tag">justread</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../770/trackback.html#respond" title="Комментарий к записи Правда ли, что NetApp &ldquo;всегда дороже&rdquo;?">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-760">
				<h2 class="posttitle"><a href="../../760/trackback.html" rel="bookmark" title="Permanent Link to Аттракцион невиданой щедрости &ndash; Software Licensing">Аттракцион невиданой щедрости &ndash; Software Licensing</a></h2>
				<div class="postmetadata">18 Ноябрь 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>?? в завершение длинной серии статей о новых продуктах NetApp этой осени, нельзя не рассказать о новых правилах лицензирования софтверной части систем. Большая часть изменений там интересна в первую очередь для партнеров и пресейлов, поэтому особенно подробно мы на них останавливаться не будем, так как &#8220;кому положено&#8221; это все и так знают, а широкой публике хотелось бы рассказать о двух важных нововведениях.</p>
<p>Как вы, возможно, знаете, настолько давно, что многие считают, что так было всегда, системы хранения NetApp приходят с одной включенной лицензией на протоколы по умолчанию, и включенной в базовую цену (“не стоящей дополнительных денег”), это лицензия на протокол iSCSI. </p>
<p>Однако, есть люди, которые iSCSI не используют, и, несомненно, им бы хотелось, чтобы одним “протоколом по умолчанию” стал какой-нибудь другой, тот, что им нужен. Это была бы большая экономия, например если вам нужен только весьма недешевый у NetApp NFS, или же FC, для “чисто-FC” системы. Радостная новость для таких людей – вас услышали. Новые серии, 3200 и 6200 теперь идут с новой схемой лицензирования протоколов.</p>
<p>Теперь в цену системы включен <strong>один любой протокол</strong> на ваш выбор: FC, iSCSI, CIFS или NFS!    <br />А любой из остальных трех продается за одну и ту же для данной системы цену!</p>
<p>Услышаны и любители all inclusive. Теперь в базовую систему, <strong>без дополнительной оплаты</strong>, включена целая серия лицензий, под названием <em>Data ONTAP Essentials</em>.    <br />Эта политика уже была испробована на системах серии FAS2000, где лицензии приходили набором определенных “бандлов”, а протоколы были включены все сразу в базовую конфигурацию “Base Pack”.</p>
<p>В Data ONTAP Essentials входят почти все массово применяемые на стороне стораджа лицензии, за исключнием SnapRestore, SnapMirror и FlexClone, продающихся отдельно. Тут и привычно бесплатная Deduplication, и новая WAFL Compression, и всегда стоившая денег Multistore, используемая теперь в Data Motion, и SyncMirror, и даже Metrocluser и OSSV (Open Systems SnapVault). В составе этого <em>all inclusive pack</em> теперь поставляется и NetApp DSM (Device-specific Module) для организации MPIO, и набор ПО управления – Operations Manager, Protection Manager и Provision Manager, ранее стоивший существенных денег.</p>
<p>Все же имеющиеся продукты семейства SnapManager включены в единый пак SnapManager Suite, и с ним вы получаете лицензии на SnapManager сразу для всех продуктов: для VMware, Hyper-V, Exchange, Sharepoint, MS SQL Server, SAP и Oracle. Туда же включены и лицензии SnapDrive как для UNIX, так и для Windows. Теперь не нужно покупать разные SnapManager по отдельности, если вы используете под VMware в виртуальных машинах и Exchange, и MS SQL, и Sharepoint. Один пак и пользуйтесь всеми созданными SnapManager под любое доступное приложение. Осталась возможность покупать SnapManager/SnapDrive по модели per-server, но для количества серверов больше трех выгоднее покупать сразу Suite, которая не огранчена по числу инсталляций.</p>
<p>Обратите, пожалуйста, внимание, в настоящее время все эти нововведения, и “<em>протокол на выбор в подарок</em>”, и “<em>5-stars ultra all inclusive</em>” лицензий, все это распространяется <strong>только</strong> на новые системы – FAS3200 и FAS6200. Все системы старых серий лицензируются по прежнему – FAS2000 бандлами лицензий (Foundation/Application/Server Pack), а 3100 и 6000 – “a-la carte”.</p>
<p>Ну, разве не праздник?</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../tag/all-inclusive.html" rel="tag">all inclusive</a>, <a href="../../tag/fas3200.html" rel="tag">fas3200</a>, <a href="../../tag/fas6200.html" rel="tag">fas6200</a>, <a href="../../tag/licensing.html" rel="tag">licensing</a>, <a href="../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;" rel="category tag">review</a>,  <a href="../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../760/trackback.html#respond" title="Комментарий к записи Аттракцион невиданой щедрости &ndash; Software Licensing">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-756">
				<h2 class="posttitle"><a href="../../756/trackback.html" rel="bookmark" title="Permanent Link to FAS6200 &ndash; новые системы для &ldquo;больших&rdquo;.">FAS6200 &ndash; новые системы для &ldquo;больших&rdquo;.</a></h2>
				<div class="postmetadata">15 Ноябрь 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Днями ранее я уже рассказал вам про новинки этой осени, представленные на Insight 2010 в сегменте midrange. Но одновременно с ними были объявлены и три новых системы в “старшем классе”, так называемых highend storages.</p>
<p>Напомню, что ранее в этом сегменте у NetApp были две хорошо себя зарекомендовавших системы серии 6000 – FAS6040 и FAS6080. К ним теперь добавились еще три:   <br />FAS6210, FAS6240 и FAS6280.</p>
<p>Также как у FAS3200 следует обратить внимание на новую концепцию chassis, аналогичную системам серии 3200. В корпус теперь можно поместить также либо два контроллера (dual controller HA, <em>только FAS6210</em>), либо один контроллер и заглушку для single-controller (для всех систем), либо контроллер и модуль расширения портов IOXM (<em>для 6240/80</em>).</p>
<p>??спользование IOXM позволяет достичь большей гибкости конфигурирования и расширяемости (6000 – <strong>8</strong> слотов расширения(5 PCIe + 3 PCI-X), 6200 – <strong>14</strong> слотов (12 PCIe 2.0 8x + 2 special PCIe).</p>
<p>Для системы “нижнего highend” ;) 6210, в конфигурации <em>single chassis dual controller</em> это позволяет в 6U&#160; поместить высокопроиводительную пару контроллеров. Это хороший вариант для апгрейда “старшего midrange”, например 3170, на новый уровень производительности, с получанием и 10G Ethernet “в базе”, и 8G FC, и 4 слотов расширения на каждый контроллер (8 на HA-пару).    <br />Таким образом, как вы видите, здесь, в highend-сегменте, тоже предпринята попытка “размыть” строгое деление между классами, путем создания своеобразных “переходных” моделей (3210 и 6210).</p>
<p>Данные по производительности (как SPEC SFS2008, так и SPC-1)<del datetime="2010-11-12T08:58:19+00:00"> будут опубликованы в скором времени</del> уже опубликованы для FAS3270 и FAS6240 <del datetime="2010-11-12T08:58:19+00:00">, однако пока могу намекнуть, что</del> новые системы быстрые. Очень быстрые. Вот прямо таки “в разы”. ?? это тоже отличная новость.</p>
<p>Что же у этих систем на панели сзади?</p>
<p><a href="/pics//fas6200-rear.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="FAS6200-rear" border="0" alt="FAS6200-rear" src="/pics//fas6200-rear-thumb.jpg" width="640" height="366" /></a></p>
<p>По порядку, слева направо:</p>
<p>Порты ACP и контроллера удаленного администрирования Service Processor. Также как у 3200.</p>
<p>Два порта Gigabit Ethernet.</p>
<p>Четыре встроенных порта 10G Ethernet stateless offload с оптическими SFP+.</p>
<p>Два вертикальных слота со специальным формфактором (еще два таких ниже в IOXM), предназначенные для установки в них карт портов интерфейсов – на выбор FC 8Gb/s или SAS 3/6Gb/s (карты со специальным партномром и несовместимы с PCIe по разъему и формфактору). В эти слоты <strong>нельзя</strong> ставить обычные PCIe, и карты для этих слотов <strong>нельзя</strong> ставить в стандартные PCIe.</p>
<p>В контроллерном модуле слот слева <strong>всегда</strong> должна занимать либо карта FC, либо карта SAS. 2 слот, справа, <strong>всегда</strong> занимает карта NVRAM8 (NVRAM8 по прежнему использует для HA-кластерного интерконнекта Infiniband, однако использует теперь для них уменьшенный разъем, идентичный разъему SAS, не перепутайте, на самом деле справа именно NVRAM, а не карта SAS, как можно было бы подумать, бегло глядя на фото). </p>
<p>В IOXM оба слота могут заниматься картами портов FC или SAS того самого <em>хитрого</em> формата, либо оставаться свободными. Смешивать интерфейсы (поставив туда и FC и SAS одновременно) можно.    <br />Несмотря на эти сложности, порты FC в данных слотах <strong>можно</strong> использовать не только как initiator (для подключения к ним дисков), но и как target (для подключения к ним хостов-серверов). Порты SAS, конечно же можно использовать <strong>только</strong> для дисков (initiator).</p>
<p>Неиспользуемый в настоящее время порт USB (такой же, как на 3200).</p>
<p>Четыре универсальных порта FC 8Gb/s (target/initiator).</p>
<p>Порт консоли.</p>
<p>А вот как выглядит контроллер FAS6200 внутри (для ценителей hardcore geek porn %):</p>
<p><a href="/pics//fas6200-inside.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="FAS6200-inside" border="0" alt="FAS6200-inside" src="/pics//fas6200-inside-thumb.jpg" width="581" height="484" /></a></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../tag/fas6200.html" rel="tag">fas6200</a>, <a href="../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;" rel="category tag">review</a>,  <a href="../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../756/trackback.html#comments" title="Комментарий к записи FAS6200 &ndash; новые системы для &ldquo;больших&rdquo;.">Комментарии (2)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-750">
				<h2 class="posttitle"><a href="../../750/trackback.html" rel="bookmark" title="Permanent Link to FAS3200 &ndash; пополнение в семействе midrange. Часть 2">FAS3200 &ndash; пополнение в семействе midrange. Часть 2</a></h2>
				<div class="postmetadata">11 Ноябрь 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>В прошлом посте я начал рассказывать о технических деталях объявленных 9 ноября системах midrange-класса, расширивших и дополнивших существующую линейку систем FAS3100.</p>
<p>С “лица” в общем все понятно:</p>
<p><a href="/pics//fas32001.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="FAS3200" border="0" alt="FAS3200" src="/pics//fas3200-thumb1.png" width="362" height="92" /></a></p>
<p>Но перейдем к подробностям. Что же там, “сзади”?    <br /><a href="/pics//image-thumb41.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image_thumb[4]" border="0" alt="image_thumb[4]" src="/pics//image-thumb4-thumb.png" width="640" height="291" /></a></p>
<p>Вот что у нас теперь имеется из портов и расширений.</p>
<p>В первую очередь хотел бы обратить внимание на принципиально новую конструкцию chassis. Как вы видите, он состоит из двух одинаковых “слотов”, в которые могут быть вставлены блоки одинакового типоразмера: контроллер, или специальный модуль расширения IOXM (Input-Output eXpansion Module).    <br />При этом, хочу отметить, высота такого модуля осталась равной всего 3U, это высота классического контроллера FAS3000,&#160; вдвое меньше, чем chassis 3100.</p>
<p>Такой chassis может быть использован двояко. В такой chassis можно поставить <strong>два</strong> контроллера, в оба слота, получив в 3U стандартный HA-cluster, при этом будут еще доступны два слота расширения PCIe full и 3/4 size, новой версии стандарта 2.0, обратно совместимого с платами 1.0. Либо же (для моделей 3240/70) поставить в верхний слот контроллер, а в нижний – специальный модуль IOXM, который для серии 3200 предлагает дополнительные 4 слота расширения     <br /><strong>НО:</strong> для 3210 нет варианта с IOXM (то есть только один или два контроллера в chassis).</p>
<p>Таким образом для моделей 3240 и 3270 кроме варианта “2 контроллера в одном chassis” будет предлагаться вариант “контроллер и IOXM” в одном chassis, либо “один контроллер в chassis, без IOXM” (правда обратите внимание, что добавить позже, у клиента, <em>in field</em>, в последний вариант IOXM по ряду технических причин нельзя! Только заменой всей системы. Это довольно заметная <em>засада</em>, и ее лучше сразу себе представлять, и при возможности не экономить на IOXM, поскольку добавить его позже, в случае возникновения в нем необходимости, нельзя.)</p>
<p>Конечно, при необходимости, например для некритичной системы, или как компонент многоузлового кластера <em>8.0-cluster-mode</em>, все три системы можно купить и в “одноконтроллерном” варианте, для 3210 это будет один chassis с одним контроллером и заглушкой, а для 3240/70 – один chassis с одним контроллером и с/без IOXM.</p>
<p>Любопытно, что для всех трех систем midrange будет возможна конфигурация Metrocluster (“географически”-разнесенного HA-кластера), даже и для сравнительно недорогого 3210, <strong>НО</strong> не поддерживаются полки SAS, то есть пока только на DS14mk4. Позже, возможно в следующем году, будет готов бридж SAS-FC, но пока его нет, и конфигурация Metrocluster на SAS не поддерживается.</p>
<p>По портам слева направо:</p>
<p>Встроенные 2 порта стандарта SAS-2 двухрежимные 3/6Gbit, для подключения как DS4243, так и DS2246.</p>
<p>Новинка. Теперь HA-cluster interconnect использует в midrange не Infiniband, как ранее, а 10G Ethernet (в 6200 по прежнему сохранился Infiniband, однако переход на 10GE позволил отчасти снизить стоимость платформы в midrange). Однако обратите внимание, несмотря на то, что это физически порты 10G Ethernet, использовать их под “пользовательский трафик”, например под FCoE или NFS нельзя. По нему ходит <strong>только</strong> ha-cluster interconnect!     <br />Даже когда вы используете 3200 в варианте “два контроллера в одном chassis”, и при этом вместо внешнего интерконнекта “через провода”, используется, как в 3100, соединение через backplane, все равно эти порты использовать для “внешнего” трафика <strong>нельзя</strong>.     <br />Однако, конечно, можно добавить в слот расширения карту с портами 10G, и использовать порты 10G с добавленной карты как угодно.</p>
<p>Два порта 4Gb FC, традиционно универсальные: target/initiator. Количество встроенных портов FC уменьшилось, поскольку для дисковых полок теперь предполагается использовать встроенные порты SAS. Также как и раньше, при необходимости увеличения любых портов, в том числе FC, можно установить соответствующую карту расширения.</p>
<p>Два порта Gigabit Ethernet. Тут без изменений.</p>
<p>Два порта – сеть ACP Alternate Control Path для управления полками SAS, о которой я писал недавно, и под ним – порт нового интегрированного контроллера удаленного управления – Service Processor. Это новое поколение специального микроконтроллера управления, несмотря на интегрированность в контроллер, полностью автономного от Data ONTAP, и работающего под управлением своего собственного ядра микроконтроллерной OS, что позволяет ему работать абсолютно автономно от работы собственно контроллера, иметь свой собственный IP, и быть подключенным в отдельную сеть управления компании. С этого контроллера можно иметь доступ как к telnet/ssh, так и к консоли, и выполнять любое сервисное обслуживание системы, включая перезагрузку, cluster takeover и вход в pre-boot и maintenance menu до загрузки Data ONTAP.</p>
<p>Рядом классический “cisco-вский” порт serial console в формате RJ-45, а над ним – порт USB, который в настоящее время разведен на контроллере физически, но никак не используется программно. Но можно заряжать от него мобильник или плеер. :) В будущем планируется использовать его для каких-то загадочных recoverability procedures, но в текущем и ближайшем выпуске Data ONTAP он не задействан никак.</p>
<p>Ну и для особолюбопытных – внешний вид контроллера внутри:</p>
<p><a href="/pics//fas3200-inside3-thumb1.jpg"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="FAS3200-inside3_thumb[1]" border="0" alt="FAS3200-inside3_thumb[1]" src="/pics//fas3200-inside3-thumb1-thumb.jpg" width="638" height="480" /></a></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../tag/fas3200.html" rel="tag">fas3200</a>, <a href="../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;" rel="category tag">review</a>,  <a href="../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../750/trackback.html#comments" title="Комментарий к записи FAS3200 &ndash; пополнение в семействе midrange. Часть 2">Комментарии (5)</a>									 </div>
			</div>
	
						
			<div class="post" id="post-743">
				<h2 class="posttitle"><a href="../../743/trackback.html" rel="bookmark" title="Permanent Link to FAS3200 &ndash; пополнение в семействе midrange. Часть 1">FAS3200 &ndash; пополнение в семействе midrange. Часть 1</a></h2>
				<div class="postmetadata">10 Ноябрь 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Ну что-ж, как говорится, “теперь об этом можно рассказать”. Объявлены новые модели в семействе midrange, к трем имеющимся, а именно FAS3140, FAS3160 и FAS3170 добавились еще три системы, построенные на обновленной аппаратной платформе:&#160; <br />FAS3210, FAS3240 и FAS3270.</p>
<p><a href="/pics//fas3200.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="FAS3200" border="0" alt="FAS3200" src="/pics//fas3200-thumb.png" width="640" height="163" /></a></p>
<p>Несмотря на множество нововведений, это нельзя назвать “революцией”, это вполне эволюционный шаг развития. Более того, новые системы не вытесняют “старые” 3100, а дополняют модельный ряд, так что текущее предложение в midrange расширяется почти вдвое (а еще вдвое расширяется и линейка highend-систем, о которой мы поговорим позже), и на сегодня это самый большой набор моделей, производимых и продаваемых NetApp за всю его историю.    <br />Официально, старые линейки контроллеров серии FAS3100 остаются “в строю” еще минимум на год, и сроки по EOL (End-of-Life, завершению активной “жизни” и продаж системы) по ним не объявлены.</p>
<p>??так, давайте посмотрим, что же нового появилось с этими моделями у NetApp.    <br />Первое, что бросается в глаза – создан новый, более компактный “конструктив” корпуса. На смену зачастую <em>неоднозначно</em> воспринятой пользователями 6U “микроволновке”-моноблоку на два контроллера в одном корпусе, сменившей несколько лет назад относительно компактный 3U “одноконтроллерный” блок FAS3000, пришел очень компактный 3U блок, в который можно установить либо два контроллера модели FAS3210, либо контроллер ?? модуль расширения портов IOXM, для 3240/70 (подробности ниже).</p>
<p>Несмотря на все свое инженерное совершенство, будем смотреть правде в лицо, 6U на контроллер в окружении 1U/2U серверов, это чересчур щедро.    <br /><em>“Черт возьми, это всего-лишь просто контроллер, даже без дисков, а уже минус 6U в стойке!”      <br /></em>Особенно это ударяло по владельцам небольших систем “начального” уровня, например с парой дисковых полок DS14, когда модуль контроллера занимал в стойке столько же места, как и все диски системы вместе взятые, фактически удваивая занимаемый footprint системы.     <br />А если требовалось построить “разнесенную” систему, то есть с контроллерами в разных стойках, то приходилось покупать <strong>два</strong> chassis по 6U каждый, каждый с одним контроллером и заглушкой на месте второго. ??того 12U только на котроллеры. Давайте скажем откровенно, это много. Особенно это много при размещении на арендованной площади в датацентре, где исчисление стоимости аренды идет от “юнита”.</p>
<p>Таким образом – первая внешняя отличительная особенность это компактный конструктив.    <br />Что же в нем?</p>
<p>?? тут я бы хотел обратить ваше внимание на некоторые изменения в схеме позиционирования систем midrange. Напомню, что до сих пор все выпускаемые продукты линейки FAS делились на три сегмента. Старшие, так называемые “high-end”, средние, так называемымй “midrange”, и, наконец, “нижние”, которые, так как, в первую очередь по цене и функциональной насыщенности, их нельзя было ставить в один ряд с классическим “entry-level” других вендоров, дешевыми, но довольно примитивными, они назывались у NetApp “low-enterprise”.</p>
<p>Богатая “функциональная наполненность”, определяемая используемой OS Data ONTAP, такой же точно, как и у более “старших” систем, диктовала сравнительно высокую цену, даже несмотря на сравнительно невысокую производительность. В этом сегменте у NetApp было выпущено, не считая не вполне удавшейся затеи со StorVault, две модели – FAS2020 и FAS2050.    <br />Позже к ним добавилась модель FAS2040, выпущенная в конструктиве 2020, но превосходящая по произвоительности не только 2020, но и 2050, и приближавшаяся уже по этим показателям к классическому “midrange” 3040/3140 (вдвое произволительнее 2050 и всего на 20% менее производительнее 3140 на нагрузке OLTP).</p>
<p>Таким образом, NetApp явственно взял курс не на “упрощение” и “обрезку” возможностей, а на “подтягивание” low-enterprise к уровню и возможностям midrange. Поэтому вполне в русле такой стратегии выглядит появление в линейке модели FAS3210, которая, судя по номеру, стоит “ниже” 3240, но при этом функционально (и по номеру версии) является midrange, и займет место в линейке между 2040 и 3240.    <br />Плохая новость для владельцев 2050: надежды на выпуск нового 64-bit контроллера в конструктиве 2050, позволившего бы использовать ONTAP 8, и “малой кровью” модернизировать текущую систему, до современного уровня состояния платформ не оправдались. Путь модернизации это полная смена 2050 на 2040 (напомню, что 2040 примерно вдвое производительнее чем 2050) или же на 3210. Что, конечно же, дорого, болезненно, и “экспедиция”. Обидно. 2050 продавалась неплохо, и выглядела очень перспективно, но что-то “не пошло”. Поэтому не в последню очередь FAS3210 нацелена на рынок, ранее покупавший FAS2050, и такая “двойственность” положения в продуктовой линейке послужила причиной ряда особенностей конфигурации и конструкции, о которых ниже.</p>
<p>Однако, как же на сегодня выглядит продуктовая линейка NetApp?</p>
<p><a href="/pics//image65.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/pics//image-thumb30.png" width="361" height="484" /></a></p>
<p>Как вы видите из этого рисунка, продуктовая линейка расширилась сверху, за счет выпуска новых, более производительных систем в серии 6200, а снизу midrange “опустился” в low-enterprise моделью 3210. (на рисунке есть неточность, кажется, что 3270 “слабее” 3170, хотя это не так (примерно 20% прирост производительности на OLTP), также как и 6210 не слабее 6040 (а <strong>сильно</strong> производительнее), так что данный рисункок следует рассматривать скорее как схему позиционирования продуктов (в первую очередь по цене), а не как иллюстрацию распределения систем по “мощности”)     <br />Напомню еще раз, что модели 3100 остаются на своих местах, и было бы логично увидеть на них вскоре “специальные цены”.</p>
<p>??так, что же там “сзади”?    <br />(продолжение следует)</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../tag/fas3200.html" rel="tag">fas3200</a>, <a href="../../tag/netapp/index.html" rel="tag">netapp</a><br />					Раздел: <a href="../../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;" rel="category tag">review</a>,  <a href="../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../743/trackback.html#respond" title="Комментарий к записи FAS3200 &ndash; пополнение в семействе midrange. Часть 1">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-763">
				<h2 class="posttitle"><a href="../../763/trackback.html" rel="bookmark" title="Permanent Link to Завтра&ndash;день премьеры.">Завтра&ndash;день премьеры.</a></h2>
				<div class="postmetadata">9 Ноябрь 2010, 15:00 <!-- от  --></div>
				<div class="postentry">
					<p>9 ноября по американскому времени (а в Москве это будет уже вечер 10) - “день премьеры”, объявляются новинки NetApp этого сезона.</p>
<p>Вот послезавтра, утром 11 ноября и приходите, начну большой рассказ о том, что у NetApp теперь имеется.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../tag/news/index.html" rel="tag">новости</a><br />					Раздел: <a href="../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;" rel="category tag">новости</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../763/trackback.html#respond" title="Комментарий к записи Завтра&ndash;день премьеры.">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-766">
				<h2 class="posttitle"><a href="../../766/trackback.html" rel="bookmark" title="Permanent Link to Powershell Toolkit for Data ONTAP">Powershell Toolkit for Data ONTAP</a></h2>
				<div class="postmetadata">8 Ноябрь 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>Занимающимся администрированием систем NetApp в серверной инфраструктуре Windows, и владеющим навыками использования продукта Microsoft Powershell, может быть интересен постепенно развивающийся в комьюнити NetApp проект Powershell Toolkit for Data ONTAP.</p>
<p><a href="http://communities.netapp.com/community/interfaces_and_tools/data_ontap_powershell_toolkit/data_ontap_powershell_toolkit_downloads?view=documents">Скачать</a> с сайта communities (для появления возможности download вы должны иметь логин на Communities.NetApp)    <br /><a href="http://communities.netapp.com/community/interfaces_and_tools/data_ontap_powershell_toolkit/samples?view=documents">Примеры скриптов</a>    <br /><a href="http://communities.netapp.com/community/interfaces_and_tools/data_ontap_powershell_toolkit?view=documents">Прочая документация</a>     <br />Скачать v 1.2 <strong>не</strong> с сайта NetApp (без логина):     <br /><a href="http://www.divshare.com/download/12954906-87d">http://www.divshare.com/download/12954906-87d</a></p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../tag/ontap.html" rel="tag">ontap</a>, <a href="../../tag/powershell.html" rel="tag">powershell</a>, <a href="../../tag/toolkit.html" rel="tag">toolkit</a><br />					Раздел: <a href="../../category/utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;" rel="category tag">utilities</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../766/trackback.html#respond" title="Комментарий к записи Powershell Toolkit for Data ONTAP">Комментарий</a>									 </div>
			</div>
	
						
			<div class="post" id="post-757">
				<h2 class="posttitle"><a href="../../757/trackback.html" rel="bookmark" title="Permanent Link to Hardware-Assisted Takeover">Hardware-Assisted Takeover</a></h2>
				<div class="postmetadata">4 Ноябрь 2010, 8:00 <!-- от  --></div>
				<div class="postentry">
					<p>С выходом в активную жизнь Data ONTAP 8 с ее cluster-mode в этом блоге я начинаю менять используемую терминологию. Теперь, во избежание путаницы, я буду называть “cluster-classic”, который был в ONTAP 7 – как “HA-кластер” (High Availability), а под кластером “просто” будет подразумеваться multinode-cluster или ONTAP 8 cluster-mode.</p>
<p>Как вы знаете, HA-кластерная функцинальность систем NetApp позволяет прозрачно для приложений и задач, в случае отказа одного из контроллеров HA-кластерной пары, перенести все его ресурсы, то есть IP-адреса, сетевые имена, WWN-ы FC, а следовательно доступ к сетевым шарам, LUN-ам, и так далее, с вышедшего из строя контроллера на действующий. Таким образом доступ ко всем ресурсам полностью сохраняется и не требует перенастройки клиентов или “фабрики” для продолжения доступа.</p>
<p>Однако такая схема переключения может занимать, подчас, довольно значительное время, исчисляемое десятками секунда на совершение этого HA-cluster takeover. Это связано с тем, что “выживший” контроллер должен понять, что его HA-кластерный партнер не просто не отвечает вовремя, а дейтвительно перестал работать.</p>
<p>Значительно ускорить этот процесс можно с помощью операции Hardware-assisted Takeover, которая использует для определеня состояния контроллера возможности RLM – автономного аппаратного микроконтроллера, который по основной своей задаче предназначен для удаленного “out-of-band” администрирования, и работает как независимое аппаратное устройство. RLM был опциональным устройством в системах серии 3000/6000, и встроен в контроллер для серии 3100 и новее. Будучи “внешним” для системы watchdog-ом, RLM позволяет значительно сократить время кластерного takeover, быстро определяя и сообщая состояние своего контроллера. RLM даже имеет автономное (хотя и не слишком длительное по времени автономной работы) питание, и остается включенным в сети даже, например, при полной потере электропитания контроллером, позволяя определять даже такое событие.</p>
<p>Для того, чтобы включить Hardware-assisted Takeover, при наличии на контроллере OS Data ONTAP 7.3 и новее, дайте в консоли команду</p>
<p><code>fas&gt; options cf.hw_assist.enable on </code></p>
<p>Для того, чтобы изменить IP-адрес для получения партнером уведомлений об отказе, используйте команду (по умочанию это адрес порта e0a):</p>
<p><code>fas &gt; options cf.hw_assist.partner.address &lt;IP or hostname&gt; </code></p>
<p>Подробнее смотрите во встроенной документации на систему Data ONTAP вашей версии, по словам ???hardware-assisted takeover’.</p>
				</div>
		
				<div class="postmetadata">
					Метки: <a href="../../tag/cluster/index.html" rel="tag">cluster</a>, <a href="../../tag/netapp/index.html" rel="tag">netapp</a>, <a href="../../tag/rlm.html" rel="tag">rlm</a>, <a href="../../tag/takeover.html" rel="tag">takeover</a><br />					Раздел: <a href="../../category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;" rel="category tag">howto</a>,  <a href="../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;" rel="category tag">techtalk</a>&nbsp;&nbsp;|&nbsp;
					<a href="../../757/trackback.html#respond" title="Комментарий к записи Hardware-Assisted Takeover">Комментарий</a>									 </div>
			</div>
	
		
		<div class="navigation">
			<div class="alignleft"><a href="11/page/2.html">&laquo; Previous Entries</a></div>
			<div class="alignright"></div>
		</div>
		
	
	</div>
	<div id="sidebar">
		<ul>
			
			
			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Автор</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			<li class="pagenav"><h2>Страницы</h2><ul><li class="page_item page-item-153"><a href="../../../about/trackback.html" title="about">about</a></li>
<li class="page_item page-item-215"><a href="../../../distributory-v-rossii/trackback.html" title="Дистрибуторы в России">Дистрибуторы в России</a></li>
<li class="page_item page-item-1327"><a href="../../../disti-ua/trackback.html" title="Дистрибуторы в Украине">Дистрибуторы в Украине</a></li>
</ul></li>
			<li><h2>Рубрики</h2>
				<ul>
					<li class="cat-item cat-item-89"><a href="../../category/commands/index.html" title="Просмотреть все записи в рубрике &laquo;commands&raquo;">commands</a>
</li>
	<li class="cat-item cat-item-37"><a href="../../category/howto/index.html" title="Просмотреть все записи в рубрике &laquo;howto&raquo;">howto</a>
</li>
	<li class="cat-item cat-item-52"><a href="../../category/justread/index.html" title="Просмотреть все записи в рубрике &laquo;justread&raquo;">justread</a>
</li>
	<li class="cat-item cat-item-51"><a href="../../category/review/index.html" title="Просмотреть все записи в рубрике &laquo;review&raquo;">review</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../category/techtalk/index.html" title="Просмотреть все записи в рубрике &laquo;techtalk&raquo;">techtalk</a>
</li>
	<li class="cat-item cat-item-71"><a href="../../category/tricks/index.html" title="Просмотреть все записи в рубрике &laquo;tricks&raquo;">tricks</a>
</li>
	<li class="cat-item cat-item-95"><a href="../../category/utilities/index.html" title="Просмотреть все записи в рубрике &laquo;utilities&raquo;">utilities</a>
</li>
	<li class="cat-item cat-item-44"><a href="../../category/whoisho/index.html" title="Просмотреть все записи в рубрике &laquo;whoisho&raquo;">whoisho</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../category/news/index.html" title="Просмотреть все записи в рубрике &laquo;новости&raquo;">новости</a>
</li>
	<li class="cat-item cat-item-387"><a href="../../category/opros.html" title="Просмотреть все записи в рубрике &laquo;опрос&raquo;">опрос</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../category/translations/index.html" title="Просмотреть все записи в рубрике &laquo;переводы&raquo;">переводы</a>
</li>
	<li class="cat-item cat-item-40"><a href="../../category/citaty/index.html" title="Просмотреть все записи в рубрике &laquo;цитаты&raquo;">цитаты</a>
</li>
				</ul>
			</li>

			<li><h2>Архивы</h2>
				<ul>
					<li><a href='../2018/01.html' title='Январь 2018'>Январь 2018</a></li>
	<li><a href='../2015/10.html' title='Октябрь 2015'>Октябрь 2015</a></li>
	<li><a href='../2015/04.html' title='Апрель 2015'>Апрель 2015</a></li>
	<li><a href='../2015/03.html' title='Март 2015'>Март 2015</a></li>
	<li><a href='../2015/01.html' title='Январь 2015'>Январь 2015</a></li>
	<li><a href='../2014/12.html' title='Декабрь 2014'>Декабрь 2014</a></li>
	<li><a href='../2014/11.html' title='Ноябрь 2014'>Ноябрь 2014</a></li>
	<li><a href='../2014/10.html' title='Октябрь 2014'>Октябрь 2014</a></li>
	<li><a href='../2014/09.html' title='Сентябрь 2014'>Сентябрь 2014</a></li>
	<li><a href='../2014/08.html' title='Август 2014'>Август 2014</a></li>
	<li><a href='../2014/07.html' title='Июль 2014'>Июль 2014</a></li>
	<li><a href='../2014/06.html' title='Июнь 2014'>Июнь 2014</a></li>
	<li><a href='../2014/05.html' title='Май 2014'>Май 2014</a></li>
	<li><a href='../2014/04.html' title='Апрель 2014'>Апрель 2014</a></li>
	<li><a href='../2014/03.html' title='Март 2014'>Март 2014</a></li>
	<li><a href='../2014/02.html' title='Февраль 2014'>Февраль 2014</a></li>
	<li><a href='../2014/01.html' title='Январь 2014'>Январь 2014</a></li>
	<li><a href='../2013/12.html' title='Декабрь 2013'>Декабрь 2013</a></li>
	<li><a href='../2013/11.html' title='Ноябрь 2013'>Ноябрь 2013</a></li>
	<li><a href='../2013/10.html' title='Октябрь 2013'>Октябрь 2013</a></li>
	<li><a href='../2013/09.html' title='Сентябрь 2013'>Сентябрь 2013</a></li>
	<li><a href='../2013/08.html' title='Август 2013'>Август 2013</a></li>
	<li><a href='../2013/07.html' title='Июль 2013'>Июль 2013</a></li>
	<li><a href='../2013/06.html' title='Июнь 2013'>Июнь 2013</a></li>
	<li><a href='../2013/05.html' title='Май 2013'>Май 2013</a></li>
	<li><a href='../2013/04.html' title='Апрель 2013'>Апрель 2013</a></li>
	<li><a href='../2013/03.html' title='Март 2013'>Март 2013</a></li>
	<li><a href='../2013/02.html' title='Февраль 2013'>Февраль 2013</a></li>
	<li><a href='../2013/01.html' title='Январь 2013'>Январь 2013</a></li>
	<li><a href='../2012/12.html' title='Декабрь 2012'>Декабрь 2012</a></li>
	<li><a href='../2012/11.html' title='Ноябрь 2012'>Ноябрь 2012</a></li>
	<li><a href='../2012/10.html' title='Октябрь 2012'>Октябрь 2012</a></li>
	<li><a href='../2012/09.html' title='Сентябрь 2012'>Сентябрь 2012</a></li>
	<li><a href='../2012/08.html' title='Август 2012'>Август 2012</a></li>
	<li><a href='../2012/07.html' title='Июль 2012'>Июль 2012</a></li>
	<li><a href='../2012/06.html' title='Июнь 2012'>Июнь 2012</a></li>
	<li><a href='../2012/05.html' title='Май 2012'>Май 2012</a></li>
	<li><a href='../2012/04.html' title='Апрель 2012'>Апрель 2012</a></li>
	<li><a href='../2012/03.html' title='Март 2012'>Март 2012</a></li>
	<li><a href='../2012/02.html' title='Февраль 2012'>Февраль 2012</a></li>
	<li><a href='../2012/01.html' title='Январь 2012'>Январь 2012</a></li>
	<li><a href='../2011/12.html' title='Декабрь 2011'>Декабрь 2011</a></li>
	<li><a href='../2011/11.html' title='Ноябрь 2011'>Ноябрь 2011</a></li>
	<li><a href='../2011/10/index.html' title='Октябрь 2011'>Октябрь 2011</a></li>
	<li><a href='../2011/09/index.html' title='Сентябрь 2011'>Сентябрь 2011</a></li>
	<li><a href='../2011/08.html' title='Август 2011'>Август 2011</a></li>
	<li><a href='../2011/07/index.html' title='Июль 2011'>Июль 2011</a></li>
	<li><a href='../2011/06/index.html' title='Июнь 2011'>Июнь 2011</a></li>
	<li><a href='../2011/05/index.html' title='Май 2011'>Май 2011</a></li>
	<li><a href='../2011/04/index.html' title='Апрель 2011'>Апрель 2011</a></li>
	<li><a href='../2011/03/index.html' title='Март 2011'>Март 2011</a></li>
	<li><a href='../2011/02.html' title='Февраль 2011'>Февраль 2011</a></li>
	<li><a href='../2011/01.html' title='Январь 2011'>Январь 2011</a></li>
	<li><a href='12.html' title='Декабрь 2010'>Декабрь 2010</a></li>
	<li><a href='11/index.html' title='Ноябрь 2010'>Ноябрь 2010</a></li>
	<li><a href='10/index.html' title='Октябрь 2010'>Октябрь 2010</a></li>
	<li><a href='09/index.html' title='Сентябрь 2010'>Сентябрь 2010</a></li>
	<li><a href='08.html' title='Август 2010'>Август 2010</a></li>
	<li><a href='07/index.html' title='Июль 2010'>Июль 2010</a></li>
	<li><a href='06.html' title='Июнь 2010'>Июнь 2010</a></li>
	<li><a href='05.html' title='Май 2010'>Май 2010</a></li>
	<li><a href='04/index.html' title='Апрель 2010'>Апрель 2010</a></li>
	<li><a href='03/index.html' title='Март 2010'>Март 2010</a></li>
	<li><a href='02.html' title='Февраль 2010'>Февраль 2010</a></li>
	<li><a href='01.html' title='Январь 2010'>Январь 2010</a></li>
	<li><a href='../2009/12/index.html' title='Декабрь 2009'>Декабрь 2009</a></li>
	<li><a href='../2009/11/index.html' title='Ноябрь 2009'>Ноябрь 2009</a></li>
	<li><a href='../2009/10.html' title='Октябрь 2009'>Октябрь 2009</a></li>
	<li><a href='../2009/09.html' title='Сентябрь 2009'>Сентябрь 2009</a></li>
	<li><a href='../2009/08/index.html' title='Август 2009'>Август 2009</a></li>
	<li><a href='../2009/07/index.html' title='Июль 2009'>Июль 2009</a></li>
	<li><a href='../2009/06.html' title='Июнь 2009'>Июнь 2009</a></li>
	<li><a href='../2009/05.html' title='Май 2009'>Май 2009</a></li>
	<li><a href='../2009/04.html' title='Апрель 2009'>Апрель 2009</a></li>
	<li><a href='../2009/03.html' title='Март 2009'>Март 2009</a></li>
	<li><a href='../2009/02.html' title='Февраль 2009'>Февраль 2009</a></li>
	<li><a href='../2009/01.html' title='Январь 2009'>Январь 2009</a></li>
	<li><a href='../2008/12.html' title='Декабрь 2008'>Декабрь 2008</a></li>
	<li><a href='../2008/11.html' title='Ноябрь 2008'>Ноябрь 2008</a></li>
	<li><a href='../2008/10.html' title='Октябрь 2008'>Октябрь 2008</a></li>
	<li><a href='../2008/09.html' title='Сентябрь 2008'>Сентябрь 2008</a></li>
	<li><a href='../2008/08.html' title='Август 2008'>Август 2008</a></li>
	<li><a href='../2008/03.html' title='Март 2008'>Март 2008</a></li>
	<li><a href='../2008/02.html' title='Февраль 2008'>Февраль 2008</a></li>
	<li><a href='../2007/12.html' title='Декабрь 2007'>Декабрь 2007</a></li>
	<li><a href='../2007/11.html' title='Ноябрь 2007'>Ноябрь 2007</a></li>
	<li><a href='../2007/10.html' title='Октябрь 2007'>Октябрь 2007</a></li>
	<li><a href='../2007/09.html' title='Сентябрь 2007'>Сентябрь 2007</a></li>
	<li><a href='../2007/08.html' title='Август 2007'>Август 2007</a></li>
	<li><a href='../2007/07/index.html' title='Июль 2007'>Июль 2007</a></li>
	<li><a href='../2007/06.html' title='Июнь 2007'>Июнь 2007</a></li>
	<li><a href='../2007/05.html' title='Май 2007'>Май 2007</a></li>
				</ul>
			</li>

			
					</ul>
	</div>

</div> <!-- wrapper -->
<div id="footer">
	<a href="../../../feed">Entries (RSS)</a> and <a href="../../../comments/feed">Comments (RSS)</a>. Valid <a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a> and <a href="http://jigsaw.w3.org/css-validator/check/referer"><abbr title="Cascading Style Sheets">CSS</abbr></a>.<br />
	Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a> and <a href="http://srinig.com/wordpress/themes/fluid-blue/">Fluid Blue theme</a>.<br />
	<!-- 14 queries. 0.113 seconds. -->
	</div>
</div> <!-- page -->
</body>
</html>
